{{!-- 
================================================================================
SORIVA TEMPLATES - COMMERCIAL INVOICE (EXPORT)
================================================================================
@file invoice-commercial.hbs
@version 2.0.0
@author Soriva AI (Risenex Dynamics)
@copyright 2025 Risenex Dynamics. All rights reserved.

SYNCED WITH: invoice-fields.config.ts
INTERFACE: CommercialInvoiceData extends BaseInvoiceData

FEATURES:
- Export/Import Ready
- Shipping Details
- Incoterms Support
- Port Information
- Certificate References
- Customs Declaration
- Multi-currency
================================================================================
--}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commercial Invoice #{{invoiceNumber}}</title>
    <style>
        :root {
            --primary: {{#if brandColor}}{{brandColor}}{{else}}#0F766E{{/if}};
            --primary-light: #14B8A6;
            --primary-dark: #115E59;
            --success: #059669;
            --warning: #D97706;
            --danger: #DC2626;
            --text: #111827;
            --text-secondary: #4B5563;
            --text-muted: #6B7280;
            --border: #E5E7EB;
            --bg-light: #F9FAFB;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Arial, sans-serif; font-size: 9pt; color: var(--text); line-height: 1.4; }
        .hindi { font-family: 'Noto Sans Devanagari', 'Mangal', sans-serif; }
        @page { size: A4; margin: 8mm; }
        .invoice { width: 210mm; min-height: 297mm; margin: 0 auto; padding: 6mm; background: #fff; }
        
        /* Header */
        .header { display: flex; justify-content: space-between; align-items: flex-start; border: 2px solid var(--primary); padding: 10px; margin-bottom: 8px; }
        .logo { max-height: 50px; max-width: 130px; object-fit: contain; }
        .company-name { font-size: 14pt; font-weight: 700; color: var(--primary); }
        .company-details { font-size: 8pt; color: var(--text-secondary); line-height: 1.4; margin-top: 3px; }
        .title-box { text-align: center; }
        .invoice-title { font-size: 18pt; font-weight: 700; color: var(--primary); text-transform: uppercase; letter-spacing: 2px; border: 2px solid var(--primary); padding: 8px 20px; }
        .invoice-subtitle { font-size: 9pt; color: var(--text-muted); margin-top: 5px; }
        
        /* Reference Grid */
        .ref-grid { display: grid; grid-template-columns: repeat(4, 1fr); border: 1px solid var(--border); margin-bottom: 8px; }
        .ref-item { padding: 6px 8px; border-right: 1px solid var(--border); border-bottom: 1px solid var(--border); }
        .ref-item:nth-child(4n) { border-right: none; }
        .ref-item:nth-last-child(-n+4) { border-bottom: none; }
        .ref-label { font-size: 7pt; color: var(--text-muted); text-transform: uppercase; }
        .ref-value { font-size: 9pt; font-weight: 600; color: var(--text); }
        
        /* Parties Grid */
        .parties-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px; }
        .party-box { border: 1px solid var(--border); padding: 8px; }
        .party-header { background: var(--primary); color: #fff; padding: 4px 8px; margin: -8px -8px 8px -8px; font-size: 8pt; font-weight: 600; text-transform: uppercase; }
        .party-name { font-size: 10pt; font-weight: 700; color: var(--text); }
        .party-address { font-size: 8pt; color: var(--text-secondary); line-height: 1.5; margin-top: 3px; }
        .party-info { font-size: 8pt; color: var(--text-secondary); margin-top: 5px; padding-top: 5px; border-top: 1px dashed var(--border); }
        
        /* Shipping Grid */
        .shipping-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 8px; }
        .shipping-box { border: 1px solid var(--border); padding: 8px; background: #F0FDFA; }
        .shipping-header { font-size: 8pt; font-weight: 700; color: var(--primary); margin-bottom: 5px; text-transform: uppercase; border-bottom: 1px solid var(--primary-light); padding-bottom: 3px; }
        .shipping-row { display: flex; justify-content: space-between; font-size: 8pt; padding: 2px 0; }
        .shipping-label { color: var(--text-muted); }
        .shipping-value { font-weight: 600; color: var(--text); text-align: right; }
        
        /* Export Details */
        .export-section { background: #ECFDF5; border: 1px solid #A7F3D0; padding: 10px; margin-bottom: 8px; }
        .export-title { font-size: 9pt; font-weight: 700; color: var(--success); margin-bottom: 8px; text-transform: uppercase; }
        .export-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; }
        .export-item { }
        .export-label { font-size: 7pt; color: var(--text-muted); text-transform: uppercase; }
        .export-value { font-size: 9pt; font-weight: 600; color: var(--text); }
        .incoterm-badge { display: inline-block; background: var(--primary); color: #fff; padding: 3px 10px; border-radius: 4px; font-size: 10pt; font-weight: 700; }
        
        /* Items Table */
        .items-table { width: 100%; border-collapse: collapse; margin-bottom: 8px; font-size: 8pt; }
        .items-table th { background: var(--primary); color: #fff; padding: 6px 4px; text-align: center; font-weight: 600; font-size: 8pt; border: 1px solid var(--primary); }
        .items-table td { padding: 5px 4px; border: 1px solid var(--border); vertical-align: top; }
        .items-table tbody tr:nth-child(even) { background: var(--bg-light); }
        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .item-desc { font-weight: 500; }
        .item-sub { font-size: 7pt; color: var(--text-muted); }
        .amount { font-weight: 600; }
        
        /* Totals & Summary */
        .summary-section { display: flex; gap: 10px; margin-bottom: 8px; }
        .weight-box { flex: 1; border: 1px solid var(--border); padding: 8px; }
        .weight-title { font-size: 8pt; font-weight: 700; color: var(--primary); margin-bottom: 5px; }
        .weight-row { display: flex; justify-content: space-between; font-size: 8pt; padding: 3px 0; }
        .totals-box { width: 250px; border: 1px solid var(--border); }
        .total-row { display: flex; justify-content: space-between; padding: 5px 8px; font-size: 9pt; border-bottom: 1px solid var(--border); }
        .total-row:last-child { border-bottom: none; }
        .total-row.grand { background: var(--primary); color: #fff; font-size: 11pt; font-weight: 700; }
        .total-label { color: var(--text-secondary); }
        .total-row.grand .total-label { color: rgba(255,255,255,0.9); }
        
        /* Amount Words */
        .amount-words { background: var(--bg-light); border: 1px solid var(--border); padding: 8px 10px; margin-bottom: 8px; }
        .amount-words-label { font-size: 8pt; color: var(--text-muted); }
        .amount-words-value { font-size: 10pt; font-weight: 600; color: var(--text); }
        
        /* Certificates */
        .cert-section { background: #FEF3C7; border: 1px solid #FCD34D; padding: 8px 10px; margin-bottom: 8px; }
        .cert-title { font-size: 9pt; font-weight: 700; color: #92400E; margin-bottom: 5px; }
        .cert-grid { display: flex; flex-wrap: wrap; gap: 10px; }
        .cert-item { display: flex; align-items: center; gap: 5px; font-size: 8pt; }
        .cert-check { color: var(--success); font-weight: bold; }
        .cert-cross { color: var(--danger); }
        
        /* Declaration */
        .declaration { border: 1px solid var(--border); padding: 10px; margin-bottom: 8px; }
        .declaration-title { font-size: 9pt; font-weight: 700; color: var(--text); margin-bottom: 5px; }
        .declaration-text { font-size: 8pt; color: var(--text-secondary); line-height: 1.5; }
        
        /* Bank Details */
        .bank-section { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 8px; }
        .bank-box { border: 1px solid var(--border); padding: 8px; }
        .bank-title { font-size: 9pt; font-weight: 700; color: var(--primary); margin-bottom: 5px; border-bottom: 1px solid var(--border); padding-bottom: 3px; }
        .bank-info { font-size: 8pt; line-height: 1.6; }
        .bank-info strong { color: var(--text); }
        
        /* Signature */
        .signature-section { display: flex; justify-content: space-between; padding-top: 15px; border-top: 2px solid var(--border); }
        .sig-block { text-align: center; width: 150px; }
        .sig-line { border-bottom: 1px solid var(--text); height: 40px; margin-bottom: 3px; }
        .sig-name { font-size: 9pt; font-weight: 600; }
        .sig-role { font-size: 8pt; color: var(--text-muted); }
        .for-company { font-size: 8pt; color: var(--text-muted); margin-bottom: 3px; }
        
        /* Footer */
        .footer { margin-top: 8px; text-align: center; font-size: 7pt; color: var(--text-muted); padding-top: 8px; border-top: 1px solid var(--border); }
        
        /* Print */
        @media print {
            body { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            .invoice { width: 100%; padding: 0; }
        }
    </style>
</head>
<body>
    <div class="invoice">
        <!-- HEADER -->
        <div class="header">
            <div class="company-info">
                {{#if seller.logo}}<img src="{{seller.logo}}" alt="{{seller.name}}" class="logo"><br>{{/if}}
                <div class="company-name">{{seller.name}}</div>
                <div class="company-details">
                    {{seller.address.line1}}{{#if seller.address.line2}}, {{seller.address.line2}}{{/if}}<br>
                    {{seller.address.city}}, {{seller.address.state}} - {{seller.address.pincode}}, {{seller.address.country}}<br>
                    {{#if seller.contact.phone}}Tel: {{seller.contact.phone}}{{/if}}
                    {{#if seller.contact.email}} | {{seller.contact.email}}{{/if}}
                    {{#if seller.contact.website}}<br>{{seller.contact.website}}{{/if}}
                </div>
            </div>
            <div class="title-box">
                <div class="invoice-title">Commercial Invoice</div>
                <div class="invoice-subtitle">For Customs & Export Purposes</div>
            </div>
        </div>

        <!-- REFERENCE GRID -->
        <div class="ref-grid">
            <div class="ref-item">
                <div class="ref-label">Invoice No.</div>
                <div class="ref-value">{{invoiceNumber}}</div>
            </div>
            <div class="ref-item">
                <div class="ref-label">Invoice Date</div>
                <div class="ref-value">{{invoiceDate}}</div>
            </div>
            <div class="ref-item">
                <div class="ref-label">Exporter's Ref.</div>
                <div class="ref-value">{{#if exportDetails.exporterRef}}{{exportDetails.exporterRef}}{{else}}‚Äî{{/if}}</div>
            </div>
            <div class="ref-item">
                <div class="ref-label">Buyer's Ref.</div>
                <div class="ref-value">{{#if exportDetails.buyerRef}}{{exportDetails.buyerRef}}{{else}}‚Äî{{/if}}</div>
            </div>
            <div class="ref-item">
                <div class="ref-label">Contract No.</div>
                <div class="ref-value">{{#if exportDetails.contractNumber}}{{exportDetails.contractNumber}}{{else}}‚Äî{{/if}}</div>
            </div>
            <div class="ref-item">
                <div class="ref-label">L/C No.</div>
                <div class="ref-value">{{#if exportDetails.lcNumber}}{{exportDetails.lcNumber}}{{else}}‚Äî{{/if}}</div>
            </div>
            <div class="ref-item">
                <div class="ref-label">L/C Date</div>
                <div class="ref-value">{{#if exportDetails.lcDate}}{{exportDetails.lcDate}}{{else}}‚Äî{{/if}}</div>
            </div>
            <div class="ref-item">
                <div class="ref-label">Currency</div>
                <div class="ref-value">{{currency}}</div>
            </div>
        </div>

        <!-- PARTIES -->
        <div class="parties-grid">
            <div class="party-box">
                <div class="party-header">Exporter / Shipper</div>
                <div class="party-name">{{seller.name}}</div>
                <div class="party-address">
                    {{seller.address.line1}}{{#if seller.address.line2}}, {{seller.address.line2}}{{/if}}<br>
                    {{seller.address.city}}, {{seller.address.state}} - {{seller.address.pincode}}<br>
                    {{seller.address.country}}
                </div>
                <div class="party-info">
                    {{#if seller.taxRegistration.gstin}}<strong>GSTIN:</strong> {{seller.taxRegistration.gstin}}<br>{{/if}}
                    {{#if seller.taxRegistration.pan}}<strong>PAN:</strong> {{seller.taxRegistration.pan}}<br>{{/if}}
                    {{#if seller.taxRegistration.iec}}<strong>IEC:</strong> {{seller.taxRegistration.iec}}{{/if}}
                </div>
            </div>
            <div class="party-box">
                <div class="party-header">Consignee / Importer</div>
                <div class="party-name">{{buyer.name}}</div>
                <div class="party-address">
                    {{buyer.address.line1}}{{#if buyer.address.line2}}, {{buyer.address.line2}}{{/if}}<br>
                    {{buyer.address.city}}, {{buyer.address.state}} - {{buyer.address.pincode}}<br>
                    {{buyer.address.country}}
                </div>
                <div class="party-info">
                    {{#if buyer.contact.phone}}<strong>Tel:</strong> {{buyer.contact.phone}}<br>{{/if}}
                    {{#if buyer.contact.email}}<strong>Email:</strong> {{buyer.contact.email}}{{/if}}
                </div>
            </div>
        </div>

        <!-- SHIP TO (if different) -->
        {{#if shipping.shipTo}}
        <div class="parties-grid">
            <div class="party-box" style="grid-column: span 2;">
                <div class="party-header">Ship To / Notify Party</div>
                <div class="party-name">{{shipping.shipTo.name}}</div>
                <div class="party-address">
                    {{shipping.shipTo.address.line1}}{{#if shipping.shipTo.address.line2}}, {{shipping.shipTo.address.line2}}{{/if}}<br>
                    {{shipping.shipTo.address.city}}, {{shipping.shipTo.address.state}} - {{shipping.shipTo.address.pincode}}<br>
                    {{shipping.shipTo.address.country}}
                </div>
            </div>
        </div>
        {{/if}}

        <!-- SHIPPING & TRANSPORT DETAILS -->
        <div class="shipping-grid">
            <div class="shipping-box">
                <div class="shipping-header">üö¢ Pre-Carriage & Loading</div>
                <div class="shipping-row">
                    <span class="shipping-label">Pre-Carriage By:</span>
                    <span class="shipping-value">{{#if exportDetails.preCarriage}}{{exportDetails.preCarriage}}{{else}}‚Äî{{/if}}</span>
                </div>
                <div class="shipping-row">
                    <span class="shipping-label">Place of Receipt:</span>
                    <span class="shipping-value">{{#if exportDetails.placeOfReceipt}}{{exportDetails.placeOfReceipt}}{{else}}‚Äî{{/if}}</span>
                </div>
                <div class="shipping-row">
                    <span class="shipping-label">Port of Loading:</span>
                    <span class="shipping-value">{{#if exportDetails.portOfLoading}}{{exportDetails.portOfLoading}}{{else}}‚Äî{{/if}}</span>
                </div>
            </div>
            <div class="shipping-box">
                <div class="shipping-header">‚úàÔ∏è Vessel & Voyage</div>
                <div class="shipping-row">
                    <span class="shipping-label">Vessel/Flight No:</span>
                    <span class="shipping-value">{{#if exportDetails.vesselFlightNo}}{{exportDetails.vesselFlightNo}}{{else}}‚Äî{{/if}}</span>
                </div>
                <div class="shipping-row">
                    <span class="shipping-label">Port of Discharge:</span>
                    <span class="shipping-value">{{#if exportDetails.portOfDischarge}}{{exportDetails.portOfDischarge}}{{else}}‚Äî{{/if}}</span>
                </div>
                <div class="shipping-row">
                    <span class="shipping-label">Final Destination:</span>
                    <span class="shipping-value">{{#if exportDetails.finalDestination}}{{exportDetails.finalDestination}}{{else}}‚Äî{{/if}}</span>
                </div>
            </div>
            <div class="shipping-box">
                <div class="shipping-header">üì¶ Cargo Details</div>
                <div class="shipping-row">
                    <span class="shipping-label">Container No:</span>
                    <span class="shipping-value">{{#if exportDetails.containerNo}}{{exportDetails.containerNo}}{{else}}‚Äî{{/if}}</span>
                </div>
                <div class="shipping-row">
                    <span class="shipping-label">No. of Packages:</span>
                    <span class="shipping-value">{{#if exportDetails.packages}}{{exportDetails.packages}}{{else}}‚Äî{{/if}}</span>
                </div>
                <div class="shipping-row">
                    <span class="shipping-label">Marks & Numbers:</span>
                    <span class="shipping-value">{{#if exportDetails.marks}}{{exportDetails.marks}}{{else}}‚Äî{{/if}}</span>
                </div>
            </div>
        </div>

        <!-- EXPORT DETAILS -->
        <div class="export-section">
            <div class="export-title">üìã Export Information</div>
            <div class="export-grid">
                <div class="export-item">
                    <div class="export-label">Country of Origin</div>
                    <div class="export-value">{{#if exportDetails.countryOfOrigin}}{{exportDetails.countryOfOrigin}}{{else}}India{{/if}}</div>
                </div>
                <div class="export-item">
                    <div class="export-label">Country of Destination</div>
                    <div class="export-value">{{#if exportDetails.countryOfFinalDestination}}{{exportDetails.countryOfFinalDestination}}{{else}}{{buyer.address.country}}{{/if}}</div>
                </div>
                <div class="export-item">
                    <div class="export-label">Terms of Delivery</div>
                    <div class="export-value">
                        <span class="incoterm-badge">{{#if exportDetails.termsOfDelivery}}{{exportDetails.termsOfDelivery}}{{else}}FOB{{/if}}</span>
                    </div>
                </div>
                <div class="export-item">
                    <div class="export-label">Payment Terms</div>
                    <div class="export-value">{{#if exportDetails.paymentTerms}}{{exportDetails.paymentTerms}}{{else}}‚Äî{{/if}}</div>
                </div>
                <div class="export-item">
                    <div class="export-label">Gross Weight</div>
                    <div class="export-value">{{#if exportDetails.grossWeight}}{{exportDetails.grossWeight}}{{else}}‚Äî{{/if}}</div>
                </div>
                <div class="export-item">
                    <div class="export-label">Net Weight</div>
                    <div class="export-value">{{#if exportDetails.netWeight}}{{exportDetails.netWeight}}{{else}}‚Äî{{/if}}</div>
                </div>
                {{#if exportDetails.exchangeRate}}
                <div class="export-item">
                    <div class="export-label">Exchange Rate</div>
                    <div class="export-value">1 {{exportDetails.currency}} = ‚Çπ{{exportDetails.exchangeRate}}</div>
                </div>
                {{/if}}
            </div>
        </div>

        <!-- ITEMS TABLE -->
        <table class="items-table">
            <thead>
                <tr>
                    <th style="width:4%;">S.No</th>
                    <th style="width:8%;">HS Code</th>
                    <th style="width:30%;">Description of Goods</th>
                    <th style="width:8%;">Qty</th>
                    <th style="width:6%;">Unit</th>
                    <th style="width:12%;">Unit Price<br>({{currency}})</th>
                    <th style="width:12%;">Amount<br>({{currency}})</th>
                </tr>
            </thead>
            <tbody>
                {{#each lineItems}}
                <tr>
                    <td class="text-center">{{slNo}}</td>
                    <td class="text-center">{{#if hsnCode}}{{hsnCode}}{{else}}‚Äî{{/if}}</td>
                    <td>
                        <div class="item-desc">{{description}}</div>
                        {{#if itemCode}}<div class="item-sub">Part No: {{itemCode}}</div>{{/if}}
                        {{#if notes}}<div class="item-sub">{{notes}}</div>{{/if}}
                    </td>
                    <td class="text-center">{{quantity}}</td>
                    <td class="text-center">{{unit}}</td>
                    <td class="text-right">{{unitPrice}}</td>
                    <td class="text-right amount">{{netAmount}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>

        <!-- SUMMARY & TOTALS -->
        <div class="summary-section">
            <div class="weight-box">
                <div class="weight-title">üì¶ Package & Weight Summary</div>
                <div class="weight-row">
                    <span>Total Items:</span>
                    <span class="amount">{{totals.itemCount}}</span>
                </div>
                <div class="weight-row">
                    <span>Total Quantity:</span>
                    <span class="amount">{{totals.totalQuantity}}</span>
                </div>
                {{#if exportDetails.packages}}
                <div class="weight-row">
                    <span>No. of Packages:</span>
                    <span class="amount">{{exportDetails.packages}}</span>
                </div>
                {{/if}}
                {{#if exportDetails.grossWeight}}
                <div class="weight-row">
                    <span>Gross Weight:</span>
                    <span class="amount">{{exportDetails.grossWeight}}</span>
                </div>
                {{/if}}
                {{#if exportDetails.netWeight}}
                <div class="weight-row">
                    <span>Net Weight:</span>
                    <span class="amount">{{exportDetails.netWeight}}</span>
                </div>
                {{/if}}
            </div>
            <div class="totals-box">
                <div class="total-row">
                    <span class="total-label">Subtotal</span>
                    <span>{{currency}} {{totals.grossAmount}}</span>
                </div>
                {{#if totals.totalDiscount}}
                <div class="total-row">
                    <span class="total-label">Discount</span>
                    <span>- {{currency}} {{totals.totalDiscount}}</span>
                </div>
                {{/if}}
                {{#if shipping.shippingCost}}
                <div class="total-row">
                    <span class="total-label">Freight</span>
                    <span>{{currency}} {{shipping.shippingCost}}</span>
                </div>
                {{/if}}
                {{#if totals.totalTax}}
                <div class="total-row">
                    <span class="total-label">Tax/Duty</span>
                    <span>{{currency}} {{totals.totalTax}}</span>
                </div>
                {{/if}}
                <div class="total-row grand">
                    <span class="total-label">Total Value</span>
                    <span>{{currency}} {{totals.grandTotal}}</span>
                </div>
            </div>
        </div>

        <!-- AMOUNT IN WORDS -->
        <div class="amount-words">
            <span class="amount-words-label">Total Value in Words: </span>
            <span class="amount-words-value">{{currency}} {{totals.amountInWords}}</span>
        </div>

        <!-- CERTIFICATES -->
        <div class="cert-section">
            <div class="cert-title">üìú Certificates & Documents</div>
            <div class="cert-grid">
                <div class="cert-item">
                    {{#if certificateOfOrigin}}<span class="cert-check">‚úì</span>{{else}}<span class="cert-cross">‚úó</span>{{/if}}
                    Certificate of Origin {{#if coNumber}}({{coNumber}}){{/if}}
                </div>
                <div class="cert-item">
                    {{#if phytosanitaryCert}}<span class="cert-check">‚úì</span>{{else}}<span class="cert-cross">‚úó</span>{{/if}}
                    Phytosanitary Certificate
                </div>
                <div class="cert-item">
                    {{#if fumigationCert}}<span class="cert-check">‚úì</span>{{else}}<span class="cert-cross">‚úó</span>{{/if}}
                    Fumigation Certificate
                </div>
                <div class="cert-item">
                    {{#if inspectionCert}}<span class="cert-check">‚úì</span>{{else}}<span class="cert-cross">‚úó</span>{{/if}}
                    Inspection Certificate
                </div>
                {{#each otherCertificates}}
                <div class="cert-item">
                    <span class="cert-check">‚úì</span> {{this}}
                </div>
                {{/each}}
            </div>
        </div>

        <!-- DECLARATION -->
        <div class="declaration">
            <div class="declaration-title">üìã Declaration</div>
            <div class="declaration-text">
                {{#if declaration}}
                {{declaration}}
                {{else}}
                We declare that this invoice shows the actual price of the goods described and that all particulars are true and correct. The goods are of {{#if exportDetails.countryOfOrigin}}{{exportDetails.countryOfOrigin}}{{else}}Indian{{/if}} origin.
                {{/if}}
            </div>
        </div>

        <!-- BANK DETAILS -->
        <div class="bank-section">
            {{#if seller.bankDetails}}
            <div class="bank-box">
                <div class="bank-title">üè¶ Bank Details for Payment</div>
                <div class="bank-info">
                    <strong>Beneficiary:</strong> {{seller.bankDetails.accountName}}<br>
                    <strong>Account No:</strong> {{seller.bankDetails.accountNumber}}<br>
                    <strong>Bank:</strong> {{seller.bankDetails.bankName}}<br>
                    {{#if seller.bankDetails.branch}}<strong>Branch:</strong> {{seller.bankDetails.branch}}<br>{{/if}}
                    {{#if seller.bankDetails.ifscCode}}<strong>IFSC:</strong> {{seller.bankDetails.ifscCode}}<br>{{/if}}
                    {{#if seller.bankDetails.swiftCode}}<strong>SWIFT:</strong> {{seller.bankDetails.swiftCode}}{{/if}}
                </div>
            </div>
            {{/if}}
            <div class="bank-box">
                <div class="bank-title">üìù Additional Information</div>
                <div class="bank-info">
                    {{#if notes}}
                    {{notes}}
                    {{else}}
                    All disputes subject to {{seller.address.city}} jurisdiction only.
                    E. & O.E. (Errors and Omissions Excepted)
                    {{/if}}
                </div>
            </div>
        </div>

        <!-- SIGNATURE -->
        <div class="signature-section">
            <div class="sig-block">
                <div class="sig-line"></div>
                <div class="sig-name">Customs Officer</div>
                <div class="sig-role">Stamp & Signature</div>
            </div>
            <div class="sig-block">
                <div class="sig-line"></div>
                <div class="sig-name">Authorized Representative</div>
                <div class="sig-role">Buyer/Consignee</div>
            </div>
            <div class="sig-block">
                <div class="for-company">For {{seller.name}}</div>
                <div class="sig-line">
                    {{#if signature}}<img src="{{signature}}" alt="Signature" style="max-height: 35px;">{{/if}}
                </div>
                <div class="sig-name">{{#if authorizedSignatory}}{{authorizedSignatory}}{{else}}Authorized Signatory{{/if}}</div>
                <div class="sig-role">Exporter</div>
            </div>
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <div>This Commercial Invoice is issued for customs and export clearance purposes.</div>
            <div>{{seller.name}} | {{#if seller.taxRegistration.iec}}IEC: {{seller.taxRegistration.iec}} | {{/if}}Invoice: {{invoiceNumber}} | Date: {{invoiceDate}}</div>
        </div>
    </div>
</body>
</html>
