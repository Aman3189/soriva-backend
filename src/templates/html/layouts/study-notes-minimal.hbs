<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{title}} - Study Notes</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    /* ═══════════════════════════════════════════════════════════════
       SORIVA - STUDY NOTES TEMPLATE
       Style: Minimal (Clean & Distraction-Free)
       Philosophy: Less is More - Focus on Content
       Best for: Quick notes, Clean printouts, Focused study
       ═══════════════════════════════════════════════════════════════ */
    
    :root {
      --text: #111827;
      --text-secondary: #4b5563;
      --text-muted: #9ca3af;
      --border: #e5e7eb;
      --border-dark: #d1d5db;
      --bg: #ffffff;
      --bg-subtle: #f9fafb;
      --accent: #111827;
      --accent-light: #374151;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f3f4f6;
      color: var(--text);
      line-height: 1.75;
      padding: 30px;
      font-size: 14px;
    }

    /* ═══════════════════════════════════════════════════════════════
       MAIN CONTAINER
       ═══════════════════════════════════════════════════════════════ */
    
    .notes-container {
      width: 210mm;
      min-height: 297mm;
      margin: 0 auto;
      background: var(--bg);
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .page-break {
      page-break-before: always;
      padding-top: 40px;
    }

    /* ═══════════════════════════════════════════════════════════════
       HEADER - Minimalist
       ═══════════════════════════════════════════════════════════════ */
    
    {{#if showHeader}}
    .header {
      padding: 40px 50px 30px;
      border-bottom: 1px solid var(--border);
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
    }

    .subject-tag {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: var(--text-muted);
    }

    .meta-tag {
      font-size: 11px;
      color: var(--text-muted);
    }

    .notes-title {
      font-size: 28px;
      font-weight: 700;
      color: var(--text);
      letter-spacing: -0.5px;
      margin-bottom: 8px;
      line-height: 1.2;
    }

    .notes-subtitle {
      font-size: 15px;
      color: var(--text-secondary);
      font-weight: 400;
    }

    .header-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid var(--border);
      font-size: 12px;
      color: var(--text-muted);
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .meta-item strong {
      color: var(--text-secondary);
      font-weight: 600;
    }
    {{/if}}

    /* ═══════════════════════════════════════════════════════════════
       MAIN CONTENT
       ═══════════════════════════════════════════════════════════════ */
    
    .notes-body {
      padding: 35px 50px;
    }

    /* ═══════════════════════════════════════════════════════════════
       SECTION STYLES - Simple & Clean
       ═══════════════════════════════════════════════════════════════ */
    
    .section {
      margin-bottom: 35px;
    }

    .section-title {
      font-size: 13px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text);
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--text);
      display: inline-block;
    }

    .section-title-hi {
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 400;
      text-transform: none;
      letter-spacing: 0;
      margin-left: 10px;
    }

    /* ═══════════════════════════════════════════════════════════════
       INTRODUCTION & SUMMARY
       ═══════════════════════════════════════════════════════════════ */
    
    .intro-text {
      font-size: 15px;
      color: var(--text-secondary);
      line-height: 1.9;
      margin-bottom: 25px;
    }

    .summary-box {
      padding: 20px;
      background: var(--bg-subtle);
      border-left: 3px solid var(--text);
      margin-bottom: 25px;
    }

    .summary-label {
      font-size: 10px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .summary-text {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.8;
    }

    /* ═══════════════════════════════════════════════════════════════
       KEY POINTS - Simple bullets
       ═══════════════════════════════════════════════════════════════ */
    
    {{#if showKeyPoints}}
    .key-points-list {
      list-style: none;
    }

    .key-point-item {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 10px 0;
      border-bottom: 1px solid var(--border);
    }

    .key-point-item:last-child {
      border-bottom: none;
    }

    .key-point-bullet {
      width: 6px;
      height: 6px;
      background: var(--text);
      border-radius: 50%;
      flex-shrink: 0;
      margin-top: 8px;
    }

    .key-point-bullet.critical { background: #dc2626; }
    .key-point-bullet.important { background: #f59e0b; }

    .key-point-content {
      flex: 1;
    }

    .key-point-text {
      font-size: 14px;
      color: var(--text);
      line-height: 1.7;
    }

    .key-point-explanation {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .key-point-tag {
      display: inline-block;
      font-size: 10px;
      color: var(--text-muted);
      background: var(--bg-subtle);
      padding: 2px 8px;
      margin-top: 6px;
      border: 1px solid var(--border);
    }
    {{/if}}

    /* ═══════════════════════════════════════════════════════════════
       DEFINITIONS - Clean list
       ═══════════════════════════════════════════════════════════════ */
    
    .definition-item {
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
    }

    .definition-item:last-child {
      border-bottom: none;
    }

    .definition-term {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 5px;
    }

    .definition-term-hi {
      font-weight: 400;
      color: var(--text-muted);
      font-size: 13px;
      margin-left: 8px;
    }

    .definition-meaning {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.7;
      margin-bottom: 6px;
    }

    .definition-example {
      font-size: 13px;
      color: var(--text-muted);
      font-style: italic;
    }

    /* ═══════════════════════════════════════════════════════════════
       FORMULAS - Simple boxes
       ═══════════════════════════════════════════════════════════════ */
    
    {{#if showFormulas}}
    .formula-item {
      padding: 20px;
      border: 1px solid var(--border);
      margin-bottom: 15px;
    }

    .formula-name {
      font-size: 13px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 12px;
    }

    .formula-display {
      font-family: 'JetBrains Mono', monospace;
      font-size: 18px;
      text-align: center;
      padding: 15px;
      background: var(--bg-subtle);
      margin-bottom: 12px;
      color: var(--text);
    }

    .formula-description {
      font-size: 13px;
      color: var(--text-secondary);
      text-align: center;
      margin-bottom: 12px;
    }

    .formula-variables {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      font-size: 12px;
      color: var(--text-muted);
    }

    .variable-item {
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .variable-symbol {
      font-family: 'JetBrains Mono', monospace;
      font-weight: 600;
      color: var(--text);
    }

    .formula-note {
      font-size: 12px;
      color: var(--text-muted);
      text-align: center;
      margin-top: 10px;
      font-style: italic;
    }
    {{/if}}

    /* ═══════════════════════════════════════════════════════════════
       THEOREMS & LAWS
       ═══════════════════════════════════════════════════════════════ */
    
    .theorem-item {
      margin-bottom: 20px;
      padding: 20px;
      border: 1px solid var(--border);
    }

    .theorem-name {
      font-size: 14px;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .theorem-statement {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.8;
      padding: 15px;
      background: var(--bg-subtle);
      border-left: 3px solid var(--border-dark);
      margin-bottom: 12px;
    }

    .theorem-proof {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .theorem-proof-label {
      font-weight: 600;
      color: var(--text);
      margin-bottom: 6px;
    }

    .theorem-applications {
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid var(--border);
    }

    .theorem-applications-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 8px;
    }

    .application-item {
      font-size: 13px;
      color: var(--text-secondary);
      padding: 4px 0 4px 15px;
      position: relative;
    }

    .application-item::before {
      content: '—';
      position: absolute;
      left: 0;
      color: var(--text-muted);
    }

    /* ═══════════════════════════════════════════════════════════════
       CHEMICAL REACTIONS
       ═══════════════════════════════════════════════════════════════ */
    
    .reaction-item {
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
    }

    .reaction-item:last-child {
      border-bottom: none;
    }

    .reaction-name {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 8px;
    }

    .reaction-equation {
      font-family: 'JetBrains Mono', monospace;
      font-size: 15px;
      text-align: center;
      padding: 12px;
      background: var(--bg-subtle);
      color: var(--text);
    }

    .reaction-meta {
      font-size: 12px;
      color: var(--text-muted);
      text-align: center;
      margin-top: 8px;
    }

    /* ═══════════════════════════════════════════════════════════════
       BIOLOGICAL PROCESSES
       ═══════════════════════════════════════════════════════════════ */
    
    .bio-process-item {
      margin-bottom: 20px;
      padding: 20px;
      background: var(--bg-subtle);
    }

    .bio-process-name {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 15px;
    }

    .bio-steps {
      list-style: none;
      counter-reset: step;
    }

    .bio-step {
      counter-increment: step;
      display: flex;
      align-items: flex-start;
      gap: 12px;
      padding: 8px 0;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .bio-step::before {
      content: counter(step) '.';
      font-weight: 600;
      color: var(--text);
      flex-shrink: 0;
      width: 20px;
    }

    .bio-io {
      display: flex;
      gap: 30px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 1px solid var(--border);
      font-size: 12px;
    }

    .bio-io-group {
      flex: 1;
    }

    .bio-io-label {
      font-weight: 600;
      color: var(--text);
      margin-bottom: 5px;
    }

    .bio-io-items {
      color: var(--text-secondary);
    }

    /* ═══════════════════════════════════════════════════════════════
       TIMELINE
       ═══════════════════════════════════════════════════════════════ */
    
    .timeline-item {
      display: flex;
      gap: 20px;
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
    }

    .timeline-item:last-child {
      border-bottom: none;
    }

    .timeline-year {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      font-weight: 600;
      color: var(--text);
      width: 60px;
      flex-shrink: 0;
    }

    .timeline-content {
      flex: 1;
    }

    .timeline-event {
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 5px;
    }

    .timeline-description {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.7;
    }

    .timeline-significance {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 8px;
      font-style: italic;
    }

    /* ═══════════════════════════════════════════════════════════════
       HISTORICAL FIGURES
       ═══════════════════════════════════════════════════════════════ */
    
    .personality-item {
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
    }

    .personality-item:last-child {
      border-bottom: none;
    }

    .personality-name {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
    }

    .personality-meta {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .personality-contributions {
      font-size: 13px;
      color: var(--text-secondary);
      line-height: 1.7;
    }

    /* ═══════════════════════════════════════════════════════════════
       GRAMMAR RULES
       ═══════════════════════════════════════════════════════════════ */
    
    .grammar-item {
      padding: 15px 0;
      border-bottom: 1px solid var(--border);
    }

    .grammar-item:last-child {
      border-bottom: none;
    }

    .grammar-rule {
      font-size: 14px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 8px;
    }

    .grammar-explanation {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 10px;
      line-height: 1.7;
    }

    .grammar-examples {
      padding: 10px 15px;
      background: var(--bg-subtle);
    }

    .grammar-example {
      font-size: 13px;
      color: var(--text-secondary);
      padding: 3px 0;
    }

    /* ═══════════════════════════════════════════════════════════════
       VOCABULARY
       ═══════════════════════════════════════════════════════════════ */
    
    .vocab-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1px;
      background: var(--border);
      border: 1px solid var(--border);
    }

    .vocab-item {
      padding: 15px;
      background: var(--bg);
    }

    .vocab-word {
      font-size: 15px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 4px;
    }

    .vocab-pronunciation {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 6px;
    }

    .vocab-meaning {
      font-size: 13px;
      color: var(--text-secondary);
      margin-bottom: 4px;
    }

    .vocab-hindi {
      font-size: 12px;
      color: var(--text-muted);
    }

    .vocab-usage {
      font-size: 12px;
      color: var(--text-muted);
      font-style: italic;
      margin-top: 6px;
    }

    /* ═══════════════════════════════════════════════════════════════
       MNEMONICS
       ═══════════════════════════════════════════════════════════════ */
    
    .mnemonic-item {
      padding: 20px;
      background: var(--bg-subtle);
      margin-bottom: 15px;
      text-align: center;
    }

    .mnemonic-topic {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .mnemonic-text {
      font-size: 20px;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 10px;
      letter-spacing: 2px;
    }

    .mnemonic-explanation {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .mnemonic-items {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 12px;
    }

    .mnemonic-tag {
      font-size: 12px;
      color: var(--text);
      padding: 4px 12px;
      border: 1px solid var(--border);
      background: var(--bg);
    }

    /* ═══════════════════════════════════════════════════════════════
       EXAMPLES
       ═══════════════════════════════════════════════════════════════ */
    
    {{#if showExamples}}
    .example-item {
      padding: 20px;
      border: 1px solid var(--border);
      margin-bottom: 15px;
    }

    .example-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .example-label {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text);
    }

    .example-difficulty {
      font-size: 10px;
      color: var(--text-muted);
      padding: 2px 8px;
      border: 1px solid var(--border);
    }

    .example-question {
      font-size: 14px;
      color: var(--text);
      padding: 12px;
      background: var(--bg-subtle);
      margin-bottom: 15px;
      line-height: 1.7;
    }

    .example-solution-label {
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      margin-bottom: 10px;
    }

    .example-step {
      display: flex;
      gap: 10px;
      padding: 6px 0;
      font-size: 13px;
      color: var(--text-secondary);
    }

    .step-num {
      font-weight: 600;
      color: var(--text);
      flex-shrink: 0;
    }

    .example-answer {
      margin-top: 15px;
      padding: 12px;
      background: var(--text);
      color: var(--bg);
      font-size: 14px;
    }

    .example-answer strong {
      font-weight: 600;
    }
    {{/if}}

    /* ═══════════════════════════════════════════════════════════════
       TABLES
       ═══════════════════════════════════════════════════════════════ */
    
    .data-table-container {
      margin-bottom: 25px;
      overflow-x: auto;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }

    .data-table caption {
      font-size: 13px;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 10px;
      text-align: left;
    }

    .data-table th {
      background: var(--text);
      color: var(--bg);
      padding: 12px 15px;
      text-align: left;
      font-weight: 600;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .data-table td {
      padding: 12px 15px;
      border-bottom: 1px solid var(--border);
      color: var(--text-secondary);
    }

    .data-table tr:hover td {
      background: var(--bg-subtle);
    }

    /* ═══════════════════════════════════════════════════════════════
       PRACTICE QUESTIONS
       ═══════════════════════════════════════════════════════════════ */
    
    {{#if showPracticeQuestions}}
    .practice-item {
      padding: 20px;
      border: 1px solid var(--border);
      margin-bottom: 15px;
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .question-num {
      font-size: 12px;
      font-weight: 700;
      color: var(--text);
    }

    .question-meta {
      display: flex;
      gap: 10px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .question-type {
      padding: 2px 8px;
      background: var(--bg-subtle);
      border: 1px solid var(--border);
    }

    .question-text {
      font-size: 14px;
      color: var(--text);
      line-height: 1.8;
      margin-bottom: 15px;
    }

    .mcq-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }

    .mcq-option {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      background: var(--bg-subtle);
      font-size: 13px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.15s;
    }

    .mcq-option:hover {
      background: var(--border);
    }

    .option-letter {
      font-weight: 600;
      color: var(--text);
    }

    .pyq-badge {
      font-size: 10px;
      color: var(--text-muted);
      padding: 2px 8px;
      border: 1px solid var(--border);
    }
    {{/if}}

    /* ═══════════════════════════════════════════════════════════════
       QUICK REVISION
       ═══════════════════════════════════════════════════════════════ */
    
    {{#if showRevisionSection}}
    .revision-section {
      padding: 25px;
      background: var(--text);
      color: var(--bg);
      margin-bottom: 25px;
    }

    .revision-title {
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      margin-bottom: 20px;
      text-align: center;
    }

    .revision-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .revision-item {
      display: flex;
      align-items: flex-start;
      gap: 10px;
      padding: 10px;
      background: rgba(255,255,255,0.05);
    }

    .revision-bullet {
      width: 5px;
      height: 5px;
      background: var(--bg);
      flex-shrink: 0;
      margin-top: 7px;
    }

    .revision-text {
      font-size: 13px;
      line-height: 1.5;
    }

    .revision-category {
      font-size: 10px;
      opacity: 0.6;
      margin-top: 4px;
      display: block;
    }
    {{/if}}

    /* ═══════════════════════════════════════════════════════════════
       TIPS & MISTAKES
       ═══════════════════════════════════════════════════════════════ */
    
    .tips-mistakes-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 25px;
    }

    .tips-box {
      padding: 20px;
      border: 1px solid var(--border);
    }

    .tips-box-title {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text);
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }

    .tip-item {
      font-size: 13px;
      color: var(--text-secondary);
      padding: 6px 0 6px 15px;
      position: relative;
      line-height: 1.6;
    }

    .tip-item::before {
      content: '+';
      position: absolute;
      left: 0;
      font-weight: 600;
      color: var(--text);
    }

    .mistakes-box {
      padding: 20px;
      background: var(--bg-subtle);
    }

    .mistakes-box-title {
      font-size: 11px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: var(--text);
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }

    .mistake-item {
      font-size: 13px;
      color: var(--text-secondary);
      padding: 6px 0 6px 15px;
      position: relative;
      line-height: 1.6;
    }

    .mistake-item::before {
      content: '×';
      position: absolute;
      left: 0;
      font-weight: 600;
      color: var(--text);
    }

    /* ═══════════════════════════════════════════════════════════════
       REFERENCES
       ═══════════════════════════════════════════════════════════════ */
    
    .references-list {
      font-size: 12px;
      color: var(--text-muted);
    }

    .reference-item {
      padding: 8px 0;
      border-bottom: 1px solid var(--border);
    }

    .reference-item:last-child {
      border-bottom: none;
    }

    .reference-item a {
      color: var(--text-secondary);
      text-decoration: none;
    }

    .reference-item a:hover {
      text-decoration: underline;
    }

    /* ═══════════════════════════════════════════════════════════════
       FOOTER
       ═══════════════════════════════════════════════════════════════ */
    
    {{#if showFooter}}
    .footer {
      padding: 20px 50px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: var(--text-muted);
    }

    .footer-left {
      display: flex;
      gap: 20px;
    }

    .footer-right {
      font-weight: 600;
      color: var(--text);
    }
    {{/if}}

    /* ═══════════════════════════════════════════════════════════════
       PRINT STYLES
       ═══════════════════════════════════════════════════════════════ */
    
    @media print {
      body {
        background: white;
        padding: 0;
      }
      
      .notes-container {
        box-shadow: none;
        width: 100%;
        min-height: auto;
      }

      .page-break {
        page-break-before: always;
      }
    }

    @page {
      size: A4;
      margin: 0;
    }

    /* ═══════════════════════════════════════════════════════════════
       RESPONSIVE
       ═══════════════════════════════════════════════════════════════ */
    
    @media screen and (max-width: 900px) {
      body {
        padding: 15px;
      }

      .notes-container {
        width: 100%;
        min-height: auto;
      }

      .header,
      .notes-body {
        padding: 25px;
      }

      .vocab-grid,
      .mcq-options,
      .revision-grid,
      .tips-mistakes-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="notes-container">
    
    <!-- ═══════════════════════════════════════════════════════════════
         HEADER
         ═══════════════════════════════════════════════════════════════ -->
    {{#if showHeader}}
    <header class="header">
      <div class="header-top">
        <span class="subject-tag">{{subject}}</span>
        {{#if difficulty}}
        <span class="meta-tag">{{difficulty}}</span>
        {{/if}}
      </div>

      <h1 class="notes-title">{{title}}</h1>
      
      {{#if subtitle}}
      <p class="notes-subtitle">{{subtitle}}</p>
      {{/if}}

      <div class="header-meta">
        {{#if topic}}
        <span class="meta-item"><strong>Topic:</strong> {{topic}}</span>
        {{/if}}
        {{#if chapter}}
        <span class="meta-item"><strong>Chapter:</strong> {{chapter}}</span>
        {{/if}}
        {{#if class}}
        <span class="meta-item"><strong>Class:</strong> {{class}}</span>
        {{/if}}
        {{#if board}}
        <span class="meta-item"><strong>Board:</strong> {{board}}</span>
        {{/if}}
        {{#if targetExam}}
        <span class="meta-item"><strong>Exam:</strong> {{targetExam}}</span>
        {{/if}}
      </div>
    </header>
    {{/if}}

    <!-- ═══════════════════════════════════════════════════════════════
         MAIN CONTENT
         ═══════════════════════════════════════════════════════════════ -->
    <main class="notes-body">

      <!-- Introduction -->
      {{#if introduction}}
      <p class="intro-text">{{introduction}}</p>
      {{/if}}

      <!-- Summary -->
      {{#if summary}}
      <div class="summary-box">
        <p class="summary-label">Summary</p>
        <p class="summary-text">{{summary}}</p>
      </div>
      {{/if}}

      <!-- Key Points -->
      {{#if showKeyPoints}}
      {{#if keyPoints}}
      <section class="section">
        <h2 class="section-title">Key Points <span class="section-title-hi">मुख्य बिंदु</span></h2>
        <ul class="key-points-list">
          {{#each keyPoints}}
          <li class="key-point-item">
            <span class="key-point-bullet {{#if this.importance}}{{lowercase this.importance}}{{/if}}"></span>
            <div class="key-point-content">
              <p class="key-point-text">{{this.point}}</p>
              {{#if this.explanation}}
              <p class="key-point-explanation">{{this.explanation}}</p>
              {{/if}}
              {{#if this.examRelevance}}
              <span class="key-point-tag">{{this.examRelevance}}</span>
              {{/if}}
            </div>
          </li>
          {{/each}}
        </ul>
      </section>
      {{/if}}
      {{/if}}

      <!-- Definitions -->
      {{#if definitions}}
      <section class="section">
        <h2 class="section-title">Definitions <span class="section-title-hi">परिभाषाएं</span></h2>
        {{#each definitions}}
        <div class="definition-item">
          <h3 class="definition-term">
            {{this.term}}
            {{#if this.hindiMeaning}}<span class="definition-term-hi">({{this.hindiMeaning}})</span>{{/if}}
          </h3>
          <p class="definition-meaning">{{this.meaning}}</p>
          {{#if this.example}}
          <p class="definition-example">Example: {{this.example}}</p>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}

      <!-- Formulas -->
      {{#if showFormulas}}
      {{#if formulas}}
      <section class="section">
        <h2 class="section-title">Formulas <span class="section-title-hi">सूत्र</span></h2>
        {{#each formulas}}
        <div class="formula-item">
          <h3 class="formula-name">{{this.name}}</h3>
          <div class="formula-display">{{this.formula}}</div>
          {{#if this.description}}
          <p class="formula-description">{{this.description}}</p>
          {{/if}}
          {{#if this.variables}}
          <div class="formula-variables">
            {{#each this.variables}}
            <span class="variable-item">
              <span class="variable-symbol">{{this.symbol}}</span> = {{this.name}}
              {{#if this.unit}}({{this.unit}}){{/if}}
            </span>
            {{/each}}
          </div>
          {{/if}}
          {{#if this.conditions}}
          <p class="formula-note">Note: {{this.conditions}}</p>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}
      {{/if}}

      <!-- Theorems & Laws -->
      {{#if theorems}}
      <section class="section">
        <h2 class="section-title">Theorems & Laws</h2>
        {{#each theorems}}
        <div class="theorem-item">
          <h3 class="theorem-name">{{this.name}}</h3>
          <div class="theorem-statement">{{this.statement}}</div>
          {{#if this.proof}}
          <div class="theorem-proof">
            <p class="theorem-proof-label">Proof:</p>
            <p>{{this.proof}}</p>
          </div>
          {{/if}}
          {{#if this.applications}}
          <div class="theorem-applications">
            <p class="theorem-applications-label">Applications:</p>
            {{#each this.applications}}
            <p class="application-item">{{this}}</p>
            {{/each}}
          </div>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}

      <!-- Laws -->
      {{#if laws}}
      {{#each laws}}
      <div class="theorem-item">
        <h3 class="theorem-name">{{this.name}}</h3>
        <div class="theorem-statement">{{this.statement}}</div>
        {{#if this.applications}}
        <div class="theorem-applications">
          <p class="theorem-applications-label">Applications:</p>
          {{#each this.applications}}
          <p class="application-item">{{this}}</p>
          {{/each}}
        </div>
        {{/if}}
      </div>
      {{/each}}
      {{/if}}

      <!-- Chemical Reactions -->
      {{#if chemicalReactions}}
      <section class="section">
        <h2 class="section-title">Chemical Reactions</h2>
        {{#each chemicalReactions}}
        <div class="reaction-item">
          {{#if this.name}}
          <p class="reaction-name">{{this.name}}</p>
          {{/if}}
          <div class="reaction-equation">{{this.equation}}</div>
          {{#if this.reactionType}}
          <p class="reaction-meta">Type: {{this.reactionType}}{{#if this.conditions}} | Conditions: {{this.conditions}}{{/if}}</p>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}

      <!-- Biological Processes -->
      {{#if biologicalProcesses}}
      <section class="section">
        <h2 class="section-title">Biological Processes</h2>
        {{#each biologicalProcesses}}
        <div class="bio-process-item">
          <h3 class="bio-process-name">{{this.name}}</h3>
          {{#if this.steps}}
          <ol class="bio-steps">
            {{#each this.steps}}
            <li class="bio-step">{{this}}</li>
            {{/each}}
          </ol>
          {{/if}}
          {{#if this.inputs}}
          <div class="bio-io">
            <div class="bio-io-group">
              <p class="bio-io-label">Inputs:</p>
              <p class="bio-io-items">{{join this.inputs ", "}}</p>
            </div>
            {{#if this.outputs}}
            <div class="bio-io-group">
              <p class="bio-io-label">Outputs:</p>
              <p class="bio-io-items">{{join this.outputs ", "}}</p>
            </div>
            {{/if}}
          </div>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}

      <!-- Timeline -->
      {{#if timeline}}
      <section class="section">
        <h2 class="section-title">Timeline</h2>
        {{#each timeline}}
        <div class="timeline-item">
          <span class="timeline-year">{{this.year}}</span>
          <div class="timeline-content">
            <h4 class="timeline-event">{{this.event}}</h4>
            {{#if this.description}}
            <p class="timeline-description">{{this.description}}</p>
            {{/if}}
            {{#if this.significance}}
            <p class="timeline-significance">Significance: {{this.significance}}</p>
            {{/if}}
          </div>
        </div>
        {{/each}}
      </section>
      {{/if}}

      <!-- Historical Figures -->
      {{#if historicalFigures}}
      <section class="section">
        <h2 class="section-title">Important Figures</h2>
        {{#each historicalFigures}}
        <div class="personality-item">
          <h3 class="personality-name">{{this.name}}</h3>
          <p class="personality-meta">
            {{#if this.title}}{{this.title}}{{/if}}
            {{#if this.lifespan}} ({{this.lifespan}}){{/if}}
          </p>
          {{#if this.contributions}}
          <p class="personality-contributions">{{join this.contributions "; "}}</p>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}

      <!-- Grammar Rules -->
      {{#if grammarRules}}
      <section class="section">
        <h2 class="section-title">Grammar Rules</h2>
        {{#each grammarRules}}
        <div class="grammar-item">
          <h3 class="grammar-rule">{{this.rule}}</h3>
          <p class="grammar-explanation">{{this.explanation}}</p>
          {{#if this.examples}}
          <div class="grammar-examples">
            {{#each this.examples}}
            <p class="grammar-example">{{this}}</p>
            {{/each}}
          </div>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}

      <!-- Vocabulary -->
      {{#if vocabulary}}
      <section class="section">
        <h2 class="section-title">Vocabulary</h2>
        <div class="vocab-grid">
          {{#each vocabulary}}
          <div class="vocab-item">
            <h4 class="vocab-word">{{this.word}}</h4>
            {{#if this.pronunciation}}<p class="vocab-pronunciation">/{{this.pronunciation}}/</p>{{/if}}
            <p class="vocab-meaning">{{this.meaning}}</p>
            {{#if this.hindiMeaning}}<p class="vocab-hindi">{{this.hindiMeaning}}</p>{{/if}}
            {{#if this.usage}}<p class="vocab-usage">"{{this.usage}}"</p>{{/if}}
          </div>
          {{/each}}
        </div>
      </section>
      {{/if}}

      <!-- Mnemonics -->
      {{#if mnemonics}}
      <section class="section">
        <h2 class="section-title">Memory Tricks</h2>
        {{#each mnemonics}}
        <div class="mnemonic-item">
          <p class="mnemonic-topic">{{this.topic}}</p>
          <p class="mnemonic-text">{{this.mnemonic}}</p>
          <p class="mnemonic-explanation">{{this.explanation}}</p>
          {{#if this.items}}
          <div class="mnemonic-items">
            {{#each this.items}}
            <span class="mnemonic-tag">{{this}}</span>
            {{/each}}
          </div>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}

      <!-- Solved Examples -->
      {{#if showExamples}}
      {{#if examples}}
      <section class="section">
        <h2 class="section-title">Solved Examples</h2>
        {{#each examples}}
        <div class="example-item">
          <div class="example-header">
            <span class="example-label">{{#if this.title}}{{this.title}}{{else}}Example {{math @index "+" 1}}{{/if}}</span>
            {{#if this.difficulty}}
            <span class="example-difficulty">{{this.difficulty}}</span>
            {{/if}}
          </div>
          <div class="example-question">Q: {{this.question}}</div>
          <p class="example-solution-label">Solution:</p>
          {{#if this.steps}}
          {{#each this.steps}}
          <div class="example-step">
            <span class="step-num">{{math @index "+" 1}}.</span>
            <span>{{this}}</span>
          </div>
          {{/each}}
          {{else}}
          <p style="font-size: 13px; color: var(--text-secondary);">{{this.solution}}</p>
          {{/if}}
          {{#if this.answer}}
          <div class="example-answer"><strong>Answer:</strong> {{this.answer}}</div>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}
      {{/if}}

      <!-- Tables -->
      {{#if tables}}
      {{#each tables}}
      <div class="data-table-container">
        <table class="data-table">
          {{#if this.title}}<caption>{{this.title}}</caption>{{/if}}
          <thead>
            <tr>
              {{#each this.headers}}
              <th>{{this}}</th>
              {{/each}}
            </tr>
          </thead>
          <tbody>
            {{#each this.rows}}
            <tr>
              {{#each this}}
              <td>{{this}}</td>
              {{/each}}
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
      {{/each}}
      {{/if}}

      <!-- Practice Questions -->
      {{#if showPracticeQuestions}}
      {{#if practiceQuestions}}
      <section class="section">
        <h2 class="section-title">Practice Questions</h2>
        {{#each practiceQuestions}}
        <div class="practice-item">
          <div class="question-header">
            <span class="question-num">Q{{math @index "+" 1}}</span>
            <div class="question-meta">
              {{#if this.type}}<span class="question-type">{{this.type}}</span>{{/if}}
              {{#if this.marks}}<span>{{this.marks}} marks</span>{{/if}}
              {{#if this.year}}<span class="pyq-badge">{{this.examName}} {{this.year}}</span>{{/if}}
            </div>
          </div>
          <p class="question-text">{{this.question}}</p>
          {{#if this.options}}
          <div class="mcq-options">
            {{#each this.options}}
            <div class="mcq-option">
              <span class="option-letter">{{optionLetter @index}}</span>
              <span>{{this}}</span>
            </div>
            {{/each}}
          </div>
          {{/if}}
        </div>
        {{/each}}
      </section>
      {{/if}}
      {{/if}}

      <!-- Quick Revision -->
      {{#if showRevisionSection}}
      {{#if quickRevision}}
      <div class="revision-section">
        <h2 class="revision-title">Quick Revision</h2>
        <div class="revision-grid">
          {{#each quickRevision}}
          <div class="revision-item">
            <span class="revision-bullet"></span>
            <div>
              <span class="revision-text">{{this.point}}</span>
              {{#if this.category}}<span class="revision-category">{{this.category}}</span>{{/if}}
            </div>
          </div>
          {{/each}}
        </div>
      </div>
      {{/if}}
      {{/if}}

      <!-- Tips & Mistakes -->
      {{#if examTips}}
      {{#if commonMistakes}}
      <div class="tips-mistakes-grid">
        <div class="tips-box">
          <h3 class="tips-box-title">Exam Tips</h3>
          {{#each examTips}}
          <p class="tip-item">{{this}}</p>
          {{/each}}
        </div>
        <div class="mistakes-box">
          <h3 class="mistakes-box-title">Common Mistakes</h3>
          {{#each commonMistakes}}
          <p class="mistake-item">{{this}}</p>
          {{/each}}
        </div>
      </div>
      {{else}}
      <div class="tips-box" style="margin-bottom: 25px;">
        <h3 class="tips-box-title">Exam Tips</h3>
        {{#each examTips}}
        <p class="tip-item">{{this}}</p>
        {{/each}}
      </div>
      {{/if}}
      {{else}}
      {{#if commonMistakes}}
      <div class="mistakes-box" style="margin-bottom: 25px;">
        <h3 class="mistakes-box-title">Common Mistakes</h3>
        {{#each commonMistakes}}
        <p class="mistake-item">{{this}}</p>
        {{/each}}
      </div>
      {{/if}}
      {{/if}}

      <!-- References -->
      {{#if references}}
      <section class="section">
        <h2 class="section-title">References</h2>
        <div class="references-list">
          {{#each references}}
          <div class="reference-item">
            {{#if this.url}}
            <a href="{{this.url}}" target="_blank">{{this.title}}</a>
            {{else}}
            {{this.title}}{{#if this.author}} — {{this.author}}{{/if}}
            {{/if}}
          </div>
          {{/each}}
        </div>
      </section>
      {{/if}}

      {{#if ncertReference}}
      <p style="font-size: 12px; color: var(--text-muted); padding: 12px; background: var(--bg-subtle); border-left: 3px solid var(--border-dark);">
        <strong>NCERT:</strong> {{ncertReference}}
      </p>
      {{/if}}

    </main>

    <!-- ═══════════════════════════════════════════════════════════════
         FOOTER
         ═══════════════════════════════════════════════════════════════ -->
    {{#if showFooter}}
    <footer class="footer">
      <div class="footer-left">
        {{#if author}}<span>{{author}}</span>{{/if}}
        {{#if institution}}<span>{{institution}}</span>{{/if}}
        {{#if lastUpdated}}<span>Updated: {{formatDate lastUpdated}}</span>{{/if}}
      </div>
      <div class="footer-right">
        {{#if showPageNumbers}}Page 1{{/if}}
      </div>
    </footer>
    {{/if}}

  </div>
</body>
</html>
