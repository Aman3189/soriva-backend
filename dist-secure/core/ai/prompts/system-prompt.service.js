const _0x1f7a05=_0x57a9;(function(_0x425d6e,_0x10d58b){const _0x1c0b0d=_0x57a9,_0x2a1e8c=_0x425d6e();while(!![]){try{const _0x3322fe=-parseInt(_0x1c0b0d(0x18f))/0x1*(parseInt(_0x1c0b0d(0x1bc))/0x2)+parseInt(_0x1c0b0d(0x162))/0x3+-parseInt(_0x1c0b0d(0x170))/0x4+-parseInt(_0x1c0b0d(0x1d9))/0x5+-parseInt(_0x1c0b0d(0x1aa))/0x6*(-parseInt(_0x1c0b0d(0x16b))/0x7)+parseInt(_0x1c0b0d(0x19f))/0x8*(-parseInt(_0x1c0b0d(0x17b))/0x9)+-parseInt(_0x1c0b0d(0x1db))/0xa*(-parseInt(_0x1c0b0d(0x18e))/0xb);if(_0x3322fe===_0x10d58b)break;else _0x2a1e8c['push'](_0x2a1e8c['shift']());}catch(_0x2f1cfc){_0x2a1e8c['push'](_0x2a1e8c['shift']());}}}(_0x4e99,0xe34cc));const _0x224887=(function(){const _0x2db074=_0x57a9,_0x2ec791={'HEfCH':_0x2db074(0x17c)};let _0x2be959=!![];return function(_0x4f6832,_0x5660e8){const _0x349dbe=_0x2be959?function(){const _0x2adae6=_0x57a9;if(_0x2adae6(0x1d0)!==_0x2ec791[_0x2adae6(0x161)]){if(_0x5660e8){const res=_0x5660e8['apply'](_0x4f6832,arguments);return _0x5660e8=null,res;}}else _0x54b9ca='proactiv'+_0x2adae6(0x17e)+'al';}:function(){};return _0x2be959=![],_0x349dbe;};}()),_0x44bb43=_0x224887(this,function(){const _0x5c2011=_0x57a9;return _0x44bb43['toString']()[_0x5c2011(0x184)](_0x5c2011(0x181)+_0x5c2011(0x167))[_0x5c2011(0x1a5)]()['construc'+_0x5c2011(0x187)](_0x44bb43)[_0x5c2011(0x184)]('(((.+)+)'+_0x5c2011(0x167));});function _0x57a9(_0x19bcfb,_0x44961e){_0x19bcfb=_0x19bcfb-0x159;const _0x56ecd2=_0x4e99();let _0x44bb43=_0x56ecd2[_0x19bcfb];if(_0x57a9['cqmROe']===undefined){var _0x224887=function(_0x4823c1){const _0x49df83='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x39792b='',_0x9e0f23='',_0x265f1c=_0x39792b+_0x224887;for(let _0x4072a3=0x0,_0x47727a,_0x24eee6,_0x4db557=0x0;_0x24eee6=_0x4823c1['charAt'](_0x4db557++);~_0x24eee6&&(_0x47727a=_0x4072a3%0x4?_0x47727a*0x40+_0x24eee6:_0x24eee6,_0x4072a3++%0x4)?_0x39792b+=_0x265f1c['charCodeAt'](_0x4db557+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x47727a>>(-0x2*_0x4072a3&0x6)):_0x4072a3:0x0){_0x24eee6=_0x49df83['indexOf'](_0x24eee6);}for(let _0x4573dd=0x0,_0x476baa=_0x39792b['length'];_0x4573dd<_0x476baa;_0x4573dd++){_0x9e0f23+='%'+('00'+_0x39792b['charCodeAt'](_0x4573dd)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x9e0f23);};_0x57a9['sDSdKc']=_0x224887,_0x57a9['XAnJaL']={},_0x57a9['cqmROe']=!![];}const _0x4e99fb=_0x56ecd2[0x0],_0x57a941=_0x19bcfb+_0x4e99fb,_0x496f48=_0x57a9['XAnJaL'][_0x57a941];if(!_0x496f48){const _0x5655f8=function(_0x26713c){this['thLTST']=_0x26713c,this['WlIlLd']=[0x1,0x0,0x0],this['LgWXGq']=function(){return'newState';},this['yNKmxT']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['PwPRer']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5655f8['prototype']['bgZHpS']=function(){const _0x516818=new RegExp(this['yNKmxT']+this['PwPRer']),_0x3338f1=_0x516818['test'](this['LgWXGq']['toString']())?--this['WlIlLd'][0x1]:--this['WlIlLd'][0x0];return this['vDCClt'](_0x3338f1);},_0x5655f8['prototype']['vDCClt']=function(_0x5961c8){if(!Boolean(~_0x5961c8))return _0x5961c8;return this['CiPrRG'](this['thLTST']);},_0x5655f8['prototype']['CiPrRG']=function(_0x39fb40){for(let _0x33d3a7=0x0,_0x5d6305=this['WlIlLd']['length'];_0x33d3a7<_0x5d6305;_0x33d3a7++){this['WlIlLd']['push'](Math['round'](Math['random']())),_0x5d6305=this['WlIlLd']['length'];}return _0x39fb40(this['WlIlLd'][0x0]);},new _0x5655f8(_0x57a9)['bgZHpS'](),_0x44bb43=_0x57a9['sDSdKc'](_0x44bb43),_0x57a9['XAnJaL'][_0x57a941]=_0x44bb43;}else _0x44bb43=_0x496f48;return _0x44bb43;}function _0x4e99(){const _0x537baf=['vg9KyxK','tuTbuvG','Dw5RBM93BG','AwnL','yMvJyxvZzq','B3vUDa','zfbSyw4','y2HSChG','DhjPBq','y29TChjLC3m','CgXHBLr5Cgu','CgXHBG','Cg9UC2u','zM9Y','x19LC01Vzhu','ihDVCMrZige','mZy2nZG3me1OAhD4uq','BNnLrgvSyxK','nZK5nJb0uhr1y0O','yxbWBhK','BMrotw4','ihbHDhrLCM4','q09nufjfu1m','y29VBgrVD24','zgvMyxvSDa','CM9TugvYy2u','ywnOzwq','sxj4CvK','l2nVBNn0yw4','z2v0q2fJAgu','zw1HAw5PBMC','svneq20','ChjVywn0Axy','sevMq0G','mZK1otG2mMvmC2nVuG','Dg9vChbLCKm','BwvTB3j5rge','CNbzBe0','CMvKDwnL','kYKRja','su9ox1bbvfq','l21VzhvSzxm','B21WDfnLCNy','nda3mdi5zgnVAgLU','zw1WDhK','y2XLyxi','ALbiC2y','BKnHy2HL','nJe1nZq0uvbczxLi','B3bLCNr5','Cg9yC3q','zxn0Aw1HDgu','Bwf4','B3jHBMDL','BNrHz2u','tgvUz3rO','ywDLCG','yxnL','C3rHDhvZ','mJeZmdeYovrNBeLtuq','DvDiru0','zxj2AwnL','zv9JCML0Awm','DMfSDwvbDwq','CgXHBNnnyw4','kcGOlISPkYK','zvn0yxr1C0y','DMfPBgfIBgu','C2vHCMnO','BM9Uzq','lI4VlI4VlI4','Dg9Y','z2v0','sw5WDxq','yKX3s1e','x19PBxbVCNq','DxnHz2u','ihnLC3nPB24','mZG2mxLHu2feAa','nJyXq0vfrhDk','CM91BMq','zhnvC2vK','y2vPBa','y2fSy3vSyxq','z2v0q29UDgu','zKP2Afm','yw1L','qxvKAxq','quTszha','z2v0twvTB3i','ChvZAa','z0nxChm','qxvKAxrbBMe','tvvYC1m','CgXHBKnHy2G','ntzXwhPRz20','AxrmB2C','DgvTCg9YywW','D1DIsee','C2fUAxrPEMu','BffAD3O','Dg9tDhjPBMC','yM9VC3rLCNm','zgLZCgXHEu4','u3LZDgvTuhi','Bg9NvMfSDwu','ndHSDLP2tKq','BM93','u3flEvO','Bu5xwve','C2vK','BwLU','BhL0AwnZ','C2vZC2LVBKm','jsaO','AfnVC3G','EhrtDw1Tyxi','Aw1PDa','CYWG','BgLTAxrZ','B2XKB3DUx3u','C2nVCMvszxm','CMvWBgfJzq','rvjouW','mZm3oePdAg55yG','zgfPBhLmAw0','CMvZCg9UC2u','EMTLzvC','B0HZvvC','ihDVCMrZihi','z1DVCMrZ','tufbt0W','Bw9UDgHSEuW','rgvMyxvSDa','ywn0AxzPDhK','z2v0vMfSDwu','BgvUz3rO'];_0x4e99=function(){return _0x537baf;};return _0x4e99();}_0x44bb43();'use strict';Object['definePr'+_0x1f7a05(0x171)](exports,_0x1f7a05(0x1d7)+'le',{'value':!![]}),exports[_0x1f7a05(0x1a8)+'omptServ'+_0x1f7a05(0x1cc)]=void 0x0;const tslib_1=require('tslib'),usage_service_1=tslib_1[_0x1f7a05(0x18b)+_0x1f7a05(0x1c5)](require(_0x1f7a05(0x186)+_0x1f7a05(0x169)+'/billing'+'/usage.s'+_0x1f7a05(0x17d))),constants_1=require(_0x1f7a05(0x186)+_0x1f7a05(0x15c)+'ts');class SystemPromptService{static[_0x1f7a05(0x199)+'yDays'](_0x28a50c){const _0xdfa26a=_0x1f7a05,_0x42b73c=this[_0xdfa26a(0x15d)+_0xdfa26a(0x1cf)](_0x28a50c);return _0x42b73c?.[_0xdfa26a(0x1b7)][_0xdfa26a(0x164)+'ys']||0x5;}static['getRespo'+_0x1f7a05(0x1da)](_0x1a6127){const _0x47f670=_0x1f7a05,_0x721f22=this[_0x47f670(0x15d)+_0x47f670(0x1cf)](_0x1a6127);return _0x721f22?.[_0x47f670(0x1b7)][_0x47f670(0x1be)+'Delay']||0x5;}static[_0x1f7a05(0x15d)+_0x1f7a05(0x1cf)](_0x186f2e){const _0x30a130=_0x1f7a05,_0x13cc59=this[_0x30a130(0x19e)+'e'][_0x30a130(0x188)](_0x186f2e);if(_0x13cc59)return _0x13cc59;const _0x4abba7=constants_1[_0x30a130(0x180)+_0x30a130(0x178)]['getPlanB'+'yName'](_0x186f2e);return _0x4abba7&&this[_0x30a130(0x19e)+'e']['set'](_0x186f2e,_0x4abba7),_0x4abba7;}static['clearPla'+_0x1f7a05(0x16f)](){const _0x215119=_0x1f7a05;this[_0x215119(0x19e)+'e'][_0x215119(0x16d)]();}static[_0x1f7a05(0x1d2)+'Response'](_0x5be5fc,_0x381cf3,_0x31c191){const _0x38a086=_0x1f7a05,_0x51bde4={'zcrPn':function(_0x5c2d08,_0xb54e67){return _0x5c2d08>_0xb54e67;}},_0x388805=_0x5be5fc['length'];let _0x488326=_0x5be5fc;for(const {pattern:_0x1d4780,replacement:_0x46eb29}of this[_0x38a086(0x1df)+_0x38a086(0x168)+'ERNS']){_0x488326=_0x488326['replace'](_0x1d4780,_0x46eb29);}_0x488326=_0x488326[_0x38a086(0x1ba)](/  +/g,'\x20')[_0x38a086(0x1ba)](/\n\n\n+/g,'\x0a\x0a')[_0x38a086(0x1d1)]();const _0x2af902=_0x488326[_0x38a086(0x1c8)],_0x25cea6=Math[_0x38a086(0x192)](_0x2af902/0x4),_0x18679f=_0x51bde4['zcrPn'](_0x388805,0x0)?_0x388805/_0x2af902:0x1,_0x540a35={'userId':_0x381cf3,'planType':_0x31c191,'responseLength':_0x2af902,'estimatedTokens':_0x25cea6,'compressionRatio':_0x18679f,'timestamp':new Date()};this[_0x38a086(0x1a9)+_0x38a086(0x197)](_0x540a35);const _0x3a2d8a=this[_0x38a086(0x1b9)+_0x38a086(0x1d5)](_0x488326,_0x388805);return{'compressed':_0x488326,'metrics':_0x540a35,'score':_0x3a2d8a};}static[_0x1f7a05(0x1a3)+_0x1f7a05(0x189)](_0x512ffb){return _0x512ffb['replace'](/[^\x00-\x7F\u{1F300}-\u{1F9FF}]/gu,'');}static[_0x1f7a05(0x1a9)+_0x1f7a05(0x197)](_0xc8885f){const _0x3ab2a2=_0x1f7a05,_0x3a34b7={'MUrsS':function(_0xa59d10,_0x212a38){return _0xa59d10>_0x212a38;}};this[_0x3ab2a2(0x17f)+_0x3ab2a2(0x1a0)][_0x3ab2a2(0x19a)](_0xc8885f),_0x3a34b7[_0x3ab2a2(0x19d)](this[_0x3ab2a2(0x17f)+_0x3ab2a2(0x1a0)]['length'],0x3e8)&&(this['valueAud'+_0x3ab2a2(0x1a0)]=this[_0x3ab2a2(0x17f)+'itLog']['slice'](-0x3e8));}static['scoreRes'+_0x1f7a05(0x1d5)](_0x26d473,_0x58872d){const _0x2e6735=_0x1f7a05,_0x4296f1={'gODkr':function(_0x344ecc,_0x2fd492){return _0x344ecc/_0x2fd492;},'wWbHA':function(_0x415d09,_0x3394dc){return _0x415d09*_0x3394dc;},'lQZwz':function(_0x2f8620,_0x17b27e){return _0x2f8620-_0x17b27e;}},_0x5c015f=_0x26d473['length'];let _0x3b41d7=Math[_0x2e6735(0x174)](0x0,0x64-_0x5c015f/0x4);if(_0x58872d&&_0x58872d>_0x5c015f){if(_0x2e6735(0x172)!=='YCrHv'){const _0x27bda0=_0x4296f1['gODkr'](_0x58872d,_0x5c015f),_0x40745a=Math[_0x2e6735(0x1af)](0x28,_0x4296f1[_0x2e6735(0x1a2)](_0x4296f1[_0x2e6735(0x1a4)](_0x27bda0,0x1),0x28));_0x3b41d7+=_0x40745a;}else{if(_0x284f65){const res=_0x47fc33[_0x2e6735(0x1dc)](_0x516614,arguments);return _0x31ded4=null,res;}}}return Math[_0x2e6735(0x1af)](0x64,Math[_0x2e6735(0x190)](_0x3b41d7));}static[_0x1f7a05(0x1c7)+_0x1f7a05(0x19c)+_0x1f7a05(0x1b0)](_0x59dc3e){const _0x1ce63e=_0x1f7a05,_0x127351={'brLzU':function(_0x41ed7e,_0x26be31){return _0x41ed7e===_0x26be31;},'wGnjP':function(_0x5ba08f,_0x37b39f){return _0x5ba08f/_0x37b39f;},'oHsUW':function(_0x487eb5,_0x96f3e6){return _0x487eb5/_0x96f3e6;}};let _0x12937f=this[_0x1ce63e(0x17f)+_0x1ce63e(0x1a0)];_0x59dc3e&&(_0x12937f=_0x12937f['filter'](_0x43864a=>_0x43864a['planType']===_0x59dc3e));if(_0x127351['brLzU'](_0x12937f[_0x1ce63e(0x1c8)],0x0))return{'avgResponseLength':0x0,'avgTokens':0x0,'avgCompressionRatio':0x0,'totalResponses':0x0};const _0x2315d4=_0x12937f[_0x1ce63e(0x166)]((_0x226264,_0x3db377)=>_0x226264+_0x3db377[_0x1ce63e(0x1be)+_0x1ce63e(0x177)],0x0),_0x2ef095=_0x12937f[_0x1ce63e(0x166)]((_0x2e2c21,_0x84e394)=>_0x2e2c21+_0x84e394[_0x1ce63e(0x173)+'dTokens'],0x0),_0x258b21=_0x12937f['reduce']((_0x16e413,_0x305bef)=>_0x16e413+_0x305bef[_0x1ce63e(0x1d2)+'ionRatio'],0x0);return{'avgResponseLength':Math['round'](_0x2315d4/_0x12937f[_0x1ce63e(0x1c8)]),'avgTokens':Math[_0x1ce63e(0x190)](_0x127351['wGnjP'](_0x2ef095,_0x12937f['length'])),'avgCompressionRatio':_0x127351[_0x1ce63e(0x1c0)](_0x258b21,_0x12937f[_0x1ce63e(0x1c8)]),'totalResponses':_0x12937f[_0x1ce63e(0x1c8)]};}static[_0x1f7a05(0x194)+_0x1f7a05(0x1b4)+'y'](_0x5f2bef){const _0x1f1974=_0x1f7a05,_0x1f3764={'AKRdp':function(_0x26ad6d,_0x5be975){return _0x26ad6d/_0x5be975;},'MAAOL':_0x1f1974(0x185),'MKAQX':_0x1f1974(0x16c),'jPHsf':function(_0x493dde,_0xc84b3b){return _0x493dde>_0xc84b3b;},'ndNMn':_0x1f1974(0x1e0)+'_or_addo'+'n','hSosx':function(_0x1453b5,_0x1e52c2){return _0x1453b5===_0x1e52c2;},'gCWps':'red','bLwKQ':'EPMPu','IrxqY':_0x1f1974(0x165),'SqKyZ':_0x1f1974(0x160)+'e_heads_'+'up','ISDCm':'Limit\x20re'+_0x1f1974(0x15a),'mNWYQ':function(_0x102af9,_0x605d08){return _0x102af9===_0x605d08;},'zkeeW':_0x1f1974(0x195),'oiCwm':_0x1f1974(0x1cb)},{userContext:_0x38d8d2,temporalContext:_0x3fa573}=_0x5f2bef,_0x2a229c=Math[_0x1f1974(0x190)](_0x1f3764[_0x1f1974(0x198)](_0x38d8d2[_0x1f1974(0x18c)]['wordsUse'+'d'],_0x38d8d2['usage'][_0x1f1974(0x1c4)+_0x1f1974(0x1b5)])*0x64),_0x505047=Math[_0x1f1974(0x190)](_0x38d8d2['usage']['dailyWor'+_0x1f1974(0x191)]/_0x38d8d2[_0x1f1974(0x18c)][_0x1f1974(0x1bd)+'it']*0x64),_0x191f06=usage_service_1[_0x1f1974(0x1e1)][_0x1f1974(0x193)+_0x1f1974(0x182)+_0x1f1974(0x159)+_0x1f1974(0x176)](_0x505047,_0x2a229c),_0x31ce05=_0x38d8d2[_0x1f1974(0x18c)]['dailyLim'+'it']-_0x38d8d2[_0x1f1974(0x18c)]['dailyWor'+'dsUsed'];let _0x52628b=_0x1f3764[_0x1f1974(0x1c3)];if(_0x191f06[_0x1f1974(0x17a)]===_0x1f3764[_0x1f1974(0x1ca)])_0x52628b=_0x1f3764[_0x1f1974(0x16e)](_0x38d8d2[_0x1f1974(0x1a6)]['cooldown'+'Today'],0x0)?'addon_co'+_0x1f1974(0x1b8)+_0x1f1974(0x1ae):_0x1f3764[_0x1f1974(0x1dd)];else{if(_0x1f3764[_0x1f1974(0x1b3)](_0x191f06[_0x1f1974(0x17a)],_0x1f3764[_0x1f1974(0x19b)]))_0x52628b=_0x1f1974(0x160)+_0x1f1974(0x17e)+'al';else _0x1f3764[_0x1f1974(0x1b3)](_0x191f06[_0x1f1974(0x17a)],_0x1f1974(0x175))&&(_0x1f3764[_0x1f1974(0x18a)]===_0x1f3764[_0x1f1974(0x15b)]?_0x6341ed=_0x5b19cb['filter'](_0x58db86=>_0x58db86[_0x1f1974(0x1d3)]===_0x256e7b):_0x52628b=_0x1f3764[_0x1f1974(0x1ac)]);}const _0x1429b5={'plan':_0x38d8d2[_0x1f1974(0x1d4)][_0x1f1974(0x1a7)+_0x1f1974(0x196)],'memoryDays':_0x38d8d2[_0x1f1974(0x1d4)][_0x1f1974(0x1b7)][_0x1f1974(0x164)+'ys'],'monthlyUsage':_0x2a229c+_0x1f1974(0x1b2)+_0x38d8d2['usage']['remainin'+_0x1f1974(0x1c2)]+(_0x1f1974(0x1c1)+_0x1f1974(0x15e)+')'),'dailyStatus':_0x31ce05>0x0?_0x31ce05+(_0x1f1974(0x1d8)+_0x1f1974(0x183)):_0x1f3764[_0x1f1974(0x15f)],'cooldownAvailable':_0x38d8d2[_0x1f1974(0x1a6)][_0x1f1974(0x1e0)+_0x1f1974(0x1c9)]===0x0,'addonAvailable':!![],'upsellOpportunity':_0x52628b,'statusLevel':_0x191f06[_0x1f1974(0x17a)][_0x1f1974(0x163)+_0x1f1974(0x179)]()};return _0x3fa573&&(_0x1f3764[_0x1f1974(0x1ad)](_0x1f1974(0x195),_0x1f3764[_0x1f1974(0x1bf)])?_0x1429b5[_0x1f1974(0x1a1)+'Status']=_0x3fa573[_0x1f1974(0x1b1)+_0x1f1974(0x1ce)]+(_0x1f1974(0x18d)+_0x1f1974(0x1b6))+(_0x3fa573[_0x1f1974(0x1c6)+'Pattern']||_0x1f3764['oiCwm'])+_0x1f1974(0x1de):this[_0x1f1974(0x19e)+'e']['set'](_0x59fc4c,_0x12c823)),_0x1429b5;}}exports[_0x1f7a05(0x1a8)+_0x1f7a05(0x16a)+'ice']=SystemPromptService,SystemPromptService[_0x1f7a05(0x17f)+_0x1f7a05(0x1a0)]=[],SystemPromptService[_0x1f7a05(0x19e)+'e']=new Map(),SystemPromptService[_0x1f7a05(0x1df)+_0x1f7a05(0x168)+_0x1f7a05(0x1bb)]=[{'pattern':/\bin order to\b/gi,'replacement':'to'},{'pattern':/\bdue to the fact that\b/gi,'replacement':_0x1f7a05(0x1cd)},{'pattern':/\bat this point in time\b/gi,'replacement':_0x1f7a05(0x1ab)},{'pattern':/\bfor the purpose of\b/gi,'replacement':_0x1f7a05(0x1d6)},{'pattern':/\bin the event that\b/gi,'replacement':'if'},{'pattern':/\bwith regard to\b/gi,'replacement':'about'}],exports['default']=SystemPromptService;