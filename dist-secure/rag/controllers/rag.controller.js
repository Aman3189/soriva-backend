const _0x2daa70=_0x2af8;(function(_0x3a0932,_0x43c410){const _0xf5bbb5=_0x2af8,_0x14b838=_0x3a0932();while(!![]){try{const _0x48e1b2=-parseInt(_0xf5bbb5(0x207))/0x1*(parseInt(_0xf5bbb5(0x23f))/0x2)+-parseInt(_0xf5bbb5(0x354))/0x3+-parseInt(_0xf5bbb5(0x312))/0x4+-parseInt(_0xf5bbb5(0x28f))/0x5+parseInt(_0xf5bbb5(0x282))/0x6*(parseInt(_0xf5bbb5(0x2d6))/0x7)+parseInt(_0xf5bbb5(0x344))/0x8+-parseInt(_0xf5bbb5(0x21b))/0x9;if(_0x48e1b2===_0x43c410)break;else _0x14b838['push'](_0x14b838['shift']());}catch(_0x14265a){_0x14b838['push'](_0x14b838['shift']());}}}(_0x4f9b,0x6b95d));const _0x1f671d=(function(){let _0xbb6527=!![];return function(_0x394eed,_0xb64b63){const _0x4c7aa1=_0xbb6527?function(){const _0x504e20=_0x2af8;if(_0xb64b63){const res=_0xb64b63[_0x504e20(0x1e5)](_0x394eed,arguments);return _0xb64b63=null,res;}}:function(){};return _0xbb6527=![],_0x4c7aa1;};}()),_0x3eaf72=_0x1f671d(this,function(){const _0x5f12ae=_0x2af8,_0x195bf2={'tNoTH':_0x5f12ae(0x2cb)+_0x5f12ae(0x37b)};return _0x3eaf72[_0x5f12ae(0x34e)]()[_0x5f12ae(0x364)](_0x195bf2['tNoTH'])[_0x5f12ae(0x34e)]()[_0x5f12ae(0x26c)+_0x5f12ae(0x359)](_0x3eaf72)[_0x5f12ae(0x364)](_0x5f12ae(0x2cb)+'+)+$');});_0x3eaf72();'use strict';Object[_0x2daa70(0x294)+_0x2daa70(0x20a)](exports,_0x2daa70(0x21d)+'le',{'value':!![]}),exports[_0x2daa70(0x35e)+'oller']=void 0x0,exports[_0x2daa70(0x24c)+_0x2daa70(0x21e)+_0x2daa70(0x244)]=requestContextMiddleware;const uuid_1=require('uuid'),rag_service_1=require(_0x2daa70(0x29a)+_0x2daa70(0x371)+'service');function _0x2af8(_0x3a9d83,_0x32bcf3){_0x3a9d83=_0x3a9d83-0x1e5;const _0x514dbd=_0x4f9b();let _0x3eaf72=_0x514dbd[_0x3a9d83];if(_0x2af8['ZeFVvR']===undefined){var _0x1f671d=function(_0xd5020a){const _0x4da9ab='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1532df='',_0x2864bf='',_0x2ec495=_0x1532df+_0x1f671d;for(let _0x46ee92=0x0,_0x1a72b5,_0x4d0d0c,_0x328ad8=0x0;_0x4d0d0c=_0xd5020a['charAt'](_0x328ad8++);~_0x4d0d0c&&(_0x1a72b5=_0x46ee92%0x4?_0x1a72b5*0x40+_0x4d0d0c:_0x4d0d0c,_0x46ee92++%0x4)?_0x1532df+=_0x2ec495['charCodeAt'](_0x328ad8+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x1a72b5>>(-0x2*_0x46ee92&0x6)):_0x46ee92:0x0){_0x4d0d0c=_0x4da9ab['indexOf'](_0x4d0d0c);}for(let _0x2935a2=0x0,_0x2108ab=_0x1532df['length'];_0x2935a2<_0x2108ab;_0x2935a2++){_0x2864bf+='%'+('00'+_0x1532df['charCodeAt'](_0x2935a2)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2864bf);};_0x2af8['msmFKA']=_0x1f671d,_0x2af8['zFlTlc']={},_0x2af8['ZeFVvR']=!![];}const _0x4f9bcd=_0x514dbd[0x0],_0x2af836=_0x3a9d83+_0x4f9bcd,_0x2d976e=_0x2af8['zFlTlc'][_0x2af836];if(!_0x2d976e){const _0x41ed26=function(_0x34d938){this['xMGOAs']=_0x34d938,this['QoebWx']=[0x1,0x0,0x0],this['kKzXLf']=function(){return'newState';},this['MXwrpV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qSphpc']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x41ed26['prototype']['QeMgGH']=function(){const _0x1cf7b2=new RegExp(this['MXwrpV']+this['qSphpc']),_0x23366d=_0x1cf7b2['test'](this['kKzXLf']['toString']())?--this['QoebWx'][0x1]:--this['QoebWx'][0x0];return this['MRMELD'](_0x23366d);},_0x41ed26['prototype']['MRMELD']=function(_0x47baed){if(!Boolean(~_0x47baed))return _0x47baed;return this['CzkXjq'](this['xMGOAs']);},_0x41ed26['prototype']['CzkXjq']=function(_0x5e55fe){for(let _0x5b9b97=0x0,_0x1e0fed=this['QoebWx']['length'];_0x5b9b97<_0x1e0fed;_0x5b9b97++){this['QoebWx']['push'](Math['round'](Math['random']())),_0x1e0fed=this['QoebWx']['length'];}return _0x5e55fe(this['QoebWx'][0x0]);},new _0x41ed26(_0x2af8)['QeMgGH'](),_0x3eaf72=_0x2af8['msmFKA'](_0x3eaf72),_0x2af8['zFlTlc'][_0x2af836]=_0x3eaf72;}else _0x3eaf72=_0x2d976e;return _0x3eaf72;}class ControllerConfigService{constructor(){const _0x2a767a=_0x2daa70;this[_0x2a767a(0x2eb)]=this[_0x2a767a(0x336)+_0x2a767a(0x37a)+'n']();}static['getInsta'+_0x2daa70(0x319)](){const _0x5ed1d4=_0x2daa70;return!ControllerConfigService[_0x5ed1d4(0x224)]&&(ControllerConfigService[_0x5ed1d4(0x224)]=new ControllerConfigService()),ControllerConfigService[_0x5ed1d4(0x224)];}[_0x2daa70(0x336)+_0x2daa70(0x37a)+'n'](){const _0x3917f5=_0x2daa70,_0x56d520={'rYTTv':'true','DRqZm':function(_0x4686f7,_0x42e7c1){return _0x4686f7!==_0x42e7c1;},'ptxhB':_0x3917f5(0x2e8),'xiYBx':_0x3917f5(0x26b),'xvsLC':function(_0x471371,_0x2b44cc,_0x35afe2){return _0x471371(_0x2b44cc,_0x35afe2);},'vXRqT':function(_0x2ccd0f,_0x24b1d2,_0x3fd265){return _0x2ccd0f(_0x24b1d2,_0x3fd265);},'bkiAA':_0x3917f5(0x32d)};return{'enableDetailedErrors':process['env'][_0x3917f5(0x2d1)+'ILED_ERR'+'ORS']===_0x56d520[_0x3917f5(0x2c6)],'enableRequestLogging':process[_0x3917f5(0x384)]['RAG_REQU'+_0x3917f5(0x318)+'ING']!==_0x3917f5(0x2e8),'enablePerformanceTracking':_0x56d520[_0x3917f5(0x26d)](process[_0x3917f5(0x384)][_0x3917f5(0x249)+_0x3917f5(0x30e)+_0x3917f5(0x36d)],_0x56d520[_0x3917f5(0x331)]),'maxUploadSize':parseInt(process[_0x3917f5(0x384)][_0x3917f5(0x256)+_0x3917f5(0x2c8)+'IZE']||_0x56d520['xiYBx'],0xa),'allowedOrigins':(process[_0x3917f5(0x384)]['RAG_ALLO'+_0x3917f5(0x2dd)+_0x3917f5(0x2f8)]||'*')[_0x3917f5(0x1fb)](','),'rateLimitWindow':_0x56d520[_0x3917f5(0x2a1)](parseInt,process['env']['RAG_RATE'+_0x3917f5(0x31b)+_0x3917f5(0x307)]||_0x3917f5(0x2a2),0xa),'rateLimitMax':_0x56d520[_0x3917f5(0x36f)](parseInt,process[_0x3917f5(0x384)][_0x3917f5(0x345)+_0x3917f5(0x2fa)+'AX']||_0x56d520['bkiAA'],0xa),'logLevel':process[_0x3917f5(0x384)]['RAG_LOG_'+_0x3917f5(0x2b6)]||_0x3917f5(0x34d)};}[_0x2daa70(0x22f)](){const _0x49efad=_0x2daa70;return this[_0x49efad(0x2eb)];}}class Logger{static[_0x2daa70(0x230)+'tamp'](){const _0x3e35b3=_0x2daa70;return new Date()[_0x3e35b3(0x301)+'ing']();}static[_0x2daa70(0x2c5)+_0x2daa70(0x370)](_0x4e9602,_0x17e230,_0x391dc9){const _0x2d8d0b=_0x2daa70,_0x13ffa6=this['getTimes'+'tamp'](),_0x15ed8e=_0x391dc9?.[_0x2d8d0b(0x317)+'d']?'['+_0x391dc9[_0x2d8d0b(0x317)+'d'][_0x2d8d0b(0x27c)](0x0,0x8)+']':'',_0x48b9e8=_0x391dc9?.[_0x2d8d0b(0x25c)]?_0x2d8d0b(0x2be)+_0x391dc9[_0x2d8d0b(0x25c)][_0x2d8d0b(0x27c)](0x0,0x8)+']':'';return _0x13ffa6+'\x20'+_0x4e9602+'\x20'+_0x15ed8e+_0x48b9e8+'\x20'+_0x17e230;}static['info'](_0x33fbde,_0x1c863b){const _0x55eb32=_0x2daa70,_0x32abae={'VcnjQ':function(_0x5a6daf,_0x269cec){return _0x5a6daf===_0x269cec;},'nkWib':'info','bUbiK':_0x55eb32(0x2db)},_0x531f98=ControllerConfigService[_0x55eb32(0x284)+_0x55eb32(0x319)]()[_0x55eb32(0x22f)]();(_0x32abae['VcnjQ'](_0x531f98['logLevel'],'debug')||_0x531f98[_0x55eb32(0x322)]===_0x32abae[_0x55eb32(0x1f7)])&&console[_0x55eb32(0x2de)](''+this[_0x55eb32(0x302)][_0x55eb32(0x293)]+this[_0x55eb32(0x2c5)+'ssage'](_0x32abae['bUbiK'],_0x33fbde,_0x1c863b)+this[_0x55eb32(0x302)][_0x55eb32(0x2b8)]);}static['success'](_0x4ef589,_0x18feb4){const _0x27a826=_0x2daa70,_0x512c43={'tgRiZ':function(_0x3566b9,_0x958e7f){return _0x3566b9<_0x958e7f;},'mhRnh':function(_0x5e4e23,_0x396df8){return _0x5e4e23===_0x396df8;},'ygnCp':_0x27a826(0x32f),'VNJoQ':_0x27a826(0x36c),'tUPbq':_0x27a826(0x28b)},_0x10cb34=ControllerConfigService[_0x27a826(0x284)+_0x27a826(0x319)]()[_0x27a826(0x22f)]();if(_0x512c43[_0x27a826(0x2f3)](_0x10cb34[_0x27a826(0x322)],_0x512c43[_0x27a826(0x376)])||_0x10cb34[_0x27a826(0x322)]==='info'){if('lDirs'!==_0x512c43[_0x27a826(0x30f)])console[_0x27a826(0x2de)](''+this[_0x27a826(0x302)][_0x27a826(0x327)]+this[_0x27a826(0x2c5)+_0x27a826(0x370)](_0x512c43['tUPbq'],_0x4ef589,_0x18feb4)+this[_0x27a826(0x302)][_0x27a826(0x2b8)]);else{const _0x339cf3=_0x30ddcf['now'](),_0x2ac824=this[_0x27a826(0x374)][_0x27a826(0x22f)](_0x3ef7c6)||[],_0x46da80=_0x2ac824['filter'](_0x45c0b6=>_0x339cf3-_0x45c0b6<_0x2b3f53);if(_0x46da80[_0x27a826(0x31e)]>=_0x47ae1e)return![];return _0x46da80[_0x27a826(0x2fb)](_0x339cf3),this['requests'][_0x27a826(0x2da)](_0x2a034b,_0x46da80),_0x512c43['tgRiZ'](_0x4239ef[_0x27a826(0x2ed)](),0.01)&&this[_0x27a826(0x201)](_0xd03b9b),!![];}}}static['warn'](_0x437b17,_0x1e8986){const _0x24bc32=_0x2daa70,_0x10498e={'HRAQj':function(_0xccfd97,_0x1684dd){return _0xccfd97!==_0x1684dd;},'KplMa':_0x24bc32(0x29d)},_0xa47e44=ControllerConfigService['getInsta'+_0x24bc32(0x319)]()[_0x24bc32(0x22f)]();_0x10498e[_0x24bc32(0x339)](_0xa47e44[_0x24bc32(0x322)],_0x10498e['KplMa'])&&console[_0x24bc32(0x276)](''+this[_0x24bc32(0x302)][_0x24bc32(0x1f2)]+this[_0x24bc32(0x2c5)+'ssage'](_0x24bc32(0x2e5),_0x437b17,_0x1e8986)+this[_0x24bc32(0x302)]['reset']);}static[_0x2daa70(0x29d)](_0xdb49c7,_0x312603,_0x3b0d39){const _0x155629=_0x2daa70,_0x18f353={'ipcfY':_0x155629(0x2bb),'CLsOs':'AYlHo'};console[_0x155629(0x29d)](''+this[_0x155629(0x302)][_0x155629(0x211)]+this[_0x155629(0x2c5)+_0x155629(0x370)](_0x18f353[_0x155629(0x313)],_0xdb49c7,_0x3b0d39)+this[_0x155629(0x302)][_0x155629(0x2b8)]);if(_0x312603){if(_0x155629(0x259)===_0x18f353[_0x155629(0x262)])return this[_0x155629(0x29d)](_0x1e89b7[_0x155629(0x288)],_0x2cf073[_0x155629(0x30c)],_0x4fdeb4,_0x1572ec['details'],0x190);else console[_0x155629(0x29d)](''+this[_0x155629(0x302)][_0x155629(0x211)]+(_0x312603['stack']||_0x312603)+this[_0x155629(0x302)]['reset']);}}static['debug'](_0xe1bd47,_0x5310fe,_0x463057){const _0x5a1da5=_0x2daa70,_0x559148=ControllerConfigService[_0x5a1da5(0x284)+_0x5a1da5(0x319)]()['get']();_0x559148[_0x5a1da5(0x322)]===_0x5a1da5(0x32f)&&(console['log'](''+this[_0x5a1da5(0x302)][_0x5a1da5(0x2d2)]+this[_0x5a1da5(0x2c5)+'ssage'](_0x5a1da5(0x2d5),_0xe1bd47,_0x463057)+this['colors']['reset']),_0x5310fe&&console[_0x5a1da5(0x2de)](''+this[_0x5a1da5(0x302)]['dim']+JSON['stringif'+'y'](_0x5310fe,null,0x2)+this[_0x5a1da5(0x302)]['reset']));}static['request'](req,_0x58012f){const _0x2a9765=_0x2daa70,_0x596cfe={'IpxMn':function(_0x44df08,_0x5ad53a){return _0x44df08===_0x5ad53a;},'kZQmM':function(_0x5c0888,_0x4b76fe){return _0x5c0888!==_0x4b76fe;},'AlkKr':'sFiQS','ZQWTk':_0x2a9765(0x1f8)},_0x1c8b4c=ControllerConfigService[_0x2a9765(0x284)+_0x2a9765(0x319)]()[_0x2a9765(0x22f)]();if(_0x1c8b4c[_0x2a9765(0x2cf)+_0x2a9765(0x267)+'ging']){if(_0x596cfe[_0x2a9765(0x32e)](_0x596cfe[_0x2a9765(0x329)],_0x596cfe['ZQWTk']))this[_0x2a9765(0x34d)](this[_0x2a9765(0x302)][_0x2a9765(0x37d)]+'â†’\x20'+req[_0x2a9765(0x27d)]+'\x20'+req[_0x2a9765(0x30b)]+this['colors'][_0x2a9765(0x2b8)],_0x58012f);else{const _0x43d102=_0x3bfcbb[_0x2a9765(0x382)]();for(const [_0x3df90d,_0x5273b2]of this['requests']['entries']()){const _0xd11cc8=_0x5273b2[_0x2a9765(0x2ff)](_0x3d2134=>_0x43d102-_0x3d2134<_0x351dbe);_0x596cfe[_0x2a9765(0x2cd)](_0xd11cc8[_0x2a9765(0x31e)],0x0)?this[_0x2a9765(0x374)][_0x2a9765(0x27e)](_0x3df90d):this['requests'][_0x2a9765(0x2da)](_0x3df90d,_0xd11cc8);}}}}static[_0x2daa70(0x22b)](_0x39337e,_0x5d84a6,_0x2da43f){const _0x5f179b=_0x2daa70,_0x28f68f={'REOMH':function(_0x43bfe5,_0x4e8a39){return _0x43bfe5<_0x4e8a39;}},_0x314094=ControllerConfigService[_0x5f179b(0x284)+'nce']()['get']();if(_0x314094['enableRe'+_0x5f179b(0x267)+_0x5f179b(0x236)]){const _0x3401cd=_0x28f68f['REOMH'](_0x39337e,0x190)?this[_0x5f179b(0x302)][_0x5f179b(0x327)]:this[_0x5f179b(0x302)]['red'];this[_0x5f179b(0x34d)](_0x3401cd+'â†\x20'+_0x39337e+'\x20('+_0x5d84a6+'ms)'+this[_0x5f179b(0x302)][_0x5f179b(0x2b8)],_0x2da43f);}}}Logger['colors']={'reset':'\x1b[0m','bright':_0x2daa70(0x2ab),'dim':_0x2daa70(0x325),'red':'\x1b[31m','green':'\x1b[32m','yellow':'\x1b[33m','blue':_0x2daa70(0x349),'magenta':_0x2daa70(0x272),'cyan':_0x2daa70(0x1eb),'white':_0x2daa70(0x386)};class PerformanceTracker{static[_0x2daa70(0x298)](_0x33c231,_0x2427aa,_0x39607c){const _0x3c08f8=_0x2daa70,_0x38fdac={'narQB':'âš ï¸\x20SLOW'},_0x227db4=ControllerConfigService[_0x3c08f8(0x284)+'nce']()[_0x3c08f8(0x22f)]();if(!_0x227db4[_0x3c08f8(0x2c3)+_0x3c08f8(0x35b)+_0x3c08f8(0x2a4)+'g'])return;let _0x142b16;if(_0x2427aa<this[_0x3c08f8(0x335)+'ds'][_0x3c08f8(0x2ac)])_0x142b16='âš¡\x20FAST';else{if(_0x2427aa<this['threshol'+'ds']['normal'])_0x142b16=_0x3c08f8(0x248);else _0x2427aa<this[_0x3c08f8(0x335)+'ds'][_0x3c08f8(0x2cc)]?_0x142b16=_0x38fdac[_0x3c08f8(0x373)]:_0x142b16='ðŸŒ\x20VERY\x20S'+_0x3c08f8(0x2ad);}Logger[_0x3c08f8(0x32f)](_0x142b16+'\x20'+_0x33c231+':\x20'+_0x2427aa+'ms',undefined,_0x39607c);}}PerformanceTracker[_0x2daa70(0x335)+'ds']={'fast':0x64,'normal':0x1f4,'slow':0x3e8,'verySlow':0x1388};class RateLimiter{static[_0x2daa70(0x2f2)](_0x19efe8,_0x269231,_0x158152){const _0x2fe945=_0x2daa70,_0xb63abe={'DxEBz':'threshol'+_0x2fe945(0x279)+_0x2fe945(0x1fe)+_0x2fe945(0x206)+_0x2fe945(0x30a)+'\x201','tfKph':function(_0x5e3754,_0x60fd21){return _0x5e3754>=_0x60fd21;},'diMpV':function(_0x4edb2c,_0x4d7013){return _0x4edb2c<_0x4d7013;},'YVzGp':_0x2fe945(0x218)},_0x525627=Date[_0x2fe945(0x382)](),_0x287ff3=this[_0x2fe945(0x374)][_0x2fe945(0x22f)](_0x19efe8)||[],_0x4c8f76=_0x287ff3[_0x2fe945(0x2ff)](_0x3b2eaf=>_0x525627-_0x3b2eaf<_0x158152);if(_0xb63abe['tfKph'](_0x4c8f76['length'],_0x269231))return![];_0x4c8f76[_0x2fe945(0x2fb)](_0x525627),this[_0x2fe945(0x374)]['set'](_0x19efe8,_0x4c8f76);if(_0xb63abe['diMpV'](Math[_0x2fe945(0x2ed)](),0.01)){if(_0xb63abe[_0x2fe945(0x20b)]===_0x2fe945(0x218))this[_0x2fe945(0x201)](_0x158152);else{const _0x16c241=_0x3f669a(_0xc5a545['threshol'+'d']);if(_0x5704a2(_0x16c241)||_0x16c241<0x0||_0x16c241>0x1)throw new _0x4a023c(_0xb63abe[_0x2fe945(0x2b4)]);}}return!![];}static[_0x2daa70(0x201)](_0xab8e02){const _0x13423e=_0x2daa70,_0x4c2bd1=Date[_0x13423e(0x382)]();for(const [_0x2e1d3b,_0x54205b]of this[_0x13423e(0x374)]['entries']()){if(_0x13423e(0x363)===_0x13423e(0x2c7))return this['error'](_0x3f1413[_0x13423e(0x288)],_0xb91714[_0x13423e(0x30c)],_0xcacf1c,_0xe84994[_0x13423e(0x383)],0x190);else{const _0x53c3b4=_0x54205b[_0x13423e(0x2ff)](_0x368418=>_0x4c2bd1-_0x368418<_0xab8e02);_0x53c3b4['length']===0x0?this[_0x13423e(0x374)][_0x13423e(0x27e)](_0x2e1d3b):this[_0x13423e(0x374)][_0x13423e(0x2da)](_0x2e1d3b,_0x53c3b4);}}}static[_0x2daa70(0x2b8)](_0x320ce3){const _0x342be3=_0x2daa70;this[_0x342be3(0x374)]['delete'](_0x320ce3);}}RateLimiter[_0x2daa70(0x374)]=new Map();class RequestValidator{static[_0x2daa70(0x37e)+_0x2daa70(0x26f)+_0x2daa70(0x242)](_0x5f17f2){const _0xfebed2=_0x2daa70,_0x369532={'jzJpy':'UNAUTHOR'+_0xfebed2(0x381),'Xgnie':_0xfebed2(0x232)+_0xfebed2(0x274)+_0xfebed2(0x260)+_0xfebed2(0x216),'mDPLD':_0xfebed2(0x238)+_0xfebed2(0x347)+_0xfebed2(0x2e2),'VczoB':_0xfebed2(0x29e)+'ig\x20error','gnjJZ':_0xfebed2(0x305)+'ormation'+_0xfebed2(0x2b2)+_0xfebed2(0x1e9),'yaMIM':'fileSize','stIVN':_0xfebed2(0x346)+'rl','bmQyv':function(_0x494267,_0x334f48){return _0x494267!==_0x334f48;},'YYhdd':_0xfebed2(0x27a),'XJxPE':_0xfebed2(0x263)+_0xfebed2(0x1f5)+'e'};if(!_0x5f17f2[_0xfebed2(0x240)])throw new Error(_0x369532[_0xfebed2(0x2bd)]);const _0x542849=[_0xfebed2(0x2bc),_0xfebed2(0x299)+_0xfebed2(0x2f1),_0xfebed2(0x35f),_0x369532[_0xfebed2(0x29c)],_0xfebed2(0x208),_0x369532[_0xfebed2(0x231)]];for(const _0x15cacf of _0x542849){if(!_0x5f17f2[_0xfebed2(0x240)][_0x15cacf])throw new Error(_0xfebed2(0x219)+_0x15cacf+(_0xfebed2(0x2b2)+_0xfebed2(0x1e9)));}if(_0x369532[_0xfebed2(0x2e6)](typeof _0x5f17f2['file'][_0xfebed2(0x2b1)],'number')||_0x5f17f2['file'][_0xfebed2(0x2b1)]<=0x0){if(_0xfebed2(0x362)!==_0x369532[_0xfebed2(0x205)])throw new Error(_0x369532[_0xfebed2(0x2c1)]);else{const _0x370dd1=this['createCo'+'ntext'](req);_0x58fc10['request'](req,_0x370dd1);try{if(!req[_0xfebed2(0x235)]?.[_0xfebed2(0x25c)]){const _0x3b4a7c=_0x247278['error'](_0x369532[_0xfebed2(0x2fe)],_0xfebed2(0x2a7)+_0xfebed2(0x2d0)+_0xfebed2(0x295),_0x370dd1[_0xfebed2(0x317)+'d'],_0x3382cf,0x191);_0x593c52[_0xfebed2(0x22b)](_0x3b4a7c[_0xfebed2(0x2a8)+'de'],_0x328bf2['now']()-_0x370dd1[_0xfebed2(0x2ef)+'e'],_0x370dd1),res['status'](_0x3b4a7c[_0xfebed2(0x2a8)+'de'])[_0xfebed2(0x25b)](_0x3b4a7c['response']);return;}_0x4d5ebf[_0xfebed2(0x34d)](_0x369532[_0xfebed2(0x33d)],_0x370dd1);const _0x230fdc=this['ragServi'+'ce']['getConfi'+_0xfebed2(0x1f0)](),_0x3a9ad9=_0x2374dd['now']()-_0x370dd1[_0xfebed2(0x2ef)+'e'];_0x44382a[_0xfebed2(0x35a)](_0x369532[_0xfebed2(0x366)],_0x370dd1);const _0x481fec=_0x38d20f[_0xfebed2(0x35a)](_0x230fdc,_0x370dd1['requestI'+'d'],{'processingTime':_0x3a9ad9,'userId':req[_0xfebed2(0x235)][_0xfebed2(0x25c)]});_0x4971a9['response'](0xc8,_0x3a9ad9,_0x370dd1),res[_0xfebed2(0x210)](0xc8)[_0xfebed2(0x25b)](_0x481fec);}catch(_0x35e91d){_0x1cd548[_0xfebed2(0x29d)](_0x369532[_0xfebed2(0x356)],_0x35e91d,_0x370dd1);const _0x4fe089=_0x55df17[_0xfebed2(0x28e)+_0xfebed2(0x226)](_0x35e91d,_0x370dd1[_0xfebed2(0x317)+'d']);_0x205936[_0xfebed2(0x22b)](_0x4fe089['statusCo'+'de'],_0x4862ea[_0xfebed2(0x382)]()-_0x370dd1[_0xfebed2(0x2ef)+'e'],_0x370dd1),res[_0xfebed2(0x210)](_0x4fe089[_0xfebed2(0x2a8)+'de'])[_0xfebed2(0x25b)](_0x4fe089['response']);}}}}static[_0x2daa70(0x37e)+_0x2daa70(0x2d7)+_0x2daa70(0x2c9)](_0x3fd69c){const _0x28c836=_0x2daa70,_0x2946fc={'lwYbD':_0x28c836(0x321)+'it\x20excee'+_0x28c836(0x1ef),'UDjYX':'RATE_LIM'+_0x28c836(0x367)+_0x28c836(0x29b),'ZDeNT':'Too\x20many'+_0x28c836(0x32b)+_0x28c836(0x33e)+'e\x20try\x20ag'+_0x28c836(0x308)+'r.','bhGvm':function(_0x5d46c7,_0x196d44){return _0x5d46c7!==_0x196d44;},'wnesX':_0x28c836(0x2a6),'agTGP':_0x28c836(0x289)+_0x28c836(0x316)+_0x28c836(0x220)+_0x28c836(0x20d)+'non-empt'+_0x28c836(0x254),'OYSJi':_0x28c836(0x2f0),'wsUqd':function(_0x8176d3,_0x2bffb3,_0x528311){return _0x8176d3(_0x2bffb3,_0x528311);},'wbzcl':_0x28c836(0x27f),'fmCvn':_0x28c836(0x237)+'t\x20be\x20a\x20n'+_0x28c836(0x2ec)+_0x28c836(0x35d)+'and\x20100','BCEnN':function(_0xafa485,_0xba0bd1){return _0xafa485===_0xba0bd1;},'MZhjt':_0x28c836(0x229),'acZsb':function(_0x5dba8b,_0x340cce){return _0x5dba8b(_0x340cce);},'cdXda':function(_0x1ae920,_0x4847ce){return _0x1ae920(_0x4847ce);},'YBRwR':function(_0x589001,_0x3d4035){return _0x589001<_0x3d4035;}};if(!_0x3fd69c[_0x28c836(0x380)]||_0x2946fc[_0x28c836(0x270)](typeof _0x3fd69c[_0x28c836(0x380)],_0x2946fc[_0x28c836(0x2aa)])||_0x3fd69c[_0x28c836(0x380)][_0x28c836(0x2b9)]()[_0x28c836(0x31e)]===0x0)throw new Error(_0x2946fc['agTGP']);if(_0x3fd69c['topK']!==undefined){if(_0x28c836(0x2f0)!==_0x2946fc[_0x28c836(0x1f9)])this[_0x28c836(0x201)](_0x226c67);else{const _0x5f4c76=_0x2946fc[_0x28c836(0x23a)](parseInt,_0x3fd69c[_0x28c836(0x1fd)],0xa);if(isNaN(_0x5f4c76)||_0x5f4c76<0x1||_0x5f4c76>0x64){if(_0x2946fc[_0x28c836(0x2ce)]!==_0x28c836(0x28a))throw new Error(_0x2946fc[_0x28c836(0x215)]);else{_0x42264b[_0x28c836(0x276)](_0x2946fc['lwYbD'],_0x19db4c);const _0x5a6d28=_0x521b42['error'](_0x2946fc[_0x28c836(0x222)],_0x2946fc['ZDeNT'],_0x3ffea4['requestI'+'d'],_0x49ab09,0x1ad);res[_0x28c836(0x210)](_0x5a6d28[_0x28c836(0x2a8)+'de'])[_0x28c836(0x25b)](_0x5a6d28[_0x28c836(0x22b)]);return;}}}}if(_0x2946fc['bhGvm'](_0x3fd69c[_0x28c836(0x335)+'d'],undefined)){if(_0x2946fc[_0x28c836(0x2a3)](_0x28c836(0x360),_0x2946fc['MZhjt']))throw new _0x1c2645(_0x28c836(0x263)+'file\x20siz'+'e');else{const _0x577502=_0x2946fc[_0x28c836(0x22a)](parseFloat,_0x3fd69c[_0x28c836(0x335)+'d']);if(_0x2946fc[_0x28c836(0x24f)](isNaN,_0x577502)||_0x2946fc[_0x28c836(0x37c)](_0x577502,0x0)||_0x577502>0x1)throw new Error(_0x28c836(0x335)+'d\x20must\x20b'+_0x28c836(0x1fe)+'er\x20betwe'+_0x28c836(0x30a)+'\x201');}}}static['validate'+'Paginati'+'on'](_0x1eb789){const _0x2cdda7=_0x2daa70,_0x1915d3={'ZSQLB':function(_0x172763,_0x17b15a,_0x30937f){return _0x172763(_0x17b15a,_0x30937f);},'WAYwZ':function(_0x203df3,_0x429b55){return _0x203df3(_0x429b55);},'nihTm':_0x2cdda7(0x263)+_0x2cdda7(0x309)+'on\x20param'+_0x2cdda7(0x358)},_0x98ba6e=Math[_0x2cdda7(0x324)](_0x1915d3[_0x2cdda7(0x353)](parseInt,_0x1eb789[_0x2cdda7(0x35c)]||'50',0xa),0x64),_0x1f0b95=Math[_0x2cdda7(0x357)](parseInt(_0x1eb789[_0x2cdda7(0x34b)]||'0',0xa),0x0);if(_0x1915d3['WAYwZ'](isNaN,_0x98ba6e)||isNaN(_0x1f0b95))throw new Error(_0x1915d3[_0x2cdda7(0x273)]);return{'limit':_0x98ba6e,'offset':_0x1f0b95};}static[_0x2daa70(0x37e)+_0x2daa70(0x385)](_0x45facd){const _0x50d5bd=_0x2daa70,_0x48a904={'BElZp':_0x50d5bd(0x263)+_0x50d5bd(0x343)+'t'},_0x635044=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!_0x635044[_0x50d5bd(0x266)](_0x45facd))throw new Error(_0x48a904[_0x50d5bd(0x243)]);}}class ResponseFormatter{static[_0x2daa70(0x35a)](_0x58b58e,_0x2b4bd3,_0x244395){const _0x4d653c=_0x2daa70;return{'success':!![],'data':_0x58b58e,'metadata':{'timestamp':new Date()['toISOStr'+_0x4d653c(0x2d3)](),'requestId':_0x2b4bd3,..._0x244395}};}static[_0x2daa70(0x29d)](_0x4a5403,_0x119c2b,_0x2a093c,_0x25d0b1,_0x2b5825=0x1f4){const _0x35754c=_0x2daa70,_0x239bac=ControllerConfigService[_0x35754c(0x284)+'nce']()[_0x35754c(0x22f)]();return{'response':{'success':![],'error':{'code':_0x4a5403,'message':_0x119c2b,..._0x239bac[_0x35754c(0x1fa)+_0x35754c(0x261)+_0x35754c(0x20f)]&&_0x25d0b1&&{'details':_0x25d0b1}},'metadata':{'timestamp':new Date()['toISOStr'+_0x35754c(0x2d3)](),'requestId':_0x2a093c}},'statusCode':_0x2b5825};}static['formatRA'+_0x2daa70(0x226)](_0x4dfd0e,_0x337171){const _0x1bb554=_0x2daa70,_0xd92f81={'VhFIR':function(_0x201c8b,_0x54b744){return _0x201c8b-_0x54b744;},'TVwYX':function(_0x3df973,_0x343bbf){return _0x3df973===_0x343bbf;},'xUweg':_0x1bb554(0x315)+'idationE'+_0x1bb554(0x361),'vANYs':function(_0x5e1d78,_0xb34970){return _0x5e1d78===_0xb34970;},'LnGIP':_0x1bb554(0x22c)+_0x1bb554(0x1f3)+_0x1bb554(0x247),'RDJFh':'tcJBE','QPEth':'INTERNAL'+'_ERROR','ngbsH':'UNKNOWN_'+_0x1bb554(0x2bb),'Wdtrp':_0x1bb554(0x31a)+_0x1bb554(0x264)+_0x1bb554(0x251)+_0x1bb554(0x23c)};if(_0xd92f81[_0x1bb554(0x227)](_0x4dfd0e[_0x1bb554(0x2e1)],_0x1bb554(0x278)+_0x1bb554(0x1f3)+_0x1bb554(0x247)))return this[_0x1bb554(0x29d)](_0x4dfd0e[_0x1bb554(0x288)],_0x4dfd0e[_0x1bb554(0x30c)],_0x337171,_0x4dfd0e[_0x1bb554(0x383)],0x190);if(_0x4dfd0e[_0x1bb554(0x2e1)]===_0xd92f81[_0x1bb554(0x33b)])return this[_0x1bb554(0x29d)](_0x4dfd0e[_0x1bb554(0x288)],_0x4dfd0e[_0x1bb554(0x30c)],_0x337171,_0x4dfd0e[_0x1bb554(0x383)],0x190);if(_0xd92f81[_0x1bb554(0x350)](_0x4dfd0e['name'],_0xd92f81[_0x1bb554(0x2f5)])){if(_0xd92f81[_0x1bb554(0x2e3)]!==_0x1bb554(0x23e)){_0x277fb0['error'](_0x1bb554(0x255)+'s\x20error',_0x3c5b71,_0xd160be);const _0x3cc624=_0x46806e['formatRA'+_0x1bb554(0x226)](_0x97354,_0x453c28[_0x1bb554(0x317)+'d']);_0x479446[_0x1bb554(0x22b)](_0x3cc624[_0x1bb554(0x2a8)+'de'],_0xd92f81[_0x1bb554(0x271)](_0x8b391[_0x1bb554(0x382)](),_0x1962af[_0x1bb554(0x2ef)+'e']),_0x32e958),res[_0x1bb554(0x210)](_0x3cc624[_0x1bb554(0x2a8)+'de'])[_0x1bb554(0x25b)](_0x3cc624[_0x1bb554(0x22b)]);}else return this['error'](_0x4dfd0e[_0x1bb554(0x288)],_0x4dfd0e[_0x1bb554(0x30c)],_0x337171,_0x4dfd0e[_0x1bb554(0x383)],0x193);}if(_0x4dfd0e[_0x1bb554(0x2e1)]===_0x1bb554(0x2a0))return this[_0x1bb554(0x29d)](_0x4dfd0e[_0x1bb554(0x288)],_0x4dfd0e[_0x1bb554(0x30c)],_0x337171,_0x4dfd0e[_0x1bb554(0x383)],_0x4dfd0e[_0x1bb554(0x2a8)+'de']||0x1f4);if(_0x4dfd0e[_0x1bb554(0x30c)])return this[_0x1bb554(0x29d)](_0xd92f81['QPEth'],_0x4dfd0e[_0x1bb554(0x30c)],_0x337171,undefined,0x1f4);return this[_0x1bb554(0x29d)](_0xd92f81[_0x1bb554(0x2ee)],_0xd92f81[_0x1bb554(0x213)],_0x337171,undefined,0x1f4);}}function requestContextMiddleware(req,res,next){const _0x5d2867=_0x2daa70;req[_0x5d2867(0x317)+'d']=(0x0,uuid_1['v4'])(),next();}function _0x4f9b(){const _0x505233=['su5et1C','ywLUigXHDgu','CgfNAw5HDgK','zw4GmcbHBMq','Cgf0Aa','BwvZC2fNzq','ExLjrxu','t1jnqu5drv8','vK5kB1e','DvvQtKS','uxvLCNKGy28','mtC3mZi4ohHvwfPTDW','AxbJzLK','Bu15CNe','uxvLCNLwywW','ihjLCxvPCMu','CMvXDwvZDeK','rvnux0Xpr0C','BMnL','qw4GDw5LEha','x0XjtuLux1C','y3mGCMv0CMK','Bg9JywW','BgvUz3rO','C3vIC3rYAw4','zwvpweC','uMf0zsbSAw0','Bg9Ntgv2zwW','CYbLCNjVCG','BwLU','g1SYBq','DfDPBMrVDW','z3jLzw4','AgvHBhrOEq','qwXRs3i','DxbSB2fKrg8','ihjLCxvLC3q','CM9Y','mtaW','A1PrBu0','zgvIDwC','swrZ','Chr4Aei','r09JrfC','B2n1BwvUDhm','BwvUDhmGzxi','DgHYzxnOB2W','Bg9HzenVBMy','ifvWBg9Hza','BMCGzg9JDw0','sfjbuwO','zw50u3rHDhm','Efv3zwC','Aw5NigrVy3u','wgDUAwu','CY4GugXLyxm','zgvNCMfKzwq','AMnZv28','zcbZDwnJzxm','ugfNAw5HDgK','suqGzM9YBwe','nJqZntKWng9Xy1jqCq','uKfhx1jbveu','C3rVCMfNzvu','yxrPB24GCMu','vu5bvvrit1i','g1SZng0','BwLTzxr5Cgu','B2zMC2v0','igzVDw5K','Aw5MBW','Dg9tDhjPBMC','z2Xdzu8','DKfowxm','zgnJChq','C1rmrfq','wLnrtei','mteYmte5m0fAz1D1zq','BMDpChrPB24','vMn6B0i','Bwf4','zxrLCNm','Dg9Y','C3vJy2vZCW','CMzVCM1HBMm','BgLTAxq','DhDLzw4Gmsa','uKfhq29UDhi','zMLSzvr5Cgu','zNHzEvu','CNjVCG','uwvHtxG','wwXVv2i','C2vHCMnO','z2v0rg9JDw0','Burqteq','svrFrvHdruu','DgrrBwK','zw50ihn0yxq','DxnLCI1Hz2u','BxbSzxrLzdO','AM1xq1C','vfjbq0TjtKC','sNzrs3m','DLHsCvq','C3nHz2u','y2vZl3jHzY4','B2XSzxi','BMfYuui','CMvXDwvZDhm','Aez6Ee8','EwDUq3a','AgLvsuS','ysbTDwX0zxi','B3fcsgi','AwD1CMf0Aw8','kYKRja','wujsD1i','BwfNzw50yq','DMfSAwrHDgu','igrVy3vTzw4','CxvLCNK','svPfra','BM93','zgv0ywLSCW','zw52','vvvjra','g1SZn20','yxbWBhK','CgfYC2u','8j+tPcbvCgXVywq','zxzLza','AxjLza','BwvUDdOG','g1SZnM0','Dw5RBM93BG','yxrPB24','BgLKyxrLza','zgvK','z3vYyxrPB24','vNz4uMC','EwvSBg93','vMfSAwrHDgK','CgfYyw1Z','zMLSzsbZAxO','zgvSzxrLrg8','BMTxAwi','AfjArNG','t1LtsMK','zw5HyMXLrgu','C3bSAxq','Afn0yxr1CW','Dg9WsW','zsbHig51Bwi','rvHQzNu','uKfurv9msu0','y2XLyw51Ca','ChfjAvK','CMvXDwvZDa','Bwv0ywrHDge','wvLOzgq','zxiGyMv0D2u','otC4muv6B2H6sq','BwLTzvr5Cgu','AhfvCNa','B3bLCNr5','wvz6r3a','BwvUDcbIEsa','C3qGyMuGysa','CfPWDfu','CM9YCW','C3rHDhvZ','CMvK','BMCGDxnLCIa','v2r0CNa','ig5VDcbMB3u','zM1dDM4','DgLVBG','igrLBgv0zwq','vuvStNC','rMLSzs4','uxvLCNKGyxq','mZuWmZe2r1bUEg10','Eu1iqMy','x19LC01Vzhu','B250zxH0twK','zMLSDgvYCW','zcbHBMqGBxu','tvr2CNG','vurQwvG','8j+pPsbizwfSDgG','Aw5ZDgfUy2u','ChvNrLO','r0vYCM9Y','vfz3wvG','z2v0sgvHBhq','uuPqquK','ywnAC2i','CMvZCg9UC2u','u2vJDxjPDhK','y3vTzw50','zsb0CNKGywC','z2v0','z2v0vgLTzxm','C3rjvK4','4PQz77IpiezLDgnOAq','BNrAwKC','yM9KEq','DxnLCG','z2LUzW','Dg9WsYbTDxm','q29UzMLNDxi','tMr4Eeq','D3nvCwq','zw50qNLjza','CNjLza','rMLSzsb1CgW','DgnkqKu','nK1Sv1Hmvq','zMLSzq','BNrLEhq','CxvLC3q','qKvSwNa','zgrSzxDHCMu','z3LmD0W','qxjwuxO','B25fCNjVCG','4PYfie5puK1bta','uKfhx1bfuKy','AhvUA3m','BhjttwW','CMvXDwvZDem','ihjLDhjPzxy','C2z1BgX5oIa','y2ryzge','tMPPwxa','CM9Yig9Jy3u','8j+tHcbgzxrJAgK','vxbSB2fKigu','EsbZDhjPBMC','r2v0ihn0yxq','uKfhx01bwf8','ChjVy2vZC2K','suHSs3m','vvLOu2q','DgvTChqGD2K','ANnVBG','DxnLCKLK','sKHkwhu','vg9Vig1HBNK','CMfNu2vYDMK','B25MAwD1CMe','DgfPBgvKrxi','q0XZt3m','sw52ywXPzca','zwn0zwqGzxi','zxrHzgf0yq','DgvZDa','CxvLC3rmB2C','DxrOzw50Awm','z25ODvG','tenjs0G','nti0mJG4mda','y29UC3rYDwm','rfjXwM0','z2v0vxnLCKq','vxbSB2fKuMu','yMHhDM0','vMHgsvi','g1SZnw0','BMLOvg0','BMCGuKfhigm','AgvJAYbLCNi','D2fYBG','suqGzxjYB3i','rg9JDw1LBNq','zcbTDxn0igi','EvLVBKO','zg9JDw1LBNq','C2XPy2u','Bwv0Ag9K','zgvSzxrL','D1bNwgW','AxrOB3v0ige','u3rHDgLZDgK','ndqZndu5nerqyujUwG','DgHVDxqGyxu','z2v0sw5ZDge','iff1zxj5','B2fKzwqGDMK','AwCGzxjYB3i','y29Kzq','uxvLCNKGAxm','AM1ez1C','u1vdq0vtuW','Aw5JBhvKzum','y3jLyxrLq28','zM9YBwf0uKe','mta4nZK5mfzyzNHPva','uKfhu2vYDMK','sgvHBhrOihm','z3bTBvK','y3LHBG','zgvMAw5Luhi','zxf1AxjLza','Dgf0Dxm6ia','uxvLCNKGzxi','DhjHy2S','B3jPz2LUywW','lI4VC2vYDMK','reve','Ewfnsu0','zxjYB3i','r2v0ignVBMy','A2TrCKW','uKfhrxjYB3i','EhzZtem','nJaWmda','qKnfBK4','zvrYywnRAw4','r2v0igrVy3u','C3rYAw5N','qxv0AgvUDgK','C3rHDhvZq28','s1LsvMG','D25LC1G','g1SXBq','zMfZDa','te9x','DxbSB2fKzwq','B3HfugK','AxngwNK','zMLSzvnPEMu','igLZihjLCxu','lI4UiG','rhHfqNO','DhrLBxb0ihC','tevwruW','8j+tIIbgzxrJAgK','CMvZzxq','DhjPBq','tM8GzMLSzsa','rvjst1i','zMLSzw5HBwu','z25QsLO','w1vZzxi6ia','C2L6zq','t05Frvjst1i','weP4ueu','r2PmwK0','zw5HyMXLugu','y2H1BMTZ','zM9YBwf0twu','CLLuvhy','ENL5tKW','vvbmt0fex1m','DwvZDa','BvrUA2i','kcGOlISPkYK','C2XVDW','sxb4tw4','D2j6y2W','zw5HyMXLuMu','y2f0Aw9Uihi','uKfhx0rfvee','zgLT','Aw5N','uxvLCNKGCMu','revcvuC','n0H5D3vVyq','uxvLCNLszxe','Axn0AwnZ','vKfmsurbveK','C2v0','su5gtW','zw50oIa','v0vex09ssuC','Bg9N','uMv0CMLLDMu','zwq6ia','BMfTzq','DhjPzxzLza','uKrkrMG','B2n1BwvUDca','v0fstG','yM1rExy','DLLpyNO','zMfSC2u','Duz2vfi','CwfLBNi','y29UzMLN','Dw1IzxiGyMu','CMfUzg9T','BMDIC0G','C3rHCNruAw0','AgHPAvK','tMfTzq','y2HLy2S','BwHsBMG','CMf0zuXPBwK','tg5hsva','x0vsuK9s','u2HNq2u','su5t','z2v0q29UzMK','x0XjtuLux00','ChvZAa','AxqGzxHJzwu','8j+xKE+4JYbezwXLDgK','ANPkChK','zMLSDgvY','ihvWBg9Hzgu','Dg9ju09tDhi','y29SB3jZ','qMnvswK','De1HEa','rMLSzsbPBMy','DgHLBNrPy2e'];_0x4f9b=function(){return _0x505233;};return _0x4f9b();}class RAGController{constructor(){const _0x4ad9f1=_0x2daa70,_0x32ef84={'IHlKs':'Upload\x20a'+_0x4ad9f1(0x2b5)+_0x4ad9f1(0x280)+_0x4ad9f1(0x268)+_0x4ad9f1(0x1ed),'GjLZM':function(_0x204af6,_0x55f268){return _0x204af6-_0x55f268;},'hiUIK':'RATE_LIM'+_0x4ad9f1(0x367)+_0x4ad9f1(0x29b),'EXjfu':_0x4ad9f1(0x25e)+_0x4ad9f1(0x32b)+_0x4ad9f1(0x33e)+_0x4ad9f1(0x22e)+_0x4ad9f1(0x308)+'r.','UcZLv':function(_0x59bdb1,_0x5cfedd){return _0x59bdb1!==_0x5cfedd;},'rTFrS':_0x4ad9f1(0x2ba)+_0x4ad9f1(0x2ae),'QjnNG':_0x4ad9f1(0x23d)+_0x4ad9f1(0x286)+_0x4ad9f1(0x378),'eeOXG':_0x4ad9f1(0x278)+_0x4ad9f1(0x337),'lrSMl':_0x4ad9f1(0x253)+_0x4ad9f1(0x361),'qaenr':function(_0x185389,_0x356382){return _0x185389-_0x356382;},'sduoZ':_0x4ad9f1(0x21a)+_0x4ad9f1(0x25a)+_0x4ad9f1(0x283)+_0x4ad9f1(0x306)+_0x4ad9f1(0x216),'jcsWo':_0x4ad9f1(0x348)+_0x4ad9f1(0x381),'vYObz':_0x4ad9f1(0x2b0),'PZinL':_0x4ad9f1(0x202),'gpmmY':'Rate\x20lim'+_0x4ad9f1(0x2fc)+_0x4ad9f1(0x1ef),'QjEwb':_0x4ad9f1(0x2d4)+'quest\x20va'+_0x4ad9f1(0x1ee),'hFzxO':function(_0x309eb1,_0x7d2336,_0x5173ba){return _0x309eb1(_0x7d2336,_0x5173ba);},'GOcDW':function(_0xa2456a,_0x51aef2){return _0xa2456a-_0x51aef2;},'cbEDe':_0x4ad9f1(0x278)+_0x4ad9f1(0x285),'JQvxg':function(_0x3fc34d,_0x374b36){return _0x3fc34d-_0x374b36;},'VvxRg':function(_0x4f758c,_0x3f36ed){return _0x4f758c-_0x3f36ed;},'QuyBH':_0x4ad9f1(0x314),'pugFZ':'xnhYD','dccpt':'INTERNAL'+_0x4ad9f1(0x2f6),'gyLwL':_0x4ad9f1(0x2a7)+_0x4ad9f1(0x2d0)+_0x4ad9f1(0x295),'xALUG':'Document'+_0x4ad9f1(0x214)+'nd','NdxxD':'JHJXu','HhSVh':'Get\x20docu'+_0x4ad9f1(0x20c)+_0x4ad9f1(0x277),'yyIEu':function(_0x917b4b,_0x12c0e5){return _0x917b4b-_0x12c0e5;},'pjoVr':'Delete\x20d'+_0x4ad9f1(0x2e4)+'error','WxbCn':'Invalid\x20'+_0x4ad9f1(0x343)+'t','Dpoms':function(_0x2bfdb3,_0x322923){return _0x2bfdb3===_0x322923;},'LCIKH':_0x4ad9f1(0x2b7)+'ng\x20docum'+_0x4ad9f1(0x369)+_0x4ad9f1(0x2d8),'mTnkb':function(_0x291ab2,_0x3a5bd2){return _0x291ab2!==_0x3a5bd2;},'ZCwyW':_0x4ad9f1(0x310),'gnhuX':_0x4ad9f1(0x255)+_0x4ad9f1(0x323),'NjiYp':function(_0x272d9b,_0xd39f90){return _0x272d9b-_0xd39f90;},'sTLDT':function(_0x435868,_0x4c977d){return _0x435868===_0x4c977d;},'kkQrL':_0x4ad9f1(0x34f),'BcUIi':_0x4ad9f1(0x223)+'\x20check','orJjL':_0x4ad9f1(0x328),'oqBHb':function(_0x52c673,_0x1be21c){return _0x52c673-_0x1be21c;},'yMHBf':function(_0x2f5d24,_0x185dc2){return _0x2f5d24!==_0x185dc2;},'ShgCe':'tCDKk','pZptU':'Health\x20c'+_0x4ad9f1(0x275)+'or'};this[_0x4ad9f1(0x32a)+_0x4ad9f1(0x22d)]=async(req,res,next)=>{const _0x5a9159=_0x4ad9f1,_0x4780aa=this[_0x5a9159(0x28d)+_0x5a9159(0x241)](req);Logger[_0x5a9159(0x203)](req,_0x4780aa);try{if(!req[_0x5a9159(0x235)]?.[_0x5a9159(0x25c)]){Logger[_0x5a9159(0x276)](_0x32ef84[_0x5a9159(0x258)],_0x4780aa);const _0x80677c=ResponseFormatter[_0x5a9159(0x29d)](_0x5a9159(0x348)+_0x5a9159(0x381),_0x5a9159(0x2a7)+'cation\x20r'+_0x5a9159(0x295),_0x4780aa[_0x5a9159(0x317)+'d'],undefined,0x191);Logger[_0x5a9159(0x22b)](_0x80677c[_0x5a9159(0x2a8)+'de'],_0x32ef84[_0x5a9159(0x2c2)](Date[_0x5a9159(0x382)](),_0x4780aa[_0x5a9159(0x2ef)+'e']),_0x4780aa),res[_0x5a9159(0x210)](_0x80677c['statusCo'+'de'])[_0x5a9159(0x25b)](_0x80677c[_0x5a9159(0x22b)]);return;}if(!RateLimiter[_0x5a9159(0x2f2)](req[_0x5a9159(0x235)]['userId'],this[_0x5a9159(0x2eb)][_0x5a9159(0x22f)]()[_0x5a9159(0x2f4)+_0x5a9159(0x304)],this[_0x5a9159(0x2eb)][_0x5a9159(0x22f)]()[_0x5a9159(0x2f4)+'tWindow'])){Logger['warn'](_0x5a9159(0x321)+_0x5a9159(0x2fc)+_0x5a9159(0x1ef),_0x4780aa);const _0x46e0f6=ResponseFormatter[_0x5a9159(0x29d)](_0x32ef84[_0x5a9159(0x377)],_0x32ef84[_0x5a9159(0x1ff)],_0x4780aa[_0x5a9159(0x317)+'d'],undefined,0x1ad);res[_0x5a9159(0x210)](_0x46e0f6[_0x5a9159(0x2a8)+'de'])[_0x5a9159(0x25b)](_0x46e0f6[_0x5a9159(0x22b)]);return;}const _0x5f1e4c=req['file'];if(!_0x5f1e4c){if(_0x32ef84['UcZLv']('RKyLy','AVSoU')){Logger[_0x5a9159(0x276)](_0x32ef84['rTFrS'],_0x4780aa);const _0x48309e=ResponseFormatter[_0x5a9159(0x29d)](_0x5a9159(0x2d9)+_0x5a9159(0x2c0),_0x5a9159(0x2ba)+'uploaded',_0x4780aa[_0x5a9159(0x317)+'d'],undefined,0x190);res[_0x5a9159(0x210)](_0x48309e[_0x5a9159(0x2a8)+'de'])[_0x5a9159(0x25b)](_0x48309e['response']);return;}else return!_0x5c9197[_0x5a9159(0x224)]&&(_0xf46ded['instance']=new _0x4ab2df()),_0x47a196[_0x5a9159(0x224)];}Logger['debug'](_0x32ef84['QjnNG'],{'filename':_0x5f1e4c[_0x5a9159(0x2bc)],'originalname':_0x5f1e4c[_0x5a9159(0x299)+_0x5a9159(0x2e1)],'size':_0x5f1e4c[_0x5a9159(0x2bf)],'mimetype':_0x5f1e4c[_0x5a9159(0x34a)],'path':_0x5f1e4c['path']},_0x4780aa);const _0x1d4bc3={'userId':req[_0x5a9159(0x235)]['userId'],'file':{'filename':_0x5f1e4c[_0x5a9159(0x2bc)],'originalName':_0x5f1e4c[_0x5a9159(0x299)+_0x5a9159(0x2e1)],'fileType':_0x5f1e4c['mimetype'][_0x5a9159(0x1fb)]('/')[0x1]||_0x5a9159(0x1ec),'fileSize':_0x5f1e4c[_0x5a9159(0x2bf)],'mimeType':_0x5f1e4c[_0x5a9159(0x34a)],'storageUrl':_0x5f1e4c[_0x5a9159(0x30b)],'storageProvider':_0x5a9159(0x31d),'storageKey':_0x5f1e4c['filename']},'metadata':req[_0x5a9159(0x234)][_0x5a9159(0x204)]?JSON[_0x5a9159(0x1e6)](req['body'][_0x5a9159(0x204)]):undefined,'processingOptions':req[_0x5a9159(0x234)]['processi'+_0x5a9159(0x355)+'s']?JSON[_0x5a9159(0x1e6)](req[_0x5a9159(0x234)][_0x5a9159(0x257)+_0x5a9159(0x355)+'s']):undefined};Logger[_0x5a9159(0x34d)](_0x5a9159(0x1e7)+_0x5a9159(0x33c)+_0x5a9159(0x1ea)+_0x1d4bc3[_0x5a9159(0x240)][_0x5a9159(0x299)+_0x5a9159(0x2f1)],_0x4780aa);const _0x4acd85=await this[_0x5a9159(0x25f)+'ce'][_0x5a9159(0x32a)+_0x5a9159(0x22d)](_0x1d4bc3),_0x113c4d=Date['now']()-_0x4780aa[_0x5a9159(0x2ef)+'e'];PerformanceTracker['track'](_0x32ef84[_0x5a9159(0x320)],_0x113c4d,_0x4780aa),Logger[_0x5a9159(0x35a)](_0x5a9159(0x278)+_0x5a9159(0x300)+_0x5a9159(0x341)+_0x5a9159(0x24e)+_0x4acd85[_0x5a9159(0x27b)+'Id'],_0x4780aa);const _0x34e866=ResponseFormatter[_0x5a9159(0x35a)](_0x4acd85,_0x4780aa['requestI'+'d'],{'processingTime':_0x113c4d,'userId':req[_0x5a9159(0x235)]['userId']});Logger[_0x5a9159(0x22b)](0xc9,_0x113c4d,_0x4780aa),res['status'](0xc9)[_0x5a9159(0x25b)](_0x34e866);}catch(_0x12faea){Logger[_0x5a9159(0x29d)](_0x32ef84[_0x5a9159(0x24b)],_0x12faea,_0x4780aa);const _0x27f0cd=ResponseFormatter[_0x5a9159(0x28e)+'GError'](_0x12faea,_0x4780aa[_0x5a9159(0x317)+'d']);Logger[_0x5a9159(0x22b)](_0x27f0cd['statusCo'+'de'],_0x32ef84[_0x5a9159(0x2ea)](Date[_0x5a9159(0x382)](),_0x4780aa[_0x5a9159(0x2ef)+'e']),_0x4780aa),res['status'](_0x27f0cd[_0x5a9159(0x2a8)+'de'])['json'](_0x27f0cd[_0x5a9159(0x22b)]);}},this['queryDoc'+'uments']=async(req,res,next)=>{const _0x5d392b=_0x4ad9f1,_0x5d568b=this[_0x5d392b(0x28d)+'ntext'](req);Logger[_0x5d392b(0x203)](req,_0x5d568b);try{if(!req[_0x5d392b(0x235)]?.[_0x5d392b(0x25c)]){Logger['warn'](_0x32ef84['sduoZ'],_0x5d568b);const _0x425353=ResponseFormatter['error'](_0x32ef84[_0x5d392b(0x340)],_0x5d392b(0x2a7)+_0x5d392b(0x2d0)+'equired',_0x5d568b[_0x5d392b(0x317)+'d'],undefined,0x191);Logger[_0x5d392b(0x22b)](_0x425353[_0x5d392b(0x2a8)+'de'],_0x32ef84['qaenr'](Date['now'](),_0x5d568b[_0x5d392b(0x2ef)+'e']),_0x5d568b),res[_0x5d392b(0x210)](_0x425353['statusCo'+'de'])[_0x5d392b(0x25b)](_0x425353[_0x5d392b(0x22b)]);return;}if(!RateLimiter[_0x5d392b(0x2f2)](req['user'][_0x5d392b(0x25c)],this[_0x5d392b(0x2eb)][_0x5d392b(0x22f)]()['rateLimi'+_0x5d392b(0x304)],this[_0x5d392b(0x2eb)][_0x5d392b(0x22f)]()[_0x5d392b(0x2f4)+_0x5d392b(0x326)])){if(_0x32ef84[_0x5d392b(0x2e7)]!==_0x32ef84['PZinL']){Logger[_0x5d392b(0x276)](_0x32ef84[_0x5d392b(0x292)],_0x5d568b);const _0x44e721=ResponseFormatter[_0x5d392b(0x29d)](_0x5d392b(0x200)+'IT_EXCEE'+_0x5d392b(0x29b),_0x5d392b(0x25e)+_0x5d392b(0x32b)+_0x5d392b(0x33e)+_0x5d392b(0x22e)+_0x5d392b(0x308)+'r.',_0x5d568b[_0x5d392b(0x317)+'d'],undefined,0x1ad);res['status'](_0x44e721[_0x5d392b(0x2a8)+'de'])[_0x5d392b(0x25b)](_0x44e721[_0x5d392b(0x22b)]);return;}else return this[_0x5d392b(0x29d)](_0x400c90[_0x5d392b(0x288)],_0x4c1877[_0x5d392b(0x30c)],_0x4ca931,_0x56bbcf[_0x5d392b(0x383)],0x193);}RequestValidator['validate'+_0x5d392b(0x2d7)+_0x5d392b(0x2c9)](req['body']),Logger[_0x5d392b(0x32f)](_0x32ef84['QjEwb'],{'query':req[_0x5d392b(0x234)][_0x5d392b(0x380)]},_0x5d568b);const _0xe85b9a={'query':req[_0x5d392b(0x234)][_0x5d392b(0x380)],'userId':req[_0x5d392b(0x235)]['userId'],'documentIds':req[_0x5d392b(0x234)][_0x5d392b(0x27b)+_0x5d392b(0x330)],'topK':req['body'][_0x5d392b(0x1fd)]?_0x32ef84[_0x5d392b(0x375)](parseInt,req['body'][_0x5d392b(0x1fd)],0xa):undefined,'threshold':req[_0x5d392b(0x234)]['threshol'+'d']?parseFloat(req[_0x5d392b(0x234)][_0x5d392b(0x335)+'d']):undefined,'filters':req[_0x5d392b(0x234)][_0x5d392b(0x21f)],'includeMetadata':req[_0x5d392b(0x234)]['includeM'+_0x5d392b(0x265)],'includeChunks':req['body'][_0x5d392b(0x28c)+_0x5d392b(0x24a)]};Logger[_0x5d392b(0x34d)]('ðŸ”\x20Queryi'+_0x5d392b(0x338)+'ents:\x20\x22'+req['body']['query'][_0x5d392b(0x31f)+'g'](0x0,0x32)+_0x5d392b(0x2b3),_0x5d568b);const _0x21eb3b=await this[_0x5d392b(0x25f)+'ce']['queryDoc'+'uments'](_0xe85b9a),_0xde49b6=_0x32ef84[_0x5d392b(0x332)](Date[_0x5d392b(0x382)](),_0x5d568b['startTim'+'e']);PerformanceTracker[_0x5d392b(0x298)](_0x32ef84['cbEDe'],_0xde49b6,_0x5d568b),Logger[_0x5d392b(0x35a)](_0x5d392b(0x311)+_0x5d392b(0x36b)+'\x20'+_0x21eb3b[_0x5d392b(0x2c4)][_0x5d392b(0x31e)]+('\x20results'+_0x5d392b(0x34c)),_0x5d568b);const _0x3ace7d=ResponseFormatter['success'](_0x21eb3b,_0x5d568b['requestI'+'d'],{'processingTime':_0xde49b6,'userId':req[_0x5d392b(0x235)][_0x5d392b(0x25c)]});Logger['response'](0xc8,_0xde49b6,_0x5d568b),res[_0x5d392b(0x210)](0xc8)[_0x5d392b(0x25b)](_0x3ace7d);}catch(_0x2d9637){Logger[_0x5d392b(0x29d)](_0x5d392b(0x297)+_0x5d392b(0x32c),_0x2d9637,_0x5d568b);const _0x509ae4=ResponseFormatter[_0x5d392b(0x28e)+_0x5d392b(0x226)](_0x2d9637,_0x5d568b[_0x5d392b(0x317)+'d']);Logger['response'](_0x509ae4[_0x5d392b(0x2a8)+'de'],_0x32ef84['JQvxg'](Date['now'](),_0x5d568b[_0x5d392b(0x2ef)+'e']),_0x5d568b),res[_0x5d392b(0x210)](_0x509ae4[_0x5d392b(0x2a8)+'de'])[_0x5d392b(0x25b)](_0x509ae4['response']);}},this['getUserD'+_0x4ad9f1(0x333)]=async(req,res,next)=>{const _0x1a8980=_0x4ad9f1,_0x108bd6=this[_0x1a8980(0x28d)+_0x1a8980(0x241)](req);Logger[_0x1a8980(0x203)](req,_0x108bd6);try{if(!req['user']?.[_0x1a8980(0x25c)]){const _0x28dda3=ResponseFormatter['error'](_0x1a8980(0x348)+'IZED',_0x1a8980(0x2a7)+'cation\x20r'+_0x1a8980(0x295),_0x108bd6[_0x1a8980(0x317)+'d'],undefined,0x191);Logger[_0x1a8980(0x22b)](_0x28dda3[_0x1a8980(0x2a8)+'de'],_0x32ef84[_0x1a8980(0x1f1)](Date[_0x1a8980(0x382)](),_0x108bd6[_0x1a8980(0x2ef)+'e']),_0x108bd6),res['status'](_0x28dda3[_0x1a8980(0x2a8)+'de'])[_0x1a8980(0x25b)](_0x28dda3['response']);return;}const {limit:_0x472e55,offset:_0x9ed06f}=RequestValidator['validate'+_0x1a8980(0x342)+'on'](req[_0x1a8980(0x380)]),_0x2cc063=req['query'][_0x1a8980(0x210)]?req[_0x1a8980(0x380)][_0x1a8980(0x210)][_0x1a8980(0x1fb)](','):undefined,_0x6d3b54=req[_0x1a8980(0x380)]['fileType']?req[_0x1a8980(0x380)][_0x1a8980(0x35f)]['split'](','):undefined;Logger[_0x1a8980(0x34d)]('ðŸ“„\x20Fetchi'+_0x1a8980(0x212)+_0x1a8980(0x27b)+'s',_0x108bd6);const _0x22c3f6=await this['ragServi'+'ce'][_0x1a8980(0x26e)+_0x1a8980(0x333)](req['user'][_0x1a8980(0x25c)],{'status':_0x2cc063,'fileType':_0x6d3b54,'limit':_0x472e55,'offset':_0x9ed06f}),_0x19662c=Date['now']()-_0x108bd6[_0x1a8980(0x2ef)+'e'];PerformanceTracker[_0x1a8980(0x298)]('Get\x20Docu'+'ments',_0x19662c,_0x108bd6),Logger[_0x1a8980(0x35a)](_0x1a8980(0x2df)+'d\x20'+_0x22c3f6[_0x1a8980(0x31e)]+(_0x1a8980(0x37f)+'ts'),_0x108bd6);const _0x31471d=ResponseFormatter['success']({'documents':_0x22c3f6,'pagination':{'limit':_0x472e55,'offset':_0x9ed06f,'total':_0x22c3f6['length']}},_0x108bd6[_0x1a8980(0x317)+'d'],{'processingTime':_0x19662c,'userId':req[_0x1a8980(0x235)][_0x1a8980(0x25c)]});Logger[_0x1a8980(0x22b)](0xc8,_0x19662c,_0x108bd6),res['status'](0xc8)[_0x1a8980(0x25b)](_0x31471d);}catch(_0x84d52e){if(_0x32ef84['QuyBH']!==_0x32ef84[_0x1a8980(0x225)]){Logger[_0x1a8980(0x29d)](_0x1a8980(0x2a5)+_0x1a8980(0x334)+_0x1a8980(0x32c),_0x84d52e,_0x108bd6);const _0x3b436c=ResponseFormatter[_0x1a8980(0x28e)+'GError'](_0x84d52e,_0x108bd6[_0x1a8980(0x317)+'d']);Logger[_0x1a8980(0x22b)](_0x3b436c[_0x1a8980(0x2a8)+'de'],_0x32ef84[_0x1a8980(0x1f1)](Date[_0x1a8980(0x382)](),_0x108bd6[_0x1a8980(0x2ef)+'e']),_0x108bd6),res['status'](_0x3b436c[_0x1a8980(0x2a8)+'de'])['json'](_0x3b436c[_0x1a8980(0x22b)]);}else return![];}},this[_0x4ad9f1(0x365)+_0x4ad9f1(0x23b)]=async(req,res,next)=>{const _0x42acd2=_0x4ad9f1,_0x259d55={'MTvrx':_0x32ef84[_0x42acd2(0x351)]},_0x131b33=this['createCo'+_0x42acd2(0x241)](req);Logger[_0x42acd2(0x203)](req,_0x131b33);try{if(_0x42acd2(0x2e9)===_0x42acd2(0x368))return this[_0x42acd2(0x29d)](_0x259d55[_0x42acd2(0x221)],_0x26a38b[_0x42acd2(0x30c)],_0x3fb84a,_0x1da1f5,0x1f4);else{if(!req['user']?.[_0x42acd2(0x25c)]){const _0x55ad1e=ResponseFormatter[_0x42acd2(0x29d)]('UNAUTHOR'+_0x42acd2(0x381),_0x32ef84[_0x42acd2(0x245)],_0x131b33[_0x42acd2(0x317)+'d'],undefined,0x191);Logger[_0x42acd2(0x22b)](_0x55ad1e['statusCo'+'de'],Date['now']()-_0x131b33[_0x42acd2(0x2ef)+'e'],_0x131b33),res[_0x42acd2(0x210)](_0x55ad1e[_0x42acd2(0x2a8)+'de'])['json'](_0x55ad1e[_0x42acd2(0x22b)]);return;}const _0x275fb5=req[_0x42acd2(0x1f4)]['id'];RequestValidator[_0x42acd2(0x37e)+_0x42acd2(0x385)](_0x275fb5),Logger[_0x42acd2(0x34d)](_0x42acd2(0x252)+_0x42acd2(0x338)+_0x42acd2(0x2dc)+_0x275fb5,_0x131b33);const _0x307a42=await this[_0x42acd2(0x25f)+'ce'][_0x42acd2(0x365)+_0x42acd2(0x23b)](_0x275fb5,req['user'][_0x42acd2(0x25c)]);if(!_0x307a42){Logger[_0x42acd2(0x276)](_0x42acd2(0x278)+_0x42acd2(0x214)+'nd:\x20'+_0x275fb5,_0x131b33);const _0x2cb7ce=ResponseFormatter['error']('NOT_FOUN'+'D',_0x32ef84['xALUG'],_0x131b33[_0x42acd2(0x317)+'d'],undefined,0x194);Logger[_0x42acd2(0x22b)](_0x2cb7ce['statusCo'+'de'],_0x32ef84[_0x42acd2(0x332)](Date[_0x42acd2(0x382)](),_0x131b33[_0x42acd2(0x2ef)+'e']),_0x131b33),res[_0x42acd2(0x210)](_0x2cb7ce[_0x42acd2(0x2a8)+'de'])[_0x42acd2(0x25b)](_0x2cb7ce[_0x42acd2(0x22b)]);return;}const _0x2b9cea=Date[_0x42acd2(0x382)]()-_0x131b33[_0x42acd2(0x2ef)+'e'];Logger[_0x42acd2(0x35a)](_0x42acd2(0x278)+_0x42acd2(0x24d)+_0x42acd2(0x2e0)+_0x275fb5,_0x131b33);const _0x42cf46=ResponseFormatter['success'](_0x307a42,_0x131b33[_0x42acd2(0x317)+'d'],{'processingTime':_0x2b9cea,'userId':req[_0x42acd2(0x235)][_0x42acd2(0x25c)]});Logger[_0x42acd2(0x22b)](0xc8,_0x2b9cea,_0x131b33),res[_0x42acd2(0x210)](0xc8)[_0x42acd2(0x25b)](_0x42cf46);}}catch(_0x174032){if(_0x42acd2(0x25d)===_0x32ef84[_0x42acd2(0x239)]){Logger[_0x42acd2(0x29d)](_0x32ef84['HhSVh'],_0x174032,_0x131b33);const _0x5d6e9f=ResponseFormatter[_0x42acd2(0x28e)+_0x42acd2(0x226)](_0x174032,_0x131b33[_0x42acd2(0x317)+'d']);Logger['response'](_0x5d6e9f[_0x42acd2(0x2a8)+'de'],Date[_0x42acd2(0x382)]()-_0x131b33['startTim'+'e'],_0x131b33),res['status'](_0x5d6e9f[_0x42acd2(0x2a8)+'de'])[_0x42acd2(0x25b)](_0x5d6e9f[_0x42acd2(0x22b)]);}else{const _0x25a094=_0x41ed26?function(){if(_0x5b9b97){const res=_0x117067['apply'](_0x3d8a7d,arguments);return _0x1d7cab=null,res;}}:function(){};return _0x5e55fe=![],_0x25a094;}}},this[_0x4ad9f1(0x1f6)+'cument']=async(req,res,next)=>{const _0x5be5e9=_0x4ad9f1,_0x20bf52=this[_0x5be5e9(0x28d)+'ntext'](req);Logger[_0x5be5e9(0x203)](req,_0x20bf52);try{if(!req[_0x5be5e9(0x235)]?.['userId']){const _0x51095a=ResponseFormatter[_0x5be5e9(0x29d)](_0x5be5e9(0x348)+_0x5be5e9(0x381),_0x5be5e9(0x2a7)+_0x5be5e9(0x2d0)+_0x5be5e9(0x295),_0x20bf52[_0x5be5e9(0x317)+'d'],undefined,0x191);Logger[_0x5be5e9(0x22b)](_0x51095a[_0x5be5e9(0x2a8)+'de'],_0x32ef84[_0x5be5e9(0x332)](Date[_0x5be5e9(0x382)](),_0x20bf52['startTim'+'e']),_0x20bf52),res['status'](_0x51095a['statusCo'+'de'])[_0x5be5e9(0x25b)](_0x51095a[_0x5be5e9(0x22b)]);return;}const _0x83408a=req['params']['id'];RequestValidator[_0x5be5e9(0x37e)+_0x5be5e9(0x385)](_0x83408a),Logger['info'](_0x5be5e9(0x2fd)+_0x5be5e9(0x338)+'ent:\x20'+_0x83408a,_0x20bf52),await this['ragServi'+'ce'][_0x5be5e9(0x1f6)+_0x5be5e9(0x22d)](_0x83408a,req[_0x5be5e9(0x235)][_0x5be5e9(0x25c)]);const _0x48e0ec=_0x32ef84[_0x5be5e9(0x30d)](Date[_0x5be5e9(0x382)](),_0x20bf52[_0x5be5e9(0x2ef)+'e']);Logger[_0x5be5e9(0x35a)](_0x5be5e9(0x278)+_0x5be5e9(0x217)+':\x20'+_0x83408a,_0x20bf52);const _0x37dc9a=ResponseFormatter[_0x5be5e9(0x35a)]({'documentId':_0x83408a,'deleted':!![]},_0x20bf52[_0x5be5e9(0x317)+'d'],{'processingTime':_0x48e0ec,'userId':req[_0x5be5e9(0x235)]['userId']});Logger[_0x5be5e9(0x22b)](0xc8,_0x48e0ec,_0x20bf52),res[_0x5be5e9(0x210)](0xc8)['json'](_0x37dc9a);}catch(_0x432fe5){Logger[_0x5be5e9(0x29d)](_0x32ef84['pjoVr'],_0x432fe5,_0x20bf52);const _0x398159=ResponseFormatter['formatRA'+_0x5be5e9(0x226)](_0x432fe5,_0x20bf52[_0x5be5e9(0x317)+'d']);Logger['response'](_0x398159[_0x5be5e9(0x2a8)+'de'],Date['now']()-_0x20bf52[_0x5be5e9(0x2ef)+'e'],_0x20bf52),res[_0x5be5e9(0x210)](_0x398159[_0x5be5e9(0x2a8)+'de'])[_0x5be5e9(0x25b)](_0x398159[_0x5be5e9(0x22b)]);}},this['getDocum'+_0x4ad9f1(0x33a)]=async(req,res,next)=>{const _0x159161=_0x4ad9f1,_0x298b13=this['createCo'+_0x159161(0x241)](req);Logger[_0x159161(0x203)](req,_0x298b13);try{if(!req[_0x159161(0x235)]?.[_0x159161(0x25c)]){if(_0x32ef84['Dpoms']('lkfgs',_0x159161(0x246)))this[_0x159161(0x374)][_0x159161(0x27e)](_0x25e4f6);else{const _0x2e195f=ResponseFormatter['error'](_0x32ef84[_0x159161(0x340)],_0x159161(0x2a7)+_0x159161(0x2d0)+_0x159161(0x295),_0x298b13[_0x159161(0x317)+'d'],undefined,0x191);Logger['response'](_0x2e195f['statusCo'+'de'],Date[_0x159161(0x382)]()-_0x298b13[_0x159161(0x2ef)+'e'],_0x298b13),res[_0x159161(0x210)](_0x2e195f[_0x159161(0x2a8)+'de'])[_0x159161(0x25b)](_0x2e195f[_0x159161(0x22b)]);return;}}Logger['info'](_0x32ef84[_0x159161(0x26a)],_0x298b13);const _0x481e3c=await this[_0x159161(0x25f)+'ce'][_0x159161(0x365)+_0x159161(0x33a)](req['user'][_0x159161(0x25c)]),_0x27cba9=Date[_0x159161(0x382)]()-_0x298b13[_0x159161(0x2ef)+'e'];Logger[_0x159161(0x35a)](_0x159161(0x281)+_0x159161(0x31c)+_0x159161(0x1e8),_0x298b13);const _0x34a6bf=ResponseFormatter['success'](_0x481e3c,_0x298b13['requestI'+'d'],{'processingTime':_0x27cba9,'userId':req[_0x159161(0x235)][_0x159161(0x25c)]});Logger['response'](0xc8,_0x27cba9,_0x298b13),res['status'](0xc8)[_0x159161(0x25b)](_0x34a6bf);}catch(_0x347c8d){if(_0x32ef84[_0x159161(0x2ca)](_0x32ef84['ZCwyW'],'uUjNK')){const _0x24270b=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;if(!_0x24270b['test'](_0x22300c))throw new _0x4887bb(_0x32ef84['WxbCn']);}else{Logger[_0x159161(0x29d)](_0x32ef84[_0x159161(0x269)],_0x347c8d,_0x298b13);const _0x2fc065=ResponseFormatter['formatRA'+_0x159161(0x226)](_0x347c8d,_0x298b13[_0x159161(0x317)+'d']);Logger[_0x159161(0x22b)](_0x2fc065[_0x159161(0x2a8)+'de'],_0x32ef84[_0x159161(0x250)](Date['now'](),_0x298b13[_0x159161(0x2ef)+'e']),_0x298b13),res[_0x159161(0x210)](_0x2fc065[_0x159161(0x2a8)+'de'])[_0x159161(0x25b)](_0x2fc065[_0x159161(0x22b)]);}}},this['getHealt'+_0x4ad9f1(0x1fc)]=async(req,res,next)=>{const _0x386fe9=_0x4ad9f1,_0x2b1e6f={'oxEPi':function(_0x17e4f8,_0x1b3baf){return _0x17e4f8-_0x1b3baf;},'WdTZf':_0x32ef84[_0x386fe9(0x258)],'ntZZG':_0x32ef84[_0x386fe9(0x340)],'KYRVh':_0x386fe9(0x2a7)+'cation\x20r'+_0x386fe9(0x295),'hqUrp':function(_0x17e003,_0x8c9eb){return _0x17e003-_0x8c9eb;}};if(_0x32ef84['sTLDT']('QAGiB',_0x32ef84[_0x386fe9(0x29f)])){const _0x8ff4=_0x23bef7['error'](_0x386fe9(0x348)+_0x386fe9(0x381),_0x386fe9(0x2a7)+_0x386fe9(0x2d0)+_0x386fe9(0x295),_0x5cfebd[_0x386fe9(0x317)+'d'],_0x59c8ad,0x191);_0x113dcd['response'](_0x8ff4[_0x386fe9(0x2a8)+'de'],_0x2b1e6f[_0x386fe9(0x2af)](_0x5309d5[_0x386fe9(0x382)](),_0x15244a[_0x386fe9(0x2ef)+'e']),_0x2d13be),res['status'](_0x8ff4[_0x386fe9(0x2a8)+'de'])[_0x386fe9(0x25b)](_0x8ff4[_0x386fe9(0x22b)]);return;}else{const _0x14dfd1=this['createCo'+'ntext'](req);Logger[_0x386fe9(0x203)](req,_0x14dfd1);try{Logger['info'](_0x32ef84[_0x386fe9(0x303)],_0x14dfd1);const _0x228955=await this['ragServi'+'ce'][_0x386fe9(0x228)+_0x386fe9(0x1fc)](),_0x5b8ed6=_0x228955[_0x386fe9(0x210)]===_0x32ef84['orJjL']?0xc8:_0x32ef84[_0x386fe9(0x352)](_0x228955[_0x386fe9(0x210)],_0x386fe9(0x33f))?0xcf:0x1f7,_0x6dd844=_0x32ef84[_0x386fe9(0x379)](Date[_0x386fe9(0x382)](),_0x14dfd1[_0x386fe9(0x2ef)+'e']);Logger[_0x386fe9(0x34d)](_0x386fe9(0x291)+_0x386fe9(0x296)+_0x228955['status'],_0x14dfd1);const _0xef6aee=ResponseFormatter[_0x386fe9(0x35a)](_0x228955,_0x14dfd1[_0x386fe9(0x317)+'d'],{'processingTime':_0x6dd844});Logger[_0x386fe9(0x22b)](_0x5b8ed6,_0x6dd844,_0x14dfd1),res[_0x386fe9(0x210)](_0x5b8ed6)[_0x386fe9(0x25b)](_0xef6aee);}catch(_0xa7c56){if(_0x32ef84[_0x386fe9(0x21c)](_0x32ef84[_0x386fe9(0x2f7)],_0x386fe9(0x36e))){Logger[_0x386fe9(0x29d)](_0x32ef84[_0x386fe9(0x20e)],_0xa7c56,_0x14dfd1);const _0x4f0d61=ResponseFormatter[_0x386fe9(0x28e)+_0x386fe9(0x226)](_0xa7c56,_0x14dfd1[_0x386fe9(0x317)+'d']);Logger[_0x386fe9(0x22b)](_0x4f0d61[_0x386fe9(0x2a8)+'de'],Date['now']()-_0x14dfd1[_0x386fe9(0x2ef)+'e'],_0x14dfd1),res[_0x386fe9(0x210)](_0x4f0d61['statusCo'+'de'])[_0x386fe9(0x25b)](_0x4f0d61[_0x386fe9(0x22b)]);}else{_0x3b59b1[_0x386fe9(0x276)](_0x2b1e6f['WdTZf'],_0x308428);const _0x55e8a7=_0x2f0c9e[_0x386fe9(0x29d)](_0x2b1e6f[_0x386fe9(0x233)],_0x2b1e6f[_0x386fe9(0x2a9)],_0x3825eb['requestI'+'d'],_0x188357,0x191);_0x22b842[_0x386fe9(0x22b)](_0x55e8a7[_0x386fe9(0x2a8)+'de'],_0x2b1e6f[_0x386fe9(0x209)](_0x53351c[_0x386fe9(0x382)](),_0x50c94b[_0x386fe9(0x2ef)+'e']),_0x31fe8f),res[_0x386fe9(0x210)](_0x55e8a7[_0x386fe9(0x2a8)+'de'])[_0x386fe9(0x25b)](_0x55e8a7[_0x386fe9(0x22b)]);return;}}}},this[_0x4ad9f1(0x2f9)+_0x4ad9f1(0x1f0)]=async(req,res,next)=>{const _0x21d943=_0x4ad9f1,_0x41b56f=this[_0x21d943(0x28d)+_0x21d943(0x241)](req);Logger[_0x21d943(0x203)](req,_0x41b56f);try{if(!req[_0x21d943(0x235)]?.[_0x21d943(0x25c)]){const _0x18b2b9=ResponseFormatter[_0x21d943(0x29d)](_0x32ef84[_0x21d943(0x340)],_0x32ef84[_0x21d943(0x245)],_0x41b56f[_0x21d943(0x317)+'d'],undefined,0x191);Logger['response'](_0x18b2b9['statusCo'+'de'],_0x32ef84[_0x21d943(0x30d)](Date[_0x21d943(0x382)](),_0x41b56f[_0x21d943(0x2ef)+'e']),_0x41b56f),res[_0x21d943(0x210)](_0x18b2b9[_0x21d943(0x2a8)+'de'])[_0x21d943(0x25b)](_0x18b2b9['response']);return;}Logger[_0x21d943(0x34d)](_0x21d943(0x232)+_0x21d943(0x274)+_0x21d943(0x260)+'tion',_0x41b56f);const _0x2ca713=this[_0x21d943(0x25f)+'ce'][_0x21d943(0x2f9)+_0x21d943(0x1f0)](),_0x54039b=_0x32ef84[_0x21d943(0x1f1)](Date['now'](),_0x41b56f[_0x21d943(0x2ef)+'e']);Logger[_0x21d943(0x35a)](_0x21d943(0x238)+_0x21d943(0x347)+_0x21d943(0x2e2),_0x41b56f);const _0x2fa3a2=ResponseFormatter[_0x21d943(0x35a)](_0x2ca713,_0x41b56f[_0x21d943(0x317)+'d'],{'processingTime':_0x54039b,'userId':req['user'][_0x21d943(0x25c)]});Logger[_0x21d943(0x22b)](0xc8,_0x54039b,_0x41b56f),res['status'](0xc8)['json'](_0x2fa3a2);}catch(_0x10ddcf){Logger[_0x21d943(0x29d)](_0x21d943(0x29e)+_0x21d943(0x287),_0x10ddcf,_0x41b56f);const _0x49639a=ResponseFormatter['formatRA'+'GError'](_0x10ddcf,_0x41b56f[_0x21d943(0x317)+'d']);Logger[_0x21d943(0x22b)](_0x49639a[_0x21d943(0x2a8)+'de'],Date[_0x21d943(0x382)]()-_0x41b56f['startTim'+'e'],_0x41b56f),res[_0x21d943(0x210)](_0x49639a[_0x21d943(0x2a8)+'de'])[_0x21d943(0x25b)](_0x49639a[_0x21d943(0x22b)]);}},this[_0x4ad9f1(0x25f)+'ce']=rag_service_1[_0x4ad9f1(0x290)+'ce']['getInsta'+_0x4ad9f1(0x319)](),this[_0x4ad9f1(0x2eb)]=ControllerConfigService[_0x4ad9f1(0x284)+_0x4ad9f1(0x319)]();}static[_0x2daa70(0x284)+_0x2daa70(0x319)](){const _0x4ba954=_0x2daa70;return!RAGController[_0x4ba954(0x224)]&&(RAGController['instance']=new RAGController()),RAGController[_0x4ba954(0x224)];}[_0x2daa70(0x28d)+'ntext'](req){const _0x317480=_0x2daa70;return{'requestId':req[_0x317480(0x317)+'d']||(0x0,uuid_1['v4'])(),'userId':req['user']?.[_0x317480(0x25c)],'endpoint':req[_0x317480(0x30b)],'method':req['method'],'startTime':Date[_0x317480(0x382)](),'ip':req['ip'],'userAgent':req[_0x317480(0x22f)](_0x317480(0x36a)+'nt')};}}exports['RAGContr'+_0x2daa70(0x372)]=RAGController,exports['default']=RAGController['getInsta'+_0x2daa70(0x319)]();