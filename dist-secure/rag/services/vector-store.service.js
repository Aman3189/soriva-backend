const _0x5dab90=_0x310d;(function(_0x354631,_0x109a9d){const _0x4a3067=_0x310d,_0x1b108c=_0x354631();while(!![]){try{const _0x462bad=parseInt(_0x4a3067(0x207))/0x1+parseInt(_0x4a3067(0x1ef))/0x2*(parseInt(_0x4a3067(0x1af))/0x3)+-parseInt(_0x4a3067(0x200))/0x4+-parseInt(_0x4a3067(0x1dc))/0x5*(-parseInt(_0x4a3067(0x1e0))/0x6)+-parseInt(_0x4a3067(0x1b7))/0x7+-parseInt(_0x4a3067(0x210))/0x8+-parseInt(_0x4a3067(0x195))/0x9*(-parseInt(_0x4a3067(0x219))/0xa);if(_0x462bad===_0x109a9d)break;else _0x1b108c['push'](_0x1b108c['shift']());}catch(_0x466866){_0x1b108c['push'](_0x1b108c['shift']());}}}(_0x33fc,0xf2531));const _0x5a7bb8=(function(){const _0x26ac21={'kofGu':function(_0x166e46,_0x4fe6b7){return _0x166e46===_0x4fe6b7;},'yIsEr':'DNLzN','pwXCQ':function(_0x45d696,_0x584636){return _0x45d696(_0x584636);}};let _0x53c3fc=!![];return function(_0x1ff429,_0x18e469){const _0x2bcd52={'SYpqH':function(_0x4e8d7d,_0x25be6b){const _0x28132c=_0x310d;return _0x26ac21[_0x28132c(0x133)](_0x4e8d7d,_0x25be6b);}},_0x3d8b76=_0x53c3fc?function(){const _0x2e9514=_0x310d;if(_0x2e9514(0x212)===_0x2e9514(0x212)){if(_0x18e469){if(_0x26ac21[_0x2e9514(0x21a)](_0x26ac21[_0x2e9514(0x1ff)],_0x26ac21[_0x2e9514(0x1ff)])){const res=_0x18e469[_0x2e9514(0x143)](_0x1ff429,arguments);return _0x18e469=null,res;}else return[];}}else{const _0x4055e9=_0x2dd897[_0x2e9514(0x18f)][_0x2e9514(0x197)+'TORE_PRO'+_0x2e9514(0x1db)],_0x4bfda5=_0x16e795[_0x2e9514(0x18f)][_0x2e9514(0x197)+_0x2e9514(0x178)+'EX'],_0x458d2e=_0x123241['env'][_0x2e9514(0x1bc)+'IMENSION'+'S'];if(_0x4055e9)this[_0x2e9514(0x13f)][_0x2e9514(0x1c5)]=_0x4055e9;if(_0x4bfda5)this[_0x2e9514(0x13f)]['indexNam'+'e']=_0x4bfda5;if(_0x458d2e)this[_0x2e9514(0x13f)][_0x2e9514(0x202)+'ns']=_0x2bcd52[_0x2e9514(0x10f)](_0x333a6e,_0x458d2e);_0x18863f[_0x2e9514(0x14d)][_0x2e9514(0x1d8)](_0x2e9514(0xe2)+_0x2e9514(0x198)+_0x2e9514(0x16f)+_0x2e9514(0x19b)+this['config'][_0x2e9514(0x1c5)]);}}:function(){};return _0x53c3fc=![],_0x3d8b76;};}()),_0x5425cf=_0x5a7bb8(this,function(){const _0x5a3400=_0x310d;return _0x5425cf[_0x5a3400(0xe5)]()[_0x5a3400(0x1d0)]('(((.+)+)'+'+)+$')[_0x5a3400(0xe5)]()['construc'+_0x5a3400(0x180)](_0x5425cf)[_0x5a3400(0x1d0)](_0x5a3400(0xe7)+_0x5a3400(0x16a));});function _0x33fc(){const _0x2cb0b8=['y29Yza','BMnL','BwLSyxjPDhK','C2v0','y291BNq','AxrPywXPEMu','ihzLy3rVCNm','C3bHy2u','BwvZCgfJzq','zwnVBMu','u1LWCuG','Aw5ZDgfUy2u','zgvSzxrL','y29UC3rYDwm','AYK6ia','ihrVia','ueLFs0vz','zwqGkg1Vy2S','z2v0vxnLCK4','EMvrzhjHBNq','zwrzq0q','CwrYyw50q2W','zgvSzxrLzem','DgvZ','zgvIDwC','A3rUthe','DxrOB3jPEMu','x2vUy3j5Chq','Aw9UihvWzge','BgXPBMCGyMe','ChvZAa','D2fYBG','uK9evunusu8','y29ZAw5L','uKWGBM90igm','Bgv0zwqG','DxvKzxu','yLLzvNy','Dg9Yzv0Gqwm','y2Pqsg8','z2v0u3rHDhm','CMfUDe5HBwu','zw5Pzwq','DwvYEsaOBw8','wgjTz1y','Aw5JBhvKzvy','ChDyq1e','DgvK','qwnJzxnZigq','zwn0B3jdB3u','C2L6zq','ks4GrgvSzxq','s1vpD0q','x0vovKLst04','DM5ZwgW','z2v0sw5ZDge','yw50','tLrOq0u','y29UzMLN','Dg9Yzv0Guxu','su1ftLnjt04','B2n1BwvUDca','yxbWBhK','zw5HyMXLrw4','Dg9Yzv0Gvxa','ugPHvMq','swvZDKy','B3vUDa','uursqu5ux1u','B3jLu2vYDMK','x0fqsv9lrvK','C2v0qxv0Afq','Bg9Nz2vY','u2z2vKi','DxbZzxj0vg8','BML0AwfSAxO','Bwv0ywrHDge','CgfKrw5K','txDeAvu','BwfW','zw5JCNLWDa','BM5wD1a','ignYzwrLBNq','s05ZsKm','DMfSAwrHDgu','Dw5OzwfSDgG','zxj5igzHAwW','y2HLzcaO','B3bLCNr5','zguGzM9Yig0','ugLUzwnVBMu','BMvJB25LigK','y29ZAw5Lu2K','C29YAxzHlxi','Ag1TExK','zNjVBq','v3zxzKK','tM5nDgO','t1rXDxO','igzYB20G','Aw5NigLUlw0','kYKRja','DhjHy2TtDg8','zwnR','uxvVvK4','CNKGkg1Vy2S','Aw5NihbYB3y','DxnLCL8','Dg9Yzv0GugK','CuPPsue','u3rVCMfNzuW','BNfpDKi','wgTcywq','B3jL','mNW0Fdv8mW','ve9srv9jtKq','z2v0vxnLCLy','zcbVCIb1BMe','C3fYDa','y3jLyxrLrgu','BgvK','sgXVCKC','BergqwO','Dg9Y','rg1rzem','x19LC01Vzhu','A2LUzYbMywK','CMfUDcbPBMK','BMvJB25LtMe','ywDLlG','y3vTzw50','zwn0B3jZ','B3jHz2u','CMfUzg9TqNK','uK9or19lrvK','AgvHBhrOEq','vxDPAhi','zxj0icHTB2m','zw52','EMvqAw5Ly28','ChzJALC','u1rbuLrfuG','BgvUz3rO','q291BNq','mti3odiWndnYuLzvv3O','vw5ZDxbWB3i','vKvdve9sx1m','Dg9Yzv0Gvxm','BMzPz3vYyxq','twvTB3j5','AwrLCJOG','B3j5','B25MAwD1CMu','ENj2EKe','AwXLza','zMLUywW','Dg9WsW','B3iGDxbNCMe','zg9JDw1LBNq','xZmYqG','CgHLCML2','ksbMCM9Tia','Aw1LBNnPB24','zgvSzxrLrg8','uwrYyw50ifu','Agv4','CgLUzwnVBMu','tL9lrvK','zgvSzxrLuwq','C3vIC3rYAw4','nJa2m2P5ExrjDa','DhPbt3y','CxvLCNLrzhi','zsbVBgqGzg8','zxjby2nLC3m','Aw5JBhvKzu0','y3j5ChrPB24','AwzPy2f0Aw8','otm4mdK4n0TezfnwvW','mhW3Fdf8nNW','BMvJB25Lihu','rwDdBfm','ks4GvxbNCMe','vKvdve9sx0q','ufr4qwq','Bw9YEsbZDg8','tuvova','Aw5PDgLHBgK','uwrYyw50','BxvZDcbOyxy','zgvJCNLWDa','CNzPy2uGAw4','ChjVDMLKzxi','DKHmrvy','qNHRr2e','CMfUDcb1Chm','ywDL','zxnise4','Bg9HzenVBMy','ueLorunptKu','ihjLC3vSDhm','vMvJDg9Yihm','zsbZyw1Ligq','C2vHCMnO','BM90igzVDw4','AuHZrLi','CwXiuwG','zxrHzgf0yq','DgvKihbYB3y','CgfJzq','y3jLyxrLq2K','Aw5MBW','BIbMywLSzwq','ywvZlti1nI0','vKLervi','nZC1v0vsA0zg','DxrMoa','DxnLCKLK','zw50tMfTzxm','nZiZnJzIqvz2txu','ExDRzKG','zMLUzfvUAxe','z2nT','AwDgCM9Trw4','Aw5KzxHoyw0','zwfJAgvKicG','u3rHCG','CwrYyw50','zw5Pzwq6ieq','AwvUDa','y2SGDg8GBwu','A2v5','ELzwCNO','EMvqCM92Awq','mtmYmKLbCgjZAW','whLiBuu','DMvYAwz5vxm','q2XPzw50','zxj5ihjLDhu','Aw1PDhm','y3vTzw50CYa','rg9JDw1LBNq','C2XPy2u','Bw9YEu5HBwu','DMvJDg9YuMu','AKHnqMy','seLtx0Lox1a','EvvyzK8','DxbKyxrL','q0HbtKDfx1q','EuLZrxi','nZCZmZK2neLyuhbtCq','DMvJDg9Yvxm','zgLTzw5ZAw8','y2SPigzYB20','Bwf4vMvJDg8','DhnSAwi','CgTXsLy','ntC5nJq1s3LzuxvM','C29YDa','CxvLCNLqAw4','C3rYAw5NAwy','CgfJzxm','uursqu5ux0e','Bwf4tMfTzxm','DMvJDg9Y','yw1LC3bHy2u','nZuXmJeYme9YrvvNDq','u0P6te8','ChfwEha','C3vJy2vZCW','zw50CMLLCW','AwfSCYbUB3q','uuvZvg8','twT4Be4','t0XLEe0','mtbUAfDhqNG','A29Mr3u','DgLHBgL6zwq','Dg9Yzv0Grgu','C2vYDcbMywK','qufjBNm','z2v0','Dg9YywDLigW','tL9vu0vFu1q','zgvSzxrLugK','BwvTB3j5','w1zLy3rVCLm','vKvdve9sx0u','uhjPC21Hq2W','Dg9tDhjPBMC','zgvMyxvSDa','kcGOlISPkYK','icHTB2nRkq','CgfYC2u','CxvLCNLnzw0','zxjYB3i','CxvLCNK','Dg9Yzv0Guhi','vMvJDg9Yu3q','y3j5ChrV','Dg9Yzv0GrMe','AxrXzNC','z2v0rg9JDw0','B2nRktOG','ywXNB3jPDgG','igXPBwL0ihi','CMfNzvvZywC','D2rSyMi','Dg9Yzv0Guwq','Dg9Yzv0Gu2u','zw5JCNLWDgK','rfHkEwK','vMvJDg9YCYa','C2nVCMu','tKnswvbusu8','BwvTB3j5u3q','zgvSzxrLtwu','u2vKsMS','Dg9Yzv0Gq28','BK56C2i','ywDLihrYywm'];_0x33fc=function(){return _0x2cb0b8;};return _0x33fc();}_0x5425cf();'use strict';Object['definePr'+_0x5dab90(0x15d)](exports,_0x5dab90(0x182)+'le',{'value':!![]}),exports[_0x5dab90(0xee)+_0x5dab90(0x14a)+'ce']=void 0x0;const tslib_1=require(_0x5dab90(0x205)),client_1=require('@prisma/'+'client'),logger_1=require('@shared/'+'utils/lo'+'gger'),crypto=tslib_1['__import'+_0x5dab90(0x1e7)](require(_0x5dab90(0xef))),prisma=new client_1[(_0x5dab90(0xe4))+(_0x5dab90(0x1ea))](),PLAN_STORAGE_LIMITS={'STARTER':{'maxVectors':0x3e8,'maxNamespaces':0x5,'retentionDays':0x7,'enableBackup':![]},'PLUS':{'maxVectors':0x2710,'maxNamespaces':0x14,'retentionDays':0x1e,'enableBackup':!![]},'PRO':{'maxVectors':0x186a0,'maxNamespaces':0x64,'retentionDays':0x5a,'enableBackup':!![]},'EDGE':{'maxVectors':0x7a120,'maxNamespaces':0x1f4,'retentionDays':0xb4,'enableBackup':!![]},'LIFE':{'maxVectors':-0x1,'maxNamespaces':-0x1,'retentionDays':0x16d,'enableBackup':!![]}};class MetadataEncryption{constructor(){const _0x420f44=_0x5dab90;this[_0x420f44(0xf4)+'m']=_0x420f44(0x1da)+_0x420f44(0x1e3);const _0x436039=process['env'][_0x420f44(0xe3)+'NCRYPTIO'+_0x420f44(0x1ac)]||_0x420f44(0x1fe)+_0x420f44(0x1fb)+_0x420f44(0x125)+_0x420f44(0xdf)+_0x420f44(0x18b)+_0x420f44(0x1a4);this[_0x420f44(0x1ec)]=Buffer[_0x420f44(0x164)](_0x436039[_0x420f44(0x152)](0x20,'0')['substrin'+'g'](0x0,0x20));}[_0x5dab90(0x155)](_0x507dd8){const _0x16050c=_0x5dab90,_0xf54b59={'SfvVB':'hex'},_0x1f143c=crypto[_0x16050c(0x18a)+_0x16050c(0x11c)](0x10),_0x3c1a1b=crypto[_0x16050c(0x1d7)+_0x16050c(0x1a5)](this['algorith'+'m'],this[_0x16050c(0x1ec)],_0x1f143c),_0x3389f8=JSON[_0x16050c(0x20a)+'y'](_0x507dd8);let _0xac08e1=_0x3c1a1b[_0x16050c(0x1fd)](_0x3389f8,_0x16050c(0x1dd),_0x16050c(0x1aa));_0xac08e1+=_0x3c1a1b[_0x16050c(0x1a0)](_0xf54b59[_0x16050c(0x14e)]);const _0xa7adbf=_0x3c1a1b['getAuthT'+'ag']();return JSON[_0x16050c(0x20a)+'y']({'iv':_0x1f143c[_0x16050c(0xe5)]('hex'),'encrypted':_0xac08e1,'tag':_0xa7adbf['toString'](_0xf54b59[_0x16050c(0x14e)])});}[_0x5dab90(0x1c3)](_0x33a6cc){const _0x37d00a=_0x5dab90,_0x5a3b49={'vnsXl':_0x37d00a(0x1aa),'YVHKF':_0x37d00a(0x1dd)},{iv:_0xe39368,encrypted:_0x56e6d8,tag:_0x2b3cce}=JSON[_0x37d00a(0xe9)](_0x33a6cc),_0x498fb5=crypto[_0x37d00a(0x17c)+'cipheriv'](this[_0x37d00a(0xf4)+'m'],this[_0x37d00a(0x1ec)],Buffer[_0x37d00a(0x164)](_0xe39368,_0x5a3b49[_0x37d00a(0x13b)]));_0x498fb5[_0x37d00a(0x14c)+'ag'](Buffer[_0x37d00a(0x164)](_0x2b3cce,_0x37d00a(0x1aa)));let _0x16c66b=_0x498fb5['update'](_0x56e6d8,_0x37d00a(0x1aa),_0x37d00a(0x1dd));return _0x16c66b+=_0x498fb5['final'](_0x5a3b49['YVHKF']),JSON[_0x37d00a(0xe9)](_0x16c66b);}}class VectorStoreService{constructor(){const _0x26aa05=_0x5dab90,_0x56eaa6={'KNsJC':_0x26aa05(0x1b8)+_0x26aa05(0x177),'nNzsb':_0x26aa05(0x126)},_0x46b726=_0x56eaa6[_0x26aa05(0x158)]['split']('|');let _0x24ba82=0x0;while(!![]){switch(_0x46b726[_0x24ba82++]){case'0':this[_0x26aa05(0x13f)]={'provider':_0x26aa05(0xe1),'indexName':_0x26aa05(0x162)+'ag','dimensions':0x600,'metric':_0x56eaa6[_0x26aa05(0x103)],'enableEncryption':!![],'enableCompression':![]};continue;case'1':this['pinecone'+'Client']=null;continue;case'2':this[_0x26aa05(0xfa)+'on']=new MetadataEncryption();continue;case'3':logger_1[_0x26aa05(0x14d)][_0x26aa05(0x1d8)](_0x26aa05(0xe2)+_0x26aa05(0xf9)+_0x26aa05(0x1c4)+_0x26aa05(0x10a)+'d');continue;case'4':this[_0x26aa05(0x1cb)+_0x26aa05(0x1e4)+'v']();continue;case'5':this[_0x26aa05(0x1c0)+_0x26aa05(0x1ee)+'er']();continue;case'6':this[_0x26aa05(0x11a)+'ient']=null;continue;case'7':this['memorySt'+_0x26aa05(0x176)]=new Map();continue;}break;}}static[_0x5dab90(0x13c)+_0x5dab90(0x106)](){const _0x3a1590=_0x5dab90;return!VectorStoreService[_0x3a1590(0x110)]&&(VectorStoreService[_0x3a1590(0x110)]=new VectorStoreService()),VectorStoreService[_0x3a1590(0x110)];}[_0x5dab90(0x1cb)+_0x5dab90(0x1e4)+'v'](){const _0x482227=_0x5dab90,_0x2c070e={'qlHQh':function(_0x14f373,_0x17ebab){return _0x14f373(_0x17ebab);}},_0x5913d0=process[_0x482227(0x18f)][_0x482227(0x197)+'TORE_PRO'+_0x482227(0x1db)],_0x113c91=process[_0x482227(0x18f)][_0x482227(0x197)+_0x482227(0x178)+'EX'],_0x148e75=process[_0x482227(0x18f)][_0x482227(0x1bc)+_0x482227(0x141)+'S'];if(_0x5913d0)this[_0x482227(0x13f)][_0x482227(0x1c5)]=_0x5913d0;if(_0x113c91)this[_0x482227(0x13f)][_0x482227(0x1e5)+'e']=_0x113c91;if(_0x148e75)this[_0x482227(0x13f)][_0x482227(0x202)+'ns']=_0x2c070e[_0x482227(0x1d3)](parseInt,_0x148e75);logger_1[_0x482227(0x14d)]['info'](_0x482227(0xe2)+_0x482227(0x198)+_0x482227(0x16f)+_0x482227(0x19b)+this['config']['provider']);}async[_0x5dab90(0x1c0)+_0x5dab90(0x1ee)+'er'](){const _0x966038=_0x5dab90,_0xcee369={'bduzF':'qdrant','IesvF':_0x966038(0xe2)+_0x966038(0x198)+_0x966038(0x169)+'emory\x20st'+_0x966038(0x189),'pbvSq':'OgNtS','OTquz':_0x966038(0xe1)};try{switch(this['config'][_0x966038(0x1c5)]){case _0x966038(0x1ab):await this[_0x966038(0x1c0)+_0x966038(0x190)+'ne']();break;case _0xcee369['bduzF']:await this[_0x966038(0x1c0)+_0x966038(0x118)]();break;case _0x966038(0xe1):logger_1[_0x966038(0x14d)][_0x966038(0x1d8)](_0xcee369[_0x966038(0x147)]);break;default:throw new Error(_0x966038(0x196)+_0x966038(0x1d5)+'ider:\x20'+this[_0x966038(0x13f)][_0x966038(0x1c5)]);}}catch(_0x16994f){if(_0xcee369['pbvSq']==='OgNtS')logger_1[_0x966038(0x14d)][_0x966038(0xeb)](_0x966038(0xe2)+_0x966038(0xed)+'ovider\x20i'+'nitializ'+'ation\x20fa'+_0x966038(0x19f),_0x16994f),logger_1['logger'][_0x966038(0x124)](_0x966038(0xe2)+_0x966038(0xf0)+_0x966038(0x122)+_0x966038(0x1eb)+_0x966038(0x1be)+'rage'),this[_0x966038(0x13f)][_0x966038(0x1c5)]=_0xcee369[_0x966038(0x167)];else return!_0x20942c[_0x966038(0x110)]&&(_0xf3d6a8[_0x966038(0x110)]=new _0x160060()),_0x3f7786[_0x966038(0x110)];}}async[_0x5dab90(0x1c0)+_0x5dab90(0x190)+'ne'](){const _0xed1804=_0x5dab90,_0x2317f3={'VmBdZ':_0xed1804(0x1a9)+_0xed1804(0x127)+'onfigure'+'d','XkBad':_0xed1804(0xf7),'VfRFL':'Pinecone'+_0xed1804(0x157)+_0xed1804(0x215)+'\x20configu'+'red'},_0xad3452=process[_0xed1804(0x18f)][_0xed1804(0x1cc)+_0xed1804(0x14b)],_0x9d8437=process[_0xed1804(0x18f)]['PINECONE'+_0xed1804(0x13a)+_0xed1804(0x1bf)];if(!_0xad3452||!_0x9d8437){if(_0x2317f3[_0xed1804(0x175)]!=='HObMr')throw new Error(_0x2317f3['VfRFL']);else{const _0x24cd51=_0x55ad21[_0xed1804(0x18f)][_0xed1804(0x149)+'RL'],_0x197059=_0xd2cf7c[_0xed1804(0x18f)][_0xed1804(0x20c)+_0xed1804(0x115)];if(!_0x24cd51)throw new _0x375c21(_0x2317f3['VmBdZ']);_0x20b5c3[_0xed1804(0x14d)][_0xed1804(0x1d8)](_0xed1804(0xe2)+_0xed1804(0xf8)+_0xed1804(0x184)+'tialized'+'\x20(mock)');}}logger_1[_0xed1804(0x14d)]['info'](_0xed1804(0xe2)+'tore]\x20Pi'+_0xed1804(0x160)+_0xed1804(0x150)+_0xed1804(0x116)+')');}async[_0x5dab90(0x1c0)+_0x5dab90(0x118)](){const _0x168a37=_0x5dab90,_0x7b1ae7={'aSEaj':'[VectorS'+_0x168a37(0xf8)+_0x168a37(0x184)+_0x168a37(0x21b)+_0x168a37(0xe8)},_0x3ecbb4=process[_0x168a37(0x18f)][_0x168a37(0x149)+'RL'],_0xc2f839=process[_0x168a37(0x18f)][_0x168a37(0x20c)+_0x168a37(0x115)];if(!_0x3ecbb4)throw new Error(_0x168a37(0x1a9)+_0x168a37(0x127)+_0x168a37(0x19d)+'d');logger_1['logger'][_0x168a37(0x1d8)](_0x7b1ae7['aSEaj']);}['updateCo'+'nfig'](_0x53ef88){const _0xda7e1d=_0x5dab90;this[_0xda7e1d(0x13f)]={...this[_0xda7e1d(0x13f)],..._0x53ef88},logger_1[_0xda7e1d(0x14d)][_0xda7e1d(0x1d8)](_0xda7e1d(0xe2)+_0xda7e1d(0x102)+_0xda7e1d(0x199)+_0xda7e1d(0x121)+_0xda7e1d(0x134));}['getConfi'+'g'](){const _0x5e80b6=_0x5dab90;return{...this[_0x5e80b6(0x13f)]};}[_0x5dab90(0x117)+'amespace'](_0x1ac04d){const _0x54084f=_0x5dab90;return _0x54084f(0x170)+_0x1ac04d;}[_0x5dab90(0xf2)+_0x5dab90(0x1df)+_0x5dab90(0x1d6)](_0x197019,_0x3217e0){const _0x35ec42=_0x5dab90;return _0x35ec42(0x170)+_0x197019+'_doc_'+_0x3217e0;}async['upsert'](_0x5efab6,_0x499dcf,_0x7b82b7,_0xa11540=_0x5dab90(0x192)){const _0x5f18f9=_0x5dab90,_0x200937={'Uwihr':_0x5f18f9(0xe7)+_0x5f18f9(0x16a),'FydSq':_0x5f18f9(0x1ab),'zrvzA':_0x5f18f9(0xe1),'JfERd':_0x5f18f9(0x181),'PTxAd':'[VectorS'+_0x5f18f9(0x145)+_0x5f18f9(0x21d)+_0x5f18f9(0x17d)};try{if(_0x5f18f9(0x12c)===_0x5f18f9(0x12c)){await this[_0x5f18f9(0x159)+_0x5f18f9(0x173)+'imits'](_0x499dcf,_0xa11540,_0x5efab6[_0x5f18f9(0x193)]);const _0x363d86=this[_0x5f18f9(0xf2)+_0x5f18f9(0x1df)+_0x5f18f9(0x1d6)](_0x499dcf,_0x7b82b7),_0x21ddb5=_0x5efab6[_0x5f18f9(0x154)](_0x4ccaa9=>({..._0x4ccaa9,'metadata':this['config'][_0x5f18f9(0x144)+_0x5f18f9(0x1b5)]?{..._0x4ccaa9[_0x5f18f9(0x151)],'_encrypted':this['encrypti'+'on'][_0x5f18f9(0x155)](_0x4ccaa9[_0x5f18f9(0x151)])}:_0x4ccaa9[_0x5f18f9(0x151)]}));let _0x38c1b4;switch(this[_0x5f18f9(0x13f)][_0x5f18f9(0x1c5)]){case _0x200937['FydSq']:_0x38c1b4=await this[_0x5f18f9(0x14f)+_0x5f18f9(0x15f)](_0x21ddb5,_0x363d86);break;case _0x5f18f9(0x1e8):_0x38c1b4=await this[_0x5f18f9(0x14f)+_0x5f18f9(0x1c1)](_0x21ddb5,_0x363d86);break;case _0x200937[_0x5f18f9(0x19e)]:_0x38c1b4=await this[_0x5f18f9(0x14f)+_0x5f18f9(0x19a)](_0x21ddb5,_0x363d86);break;default:throw new Error(_0x5f18f9(0x196)+_0x5f18f9(0x1d5)+_0x5f18f9(0x19b)+this[_0x5f18f9(0x13f)][_0x5f18f9(0x1c5)]);}return await this[_0x5f18f9(0x16b)+_0x5f18f9(0xf6)+'e'](_0x499dcf,_0x5efab6['length']),logger_1['logger'][_0x5f18f9(0x213)](_0x5f18f9(0xe2)+_0x5f18f9(0x145)+'serted\x20'+_0x38c1b4['upserted'+_0x5f18f9(0x194)]+(_0x5f18f9(0x10b)+_0x5f18f9(0x114))+_0x363d86),_0x38c1b4;}else return _0x3eeab3[_0x5f18f9(0xe5)]()[_0x5f18f9(0x1d0)](zCzkaZ[_0x5f18f9(0x18d)])['toString']()[_0x5f18f9(0x112)+_0x5f18f9(0x180)](_0x109e94)[_0x5f18f9(0x1d0)](_0x5f18f9(0xe7)+_0x5f18f9(0x16a));}catch(_0x3bd150){if(_0x5f18f9(0x181)===_0x200937['JfERd']){logger_1['logger'][_0x5f18f9(0xeb)](_0x200937[_0x5f18f9(0x1bd)],_0x3bd150);throw _0x3bd150;}else return{...this[_0x5f18f9(0x13f)]};}}async[_0x5dab90(0x14f)+'Pinecone'](_0x5541b5,_0x1d9b56){const _0x429929=_0x5dab90;return logger_1[_0x429929(0x14d)]['info'](_0x429929(0xe2)+_0x429929(0x171)+_0x429929(0x1b9)+'psert\x20(m'+_0x429929(0xf3)+_0x5541b5[_0x429929(0x193)]+('\x20vectors'+_0x429929(0x114))+_0x1d9b56),{'success':!![],'upsertedCount':_0x5541b5[_0x429929(0x193)]};}async[_0x5dab90(0x14f)+'Qdrant'](_0x1b621e,_0x2eacb2){const _0x5b4d60=_0x5dab90;return logger_1['logger'][_0x5b4d60(0x1d8)](_0x5b4d60(0xe2)+_0x5b4d60(0xf8)+_0x5b4d60(0x1c8)+_0x5b4d60(0x18e)+_0x5b4d60(0x113)+_0x1b621e[_0x5b4d60(0x193)]+(_0x5b4d60(0x10b)+'\x20to\x20')+_0x2eacb2),{'success':!![],'upsertedCount':_0x1b621e[_0x5b4d60(0x193)]};}async[_0x5dab90(0x14f)+_0x5dab90(0x19a)](_0x3628b0,_0x43adf1){const _0x2601b3=_0x5dab90,_0x2bc9dc={'HlorG':_0x2601b3(0xe2)+_0x2601b3(0x145)+'sert\x20fai'+_0x2601b3(0x17d),'NThCE':function(_0x40d89d,_0x2b9b25){return _0x40d89d===_0x2b9b25;},'bYYVv':'nqOvB','kKKSO':_0x2601b3(0xf1)};if(!this[_0x2601b3(0xff)+_0x2601b3(0x176)]['has'](_0x43adf1)){if(_0x2bc9dc[_0x2601b3(0x13e)](_0x2bc9dc[_0x2601b3(0x12a)],_0x2601b3(0x174)))this['memorySt'+_0x2601b3(0x176)][_0x2601b3(0x108)](_0x43adf1,new Map());else{_0x4102b2[_0x2601b3(0x14d)][_0x2601b3(0xeb)](_0x2bc9dc[_0x2601b3(0x17e)],_0x1b8a3a);throw _0x33f02c;}}const _0xb0926e=this['memorySt'+_0x2601b3(0x176)]['get'](_0x43adf1);for(const _0x1579d6 of _0x3628b0){if(_0x2601b3(0x1b0)!==_0x2bc9dc['kKKSO'])_0xb0926e[_0x2601b3(0x108)](_0x1579d6['id'],{'id':_0x1579d6['id'],'vector':_0x1579d6[_0x2601b3(0x20e)],'metadata':_0x1579d6[_0x2601b3(0x151)]});else throw new _0x1d407b('Vectors\x20'+'must\x20hav'+_0x2601b3(0x1cf)+_0x2601b3(0x1a7)+'s');}return{'success':!![],'upsertedCount':_0x3628b0[_0x2601b3(0x193)]};}async[_0x5dab90(0xec)](_0x42d104,_0x5496da,_0x2f1a47){const _0x4e61b5=_0x5dab90,_0x326bb8={'SedJk':_0x4e61b5(0x1da)+_0x4e61b5(0x1e3),'QuoVN':_0x4e61b5(0x1fe)+'HIS_IN_P'+'RODUCTIO'+'N_USE_ST'+_0x4e61b5(0x18b)+_0x4e61b5(0x1a4),'zVVrz':'ZSVTk','OLexM':_0x4e61b5(0x1e8),'nddAB':function(_0x2e7820,_0x5108d7){return _0x2e7820!==_0x5108d7;},'mvDjV':'tBicW','xHVHr':_0x4e61b5(0xe2)+_0x4e61b5(0x140)+_0x4e61b5(0x15b)+'ed'};try{if('ZSVTk'===_0x326bb8[_0x4e61b5(0x1ed)]){await this['verifyUs'+_0x4e61b5(0x1b3)](_0x5496da,_0x2f1a47);const _0xdbff7d=_0x2f1a47?this[_0x4e61b5(0xf2)+_0x4e61b5(0x1df)+_0x4e61b5(0x1d6)](_0x5496da,_0x2f1a47):this[_0x4e61b5(0x117)+_0x4e61b5(0x20f)](_0x5496da);let _0x4d2353;switch(this[_0x4e61b5(0x13f)]['provider']){case _0x4e61b5(0x1ab):_0x4d2353=await this[_0x4e61b5(0x209)+'econe'](_0x42d104,_0xdbff7d);break;case _0x326bb8[_0x4e61b5(0x218)]:_0x4d2353=await this['queryQdr'+_0x4e61b5(0x13d)](_0x42d104,_0xdbff7d);break;case'memory':_0x4d2353=await this[_0x4e61b5(0xea)+_0x4e61b5(0x19c)](_0x42d104,_0xdbff7d);break;default:throw new Error(_0x4e61b5(0x196)+_0x4e61b5(0x1d5)+_0x4e61b5(0x19b)+this['config'][_0x4e61b5(0x1c5)]);}return this[_0x4e61b5(0x13f)][_0x4e61b5(0x144)+_0x4e61b5(0x1b5)]&&_0x42d104['includeM'+'etadata']&&(_0x4d2353=_0x4d2353[_0x4e61b5(0x154)](_0x5636af=>{const _0x266c62=_0x4e61b5;if(_0x5636af[_0x266c62(0x151)]&&_0x5636af['metadata']['_encrypt'+'ed']){const _0x2f91d9=this[_0x266c62(0xfa)+'on'][_0x266c62(0x1c3)](_0x5636af[_0x266c62(0x151)][_0x266c62(0x120)+'ed']);return{..._0x5636af,'metadata':_0x2f91d9};}return _0x5636af;})),logger_1[_0x4e61b5(0x14d)][_0x4e61b5(0x1d8)](_0x4e61b5(0xe2)+_0x4e61b5(0x140)+_0x4e61b5(0x1f3)+'rned\x20'+_0x4d2353[_0x4e61b5(0x193)]+(_0x4e61b5(0x1cd)+_0x4e61b5(0x168))+_0xdbff7d),_0x4d2353;}else{this[_0x4e61b5(0xf4)+'m']=_0x326bb8[_0x4e61b5(0x101)];const _0x109a94=_0x1ded74[_0x4e61b5(0x18f)]['VECTOR_E'+_0x4e61b5(0xfe)+_0x4e61b5(0x1ac)]||_0x326bb8[_0x4e61b5(0x16d)];this['key']=_0x1fb5ee['from'](_0x109a94[_0x4e61b5(0x152)](0x20,'0')[_0x4e61b5(0x1ae)+'g'](0x0,0x20));}}catch(_0xd0538f){if(_0x326bb8['nddAB'](_0x326bb8['mvDjV'],_0x4e61b5(0x1fa))){logger_1[_0x4e61b5(0x14d)][_0x4e61b5(0xeb)](_0x326bb8['xHVHr'],_0xd0538f);throw _0xd0538f;}else _0x5f3538+=_0x363d9e[_0x71ac30]*_0x274ede[_0x4c2e6f],_0x15c393+=_0xe7c0d2[_0x53e051]*_0xe956f0[_0x35d1c1],_0x4801ac+=_0x15a82b[_0x189194]*_0x5eb8e5[_0x39efac];}}async[_0x5dab90(0x209)+_0x5dab90(0x10e)](_0x37fca8,_0x24562c){const _0x2ce904=_0x5dab90;return logger_1['logger']['info'](_0x2ce904(0xe2)+_0x2ce904(0x171)+'necone\x20q'+_0x2ce904(0x130)+_0x2ce904(0x203)+'\x20'+_0x24562c),[];}async[_0x5dab90(0x1b1)+_0x5dab90(0x13d)](_0x3d7a27,_0x1381d8){const _0x42d4c8=_0x5dab90;return logger_1['logger'][_0x42d4c8(0x1d8)]('[VectorS'+'tore]\x20Qd'+'rant\x20que'+_0x42d4c8(0x16e)+_0x42d4c8(0x1a6)+_0x1381d8),[];}async['queryMem'+_0x5dab90(0x19c)](_0x1ce20a,_0x13b4a0){const _0x210fb5=_0x5dab90,_0x4bf701={'pkqJV':_0x210fb5(0xe1),'uudeu':_0x210fb5(0x126),'WvWfI':_0x210fb5(0xe2)+_0x210fb5(0xf9)+'rvice\x20in'+_0x210fb5(0x10a)+'d','EXzUA':function(_0x3b9c68,_0x22540a){return _0x3b9c68===_0x22540a;},'MwDiU':function(_0xb89606,_0x1042d3){return _0xb89606!==_0x1042d3;},'ktnLq':'XbmgV'},_0x47c3ed=this['memorySt'+'ore'][_0x210fb5(0x21f)](_0x13b4a0);if(!_0x47c3ed||_0x4bf701['EXzUA'](_0x47c3ed[_0x210fb5(0x137)],0x0)){if(_0x4bf701[_0x210fb5(0x153)](_0x210fb5(0x131),_0x4bf701[_0x210fb5(0x11e)]))this[_0x210fb5(0x13f)]={'provider':_0x4bf701[_0x210fb5(0x206)],'indexName':_0x210fb5(0x162)+'ag','dimensions':0x600,'metric':_0x4bf701[_0x210fb5(0x129)],'enableEncryption':!![],'enableCompression':![]},this['memorySt'+'ore']=new _0x2e95a2(),this[_0x210fb5(0x1ab)+_0x210fb5(0x1f2)]=null,this['qdrantCl'+_0x210fb5(0x1ea)]=null,this[_0x210fb5(0xfa)+'on']=new _0x24f5e2(),this['loadConf'+'igFromEn'+'v'](),this[_0x210fb5(0x1c0)+_0x210fb5(0x1ee)+'er'](),_0x2543f8[_0x210fb5(0x14d)][_0x210fb5(0x1d8)](_0x4bf701[_0x210fb5(0x165)]);else return[];}const _0x25b879=[];for(const [_0x169cc9,_0x25011a]of _0x47c3ed[_0x210fb5(0x214)]()){const _0x352788=this[_0x210fb5(0x161)+_0x210fb5(0x107)](_0x1ce20a[_0x210fb5(0x20e)],_0x25011a[_0x210fb5(0x20e)]);_0x25b879[_0x210fb5(0x123)]({'id':_0x169cc9,'score':_0x352788,'record':_0x25011a});}_0x25b879[_0x210fb5(0x208)]((_0x5bb7ab,_0x1a7714)=>_0x1a7714[_0x210fb5(0xfd)]-_0x5bb7ab[_0x210fb5(0xfd)]);const _0x3e4d2a=_0x1ce20a[_0x210fb5(0x1a1)]||0x5,_0x54611b=_0x25b879[_0x210fb5(0x1f7)](0x0,_0x3e4d2a);return _0x54611b[_0x210fb5(0x154)](({id:_0x23da2f,score:_0x4178ff,record:_0x3946e9})=>({'id':_0x23da2f,'score':_0x4178ff,'metadata':_0x1ce20a[_0x210fb5(0x1b4)+_0x210fb5(0x1d4)]?_0x3946e9['metadata']:undefined,'vector':_0x1ce20a['includeV'+_0x210fb5(0x188)]?_0x3946e9[_0x210fb5(0x20e)]:undefined}));}async[_0x5dab90(0x1a8)+_0x5dab90(0x187)](_0x122aad,_0xf037c4){const _0x10e63a=_0x5dab90;try{await this[_0x10e63a(0x1f1)+_0x10e63a(0x1b3)](_0x122aad,_0xf037c4);const _0x34ccee=this[_0x10e63a(0xf2)+_0x10e63a(0x1df)+'pace'](_0x122aad,_0xf037c4);let _0x332d78;switch(this['config'][_0x10e63a(0x1c5)]){case _0x10e63a(0x1ab):_0x332d78=await this['deletePi'+_0x10e63a(0x185)+'mespace'](_0x34ccee);break;case _0x10e63a(0x1e8):_0x332d78=await this['deleteQd'+_0x10e63a(0x12e)+_0x10e63a(0x10c)](_0x34ccee);break;case _0x10e63a(0xe1):_0x332d78=await this[_0x10e63a(0x100)+'moryName'+'space'](_0x34ccee);break;default:throw new Error('Unsuppor'+_0x10e63a(0x1d5)+'ider:\x20'+this['config'][_0x10e63a(0x1c5)]);}return logger_1[_0x10e63a(0x14d)][_0x10e63a(0x1d8)](_0x10e63a(0xe2)+_0x10e63a(0x21c)+_0x10e63a(0x128)+_0x332d78[_0x10e63a(0x11b)+_0x10e63a(0x148)]+('\x20vectors'+_0x10e63a(0x168))+_0x34ccee),_0x332d78;}catch(_0x4f833a){logger_1[_0x10e63a(0x14d)][_0x10e63a(0xeb)](_0x10e63a(0xe2)+'tore]\x20De'+'lete\x20fai'+'led',_0x4f833a);throw _0x4f833a;}}async[_0x5dab90(0xe0)+_0x5dab90(0x185)+_0x5dab90(0x10d)](_0x14248f){return{'success':!![],'deletedCount':0x0};}async[_0x5dab90(0x1ad)+_0x5dab90(0x12e)+'space'](_0x59662d){return{'success':!![],'deletedCount':0x0};}async[_0x5dab90(0x100)+_0x5dab90(0x1f8)+_0x5dab90(0x10c)](_0xc245b3){const _0x52d103=_0x5dab90,_0x62700a=this[_0x52d103(0xff)+_0x52d103(0x176)][_0x52d103(0x21f)](_0xc245b3),_0x40a830=_0x62700a?.[_0x52d103(0x137)]||0x0;return this[_0x52d103(0xff)+_0x52d103(0x176)][_0x52d103(0x111)](_0xc245b3),{'success':!![],'deletedCount':_0x40a830};}[_0x5dab90(0x161)+'milarity'](_0x1f7365,_0x5d8d46){const _0x79b84=_0x5dab90,_0x1e70b7={'CMcVO':function(_0x2f4c80,_0x165c2c){return _0x2f4c80!==_0x165c2c;},'BxkGa':_0x79b84(0xfc)+_0x79b84(0x1c2)+_0x79b84(0x1cf)+_0x79b84(0x1a7)+'s','vHLEV':function(_0x1d6f15,_0x210cfc){return _0x1d6f15*_0x210cfc;},'pvcjW':function(_0x18e36d,_0x5ac2ea){return _0x18e36d*_0x5ac2ea;},'ywkfH':function(_0x36f791,_0x4cb366){return _0x36f791===_0x4cb366;},'IbrnA':function(_0x49f814,_0x54eb23){return _0x49f814/_0x54eb23;}};if(_0x1f7365[_0x79b84(0x193)]!==_0x5d8d46[_0x79b84(0x193)]){if(_0x1e70b7['CMcVO'](_0x79b84(0x1ca),_0x79b84(0x1f0)))throw new Error(_0x1e70b7[_0x79b84(0x1c7)]);else return 0x0;}let _0x448696=0x0,_0x8a3c4b=0x0,_0x29933d=0x0;for(let _0x13644e=0x0;_0x13644e<_0x1f7365[_0x79b84(0x193)];_0x13644e++){_0x448696+=_0x1e70b7[_0x79b84(0x1c6)](_0x1f7365[_0x13644e],_0x5d8d46[_0x13644e]),_0x8a3c4b+=_0x1e70b7[_0x79b84(0x191)](_0x1f7365[_0x13644e],_0x1f7365[_0x13644e]),_0x29933d+=_0x1e70b7[_0x79b84(0x1c6)](_0x5d8d46[_0x13644e],_0x5d8d46[_0x13644e]);}_0x8a3c4b=Math[_0x79b84(0x17b)](_0x8a3c4b),_0x29933d=Math[_0x79b84(0x17b)](_0x29933d);if(_0x1e70b7[_0x79b84(0x1e1)](_0x8a3c4b,0x0)||_0x29933d===0x0)return 0x0;return _0x1e70b7['IbrnA'](_0x448696,_0x8a3c4b*_0x29933d);}async['validate'+_0x5dab90(0x173)+_0x5dab90(0x1f4)](_0x3fd26d,_0x1af15c,_0x3ea05a){const _0xf1470e=_0x5dab90,_0x1b0978={'lDFAj':function(_0x470ef9,_0xab4f35){return _0x470ef9===_0xab4f35;},'fVBGa':_0xf1470e(0x1fc),'nnVwP':function(_0x169172,_0x277754){return _0x169172+_0x277754;},'MkxlN':function(_0x2e4f00,_0x41c24f){return _0x2e4f00!==_0x41c24f;}},_0x85d7cc=PLAN_STORAGE_LIMITS[_0x1af15c]||PLAN_STORAGE_LIMITS['STARTER'];if(_0x85d7cc[_0xf1470e(0x204)+'rs']!==-0x1){if(_0xf1470e(0x172)===_0x1b0978['fVBGa']){const _0x1e685b=this['memorySt'+'ore'][_0xf1470e(0x21f)](_0x44499f);if(!_0x1e685b||_0x1b0978[_0xf1470e(0x17f)](_0x1e685b['size'],0x0))return[];const _0x5f3efc=[];for(const [_0x4020d6,_0x3f42b4]of _0x1e685b[_0xf1470e(0x214)]()){const _0x54730b=this[_0xf1470e(0x161)+_0xf1470e(0x107)](_0x1175a4[_0xf1470e(0x20e)],_0x3f42b4[_0xf1470e(0x20e)]);_0x5f3efc[_0xf1470e(0x123)]({'id':_0x4020d6,'score':_0x54730b,'record':_0x3f42b4});}_0x5f3efc[_0xf1470e(0x208)]((_0x40269e,_0x48496a)=>_0x48496a[_0xf1470e(0xfd)]-_0x40269e[_0xf1470e(0xfd)]);const _0x5d4a58=_0x50f34b[_0xf1470e(0x1a1)]||0x5,_0xe91cf7=_0x5f3efc['slice'](0x0,_0x5d4a58);return _0xe91cf7[_0xf1470e(0x154)](({id:_0x2cf292,score:_0x60e9e0,record:_0x570eb5})=>({'id':_0x2cf292,'score':_0x60e9e0,'metadata':_0x2c88ef[_0xf1470e(0x1b4)+'etadata']?_0x570eb5[_0xf1470e(0x151)]:_0xae389e,'vector':_0x29a6ad[_0xf1470e(0x132)+_0xf1470e(0x188)]?_0x570eb5[_0xf1470e(0x20e)]:_0xdb5981}));}else{const _0x226578=await this[_0xf1470e(0x179)+_0xf1470e(0x136)+'nt'](_0x3fd26d);if(_0x1b0978[_0xf1470e(0x156)](_0x226578,_0x3ea05a)>_0x85d7cc[_0xf1470e(0x204)+'rs'])throw new Error(_0xf1470e(0x1ce)+_0xf1470e(0xde)+'imit\x20rea'+_0xf1470e(0x15c)+_0x226578+'/'+_0x85d7cc[_0xf1470e(0x204)+'rs']+(_0xf1470e(0x1bb)+_0xf1470e(0x15e)+'ore\x20stor'+_0xf1470e(0x186)));}}if(_0x1b0978[_0xf1470e(0x217)](_0x85d7cc[_0xf1470e(0x20d)+'paces'],-0x1)){const _0x31b52e=await this[_0xf1470e(0x117)+'amespace'+_0xf1470e(0x194)](_0x3fd26d);if(_0x31b52e>=_0x85d7cc[_0xf1470e(0x20d)+'paces'])throw new Error(_0xf1470e(0x1f6)+_0xf1470e(0xf5)+_0xf1470e(0x1e6)+_0x31b52e+'/'+_0x85d7cc[_0xf1470e(0x20d)+_0xf1470e(0x20b)]+(_0xf1470e(0x138)+_0xf1470e(0x1b2)+_0xf1470e(0x1f5)+_0xf1470e(0x1a2)+'de.'));}}async[_0x5dab90(0x1f1)+_0x5dab90(0x1b3)](_0x30850c,_0x4aadc0){const _0x11bf0c=_0x5dab90,_0x4c87e8={'XetDP':function(_0x4e6d13,_0x65802){return _0x4e6d13!==_0x65802;},'KUOwD':function(_0x2a12e8,_0x1c1b26){return _0x2a12e8===_0x1c1b26;},'edYCD':_0x11bf0c(0x211),'iHsFR':_0x11bf0c(0x135)+_0x11bf0c(0x1e9)+_0x11bf0c(0x142)+_0x11bf0c(0x1d1)+_0x11bf0c(0x17a)+_0x11bf0c(0x11f)+'d','QEsTo':_0x11bf0c(0x135)+_0x11bf0c(0x12f)};if(!_0x4aadc0)return;try{const _0x3d4b5b=await prisma[_0x11bf0c(0x1a3)][_0x11bf0c(0x1e2)+'ue']({'where':{'id':_0x4aadc0},'select':{'userId':!![]}});if(!_0x3d4b5b||_0x4c87e8['XetDP'](_0x3d4b5b[_0x11bf0c(0x1de)],_0x30850c)){if(_0x4c87e8[_0x11bf0c(0x139)](_0x11bf0c(0x1ba),_0x4c87e8[_0x11bf0c(0x119)])){_0x5bd1ba[_0x11bf0c(0x14d)][_0x11bf0c(0xeb)]('[VectorS'+_0x11bf0c(0x12b)+'cess\x20ver'+_0x11bf0c(0x1b6)+_0x11bf0c(0x1d9),_0x149afe);throw new _0x4c328e('Access\x20d'+_0x11bf0c(0x12f));}else throw new Error(_0x4c87e8[_0x11bf0c(0x1d2)]);}}catch(_0x2ed558){logger_1[_0x11bf0c(0x14d)][_0x11bf0c(0xeb)]('[VectorS'+_0x11bf0c(0x12b)+'cess\x20ver'+_0x11bf0c(0x1b6)+_0x11bf0c(0x1d9),_0x2ed558);throw new Error(_0x4c87e8[_0x11bf0c(0x216)]);}}async[_0x5dab90(0x179)+_0x5dab90(0x136)+'nt'](_0x5bcb3d){const _0x302809=_0x5dab90,_0x896f53={'hmmyy':_0x302809(0xfb)};try{if(_0x896f53[_0x302809(0x163)]!==_0x302809(0xfb)){const _0x4956ca=this[_0x302809(0x161)+_0x302809(0x107)](_0x382f1c[_0x302809(0x20e)],_0x6c28b1['vector']);_0x18a6c6[_0x302809(0x123)]({'id':_0xab501f,'score':_0x4956ca,'record':_0x29f58d});}else{const _0x2f00f1=await prisma[_0x302809(0x1f9)+_0x302809(0x105)][_0x302809(0x109)]({'where':{'userId':_0x5bcb3d}});return _0x2f00f1;}}catch(_0x1361c3){return 0x0;}}async[_0x5dab90(0x117)+_0x5dab90(0x20f)+_0x5dab90(0x194)](_0x203565){const _0x14127b=_0x5dab90,_0x4fba30={'AAIns':'kPYyA'};try{const _0x585c35=await prisma[_0x14127b(0x1a3)][_0x14127b(0x109)]({'where':{'userId':_0x203565}});return _0x585c35;}catch(_0x3f536e){if(_0x4fba30[_0x14127b(0x21e)]!==_0x14127b(0x166))return 0x0;else{if(_0xf97386){const res=_0x134c55['apply'](_0x4ccc56,arguments);return _0x5b422f=null,res;}}}}async[_0x5dab90(0x16b)+_0x5dab90(0xf6)+'e'](_0x3bfc66,_0x2cae94){const _0x17628d=_0x5dab90;try{await prisma[_0x17628d(0x201)+_0x17628d(0x1c9)]['create']({'data':{'userId':_0x3bfc66,'vectorCount':_0x2cae94,'provider':this['config'][_0x17628d(0x1c5)]}});}catch(_0x2cef34){logger_1[_0x17628d(0x14d)][_0x17628d(0x11d)](_0x17628d(0xe2)+_0x17628d(0x198)+_0x17628d(0x104)+_0x17628d(0x183)+_0x17628d(0x17d),_0x2cef34);}}async[_0x5dab90(0x12d)](){const _0x3d1b12=_0x5dab90;return{'provider':this[_0x3d1b12(0x13f)][_0x3d1b12(0x1c5)],'indexName':this[_0x3d1b12(0x13f)][_0x3d1b12(0x1e5)+'e'],'dimensions':this[_0x3d1b12(0x13f)][_0x3d1b12(0x202)+'ns'],'metric':this[_0x3d1b12(0x13f)]['metric'],'memoryStats':{'namespaces':this[_0x3d1b12(0xff)+_0x3d1b12(0x176)][_0x3d1b12(0x137)],'totalVectors':Array[_0x3d1b12(0x164)](this['memorySt'+_0x3d1b12(0x176)]['values']())['reduce']((_0x2718f2,_0x51032b)=>_0x2718f2+_0x51032b[_0x3d1b12(0x137)],0x0)}};}async['healthCh'+_0x5dab90(0x16c)](){const _0x5dd73a=_0x5dab90,_0x1d189d={'PjaVd':_0x5dd73a(0x18c)};try{return{'status':_0x1d189d[_0x5dd73a(0x146)],'provider':this[_0x5dd73a(0x13f)][_0x5dd73a(0x1c5)]};}catch(_0x49a7fe){return{'status':_0x5dd73a(0x15a)+'y','provider':this[_0x5dd73a(0x13f)]['provider']};}}}function _0x310d(_0x523933,_0x4bfb29){_0x523933=_0x523933-0xde;const _0x319659=_0x33fc();let _0x5425cf=_0x319659[_0x523933];if(_0x310d['WNQHMp']===undefined){var _0x5a7bb8=function(_0x24fcbe){const _0x31e455='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x165494='',_0x156dcf='',_0x1d325b=_0x165494+_0x5a7bb8;for(let _0x4bd8c7=0x0,_0x159d9a,_0x561b14,_0x40d282=0x0;_0x561b14=_0x24fcbe['charAt'](_0x40d282++);~_0x561b14&&(_0x159d9a=_0x4bd8c7%0x4?_0x159d9a*0x40+_0x561b14:_0x561b14,_0x4bd8c7++%0x4)?_0x165494+=_0x1d325b['charCodeAt'](_0x40d282+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x159d9a>>(-0x2*_0x4bd8c7&0x6)):_0x4bd8c7:0x0){_0x561b14=_0x31e455['indexOf'](_0x561b14);}for(let _0x21213f=0x0,_0xdb5682=_0x165494['length'];_0x21213f<_0xdb5682;_0x21213f++){_0x156dcf+='%'+('00'+_0x165494['charCodeAt'](_0x21213f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x156dcf);};_0x310d['koBGav']=_0x5a7bb8,_0x310d['iupLrd']={},_0x310d['WNQHMp']=!![];}const _0x33fcfb=_0x319659[0x0],_0x310da8=_0x523933+_0x33fcfb,_0x50d6dc=_0x310d['iupLrd'][_0x310da8];if(!_0x50d6dc){const _0x4aef20=function(_0x2cbf7d){this['wRnLjj']=_0x2cbf7d,this['hHHhQa']=[0x1,0x0,0x0],this['YvYJMJ']=function(){return'newState';},this['leMujV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gqaXty']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4aef20['prototype']['zBrktm']=function(){const _0x43762d=new RegExp(this['leMujV']+this['gqaXty']),_0x1b2c7e=_0x43762d['test'](this['YvYJMJ']['toString']())?--this['hHHhQa'][0x1]:--this['hHHhQa'][0x0];return this['JZEQwO'](_0x1b2c7e);},_0x4aef20['prototype']['JZEQwO']=function(_0x622249){if(!Boolean(~_0x622249))return _0x622249;return this['MRUbnd'](this['wRnLjj']);},_0x4aef20['prototype']['MRUbnd']=function(_0x4e5372){for(let _0x4bb84e=0x0,_0x3b9808=this['hHHhQa']['length'];_0x4bb84e<_0x3b9808;_0x4bb84e++){this['hHHhQa']['push'](Math['round'](Math['random']())),_0x3b9808=this['hHHhQa']['length'];}return _0x4e5372(this['hHHhQa'][0x0]);},new _0x4aef20(_0x310d)['zBrktm'](),_0x5425cf=_0x310d['koBGav'](_0x5425cf),_0x310d['iupLrd'][_0x310da8]=_0x5425cf;}else _0x5425cf=_0x50d6dc;return _0x5425cf;}exports[_0x5dab90(0xee)+_0x5dab90(0x14a)+'ce']=VectorStoreService,exports[_0x5dab90(0xe6)]=VectorStoreService[_0x5dab90(0x13c)+_0x5dab90(0x106)]();