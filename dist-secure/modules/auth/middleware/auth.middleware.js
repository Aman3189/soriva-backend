const _0x2b484f=_0x128c;(function(_0x34e2ed,_0x3dace6){const _0x18bff7=_0x128c,_0x5660e3=_0x34e2ed();while(!![]){try{const _0x2f91ee=-parseInt(_0x18bff7(0x211))/0x1*(parseInt(_0x18bff7(0x210))/0x2)+parseInt(_0x18bff7(0x1e4))/0x3+-parseInt(_0x18bff7(0x1c6))/0x4*(-parseInt(_0x18bff7(0x1ea))/0x5)+-parseInt(_0x18bff7(0x1fa))/0x6*(parseInt(_0x18bff7(0x1c5))/0x7)+parseInt(_0x18bff7(0x21a))/0x8+-parseInt(_0x18bff7(0x1ca))/0x9*(-parseInt(_0x18bff7(0x1dd))/0xa)+parseInt(_0x18bff7(0x1d9))/0xb*(-parseInt(_0x18bff7(0x213))/0xc);if(_0x2f91ee===_0x3dace6)break;else _0x5660e3['push'](_0x5660e3['shift']());}catch(_0x17eff8){_0x5660e3['push'](_0x5660e3['shift']());}}}(_0x5008,0xc07ec));const _0x1edfe5=(function(){let _0x1c1b34=!![];return function(_0x5ae188,_0x291210){const _0x43f691=_0x1c1b34?function(){const _0x49dcac=_0x128c;if(_0x291210){const res=_0x291210[_0x49dcac(0x20c)](_0x5ae188,arguments);return _0x291210=null,res;}}:function(){};return _0x1c1b34=![],_0x43f691;};}()),_0x2a6b99=_0x1edfe5(this,function(){const _0x8981a7=_0x128c,_0x528d6e={'JpDYN':'(((.+)+)'+_0x8981a7(0x202)};return _0x2a6b99[_0x8981a7(0x1bc)]()['search'](_0x528d6e[_0x8981a7(0x1f9)])[_0x8981a7(0x1bc)]()[_0x8981a7(0x212)+'tor'](_0x2a6b99)[_0x8981a7(0x207)](_0x528d6e[_0x8981a7(0x1f9)]);});function _0x5008(){const _0x80bf49=['qMvHCMvYia','uvHSBw0','ANnVBG','ywrTAw5aC28','zgXLD2fYzq','mJm2nJy1DwvqB1rW','vg9Rzw4GAxm','CIa8Dg9Rzw4','qNLhDe4','otCWCeP5qwr0','Dg9Rzw4GzM8','z1Pcrhi','qxv0Ag9YAxO','tM8Gyxv0Ag8','A1jWu3K','s2PNv1i','mteZndC3n2DjwK9gwG','ihrVA2vUiha','x19LC01Vzhu','AwvUDa','y2f0Aw9Uigy','vLzVzxK','nvvXqw1HvW','BIbPCYbPBMe','Aw5JBhvKzxm','uhjPC21Hq2W','C3rHDhvZ','ywLSzwq','zgXLD2fYzsa','DKPczKu','AKXVwvO','CgXHBLr5Cgu','lI4VDxrPBhm','t3b0Aw9UywW','ihbSyw4U','C3rHCNrZv2K','q0foq0vmteu','sNbewu4','nK5hA2L4va','qxv0AgvUDgK','zwqGDg9Rzw4','AhPzyLu','vgnVrxe','yxrPB24Gy2G','AgvHzgvYCW','qhbYAxnTys8','kYKRja','sw52ywXPzca','y2vZC1rVA2u','qLPvrxi','DxnLCKLK','C2vHCMnO','vxnLCIbUB3q','igf1DgGGBwK','CgXHBLn0yxq','sLDuvxrPBa','yxbWBhK','y2vZCYbYzxe','ig1PC3nPBMC','CM92AwrLza','ndi1ntjTAvzrEvO','n01suNr6wa','y29UC3rYDwm','nJeYEwH3DwPh','ywrTAw5nAwq','tfPXr1a','DMvYAwz5qwm','qxv0Ae1Pzgq','C3vIC3rYAw4','wxvjs3m','mti0nJa3mJbkDvHkrw0','B3b0Aw9UywW','AxzHlMnVBq','CML2ys5JB20','DxnLCG','ww91CIbZDwi','qwrTAw4Gywm','rgTzB2O','zw1HAwW','yw1HBKbZB3i','y2XPzw50','Dg9tDhjPBMC','CM1HDc4Gvxm','BMv3ihLVDxi','y3rPDMuUifa','DwLYzwq','Cgvqq3O','z3LezKS','CML6yxrPB24','zxjYB3i','ndqXmdy2nwP2wMvVwG','mZu1ntG4Bu9Lsfvm','ztOGqMvHCMu','qxb3CKu','zMLUzfvUAxe','ntKZodjXsfzREwK','ugXHBLn0yxq','Bgv3yxjL','yxv0Ag9YAxO','igzVDw5K','yxv0Ae1Pzgq','igvYCM9YoG','zgrSzxDHCMu','DvHyzLK','zxf1AxjLza'];_0x5008=function(){return _0x80bf49;};return _0x5008();}_0x2a6b99();'use strict';Object['definePr'+'operty'](exports,_0x2b484f(0x1e6)+'le',{'value':!![]}),exports['adminMid'+_0x2b484f(0x1d8)]=exports['optional'+_0x2b484f(0x217)+_0x2b484f(0x1cc)]=exports[_0x2b484f(0x1cf)+'leware']=void 0x0;const jwt_util_1=require(_0x2b484f(0x1f4)+'/jwt.uti'+'l'),client_1=require(_0x2b484f(0x201)+_0x2b484f(0x224)),prisma=new client_1[(_0x2b484f(0x1ed))+(_0x2b484f(0x1e7))](),authMiddleware=async(req,res,next)=>{const _0x534a74=_0x2b484f,_0x78072d={'TcoEq':_0x534a74(0x1e1)+_0x534a74(0x1c3)+_0x534a74(0x1e5)+_0x534a74(0x20f),'uXXfY':function(_0x143183,_0xc32e96){return _0x143183!==_0xc32e96;},'irjIm':_0x534a74(0x215),'DkYoj':_0x534a74(0x208)+_0x534a74(0x1ce),'JUohb':function(_0x174a88,_0x228476){return _0x174a88===_0x228476;},'pePCz':function(_0x1e95b3,_0x1e9edf){return _0x1e95b3===_0x1e9edf;},'VVoey':'bUKux','gZBDr':'iCfay','SEAhW':function(_0x7767e8){return _0x7767e8();},'vJBfE':'Auth\x20mid'+_0x534a74(0x1f0)+'error:'};try{const _0x113726=req[_0x534a74(0x200)][_0x534a74(0x1cd)+'ation'];if(!_0x113726)return res[_0x534a74(0x1ee)](0x191)[_0x534a74(0x1d6)]({'success':![],'message':_0x78072d[_0x534a74(0x1fe)]});if(!_0x113726[_0x534a74(0x1f7)+'th'](_0x534a74(0x1d4)))return res[_0x534a74(0x1ee)](0x191)[_0x534a74(0x1d6)]({'success':![],'message':'Invalid\x20'+_0x534a74(0x1de)+_0x534a74(0x1bd)+_0x534a74(0x1c7)+_0x534a74(0x1db)+'>'});const _0x499308=_0x113726[_0x534a74(0x218)+'g'](0x7);if(!_0x499308){if(_0x78072d[_0x534a74(0x1d2)](_0x534a74(0x1dc),_0x78072d['irjIm']))return res[_0x534a74(0x1ee)](0x191)[_0x534a74(0x1d6)]({'success':![],'message':_0x534a74(0x1da)+_0x534a74(0x20e)});else{if(_0xd149fc){const res=_0x372c8d[_0x534a74(0x20c)](_0x5f462d,arguments);return _0x488006=null,res;}}}const _0x596ab1=jwt_util_1[_0x534a74(0x20b)]['verifyAc'+_0x534a74(0x204)+'n'](_0x499308);if(!_0x596ab1)return res[_0x534a74(0x1ee)](0x191)[_0x534a74(0x1d6)]({'success':![],'message':_0x534a74(0x203)+'or\x20expir'+_0x534a74(0x1fc)});const _0x258861=await prisma[_0x534a74(0x21e)][_0x534a74(0x1c9)+'ue']({'where':{'id':_0x596ab1[_0x534a74(0x206)]},'select':{'id':!![],'email':!![],'planType':!![],'planStatus':!![]}});if(!_0x258861)return res[_0x534a74(0x1ee)](0x191)[_0x534a74(0x1d6)]({'success':![],'message':_0x78072d[_0x534a74(0x221)]});if(_0x78072d['JUohb'](_0x258861['planStat'+'us'],client_1[_0x534a74(0x1cb)+'us']['EXPIRED'])||_0x78072d[_0x534a74(0x1c1)](_0x258861[_0x534a74(0x20a)+'us'],client_1[_0x534a74(0x1cb)+'us'][_0x534a74(0x1f8)+'D'])){if(_0x78072d[_0x534a74(0x1d2)](_0x78072d[_0x534a74(0x1e9)],_0x78072d[_0x534a74(0x1df)]))return res['status'](0x193)['json']({'success':![],'message':_0x534a74(0x21f)+'scriptio'+_0x534a74(0x1eb)+_0x534a74(0x1bf)+'lease\x20re'+_0x534a74(0x1be)+_0x534a74(0x1f6)});else req[_0x534a74(0x21e)]={'userId':_0x4f7a9b['id'],'email':_0x43d78f[_0x534a74(0x222)],'planType':_0x136d9a[_0x534a74(0x1f3)]};}req['user']={'userId':_0x258861['id'],'email':_0x258861['email'],'planType':_0x258861[_0x534a74(0x1f3)]},_0x78072d['SEAhW'](next);}catch(_0x1a42a8){return console[_0x534a74(0x1c4)](_0x78072d[_0x534a74(0x1f1)],_0x1a42a8),res[_0x534a74(0x1ee)](0x1f4)[_0x534a74(0x1d6)]({'success':![],'message':_0x534a74(0x1fb)+_0x534a74(0x1e8)+_0x534a74(0x1ef)});}};exports[_0x2b484f(0x1cf)+'leware']=authMiddleware;function _0x128c(_0x19e4aa,_0x24d4fa){_0x19e4aa=_0x19e4aa-0x1bc;const _0xcedfb6=_0x5008();let _0x2a6b99=_0xcedfb6[_0x19e4aa];if(_0x128c['NaRikK']===undefined){var _0x1edfe5=function(_0x5f58f8){const _0x291030='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x355b05='',_0x2f3b1a='',_0x178772=_0x355b05+_0x1edfe5;for(let _0x2f2958=0x0,_0x469df6,_0x4a59f2,_0x14a02d=0x0;_0x4a59f2=_0x5f58f8['charAt'](_0x14a02d++);~_0x4a59f2&&(_0x469df6=_0x2f2958%0x4?_0x469df6*0x40+_0x4a59f2:_0x4a59f2,_0x2f2958++%0x4)?_0x355b05+=_0x178772['charCodeAt'](_0x14a02d+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x469df6>>(-0x2*_0x2f2958&0x6)):_0x2f2958:0x0){_0x4a59f2=_0x291030['indexOf'](_0x4a59f2);}for(let _0x5b069b=0x0,_0x32c52a=_0x355b05['length'];_0x5b069b<_0x32c52a;_0x5b069b++){_0x2f3b1a+='%'+('00'+_0x355b05['charCodeAt'](_0x5b069b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2f3b1a);};_0x128c['HAaBxt']=_0x1edfe5,_0x128c['XfHpCm']={},_0x128c['NaRikK']=!![];}const _0x500865=_0xcedfb6[0x0],_0x128c22=_0x19e4aa+_0x500865,_0x329f6d=_0x128c['XfHpCm'][_0x128c22];if(!_0x329f6d){const _0x184db0=function(_0x49d3c8){this['zoKSAo']=_0x49d3c8,this['jglTdE']=[0x1,0x0,0x0],this['vGredq']=function(){return'newState';},this['tcQMDp']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['NnuECn']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x184db0['prototype']['SIVwsz']=function(){const _0x295a1a=new RegExp(this['tcQMDp']+this['NnuECn']),_0x36bdd5=_0x295a1a['test'](this['vGredq']['toString']())?--this['jglTdE'][0x1]:--this['jglTdE'][0x0];return this['cTpGFI'](_0x36bdd5);},_0x184db0['prototype']['cTpGFI']=function(_0x1a542d){if(!Boolean(~_0x1a542d))return _0x1a542d;return this['TasEby'](this['zoKSAo']);},_0x184db0['prototype']['TasEby']=function(_0x2a6552){for(let _0x5b8bd0=0x0,_0xecf117=this['jglTdE']['length'];_0x5b8bd0<_0xecf117;_0x5b8bd0++){this['jglTdE']['push'](Math['round'](Math['random']())),_0xecf117=this['jglTdE']['length'];}return _0x2a6552(this['jglTdE'][0x0]);},new _0x184db0(_0x128c)['SIVwsz'](),_0x2a6b99=_0x128c['HAaBxt'](_0x2a6b99),_0x128c['XfHpCm'][_0x128c22]=_0x2a6b99;}else _0x2a6b99=_0x329f6d;return _0x2a6b99;}const optionalAuthMiddleware=async(req,res,next)=>{const _0x120bfe=_0x2b484f,_0x2f47c3={'YuIKs':function(_0x2ad817,_0x48294a){return _0x2ad817!==_0x48294a;},'gyDfK':_0x120bfe(0x1e3),'BZUEr':function(_0x4b4c3b){return _0x4b4c3b();},'GGMJU':_0x120bfe(0x1f5)+_0x120bfe(0x209)+_0x120bfe(0x1d1)+'\x20error:','TUJHx':function(_0x301199){return _0x301199();}};try{const _0x386c3c=req[_0x120bfe(0x200)]['authoriz'+'ation'];if(!_0x386c3c||!_0x386c3c[_0x120bfe(0x1f7)+'th']('Bearer\x20'))return next();const _0x3d47ee=_0x386c3c['substrin'+'g'](0x7);if(!_0x3d47ee)return _0x2f47c3[_0x120bfe(0x219)](_0x2f47c3[_0x120bfe(0x1c2)],'JBAzE')?_0x2f47c3[_0x120bfe(0x205)](next):next();const _0x5d2ef1=jwt_util_1[_0x120bfe(0x20b)][_0x120bfe(0x216)+_0x120bfe(0x204)+'n'](_0x3d47ee);if(_0x5d2ef1){const _0x307de1=await prisma[_0x120bfe(0x21e)][_0x120bfe(0x1c9)+'ue']({'where':{'id':_0x5d2ef1['userId']},'select':{'id':!![],'email':!![],'planType':!![]}});_0x307de1&&(req['user']={'userId':_0x307de1['id'],'email':_0x307de1[_0x120bfe(0x222)],'planType':_0x307de1[_0x120bfe(0x1f3)]});}next();}catch(_0xf4e7a0){console['error'](_0x2f47c3['GGMJU'],_0xf4e7a0),_0x2f47c3['TUJHx'](next);}};exports[_0x2b484f(0x21b)+_0x2b484f(0x217)+'leware']=optionalAuthMiddleware;const adminMiddleware=async(req,res,next)=>{const _0x23554e=_0x2b484f,_0x3219e8={'kRpSy':_0x23554e(0x220)+_0x23554e(0x20d)+_0x23554e(0x1c0),'QXlmm':function(_0x4148eb,_0x3810b6){return _0x4148eb!==_0x3810b6;},'jLoYZ':_0x23554e(0x1fd),'ApwrE':_0x23554e(0x1fb)+'cation\x20r'+_0x23554e(0x1d3)};try{const _0x53f4b9=req['user'];if(!_0x53f4b9)return _0x3219e8[_0x23554e(0x1d5)](_0x3219e8[_0x23554e(0x1f2)],'hzYbU')?res[_0x23554e(0x1ee)](0x193)['json']({'success':![],'message':_0x3219e8[_0x23554e(0x1e2)]}):res[_0x23554e(0x1ee)](0x191)[_0x23554e(0x1d6)]({'success':![],'message':_0x3219e8[_0x23554e(0x1c8)]});const _0x1535bf=await prisma[_0x23554e(0x21e)][_0x23554e(0x1c9)+'ue']({'where':{'id':_0x53f4b9[_0x23554e(0x206)]},'select':{'email':!![]}}),_0xc8a1cc=[_0x23554e(0x1d7)+_0x23554e(0x21d),_0x23554e(0x223)+_0x23554e(0x21c)];if(!_0x1535bf||!_0xc8a1cc[_0x23554e(0x1ec)](_0x1535bf[_0x23554e(0x222)]))return res[_0x23554e(0x1ee)](0x193)[_0x23554e(0x1d6)]({'success':![],'message':_0x23554e(0x220)+_0x23554e(0x20d)+_0x23554e(0x1c0)});next();}catch(_0x12767c){return console[_0x23554e(0x1c4)]('Admin\x20mi'+'ddleware'+_0x23554e(0x1d0),_0x12767c),res[_0x23554e(0x1ee)](0x1f4)[_0x23554e(0x1d6)]({'success':![],'message':_0x23554e(0x1e0)+_0x23554e(0x1ff)+'eck\x20fail'+'ed'});}};exports[_0x2b484f(0x214)+_0x2b484f(0x1d8)]=adminMiddleware;