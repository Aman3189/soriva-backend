const _0x35f8c3=_0x4013;function _0x4013(_0xd9089c,_0xb0ccf0){_0xd9089c=_0xd9089c-0x1bf;const _0x2047e1=_0x51d7();let _0x1b4247=_0x2047e1[_0xd9089c];if(_0x4013['yleevS']===undefined){var _0x2f2694=function(_0x3644fa){const _0x589a59='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5c3248='',_0x32bfad='',_0x1fba5c=_0x5c3248+_0x2f2694;for(let _0x39b7e3=0x0,_0xd9387b,_0x89f314,_0x32df38=0x0;_0x89f314=_0x3644fa['charAt'](_0x32df38++);~_0x89f314&&(_0xd9387b=_0x39b7e3%0x4?_0xd9387b*0x40+_0x89f314:_0x89f314,_0x39b7e3++%0x4)?_0x5c3248+=_0x1fba5c['charCodeAt'](_0x32df38+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0xd9387b>>(-0x2*_0x39b7e3&0x6)):_0x39b7e3:0x0){_0x89f314=_0x589a59['indexOf'](_0x89f314);}for(let _0xf6962=0x0,_0x110fa1=_0x5c3248['length'];_0xf6962<_0x110fa1;_0xf6962++){_0x32bfad+='%'+('00'+_0x5c3248['charCodeAt'](_0xf6962)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x32bfad);};_0x4013['ttFRop']=_0x2f2694,_0x4013['ohSFKF']={},_0x4013['yleevS']=!![];}const _0x51d7a3=_0x2047e1[0x0],_0x4013f1=_0xd9089c+_0x51d7a3,_0x1f8d6e=_0x4013['ohSFKF'][_0x4013f1];if(!_0x1f8d6e){const _0xdfc5d7=function(_0x102ad4){this['qYjPUh']=_0x102ad4,this['SbBYbE']=[0x1,0x0,0x0],this['FKSUXv']=function(){return'newState';},this['vvaXcz']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['RRiFiJ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xdfc5d7['prototype']['pJNgcW']=function(){const _0x3401bd=new RegExp(this['vvaXcz']+this['RRiFiJ']),_0x53e21a=_0x3401bd['test'](this['FKSUXv']['toString']())?--this['SbBYbE'][0x1]:--this['SbBYbE'][0x0];return this['eemADm'](_0x53e21a);},_0xdfc5d7['prototype']['eemADm']=function(_0x4aa937){if(!Boolean(~_0x4aa937))return _0x4aa937;return this['aCKNsu'](this['qYjPUh']);},_0xdfc5d7['prototype']['aCKNsu']=function(_0x3a40c5){for(let _0x10e5e1=0x0,_0x50210b=this['SbBYbE']['length'];_0x10e5e1<_0x50210b;_0x10e5e1++){this['SbBYbE']['push'](Math['round'](Math['random']())),_0x50210b=this['SbBYbE']['length'];}return _0x3a40c5(this['SbBYbE'][0x0]);},new _0xdfc5d7(_0x4013)['pJNgcW'](),_0x1b4247=_0x4013['ttFRop'](_0x1b4247),_0x4013['ohSFKF'][_0x4013f1]=_0x1b4247;}else _0x1b4247=_0x1f8d6e;return _0x1b4247;}(function(_0x511fdf,_0x13b853){const _0x411401=_0x4013,_0xe57d82=_0x511fdf();while(!![]){try{const _0x16cd67=-parseInt(_0x411401(0x283))/0x1*(-parseInt(_0x411401(0x28b))/0x2)+parseInt(_0x411401(0x22a))/0x3*(parseInt(_0x411401(0x215))/0x4)+parseInt(_0x411401(0x26d))/0x5*(-parseInt(_0x411401(0x1db))/0x6)+-parseInt(_0x411401(0x247))/0x7*(parseInt(_0x411401(0x23a))/0x8)+parseInt(_0x411401(0x221))/0x9*(parseInt(_0x411401(0x22f))/0xa)+parseInt(_0x411401(0x23f))/0xb*(parseInt(_0x411401(0x242))/0xc)+-parseInt(_0x411401(0x201))/0xd*(parseInt(_0x411401(0x21c))/0xe);if(_0x16cd67===_0x13b853)break;else _0xe57d82['push'](_0xe57d82['shift']());}catch(_0x172fe5){_0xe57d82['push'](_0xe57d82['shift']());}}}(_0x51d7,0xba698));const _0x2f2694=(function(){const _0x1b2a01=_0x4013,_0x1a7770={'scfeO':'Internal'+_0x1b2a01(0x1ff)+_0x1b2a01(0x1d9),'VCiLS':_0x1b2a01(0x24e)};let _0x410fc2=!![];return function(_0x17dca9,_0x14b6c3){const _0x9db496=_0x1b2a01,_0x95506f={'PePdB':_0x1a7770['scfeO']};if(_0x1a7770[_0x9db496(0x20e)]===_0x9db496(0x24e)){const _0x1e7b49=_0x410fc2?function(){const _0x6f1112=_0x9db496;if(_0x14b6c3){const res=_0x14b6c3[_0x6f1112(0x245)](_0x17dca9,arguments);return _0x14b6c3=null,res;}}:function(){};return _0x410fc2=![],_0x1e7b49;}else _0x224f07['error']('Download'+_0x9db496(0x287),_0x54ec88),res[_0x9db496(0x1e9)](0x1f4)['json']({'success':![],'error':_0x95506f[_0x9db496(0x239)],'message':'Failed\x20t'+'o\x20downlo'+'ad\x20docum'+_0x9db496(0x289)});};}()),_0x1b4247=_0x2f2694(this,function(){const _0x16b696=_0x4013,_0x2164d3={'rXkRX':'(((.+)+)'+_0x16b696(0x29d)};return _0x1b4247[_0x16b696(0x25b)]()[_0x16b696(0x1ea)](_0x2164d3[_0x16b696(0x1fc)])[_0x16b696(0x25b)]()['construc'+_0x16b696(0x257)](_0x1b4247)[_0x16b696(0x1ea)](_0x16b696(0x1f8)+_0x16b696(0x29d));});_0x1b4247();function _0x51d7(){const _0x57a8d1=['wKXpCNK','zcbVCIbLEha','Aw9Ul29JDgu','CM9TChq','ieLeigfUzca','C3vIBwL0rMK','EfHIuvm','C2v0sgvHzgu','ANnVBG','yxrO','r1P0AuW','rMfPBgvKihq','y3vTzw50igu','zxjHDgu','CMrWCM9Jzxm','z2v0u3rHDhm','yu5MvLK','tLLHAfy','CYbLCNjVCJO','CM9osLy','DwfLEgW','DMLJzq','Dc1ZDhjLyw0','ELrru2i','x19LC01Vzhu','BM90igzVDw4','zMT0A3i','AwvSzcbLCNi','v2X6t2i','Ew5QwgG','zM9YBwf0lIa','DhzKy0C','C2Ptrfe','zg93BMXVywq','B2n1BwvUDa','zgyI','zxjYB3i','ywnJzxnZigq','mta5otKYBefnC2D5','zgXkshG','CgXHDgvZigu','C2TPCezPzwW','Dw1LBNqUD28','AwvSzcbjrca','ihjLCxvPCMu','CgLWzq','x19PBxbVCNq','zMzPy2vKB2m','DKfND1e','CgXHBLr5Cgu','BMqGB3iGzxG','r2v0igj5igm','C3rHDhvZ','C2vHCMnO','yM9KEq','suqGyw5Kiey','C0nnzMu','r2v0ihrLBxa','rwDiwwe','C3rHCNreB2m','z2v0uhjVz3i','u2vZC2LVBIa','zxjYB3i6','Aw9UigvYCM8','Cxr4Ege','wwDUwhe','DMfSDwvZ','kcGOlISPkYK','Aw9Ul3zUzc4','Dg9mB3DLCKm','z2v0vgvTCgW','CLHRuLG','D29bzeS','EciGB3iGiNa','ihnLCNzLCIa','BYbNzw5LCMe','mtnpvvDOD2y','Cgf0Aa','B3bLCNr5','B2n1BwvUDhm','uwzgCum','AxPLza','uKjwzLK','z2v0u2vZC2K','AuzUzKe','ten2B0S','sw52ywXPzca','CevZB2S','CgLdt2m','vKnPtfm','vgvTCgXHDgu','zMLSDgvY','C2LUz21SlMq','DxnvEuu','rgLZCg9ZAxq','qMfKihjLCxu','nhbfwgviqq','C0nVBNrYB2W','BMfTzt0I','B3jTyxrZlw8','u3vIBwL0igy','vw5HDxrOB3i','tfndAxK','mZmZnJiXnfL2sxzjza','tMjUBgO','Dw1LBNq','renkyxa','lI9KB2n1Bwu','ouvXCNnMsa','BNqTDgvTCgW','BgqGzxjYB3i','BMvYyxrLigu','rezeywe','zxn0','vKjwsfa','q29UDgvUDc0','Aw9U','mJq0odeYnM9hrwTSza','rgrMr3a','yu1Zrxm','BMLHtM8','BYbZDwjTAxq','nJC2mJGYmhftBvPVqG','DcbLCNjVCJO','tuvUEMK','DgvTCgXHDgu','AKDstKy','q2f0zwDVCNK','y3jLyxrLuMu','yMfZzw5HBwu','Ae1MDg8','tMDvDKm','ugvqzei','mtzZu0f3sxC','Evj4rg0','u2TPCcbMAwu','BgvY','yxrLCY5JB24','mZnfq3HquKG','igrVy3vTzw4','zg9JEa','mJm5ntm1nMrQq2Tmsq','tM90igzVDw4','B3i6','yxbWBhK','DxHIuvG','mtCXnJC1n1zZu0XwzW','DhnSAwi','B2n1BwvUDca','yNfQzva','BuLRAe4','ig5VDcbMB3u','CNjVCJO','sfbxAKm','Aw9Ul3bKzG','yxrLC0j5q2e','BuziDLC','suqGAxmGCMu','Bgf0zsbLCNi','B2DPBIb0BYa','CwnNDNq','r2vUzxjHDgu','Dg9Y','z2v0tMv4Dfa','yxrLz29YEsa','yxr0ywnOBwu','Dg9tDhjPBMC','twnIrMq','BgLZDfrLBxa','yxjLihjLCxu','BYbMzxrJAca','q1HfyNC','r1biENK','z2v0rMLSzva','ugXLyxnLigW','sfnuEgK','yxbWBgLJyxq','zMLN','CgLYzwq','rM9YBwf0','se9cyuG','q1nkwfu','DxnLCG','uxvPy2SGz2u','mZy1vffMBLf5','z3vtDLG','yxnL','CgfYyw1Z','zg9JDw1LBNq','yxrL','C01HBMfNzxi','C3vJy2vZCW','y2fUqwnJzxm','yxrLrgv0ywK','quPLqMu','DxnLCKLK','tgLZDcb0zw0','tgXOweS','ywqGzg9JDw0','Ag1JD0q','C2reuee','C1nLCNzPy2u','sw50zxjUywW','zwDVCNK','AxjLza','ieLeigLZihi','mZm2mtbRBMTvALK','DNfbuMe','zxf1AxjLza','zgvMAw5Luhi','igvYCM9YoG','Bgf0zxm','zw50','r3DXCgK','ndrjuePcqum','BYbZDgfYDca','vhLWzq','C2vZC2LVBKK','yKPuEfm','z2vUzxjHDgu','zwXK','BYbKB3DUBg8','s0zzteu','rg9JDw1LBNq','rNrYChu','DguGzg9JDw0','tKDxAK4','EvfmEeO','ihnLC3nPB24','qwLRChK','yxrLCY5Zzxi','B3bLBNHTBgy','kYKRja','zMLLBgrZ','u3rHCG','ug9Nu3m','zMLUza','r2v0ihnLC3m','y3jLyxrLigq'];_0x51d7=function(){return _0x57a8d1;};return _0x51d7();}'use strict';Object[_0x35f8c3(0x286)+_0x35f8c3(0x203)](exports,_0x35f8c3(0x1cd)+'le',{'value':!![]}),exports['document'+_0x35f8c3(0x20f)+'sControl'+_0x35f8c3(0x23d)]=exports[_0x35f8c3(0x294)+_0x35f8c3(0x20f)+_0x35f8c3(0x216)+_0x35f8c3(0x23d)]=void 0x0;const tslib_1=require(_0x35f8c3(0x248)),fs=tslib_1[_0x35f8c3(0x1e3)+_0x35f8c3(0x29f)](require('fs')),path=tslib_1['__import'+_0x35f8c3(0x29f)](require(_0x35f8c3(0x202))),document_templates_service_1=require(_0x35f8c3(0x220)+_0x35f8c3(0x222)+_0x35f8c3(0x29b)+_0x35f8c3(0x1ca)),document_templates_config_1=require('./docume'+_0x35f8c3(0x222)+_0x35f8c3(0x23e)+_0x35f8c3(0x266)),document_templates_types_1=require(_0x35f8c3(0x220)+'nt-templ'+'ates.typ'+'es');class DocumentTemplatesController{async['listTemp'+'lates'](req,res){const _0x1b17f7=_0x35f8c3,_0x461bcd={'sdDPA':_0x1b17f7(0x263)+_0x1b17f7(0x254)+_0x1b17f7(0x1da)+_0x1b17f7(0x249)+'template'+'s','MEnzi':_0x1b17f7(0x279)+_0x1b17f7(0x1dd)+_0x1b17f7(0x24d),'mpCEm':'Internal'+_0x1b17f7(0x1ff)+_0x1b17f7(0x1d9)};try{const _0x444a44=req['user'];if(!_0x444a44){res[_0x1b17f7(0x1e9)](0x191)[_0x1b17f7(0x2ac)]({'success':![],'error':'Unauthor'+'ized','message':_0x461bcd[_0x1b17f7(0x27d)]});return;}const _0x459548=document_templates_service_1[_0x1b17f7(0x271)+_0x1b17f7(0x20f)+_0x1b17f7(0x27e)]['listTemp'+_0x1b17f7(0x288)]({'userId':_0x444a44[_0x1b17f7(0x278)],'plan':_0x444a44['planType']});res['json'](_0x459548);}catch(_0xd9c9e3){console[_0x1b17f7(0x1d9)](_0x461bcd[_0x1b17f7(0x231)],_0xd9c9e3),res[_0x1b17f7(0x1e9)](0x1f4)['json']({'success':![],'error':_0x461bcd['mpCEm'],'message':_0x1b17f7(0x1c0)+_0x1b17f7(0x25f)+_0x1b17f7(0x232)+'s'});}}async['getByCat'+_0x35f8c3(0x280)](req,res){const _0x1dac07=_0x35f8c3,_0x5dc3cf={'RBVfY':_0x1dac07(0x23c)+_0x1dac07(0x223)+':','NGWjN':function(_0x39abf4,_0x154f9d){return _0x39abf4!==_0x154f9d;},'GZtiL':_0x1dac07(0x1e8)+_0x1dac07(0x259)+_0x1dac07(0x1f3),'McbFd':'Internal'+_0x1dac07(0x1ff)+_0x1dac07(0x1d9)};try{const _0x574787=req[_0x1dac07(0x26b)];if(!_0x574787){if(_0x5dc3cf[_0x1dac07(0x297)](_0x1dac07(0x21f),_0x1dac07(0x21f)))_0x11f3ac['error'](_0x5dc3cf[_0x1dac07(0x207)],_0x1bc899),res[_0x1dac07(0x1e9)](0x1f4)[_0x1dac07(0x2ac)]({'success':![],'error':_0x1dac07(0x27f)+_0x1dac07(0x1ff)+_0x1dac07(0x1d9)});else{res[_0x1dac07(0x1e9)](0x191)[_0x1dac07(0x2ac)]({'success':![],'error':'Unauthor'+_0x1dac07(0x206)});return;}}const _0x5893ac=Object[_0x1dac07(0x1f7)](document_templates_types_1['Document'+_0x1dac07(0x234)]),_0x5e6de9={};for(const _0x11a5bd of _0x5893ac){const _0xb0aea3=document_templates_config_1[_0x1dac07(0x271)+_0x1dac07(0x20f)+_0x1dac07(0x273)][_0x1dac07(0x1fb)+_0x1dac07(0x250)+'tegory'](_0x11a5bd),_0xdf2b12=_0xb0aea3[_0x1dac07(0x210)](_0x1100d0=>document_templates_config_1[_0x1dac07(0x271)+_0x1dac07(0x20f)+_0x1dac07(0x273)][_0x1dac07(0x275)+'sTemplat'+'e'](_0x574787[_0x1dac07(0x1e6)],_0x1100d0['id']));_0x5e6de9[_0x11a5bd]=_0xb0aea3['map'](_0x3bc413=>({..._0x3bc413,'locked':!_0xdf2b12[_0x1dac07(0x2a1)](_0x269df4=>_0x269df4['id']===_0x3bc413['id'])}));}res[_0x1dac07(0x2ac)]({'success':!![],'categories':_0x5e6de9});}catch(_0x51843c){console[_0x1dac07(0x1d9)](_0x5dc3cf[_0x1dac07(0x1bf)],_0x51843c),res[_0x1dac07(0x1e9)](0x1f4)[_0x1dac07(0x2ac)]({'success':![],'error':_0x5dc3cf[_0x1dac07(0x25c)]});}}async[_0x35f8c3(0x1fb)+_0x35f8c3(0x272)](req,res){const _0x128928=_0x35f8c3,_0x3fe7a8={'uIOKm':_0x128928(0x20f)+_0x128928(0x282)+'equired','pEsok':'BgLXm','hmcwD':function(_0x22b3c6,_0x45bc82){return _0x22b3c6===_0x45bc82;},'CSJXU':'mdzJW','NYahV':_0x128928(0x1ee)+_0x128928(0x253)+_0x128928(0x244)};try{if(_0x3fe7a8['pEsok']===_0x3fe7a8[_0x128928(0x20c)]){const {templateId:_0x2203a8}=req[_0x128928(0x270)],_0x3fbb97=req[_0x128928(0x26b)];if(!_0x3fbb97){if(_0x3fe7a8[_0x128928(0x27c)](_0x128928(0x1f5),_0x3fe7a8[_0x128928(0x26a)])){res[_0x128928(0x1e9)](0x190)[_0x128928(0x2ac)]({'success':![],'error':_0x128928(0x214)+_0x128928(0x226),'message':_0x3fe7a8['uIOKm']});return;}else{res['status'](0x191)['json']({'success':![],'error':_0x128928(0x21a)+'ized'});return;}}const _0x413d78=document_templates_service_1[_0x128928(0x271)+_0x128928(0x20f)+_0x128928(0x27e)][_0x128928(0x1fb)+_0x128928(0x276)+'l'](_0x2203a8,{'userId':_0x3fbb97[_0x128928(0x278)],'plan':_0x3fbb97[_0x128928(0x1e6)]});if(!_0x413d78[_0x128928(0x274)]){res[_0x128928(0x1e9)](0x194)['json'](_0x413d78);return;}res['json'](_0x413d78);}else{const _0x3880d5=_0x18dfb9[_0x128928(0x271)+_0x128928(0x20f)+_0x128928(0x273)][_0x128928(0x1c4)]();res['json']({'success':!![],'stats':_0x3880d5});}}catch(_0x37d8ce){console[_0x128928(0x1d9)](_0x3fe7a8[_0x128928(0x1c6)],_0x37d8ce),res[_0x128928(0x1e9)](0x1f4)['json']({'success':![],'error':'Internal'+'\x20server\x20'+'error'});}}async['startDoc'+_0x35f8c3(0x21e)](req,res){const _0x4a2a67=_0x35f8c3,_0x1b2656={'CXEbw':_0x4a2a67(0x21a)+'ized','hMfto':_0x4a2a67(0x263)+_0x4a2a67(0x254)+_0x4a2a67(0x2a3)+_0x4a2a67(0x204),'ynjXh':_0x4a2a67(0x214)+_0x4a2a67(0x226),'idNZh':function(_0x45d20a,_0x4e6e5a){return _0x45d20a===_0x4e6e5a;},'BqDgC':_0x4a2a67(0x1c8),'QfFqC':'Start\x20do'+_0x4a2a67(0x1c1)+'rror:','uxbQX':_0x4a2a67(0x27f)+_0x4a2a67(0x1ff)+'error','AJeBe':_0x4a2a67(0x1c0)+_0x4a2a67(0x28c)+_0x4a2a67(0x271)+_0x4a2a67(0x299)};try{const {templateId:_0x328697}=req[_0x4a2a67(0x1eb)],_0x54ad85=req[_0x4a2a67(0x26b)];if(!_0x54ad85){res[_0x4a2a67(0x1e9)](0x191)[_0x4a2a67(0x2ac)]({'success':![],'error':_0x1b2656[_0x4a2a67(0x260)],'message':_0x1b2656[_0x4a2a67(0x237)]});return;}if(!_0x328697){res[_0x4a2a67(0x1e9)](0x190)[_0x4a2a67(0x2ac)]({'success':![],'error':_0x1b2656[_0x4a2a67(0x1d2)],'message':_0x4a2a67(0x20f)+_0x4a2a67(0x282)+_0x4a2a67(0x285)});return;}const _0x232fac=document_templates_service_1['document'+_0x4a2a67(0x20f)+_0x4a2a67(0x27e)][_0x4a2a67(0x1f0)+_0x4a2a67(0x21e)](_0x328697,{'userId':_0x54ad85[_0x4a2a67(0x278)],'plan':_0x54ad85[_0x4a2a67(0x1e6)]});if(!_0x232fac[_0x4a2a67(0x274)]){res[_0x4a2a67(0x1e9)](0x193)[_0x4a2a67(0x2ac)](_0x232fac);return;}res[_0x4a2a67(0x2ac)](_0x232fac);}catch(_0x571975){if(_0x1b2656['idNZh'](_0x4a2a67(0x23b),_0x1b2656['BqDgC'])){res['status'](0x191)[_0x4a2a67(0x2ac)]({'success':![],'error':_0x1b2656['CXEbw']});return;}else console['error'](_0x1b2656[_0x4a2a67(0x205)],_0x571975),res[_0x4a2a67(0x1e9)](0x1f4)[_0x4a2a67(0x2ac)]({'success':![],'error':_0x1b2656[_0x4a2a67(0x246)],'message':_0x1b2656[_0x4a2a67(0x277)]});}}async[_0x35f8c3(0x2a9)+_0x35f8c3(0x291)](req,res){const _0x532323=_0x35f8c3,_0x568a4e={'Gwqpi':_0x532323(0x263)+_0x532323(0x254)+_0x532323(0x1da)+'ocument\x20'+'template'+'s','sCMfe':_0x532323(0x21a)+'ized','DSgOs':_0x532323(0x1ef),'Aikpy':_0x532323(0x27a),'wHZSc':function(_0x23279d,_0x1fca74){return _0x23279d||_0x1fca74;},'LSCiy':function(_0x2ce8b4,_0x4befc0){return _0x2ce8b4!==_0x4befc0;},'aNfVY':'gBZRx','vqARa':'MFOIr','mJMRn':_0x532323(0x214)+'est','HSTxi':_0x532323(0x27f)+_0x532323(0x1ff)+'error'};try{const {sessionId:_0x159f0b,fieldId:_0x3eed7b,value:_0x79e402}=req['body'],_0x55a379=req[_0x532323(0x26b)];if(!_0x55a379){if(_0x568a4e['DSgOs']!==_0x568a4e[_0x532323(0x29a)]){res[_0x532323(0x1e9)](0x191)[_0x532323(0x2ac)]({'success':![],'error':_0x532323(0x21a)+_0x532323(0x206)});return;}else try{const _0x191158=req[_0x532323(0x26b)];if(!_0x191158){res[_0x532323(0x1e9)](0x191)[_0x532323(0x2ac)]({'success':![],'error':'Unauthor'+_0x532323(0x206),'message':_0x568a4e[_0x532323(0x28a)]});return;}const _0xb9edbb=_0x4ae94f[_0x532323(0x271)+_0x532323(0x20f)+_0x532323(0x27e)][_0x532323(0x25d)+_0x532323(0x288)]({'userId':_0x191158[_0x532323(0x278)],'plan':_0x191158[_0x532323(0x1e6)]});res[_0x532323(0x2ac)](_0xb9edbb);}catch(_0x4e49a3){_0x446785[_0x532323(0x1d9)](_0x532323(0x279)+'plates\x20e'+'rror:',_0x4e49a3),res[_0x532323(0x1e9)](0x1f4)[_0x532323(0x2ac)]({'success':![],'error':'Internal'+_0x532323(0x1ff)+_0x532323(0x1d9),'message':_0x532323(0x1c0)+_0x532323(0x25f)+_0x532323(0x232)+'s'});}}if(_0x568a4e['wHZSc'](!_0x159f0b,!_0x3eed7b)){if(_0x568a4e[_0x532323(0x21b)](_0x568a4e[_0x532323(0x1c5)],_0x568a4e[_0x532323(0x284)])){res[_0x532323(0x1e9)](0x190)[_0x532323(0x2ac)]({'success':![],'error':_0x568a4e['mJMRn'],'message':_0x532323(0x1f2)+_0x532323(0x1ec)+'ield\x20ID\x20'+_0x532323(0x25e)+_0x532323(0x281)});return;}else{res['status'](0x191)['json']({'success':![],'error':_0x568a4e[_0x532323(0x1ed)],'message':_0x568a4e[_0x532323(0x28a)]});return;}}const _0x2fdef7=document_templates_service_1['document'+'Template'+_0x532323(0x27e)][_0x532323(0x2a9)+_0x532323(0x291)](_0x159f0b,_0x3eed7b,_0x79e402,{'userId':_0x55a379[_0x532323(0x278)],'plan':_0x55a379[_0x532323(0x1e6)]});res['json'](_0x2fdef7);}catch(_0x900ce2){console[_0x532323(0x1d9)](_0x532323(0x219)+_0x532323(0x1d0)+_0x532323(0x244),_0x900ce2),res[_0x532323(0x1e9)](0x1f4)[_0x532323(0x2ac)]({'success':![],'error':_0x568a4e[_0x532323(0x264)],'message':_0x532323(0x1c0)+_0x532323(0x22e)+'\x20field'});}}async[_0x35f8c3(0x1de)+'d'](req,res){const _0x1e55db=_0x35f8c3,_0x52c2c6={'sjSDQ':_0x1e55db(0x263)+_0x1e55db(0x254)+_0x1e55db(0x1da)+'ocument\x20'+_0x1e55db(0x232)+'s','bJTxS':_0x1e55db(0x293),'DdfGp':_0x1e55db(0x23c)+_0x1e55db(0x223)+':'};try{const {sessionId:_0x31660a,fieldId:_0x53b88f}=req['body'],_0x23654f=req[_0x1e55db(0x26b)];if(!_0x23654f){res[_0x1e55db(0x1e9)](0x191)[_0x1e55db(0x2ac)]({'success':![],'error':'Unauthor'+_0x1e55db(0x206)});return;}if(!_0x31660a||!_0x53b88f){if(_0x52c2c6[_0x1e55db(0x28f)]===_0x52c2c6[_0x1e55db(0x28f)]){res[_0x1e55db(0x1e9)](0x190)[_0x1e55db(0x2ac)]({'success':![],'error':'Bad\x20requ'+'est','message':_0x1e55db(0x1f2)+'ID\x20and\x20F'+_0x1e55db(0x1e0)+_0x1e55db(0x25e)+_0x1e55db(0x281)});return;}else{const _0x17eaa4=req['user'];if(!_0x17eaa4){res[_0x1e55db(0x1e9)](0x191)[_0x1e55db(0x2ac)]({'success':![],'error':_0x1e55db(0x21a)+_0x1e55db(0x206),'message':_0x52c2c6[_0x1e55db(0x1d5)]});return;}const _0x53c4d6=_0x3aaec8[_0x1e55db(0x271)+'Template'+_0x1e55db(0x27e)][_0x1e55db(0x25d)+_0x1e55db(0x288)]({'userId':_0x17eaa4[_0x1e55db(0x278)],'plan':_0x17eaa4[_0x1e55db(0x1e6)]});res[_0x1e55db(0x2ac)](_0x53c4d6);}}const _0x1d53db=document_templates_service_1[_0x1e55db(0x271)+'Template'+_0x1e55db(0x27e)][_0x1e55db(0x1de)+'d'](_0x31660a,_0x53b88f,{'userId':_0x23654f['userId'],'plan':_0x23654f['planType']});res[_0x1e55db(0x2ac)](_0x1d53db);}catch(_0x107905){console['error'](_0x52c2c6[_0x1e55db(0x22b)],_0x107905),res[_0x1e55db(0x1e9)](0x1f4)[_0x1e55db(0x2ac)]({'success':![],'error':_0x1e55db(0x27f)+_0x1e55db(0x1ff)+_0x1e55db(0x1d9)});}}async[_0x35f8c3(0x208)+'on'](req,res){const _0x1b2bbf=_0x35f8c3,_0x54f34a={'UgLLk':_0x1b2bbf(0x20f)+_0x1b2bbf(0x24c)+'nd','niaNo':function(_0x393cb8,_0x3db193){return _0x393cb8!==_0x3db193;},'VBVHP':_0x1b2bbf(0x2a4),'dlJHx':'Unauthor'+_0x1b2bbf(0x206),'WlzOb':_0x1b2bbf(0x243)+'d','aMsEs':_0x1b2bbf(0x27f)+'\x20server\x20'+_0x1b2bbf(0x1d9)};try{const {sessionId:_0x37832e}=req[_0x1b2bbf(0x270)],_0x14153f=req[_0x1b2bbf(0x26b)];if(!_0x14153f){if(_0x54f34a[_0x1b2bbf(0x22d)](_0x54f34a[_0x1b2bbf(0x227)],_0x1b2bbf(0x2a4))){res[_0x1b2bbf(0x1e9)](0x191)[_0x1b2bbf(0x2ac)]({'success':![],'error':_0x1b2bbf(0x21a)+_0x1b2bbf(0x206)});return;}else{res['status'](0x191)['json']({'success':![],'error':_0x54f34a[_0x1b2bbf(0x1dc)]});return;}}const _0x5e38cb=document_templates_service_1[_0x1b2bbf(0x271)+_0x1b2bbf(0x20f)+'sService'][_0x1b2bbf(0x1f1)+'ess'](_0x37832e);if(!_0x5e38cb){if(_0x1b2bbf(0x24b)===_0x1b2bbf(0x26e)){res[_0x1b2bbf(0x1e9)](0x194)[_0x1b2bbf(0x2ac)]({'success':![],'error':_0x54f34a['UgLLk']});return;}else{res[_0x1b2bbf(0x1e9)](0x194)[_0x1b2bbf(0x2ac)]({'success':![],'error':_0x54f34a[_0x1b2bbf(0x1d1)],'message':_0x1b2bbf(0x1f2)+_0x1b2bbf(0x1ce)+_0x1b2bbf(0x2a5)+_0x1b2bbf(0x281)});return;}}const _0x2a058c=document_templates_service_1[_0x1b2bbf(0x271)+'Template'+_0x1b2bbf(0x27e)][_0x1b2bbf(0x258)+_0x1b2bbf(0x2a7)](_0x37832e);res[_0x1b2bbf(0x2ac)]({'success':!![],'progress':_0x5e38cb,'nextPrompt':_0x2a058c});}catch(_0x35ee9b){console[_0x1b2bbf(0x1d9)]('Get\x20sess'+'ion\x20erro'+'r:',_0x35ee9b),res[_0x1b2bbf(0x1e9)](0x1f4)['json']({'success':![],'error':_0x54f34a[_0x1b2bbf(0x22c)]});}}async[_0x35f8c3(0x290)+_0x35f8c3(0x294)](req,res){const _0x1f24a5=_0x35f8c3,_0x1b62ba={'yQLxJ':'List\x20tem'+_0x1f24a5(0x1dd)+_0x1f24a5(0x24d),'uaexl':_0x1f24a5(0x21a)+_0x1f24a5(0x206),'SFTNC':function(_0x1f0e51,_0x3e7d27){return _0x1f0e51===_0x3e7d27;},'xXbQS':_0x1f24a5(0x241),'PogSs':_0x1f24a5(0x214)+_0x1f24a5(0x226),'zTQSb':_0x1f24a5(0x1f2)+_0x1f24a5(0x252)+'quired','ngcUh':_0x1f24a5(0x20b)+_0x1f24a5(0x1d3)+'Use\x20\x22doc'+_0x1f24a5(0x1fe)+_0x1f24a5(0x1d8),'LCvoK':_0x1f24a5(0x1c0)+'o\x20genera'+_0x1f24a5(0x296)+_0x1f24a5(0x289)};try{if(_0x1b62ba['SFTNC'](_0x1f24a5(0x1f6),_0x1f24a5(0x1f6))){const {sessionId:_0x213c5e,format:format=_0x1b62ba[_0x1f24a5(0x2aa)],enhance:enhance=!![]}=req[_0x1f24a5(0x1eb)],_0xfdd04f=req[_0x1f24a5(0x26b)];if(!_0xfdd04f){res[_0x1f24a5(0x1e9)](0x191)[_0x1f24a5(0x2ac)]({'success':![],'error':_0x1f24a5(0x21a)+'ized'});return;}if(!_0x213c5e){res['status'](0x190)[_0x1f24a5(0x2ac)]({'success':![],'error':_0x1b62ba[_0x1f24a5(0x2a0)],'message':_0x1b62ba[_0x1f24a5(0x1cc)]});return;}const _0x46a089=format[_0x1f24a5(0x1fa)+'ase']();if(!Object[_0x1f24a5(0x1f7)](document_templates_types_1[_0x1f24a5(0x294)+_0x1f24a5(0x268)])['includes'](_0x46a089)){res[_0x1f24a5(0x1e9)](0x190)[_0x1f24a5(0x2ac)]({'success':![],'error':_0x1b62ba['PogSs'],'message':_0x1b62ba['ngcUh']});return;}const _0x56014a=await document_templates_service_1[_0x1f24a5(0x271)+_0x1f24a5(0x20f)+_0x1f24a5(0x27e)]['generate'+_0x1f24a5(0x294)](_0x213c5e,_0x46a089,{'userId':_0xfdd04f[_0x1f24a5(0x278)],'plan':_0xfdd04f[_0x1f24a5(0x1e6)]},enhance);if(!_0x56014a[_0x1f24a5(0x274)]){if(_0x1f24a5(0x21d)!==_0x1f24a5(0x21d))_0x737660['error'](_0x1b62ba[_0x1f24a5(0x298)],_0x17f12c),res[_0x1f24a5(0x1e9)](0x1f4)[_0x1f24a5(0x2ac)]({'success':![],'error':_0x1f24a5(0x27f)+'\x20server\x20'+_0x1f24a5(0x1d9),'message':_0x1f24a5(0x1c0)+_0x1f24a5(0x25f)+_0x1f24a5(0x232)+'s'});else{res[_0x1f24a5(0x1e9)](0x190)[_0x1f24a5(0x2ac)](_0x56014a);return;}}res['json'](_0x56014a);}else{res[_0x1f24a5(0x1e9)](0x191)[_0x1f24a5(0x2ac)]({'success':![],'error':_0x1b62ba[_0x1f24a5(0x1c9)]});return;}}catch(_0x33ebf5){console[_0x1f24a5(0x1d9)](_0x1f24a5(0x256)+_0x1f24a5(0x240)+_0x1f24a5(0x230),_0x33ebf5),res[_0x1f24a5(0x1e9)](0x1f4)[_0x1f24a5(0x2ac)]({'success':![],'error':'Internal'+'\x20server\x20'+_0x1f24a5(0x1d9),'message':_0x1b62ba[_0x1f24a5(0x20a)]});}}async[_0x35f8c3(0x1d6)+'Document'](req,res){const _0x3a9f0d=_0x35f8c3,_0x72b445={'HOBaH':'Document'+_0x3a9f0d(0x24c)+_0x3a9f0d(0x1e7)+_0x3a9f0d(0x267),'usUyE':'applicat'+_0x3a9f0d(0x2a6)+_0x3a9f0d(0x1cb),'dqaTn':'Download'+_0x3a9f0d(0x287),'woAdK':_0x3a9f0d(0x27f)+_0x3a9f0d(0x1ff)+_0x3a9f0d(0x1d9),'tvdcG':_0x3a9f0d(0x1c0)+_0x3a9f0d(0x292)+_0x3a9f0d(0x27b)+_0x3a9f0d(0x289)};try{const {fileName:_0x3ab792}=req['params'],_0x118640=req['user'];if(!_0x118640){res[_0x3a9f0d(0x1e9)](0x191)[_0x3a9f0d(0x2ac)]({'success':![],'error':'Unauthor'+_0x3a9f0d(0x206)});return;}const _0x32344f=path[_0x3a9f0d(0x236)](_0x3ab792),_0x3c74a6=document_templates_service_1[_0x3a9f0d(0x271)+'Template'+_0x3a9f0d(0x27e)][_0x3a9f0d(0x262)+_0x3a9f0d(0x2ad)](_0x32344f);if(!_0x3c74a6){res[_0x3a9f0d(0x1e9)](0x194)[_0x3a9f0d(0x2ac)]({'success':![],'error':'Not\x20foun'+'d','message':_0x72b445[_0x3a9f0d(0x269)]});return;}const _0x59a43e=path['extname'](_0x32344f)[_0x3a9f0d(0x1fa)+_0x3a9f0d(0x26f)](),_0x1e9768={'.docx':_0x3a9f0d(0x265)+_0x3a9f0d(0x1f9)+_0x3a9f0d(0x29c)+_0x3a9f0d(0x218)+_0x3a9f0d(0x1e4)+_0x3a9f0d(0x1df)+_0x3a9f0d(0x1c3)+_0x3a9f0d(0x211)+_0x3a9f0d(0x1d7),'.pdf':_0x3a9f0d(0x265)+_0x3a9f0d(0x24f)};res[_0x3a9f0d(0x2ab)+'r'](_0x3a9f0d(0x228)+_0x3a9f0d(0x28d),_0x1e9768[_0x59a43e]||_0x72b445[_0x3a9f0d(0x212)]),res[_0x3a9f0d(0x2ab)+'r'](_0x3a9f0d(0x228)+_0x3a9f0d(0x213)+_0x3a9f0d(0x229),_0x3a9f0d(0x25a)+'nt;\x20file'+_0x3a9f0d(0x217)+_0x32344f+'\x22');const _0x2be07f=fs[_0x3a9f0d(0x235)+'adStream'](_0x3c74a6);_0x2be07f[_0x3a9f0d(0x1e2)](res);}catch(_0x57cab1){console[_0x3a9f0d(0x1d9)](_0x72b445['dqaTn'],_0x57cab1),res['status'](0x1f4)[_0x3a9f0d(0x2ac)]({'success':![],'error':_0x72b445[_0x3a9f0d(0x1fd)],'message':_0x72b445[_0x3a9f0d(0x1d4)]});}}async['quickGen'+_0x35f8c3(0x1c2)](req,res){const _0x51d237=_0x35f8c3,_0x52b8eb={'fktkr':_0x51d237(0x21a)+_0x51d237(0x206),'GWfQj':'qcgvt','DFDaa':_0x51d237(0x214)+'est','GuyFO':'Template'+_0x51d237(0x24c)+'nd','vAgwQ':function(_0x5df907,_0x36f5e5){return _0x5df907!==_0x36f5e5;},'bqjeP':'docx','piCOc':_0x51d237(0x295),'mFHvW':_0x51d237(0x26c)+_0x51d237(0x224)+_0x51d237(0x24d),'NgUvC':_0x51d237(0x27f)+_0x51d237(0x1ff)+_0x51d237(0x1d9)};try{const {templateId:_0x280afd,data:_0x2429ab,format:format=_0x51d237(0x241),enhance:enhance=!![]}=req[_0x51d237(0x1eb)],_0x4ce83f=req[_0x51d237(0x26b)];if(!_0x4ce83f){res[_0x51d237(0x1e9)](0x191)['json']({'success':![],'error':_0x51d237(0x21a)+_0x51d237(0x206)});return;}if(!_0x280afd||!_0x2429ab){if(_0x51d237(0x255)!==_0x52b8eb['GWfQj']){const {templateId:_0x7f3558}=req['params'],_0x2badc1=req['user'];if(!_0x2badc1){res[_0x51d237(0x1e9)](0x191)[_0x51d237(0x2ac)]({'success':![],'error':_0x52b8eb[_0x51d237(0x1cf)]});return;}const _0x5d94a5=_0x57cc1c[_0x51d237(0x271)+'Template'+_0x51d237(0x27e)][_0x51d237(0x1fb)+_0x51d237(0x276)+'l'](_0x7f3558,{'userId':_0x2badc1[_0x51d237(0x278)],'plan':_0x2badc1['planType']});if(!_0x5d94a5[_0x51d237(0x274)]){res[_0x51d237(0x1e9)](0x194)[_0x51d237(0x2ac)](_0x5d94a5);return;}res[_0x51d237(0x2ac)](_0x5d94a5);}else{res[_0x51d237(0x1e9)](0x190)[_0x51d237(0x2ac)]({'success':![],'error':_0x52b8eb[_0x51d237(0x225)],'message':_0x51d237(0x20f)+_0x51d237(0x2a8)+'data\x20are'+_0x51d237(0x1e1)+'d'});return;}}const _0x3c5c61=document_templates_service_1[_0x51d237(0x271)+_0x51d237(0x20f)+_0x51d237(0x27e)][_0x51d237(0x1f0)+_0x51d237(0x21e)](_0x280afd,{'userId':_0x4ce83f['userId'],'plan':_0x4ce83f[_0x51d237(0x1e6)]});if(!_0x3c5c61['success']){res[_0x51d237(0x1e9)](0x193)[_0x51d237(0x2ac)](_0x3c5c61);return;}const _0x3ac6cc=_0x3c5c61[_0x51d237(0x28e)+'d'],_0x4b564f=document_templates_config_1[_0x51d237(0x271)+'Template'+'sManager'][_0x51d237(0x1fb)+'ate'](_0x280afd);if(!_0x4b564f){res[_0x51d237(0x1e9)](0x194)[_0x51d237(0x2ac)]({'success':![],'error':_0x52b8eb['GuyFO']});return;}for(const _0x495971 of _0x4b564f[_0x51d237(0x29e)]){_0x52b8eb[_0x51d237(0x1e5)](_0x2429ab[_0x495971['id']],undefined)&&document_templates_service_1[_0x51d237(0x271)+_0x51d237(0x20f)+_0x51d237(0x27e)][_0x51d237(0x2a9)+_0x51d237(0x291)](_0x3ac6cc,_0x495971['id'],_0x2429ab[_0x495971['id']],{'userId':_0x4ce83f['userId'],'plan':_0x4ce83f['planType']});}const _0x4ef923=format?.[_0x51d237(0x1fa)+_0x51d237(0x26f)]()||_0x52b8eb[_0x51d237(0x24a)],_0x505bb3=await document_templates_service_1[_0x51d237(0x271)+_0x51d237(0x20f)+_0x51d237(0x27e)][_0x51d237(0x290)+_0x51d237(0x294)](_0x3ac6cc,_0x4ef923,{'userId':_0x4ce83f[_0x51d237(0x278)],'plan':_0x4ce83f['planType']},enhance);res[_0x51d237(0x2ac)](_0x505bb3);}catch(_0x318ecc){if(_0x52b8eb['vAgwQ'](_0x52b8eb[_0x51d237(0x20d)],_0x51d237(0x295))){res[_0x51d237(0x1e9)](0x191)[_0x51d237(0x2ac)]({'success':![],'error':'Unauthor'+_0x51d237(0x206)});return;}else console[_0x51d237(0x1d9)](_0x52b8eb[_0x51d237(0x251)],_0x318ecc),res[_0x51d237(0x1e9)](0x1f4)[_0x51d237(0x2ac)]({'success':![],'error':_0x52b8eb[_0x51d237(0x238)],'message':_0x51d237(0x1c0)+_0x51d237(0x200)+_0x51d237(0x296)+_0x51d237(0x289)});}}async[_0x35f8c3(0x1c4)](req,res){const _0x30c299=_0x35f8c3,_0x764dc1={'rxaZK':_0x30c299(0x27f)+'\x20server\x20'+_0x30c299(0x1d9),'RmQiE':function(_0x4ea00a,_0xa2cb80){return _0x4ea00a!==_0xa2cb80;},'GPHzy':_0x30c299(0x233),'iFnfA':'Get\x20stat'+_0x30c299(0x1c7)};try{const _0x3b2025=document_templates_config_1[_0x30c299(0x271)+_0x30c299(0x20f)+'sManager'][_0x30c299(0x1c4)]();res[_0x30c299(0x2ac)]({'success':!![],'stats':_0x3b2025});}catch(_0x51b711){_0x764dc1['RmQiE']('MDbGg',_0x764dc1[_0x30c299(0x261)])?(console[_0x30c299(0x1d9)](_0x764dc1[_0x30c299(0x209)],_0x51b711),res[_0x30c299(0x1e9)](0x1f4)['json']({'success':![],'error':_0x30c299(0x27f)+'\x20server\x20'+_0x30c299(0x1d9)})):(_0xcabdd7[_0x30c299(0x1d9)](_0x30c299(0x2a2)+_0x30c299(0x1f4)+'r:',_0x2ef5ee),res[_0x30c299(0x1e9)](0x1f4)[_0x30c299(0x2ac)]({'success':![],'error':_0x764dc1['rxaZK']}));}}}exports['Document'+'Template'+'sControl'+'ler']=DocumentTemplatesController,exports['document'+_0x35f8c3(0x20f)+_0x35f8c3(0x216)+'ler']=new DocumentTemplatesController();