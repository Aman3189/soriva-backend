const _0x17969d=_0x5679;(function(_0x252c4d,_0x3f9c0d){const _0x3f0f0b=_0x5679,_0x2ef3fd=_0x252c4d();while(!![]){try{const _0x597b5a=-parseInt(_0x3f0f0b(0x173))/0x1+parseInt(_0x3f0f0b(0x11a))/0x2*(-parseInt(_0x3f0f0b(0x11c))/0x3)+parseInt(_0x3f0f0b(0x157))/0x4*(-parseInt(_0x3f0f0b(0x135))/0x5)+parseInt(_0x3f0f0b(0x13a))/0x6+-parseInt(_0x3f0f0b(0x142))/0x7+-parseInt(_0x3f0f0b(0x15c))/0x8*(-parseInt(_0x3f0f0b(0x176))/0x9)+parseInt(_0x3f0f0b(0x10c))/0xa;if(_0x597b5a===_0x3f9c0d)break;else _0x2ef3fd['push'](_0x2ef3fd['shift']());}catch(_0x2fefa9){_0x2ef3fd['push'](_0x2ef3fd['shift']());}}}(_0x49e0,0xdc2d7));const _0x37a1c6=(function(){let _0x482a3b=!![];return function(_0x21fc57,_0x5c4892){const _0x444155=_0x5679;if('fOFuG'==='QuzSM')throw new _0x49e32d(_0x444155(0x103)+'o\x20delete'+'\x20workspa'+_0x444155(0x128)+_0x2e6987[_0x444155(0x12a)]);else{const _0x80121e=_0x482a3b?function(){if(_0x5c4892){const res=_0x5c4892['apply'](_0x21fc57,arguments);return _0x5c4892=null,res;}}:function(){};return _0x482a3b=![],_0x80121e;}};}()),_0x4051b8=_0x37a1c6(this,function(){const _0x1e47aa=_0x5679;return _0x4051b8[_0x1e47aa(0x136)]()['search'](_0x1e47aa(0x15a)+_0x1e47aa(0x130))['toString']()[_0x1e47aa(0x118)+_0x1e47aa(0x133)](_0x4051b8)[_0x1e47aa(0x175)](_0x1e47aa(0x15a)+'+)+$');});function _0x5679(_0x747af0,_0x42a3f9){_0x747af0=_0x747af0-0xf3;const _0x494989=_0x49e0();let _0x4051b8=_0x494989[_0x747af0];if(_0x5679['qwuwWS']===undefined){var _0x37a1c6=function(_0x508d63){const _0x4489e7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x253d92='',_0x56796f='',_0x1dd2b6=_0x253d92+_0x37a1c6;for(let _0x4c76ba=0x0,_0x539b15,_0x3e151b,_0x26f6f4=0x0;_0x3e151b=_0x508d63['charAt'](_0x26f6f4++);~_0x3e151b&&(_0x539b15=_0x4c76ba%0x4?_0x539b15*0x40+_0x3e151b:_0x3e151b,_0x4c76ba++%0x4)?_0x253d92+=_0x1dd2b6['charCodeAt'](_0x26f6f4+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x539b15>>(-0x2*_0x4c76ba&0x6)):_0x4c76ba:0x0){_0x3e151b=_0x4489e7['indexOf'](_0x3e151b);}for(let _0x3013ff=0x0,_0x3257e3=_0x253d92['length'];_0x3013ff<_0x3257e3;_0x3013ff++){_0x56796f+='%'+('00'+_0x253d92['charCodeAt'](_0x3013ff)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x56796f);};_0x5679['ISHIlW']=_0x37a1c6,_0x5679['PJuQim']={},_0x5679['qwuwWS']=!![];}const _0x49e0d2=_0x494989[0x0],_0x56799b=_0x747af0+_0x49e0d2,_0x307777=_0x5679['PJuQim'][_0x56799b];if(!_0x307777){const _0x34a5a7=function(_0xff2e64){this['bRMyfT']=_0xff2e64,this['FVPrrV']=[0x1,0x0,0x0],this['QgxzkL']=function(){return'newState';},this['tuvQWd']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['DDlQKb']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x34a5a7['prototype']['qthXrk']=function(){const _0xd4b378=new RegExp(this['tuvQWd']+this['DDlQKb']),_0x1e717c=_0xd4b378['test'](this['QgxzkL']['toString']())?--this['FVPrrV'][0x1]:--this['FVPrrV'][0x0];return this['zgmNkR'](_0x1e717c);},_0x34a5a7['prototype']['zgmNkR']=function(_0x308932){if(!Boolean(~_0x308932))return _0x308932;return this['idVLWF'](this['bRMyfT']);},_0x34a5a7['prototype']['idVLWF']=function(_0x3db3a8){for(let _0x40574d=0x0,_0x29ec9f=this['FVPrrV']['length'];_0x40574d<_0x29ec9f;_0x40574d++){this['FVPrrV']['push'](Math['round'](Math['random']())),_0x29ec9f=this['FVPrrV']['length'];}return _0x3db3a8(this['FVPrrV'][0x0]);},new _0x34a5a7(_0x5679)['qthXrk'](),_0x4051b8=_0x5679['ISHIlW'](_0x4051b8),_0x5679['PJuQim'][_0x56799b]=_0x4051b8;}else _0x4051b8=_0x307777;return _0x4051b8;}function _0x49e0(){const _0x40b217=['y29UC3rYDwm','igj5ihn0yxq','nta1nJe2A3bcq0H6','y291BNrxB3i','mtHZDM91AhK','BYbTyxjRihC','CgfJzxncEu8','BgfUz3vHz2u','CKnVDw50','DxbKyxrL','uufZDMC','ExbL','zMLSDgvY','D29YzenVDw4','CgfJzvn0yxq','BwfW','y2u6ia','z2XsDuu','BwvZC2fNzq','igj5ihr5Cgu','D01KC1e','Dg9ju09tDhi','CvjhBue','AhrNAg4','kYKRja','DxbKyxrLv28','y29UDgvUDa','Dg9Y','zsbUB3qGzM8','ndy0nJvcC2H6CxO','Dg9tDhjPBMC','we1qywK','zMLUzfvUAxe','BYbKzwXLDgu','nZmZotm5mLfAv1zPsa','Dgf0Dxm','BYbJCMvHDgu','B3jIAxq','CNv2veO','BgLUzunVDw4','igrVy3vTzw4','B250zw50','mZaXnJeXoejrwgTeDq','CMTZCgfJzq','CMTZCgfJzsa','AwvUDa','BYb0CMfJAYa','BgvUz3rO','CgfJzxm6ia','AxzL','y2uGBwv0ywq','B3j0','CMTZCgfJzxm','vLL0s2W','uhjPC21Hq2W','yxrHoIa','v29YA3nWywm','BYbNzxqGD28','C3rHDhm6ia','twXqtKe','DxbKyxrLr2u','BYbZzwfYy2G','C3rHDhvZ','ndyWqMLSwuzZ','z2vUzxjHDgK','B3bLCNr5','kcGOlISPkYK','vvb0DKy','nduZnMX1D2v4qW','CMTZCgfJzum','BwfYA1DVCMS','zgvZyW','Dxm6ia','rvbyDMq','yxbWBhK','zvnLCNzPy2u','Dc4UlG','Aw9UihbYB2C','Aw5Zzw5ZAxq','zgvSzxrL','rxPdtwO','BMCGDg8Gy3i','DgL0Bgu','y29UDgvUDfq','4PYOifn0yxj0Aq','zgLZy29UBMu','whbOv0i','y29TCgXLDgu','CNrLzef0','ywz0ihLVDxi','qhbYAxnTys8','mtq0nZi3ouXRshj2zW','zMLUze1HBNK','C2vHCMnO','mtyXmZDir0jvwuy','y2XPzw50','DhjPBq','CMTZCgfJztO','twjNEKG','u3PKBvu','CMvZCZOG','s1bvCei','CgfJzuj5swq','CgfJzxncEvm','D29YA3nWywm','BYb1CgrHDgu','B3jIAxrjza','CMjPDa','C3bSAxq','B3jRC3bHy2u','zgvSzxrLv28','ihDVCMTZCge','zg5ite0','y3jLyxrLv28','zxHWB3j0q28','jgrPC2nVBM4','AuLbu2O','igvYCM9YoIa','CfvtwKG','Aw5N','CgfJzxncEvu','rMfPBgvKihq','y2vZoIa','C2vHCMnOv28','ywLqCM9TChq','Dw5K','DMvYC2LVBG','CgfJzxncEum','y3jLyxrLzee','AKHSuMe','mZeYnty4mdbOAgrKwxm','ufnTu2C','qLDLtve','rLnYC28','y2HHCMfJDgu','z2v0v29YA3m','Bwv0ywrHDge','uhjVz3jLC3m','CvLiuei','igDLBMvYyxq','DhjHy2TfEha','zxiGD29YA3m'];_0x49e0=function(){return _0x40b217;};return _0x49e0();}_0x4051b8();'use strict';Object['definePr'+_0x17969d(0x159)](exports,'__esModu'+'le',{'value':!![]}),exports[_0x17969d(0x180)+'eService']=exports[_0x17969d(0x150)+_0x17969d(0x163)]=void 0x0;const client_1=require(_0x17969d(0x172)+_0x17969d(0x177)),prisma=new client_1[(_0x17969d(0x14e))+(_0x17969d(0x145))]();class WorkspaceService{async[_0x17969d(0xfb)+_0x17969d(0x143)](_0x18f899){const _0x1d7921=_0x17969d,_0x872ab6={'dnHLM':_0x1d7921(0x158)+'ng','LbHPI':'draft'};try{const _0x478ddd=_0x18f899[_0x1d7921(0x132)]||'',_0x504beb=this['countWor'+'ds'](_0x478ddd),_0x272444={'wordCount':_0x504beb,'lineCount':_0x478ddd['split']('\x0a')['length'],'characterCount':_0x478ddd[_0x1d7921(0x147)],'version':0x1},_0x4a8bab=await prisma['workspac'+'e']['create']({'data':{'orbitId':_0x18f899[_0x1d7921(0xf4)],'title':_0x18f899[_0x1d7921(0x16a)],'content':_0x478ddd,'contentType':_0x18f899[_0x1d7921(0x16b)+'ype'],'language':_0x18f899[_0x1d7921(0x11f)]||null,'status':_0x18f899['aiPrompt']?_0x872ab6[_0x1d7921(0xfa)]:_0x872ab6['LbHPI'],'aiPrompt':_0x18f899['aiPrompt']||null,'generationProgress':0x0,'metadata':_0x272444,'statusMessage':_0x18f899[_0x1d7921(0x106)]?_0x1d7921(0x16c)+_0x1d7921(0x169)+_0x1d7921(0x171)+_0x1d7921(0x140)+_0x1d7921(0x164):null,'exportCount':0x0}});return _0x4a8bab;}catch(_0x2933f0){throw new Error(_0x1d7921(0x103)+_0x1d7921(0x13c)+'\x20workspa'+'ce:\x20'+_0x2933f0[_0x1d7921(0x12a)]);}}async['getWorks'+_0x17969d(0x17e)](_0x232d68){const _0x58ffbb=_0x17969d,_0x4c2847={'IKPnl':function(_0x4853f6,_0xed37e5){return _0x4853f6!==_0xed37e5;}};try{const _0x3e10a2=await prisma[_0x58ffbb(0x180)+'e']['findUniq'+'ue']({'where':{'id':_0x232d68},'include':{'orbit':{'select':{'id':!![],'name':!![],'userId':!![]}}}});return _0x3e10a2;}catch(_0x58d82d){if(_0x4c2847['IKPnl'](_0x58ffbb(0x12f),_0x58ffbb(0x114)))throw new Error(_0x58ffbb(0x103)+'o\x20get\x20wo'+_0x58ffbb(0x179)+'\x20'+_0x58d82d[_0x58ffbb(0x12a)]);else{const _0x2f0329=_0x34a5a7?function(){const _0x158f24=_0x58ffbb;if(_0x40574d){const res=_0x45955a[_0x158f24(0x162)](_0x3fa983,arguments);return _0x583ce3=null,res;}}:function(){};return _0x3db3a8=![],_0x2f0329;}}}async['getWorks'+_0x17969d(0x11e)+_0x17969d(0xf5)](_0x349d92){const _0x3232f2=_0x17969d;try{const _0x2774f2=await prisma[_0x3232f2(0x180)+'e']['findMany']({'where':{'orbitId':_0x349d92},'orderBy':{'updatedAt':_0x3232f2(0x15f)}});return _0x2774f2;}catch(_0x49a42c){throw new Error(_0x3232f2(0x103)+_0x3232f2(0x151)+_0x3232f2(0x14c)+':\x20'+_0x49a42c[_0x3232f2(0x12a)]);}}async[_0x17969d(0x111)+_0x17969d(0x102)+'ser'](_0x351689){const _0x9e03d6=_0x17969d,_0xca9bc={'XphWB':'(((.+)+)'+_0x9e03d6(0x130),'BWeMQ':function(_0x1fc3de,_0x1e2dc6){return _0x1fc3de!==_0x1e2dc6;}};try{if(_0xca9bc[_0x9e03d6(0x10e)](_0x9e03d6(0x10d),'MsiJQ')){const _0x19cc9d=await prisma[_0x9e03d6(0x13d)][_0x9e03d6(0x174)]({'where':{'userId':_0x351689},'select':{'id':!![]}}),_0xdaad8a=_0x19cc9d['map'](_0x419577=>_0x419577['id']),_0x4cbed8=await prisma[_0x9e03d6(0x180)+'e'][_0x9e03d6(0x174)]({'where':{'orbitId':{'in':_0xdaad8a}},'orderBy':{'updatedAt':_0x9e03d6(0x15f)}});return _0x4cbed8;}else return _0x549687['toString']()[_0x9e03d6(0x175)](EDjDKB[_0x9e03d6(0x16e)])['toString']()[_0x9e03d6(0x118)+_0x9e03d6(0x133)](_0x27d44f)[_0x9e03d6(0x175)](EDjDKB[_0x9e03d6(0x16e)]);}catch(_0x23bf9d){throw new Error(_0x9e03d6(0x103)+'o\x20get\x20us'+_0x9e03d6(0x117)+_0x9e03d6(0x148)+_0x23bf9d[_0x9e03d6(0x12a)]);}}async[_0x17969d(0x131)+_0x17969d(0x15d)+_0x17969d(0x141)](_0x5ef832,_0x39402f,_0x5fdee3=!![]){const _0x5d1b14=_0x17969d,_0x5182a1={'EzCMj':function(_0x5c19db,_0x3e3533){return _0x5c19db!==_0x3e3533;},'FSrso':_0x5d1b14(0x12e),'Jlosn':function(_0x2acc7a,_0x319134){return _0x2acc7a+_0x319134;}};try{const _0x2592ad=await prisma[_0x5d1b14(0x180)+'e'][_0x5d1b14(0x138)+'ue']({'where':{'id':_0x5ef832}});if(!_0x2592ad){if(_0x5182a1[_0x5d1b14(0x168)]('fZKWD',_0x5182a1[_0x5d1b14(0x10f)]))throw new Error(_0x5d1b14(0x150)+_0x5d1b14(0x134)+_0x5d1b14(0x107));else throw new _0x165d21(_0x5d1b14(0x103)+_0x5d1b14(0xf3)+'\x20generat'+_0x5d1b14(0x165)+_0x5d1b14(0x17c)+_0x5c22dc[_0x5d1b14(0x12a)]);}let _0x80ecf5=_0x2592ad[_0x5d1b14(0x112)];if(_0x5fdee3){const _0x5a59e1=this[_0x5d1b14(0x11b)+'ds'](_0x39402f),_0x522d36=_0x5182a1['Jlosn'](_0x80ecf5?.[_0x5d1b14(0x108)]||0x1,0x1);_0x80ecf5={..._0x80ecf5,'wordCount':_0x5a59e1,'lineCount':_0x39402f[_0x5d1b14(0xf6)]('\x0a')['length'],'characterCount':_0x39402f[_0x5d1b14(0x147)],'version':_0x522d36,'lastModified':new Date()[_0x5d1b14(0x12d)+'ing']()};}const _0xddc9c=await prisma[_0x5d1b14(0x180)+'e']['update']({'where':{'id':_0x5ef832},'data':{'content':_0x39402f,'metadata':_0x80ecf5,'updatedAt':new Date()}});return _0xddc9c;}catch(_0x237da3){throw new Error(_0x5d1b14(0x103)+_0x5d1b14(0xf3)+_0x5d1b14(0xf9)+_0x5d1b14(0x128)+_0x237da3[_0x5d1b14(0x12a)]);}}async[_0x17969d(0x131)+'rkspaceM'+'etadata'](_0x288af1,_0x553f14){const _0x512121=_0x17969d,_0x1d96b2={'nKZeZ':'kGwoF'};try{if(_0x512121(0x10b)!==_0x1d96b2['nKZeZ']){const _0x2ae60e=await prisma[_0x512121(0x180)+'e'][_0x512121(0x121)]({'where':{'id':_0x288af1},'data':{..._0x553f14[_0x512121(0x16a)]&&{'title':_0x553f14[_0x512121(0x16a)]},..._0x553f14[_0x512121(0x16b)+_0x512121(0x123)]&&{'contentType':_0x553f14[_0x512121(0x16b)+'ype']},..._0x553f14[_0x512121(0x11f)]!==undefined&&{'language':_0x553f14[_0x512121(0x11f)]},..._0x553f14[_0x512121(0x156)]&&{'status':_0x553f14['status']},'updatedAt':new Date()}});return _0x2ae60e;}else throw new _0x1aba4f(_0x512121(0x103)+_0x512121(0xf3)+_0x512121(0xf9)+_0x512121(0x14a)+_0x512121(0x14f)+_0x156aef[_0x512121(0x12a)]);}catch(_0x345a77){throw new Error(_0x512121(0x103)+_0x512121(0xf3)+_0x512121(0xf9)+_0x512121(0x14a)+_0x512121(0x14f)+_0x345a77[_0x512121(0x12a)]);}}async[_0x17969d(0x154)+'neration'+_0x17969d(0x113)](_0x5a9867,_0x4d0ea9,_0x24509c){const _0x54c993=_0x17969d,_0x57558a={'yBRVp':function(_0x347f28,_0x3b8385){return _0x347f28&&_0x3b8385;},'wMdsQ':function(_0x2a85c8,_0x30f9b2){return _0x2a85c8===_0x30f9b2;},'GThPW':_0x54c993(0x16f)+'d'};try{const _0x37f0ae=await prisma['workspac'+'e'][_0x54c993(0x121)]({'where':{'id':_0x5a9867},'data':{'generationProgress':_0x4d0ea9,..._0x57558a['yBRVp'](_0x24509c,{'statusMessage':_0x24509c}),..._0x57558a[_0x54c993(0x12c)](_0x4d0ea9,0x64)&&{'status':_0x57558a['GThPW']},'updatedAt':new Date()}});return _0x37f0ae;}catch(_0x193c8f){throw new Error(_0x54c993(0x103)+_0x54c993(0xf3)+_0x54c993(0x115)+_0x54c993(0x165)+_0x54c993(0x17c)+_0x193c8f[_0x54c993(0x12a)]);}}async[_0x17969d(0x15e)+'spaceErr'+'or'](_0x50677d,_0x4c236a){const _0x39249f=_0x17969d,_0x4a443e={'UPtvF':'error'};try{const _0x328004=await prisma[_0x39249f(0x180)+'e'][_0x39249f(0x121)]({'where':{'id':_0x50677d},'data':{'status':_0x4a443e[_0x39249f(0x15b)],'statusMessage':_0x4c236a,'updatedAt':new Date()}});return _0x328004;}catch(_0x5ea460){throw new Error(_0x39249f(0x103)+_0x39249f(0x11d)+_0x39249f(0xf7)+_0x39249f(0xff)+_0x5ea460['message']);}}async[_0x17969d(0x116)+_0x17969d(0x14b)](_0x3ec4fe){const _0x3981b7=_0x17969d,_0x36112e={'glRuE':function(_0x24595c,_0x269715){return _0x24595c===_0x269715;},'iIASj':'Cbjya'};try{const _0x45060f=await prisma[_0x3981b7(0x180)+'e'][_0x3981b7(0x121)]({'where':{'id':_0x3ec4fe},'data':{'lastExportedAt':new Date(),'exportCount':{'increment':0x1}}});return _0x45060f;}catch(_0x458696){if(_0x36112e[_0x3981b7(0x129)](_0x36112e[_0x3981b7(0xfe)],_0x36112e[_0x3981b7(0xfe)]))throw new Error(_0x3981b7(0x103)+_0x3981b7(0x146)+'export:\x20'+_0x458696[_0x3981b7(0x12a)]);else{if(!_0x2d151b)return 0x0;return _0x4e3038[_0x3981b7(0x178)]()['split'](/\s+/)[_0x3981b7(0x124)](_0x27912a=>_0x27912a[_0x3981b7(0x147)]>0x0)[_0x3981b7(0x147)];}}}async[_0x17969d(0xf8)+'rkspace'](_0x587c35){const _0x451386=_0x17969d,_0x44be15={'ruvTJ':function(_0x49da4c,_0x5c55b5){return _0x49da4c!==_0x5c55b5;},'QgvMH':_0x451386(0x100)};try{if(_0x44be15[_0x451386(0x13e)]('eetzj',_0x44be15['QgvMH']))await prisma[_0x451386(0x180)+'e'][_0x451386(0x167)]({'where':{'id':_0x587c35}});else throw new _0x45873c('Failed\x20t'+'o\x20mark\x20w'+_0x451386(0xf7)+_0x451386(0xff)+_0x36e6c4[_0x451386(0x12a)]);}catch(_0x4ebcd9){throw new Error(_0x451386(0x103)+_0x451386(0x139)+_0x451386(0xf9)+_0x451386(0x128)+_0x4ebcd9[_0x451386(0x12a)]);}}async[_0x17969d(0x111)+_0x17969d(0x126)+'s'](_0x8d26de){const _0xeae58d=_0x17969d,_0x1323f6={'XMPai':function(_0x53af8a,_0x52fd42){return _0x53af8a===_0x52fd42;},'IGwhZ':'SzdmU','QAsvg':'MlPNA'};try{const _0x5b7d1b=await prisma[_0xeae58d(0x180)+'e'][_0xeae58d(0x138)+'ue']({'where':{'id':_0x8d26de}});if(!_0x5b7d1b){if(_0x1323f6[_0xeae58d(0x137)](_0xeae58d(0x17b),_0x1323f6['IGwhZ']))throw new Error(_0xeae58d(0x150)+'e\x20not\x20fo'+_0xeae58d(0x107));else throw new _0x1b6684(_0xeae58d(0x103)+'o\x20create'+_0xeae58d(0xf9)+_0xeae58d(0x128)+_0x295306[_0xeae58d(0x12a)]);}const _0x46cbec=_0x5b7d1b[_0xeae58d(0x112)];return{'id':_0x5b7d1b['id'],'title':_0x5b7d1b['title'],'contentType':_0x5b7d1b['contentT'+'ype'],'status':_0x5b7d1b[_0xeae58d(0x156)],'wordCount':_0x46cbec?.[_0xeae58d(0x125)+'t']||0x0,'characterCount':_0x46cbec?.[_0xeae58d(0x110)+_0xeae58d(0x120)]||0x0,'lineCount':_0x46cbec?.[_0xeae58d(0x13f)+'t']||0x0,'version':_0x46cbec?.[_0xeae58d(0x108)]||0x1,'exportCount':_0x5b7d1b[_0xeae58d(0xfc)+'unt'],'lastExportedAt':_0x5b7d1b['lastExpo'+_0xeae58d(0x170)],'createdAt':_0x5b7d1b[_0xeae58d(0x10a)+'t'],'updatedAt':_0x5b7d1b['updatedA'+'t']};}catch(_0x3708b7){if(_0x1323f6[_0xeae58d(0x122)]!==_0xeae58d(0x153))throw new _0x474cb5(_0xeae58d(0x103)+_0xeae58d(0x151)+_0xeae58d(0x179)+'\x20'+_0x49adf9[_0xeae58d(0x12a)]);else throw new Error(_0xeae58d(0x103)+'o\x20get\x20wo'+_0xeae58d(0x144)+_0xeae58d(0x152)+_0x3708b7[_0xeae58d(0x12a)]);}}async[_0x17969d(0x105)+'rkspaces'](_0x4fd174,_0x5d0dc4){const _0x4e4f5a=_0x17969d,_0x3ab506={'EPXvd':function(_0x341038,_0x422435){return _0x341038+_0x422435;},'VYtKl':_0x4e4f5a(0x166)+_0x4e4f5a(0x149)};try{const _0x433512=await prisma['orbit'][_0x4e4f5a(0x174)]({'where':{'userId':_0x4fd174},'select':{'id':!![]}}),_0x4db046=_0x433512[_0x4e4f5a(0x127)](_0x59787d=>_0x59787d['id']),_0x15ae9e=await prisma['workspac'+'e'][_0x4e4f5a(0x174)]({'where':{'orbitId':{'in':_0x4db046},'OR':[{'title':{'contains':_0x5d0dc4,'mode':_0x4e4f5a(0x166)+_0x4e4f5a(0x149)}},{'content':{'contains':_0x5d0dc4,'mode':_0x3ab506[_0x4e4f5a(0x14d)]}}]},'orderBy':{'updatedAt':'desc'}});return _0x15ae9e;}catch(_0x38484b){if(_0x4e4f5a(0x17d)!==_0x4e4f5a(0x17d)){const _0xfdc2a6=this[_0x4e4f5a(0x11b)+'ds'](_0x524b2d),_0x339ec0=_0x3ab506[_0x4e4f5a(0x161)](_0x129a14?.['version']||0x1,0x1);_0x442d43={..._0x437c5e,'wordCount':_0xfdc2a6,'lineCount':_0x717aeb[_0x4e4f5a(0xf6)]('\x0a')[_0x4e4f5a(0x147)],'characterCount':_0x2fa0ad[_0x4e4f5a(0x147)],'version':_0x339ec0,'lastModified':new _0x4474fa()[_0x4e4f5a(0x12d)+_0x4e4f5a(0x101)]()};}else throw new Error(_0x4e4f5a(0x103)+_0x4e4f5a(0x155)+_0x4e4f5a(0xf9)+_0x4e4f5a(0x104)+_0x38484b['message']);}}async['getWorks'+_0x17969d(0x17f)+_0x17969d(0x13b)](_0x287f7b,_0xf40a9d){const _0x459344=_0x17969d;try{const _0xd7d235=await prisma['orbit']['findMany']({'where':{'userId':_0x287f7b},'select':{'id':!![]}}),_0x1827f5=_0xd7d235[_0x459344(0x127)](_0x171133=>_0x171133['id']),_0x5d70a3=await prisma[_0x459344(0x180)+'e']['findMany']({'where':{'orbitId':{'in':_0x1827f5},'status':_0xf40a9d},'orderBy':{'updatedAt':_0x459344(0x15f)}});return _0x5d70a3;}catch(_0x18f3cf){throw new Error('Failed\x20t'+_0x459344(0x151)+_0x459344(0x14c)+_0x459344(0x119)+_0x459344(0x160)+_0x18f3cf[_0x459344(0x12a)]);}}async[_0x17969d(0x111)+_0x17969d(0x109)+'ontentTy'+'pe'](_0x40637e,_0x4910a4){const _0x259ceb=_0x17969d,_0x4864d8={'MbgzH':'desc'};try{const _0xebc6f6=await prisma[_0x259ceb(0x13d)][_0x259ceb(0x174)]({'where':{'userId':_0x40637e},'select':{'id':!![]}}),_0x105121=_0xebc6f6['map'](_0x49e3f5=>_0x49e3f5['id']),_0x294004=await prisma[_0x259ceb(0x180)+'e'][_0x259ceb(0x174)]({'where':{'orbitId':{'in':_0x105121},'contentType':_0x4910a4},'orderBy':{'updatedAt':_0x4864d8[_0x259ceb(0x17a)]}});return _0x294004;}catch(_0x1ce181){throw new Error(_0x259ceb(0x103)+_0x259ceb(0x151)+_0x259ceb(0x14c)+_0x259ceb(0x12b)+':\x20'+_0x1ce181['message']);}}[_0x17969d(0x11b)+'ds'](_0x595ce9){const _0x326db2=_0x17969d;if(!_0x595ce9)return 0x0;return _0x595ce9['trim']()[_0x326db2(0xf6)](/\s+/)[_0x326db2(0x124)](_0x35e7af=>_0x35e7af[_0x326db2(0x147)]>0x0)[_0x326db2(0x147)];}async[_0x17969d(0x16d)+'ct'](){const _0x2673c0=_0x17969d;await prisma[_0x2673c0(0xfd)+'ect']();}}exports[_0x17969d(0x150)+_0x17969d(0x163)]=WorkspaceService,exports['workspac'+_0x17969d(0x163)]=new WorkspaceService();