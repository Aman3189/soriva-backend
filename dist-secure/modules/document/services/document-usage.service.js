const _0x1cfc85=_0x3e03;(function(_0x47a29c,_0x4c8f6a){const _0x15677c=_0x3e03,_0x179c08=_0x47a29c();while(!![]){try{const _0x4a5ec0=-parseInt(_0x15677c(0x13f))/0x1*(-parseInt(_0x15677c(0x19b))/0x2)+parseInt(_0x15677c(0x112))/0x3+-parseInt(_0x15677c(0xa7))/0x4+parseInt(_0x15677c(0x136))/0x5+parseInt(_0x15677c(0xab))/0x6*(parseInt(_0x15677c(0xc2))/0x7)+parseInt(_0x15677c(0xf3))/0x8*(parseInt(_0x15677c(0xe6))/0x9)+-parseInt(_0x15677c(0x159))/0xa*(parseInt(_0x15677c(0x14b))/0xb);if(_0x4a5ec0===_0x4c8f6a)break;else _0x179c08['push'](_0x179c08['shift']());}catch(_0x1f675c){_0x179c08['push'](_0x179c08['shift']());}}}(_0x3223,0xe56e9));function _0x3223(){const _0x41927e=['ndiWnNDHsLD4yq','te9xruq','z2vUy2uGAxm','DxbSB2fKzwq','ks4GrgvSzxq','x0XbuKDf','Dg9Rzw5Zvxm','tgXvweG','wMrTwuK','t3bvqwG','DMLJzq','AxnpCgvYyxq','C2v0tw9UDgG','l2rHEsbMB3i','t3bLCMf0Aw8','DhmU','zw5Z','Bg9JywXLq28','l2rHEsKUifq','zeDKAwi','y29UC3rYDwm','Aw1PDhm','BNrZl2fIDxm','mZqWoxrMwM5LBq','y0Xfz1O','BNnqzxjiB3u','t1bfuKfusu8','CM1pCgvYyxq','BwL0ihjLywm','zuzQshi','AgfZugXHBKe','igfKzg9UicG','DxnLCG','tw9UDgG','Be5drNm','CNKGywDHAw4','Bwf4u2L6zu0','reve','z2v0rgfPBhK','BhLszxnLDa','zhbsr0q','DhjHy2TeB2m','CM91BMq','tuLux1jfqum','yLPszuC','A2rVD24','rLjfrq','Aw1PDcbYzwe','C1bLCK1VBNq','zw50ieLUDgu','Aw1PDa','C3bSAxq','DMrlAva','Eu5qDeu','zg9JC1bLCKq','y3jLyxrLzee','tuiU','zMLUzfvUAxe','BgLTAxqGCMu','odCYmJe3s3nKD3zV','Dw5RBM93BG','zxHJzwvKAw4','zgvZyW','igHPz2HLCIa','rLbzzKG','Bwf4u2L6zui','ELrYDhq','C29YDa','D0T0Ewq','C3LUy1DPDgG','Aw9UrNjLzq','qc9JB25ZDge','nJrqzMHPuuS','D2HQs3K','BguU','Dg90ywXuB2S','Dg9Rzw5Z','ywLSEvjLC2u','BIbtDgfYDgu','ufjpq0vtu0K','AhbrC2y','BgLTAxrZlG','iIbYzxf1Axi','B1LIyLK','Bwf4','u3rHDhm','BwL0','Aw1PDgvKig8','B3bLCMf0Aw8','ignVBxbSzxq','z2v0rg9JC1a','Eu5MD1G','z2v0vgLTzq','z2v0rgv0ywK','zwruAgLZtw8','v1HPBeW','z3jVDxbcEq','zM9YBwf0rMK','4Ok5mtq5l21VBG','zgvKicG','x0XjtuLuuW','zg93BMDYywq','ywL0igeGzMu','mZCWntC3mw5VBg9ODq','tuLuuW','BgXPz2vUy2u','DxbNCMfKzvq','rvjst1jFq08','re9dvu1ftLq','zg9JDw1LBNq','DYbVCIb1CgC','z2v0rgf0zq','BIbSAw1PDca','q2X4zvG','vw5RBM93BG','rgf0zq','z2v0t3jdCMu','BwfW','l3bYAxnTyq','ig5VDcbHDMe','x0HbuKrFteK','EfzIuxy','BNnuAgLZtw8','CM9JzxnZzwq','Dg90ywXtDg8','BLn0yxr1CW','zwvKzwq','zxmGrg9JDw0','zMLUze1HBNK','y3vTzw50CYa','ELrdtvC','AxnqywLKvxm','BNqGChjVy2u','zwfJAgvKicG','zsb3ywL0igy','vg9KyxK','DhvZ','seve','ihbHz2vZlca','otaYotCZnw5Yq0XmsW','B1bHAwq','zNjLzu9WC1q','C1rOAxnnB24','vevzCuC','y2fUvxbSB2e','CMfKzsbMB3i','C3nPBMCGDg8','tL9ot1rFquW','mtC4mtu0CePVC2Lk','Dg90ywXpCgu','x0XjtuLux1i','C2vHCMnO','AgLZtw9UDgG','Dg9tDhjPBMC','x19LC01Vzhu','y3vTzw50igW','z2v0ugXHBKW','y2vZC2LUz0m','rgfPBhKGBgK','DxbKyxrL','mteWALfACM9s','igXPBwL0ihi','kYKRja','zxjnB250Aa','ALLTtxK','l2HVDxiPlIa','zM9Yig1VCMu','zc4GugXLyxm','zvrVrNjLzq','DuLjEwW','y3vTzw50lwK','BMnLlNr5Cgu','BgfZDeHVDxi','zsbVBgqGzg8','mJG0nJaZme5cvvjAsa','Aw1PDhntDge','BNnuB2rHEq','lI4VAw50zxi','uMvZzxrZige','zw50CYaO','svrFrvHdruu','BLr5Cgu','Ag91CMX5tgK','uMf0zsbSAw0','vxnHz2vtzxi','Bwf4ugfNzxm','ksbLEgnLzwq','zs1SAw1PDhm','zMfJzxmVzg8','y29ZDfrOAxm','AxqGzxHJzwu','CgfPze9WC1q','D056uMC','zsaO','BgfUvhLWzq','y3LJBgvfBMq','uKHVuLK','CMfNzvvZzwq','AhqU','BNrO','y3jLyxrL','uMvZzxrjzK4','whvvvxy','BMfTzq','y2nLC3m','tw9UDgHSEsa','u1rbuLrfuG','y2XPzw50','y29Uy3vYCMu','vxnHz2u','ksbIzwLUzYa','Bwf4rMLSzvm','rg9JDw1LBNq','ugXLyxnLihC','BwL0ig9Mia','AxPLtui','CgXHBLr5Cgu','zgfRwwG','BgvtAxPL','CNjLBNrqyxi','ihbHz2vZlG','igzVCIb1BMW','BNqGzg9JDw0','zNPPDxy','z2v0vxnLCLa','uKfurv9msu0','ieLUDgvSBgK','qvbfwa','z2v0tMv4Deq','B3jLihn0B3i','revt','ywnOzwqGka','BMv4DcbIAwW','BgvKvxnHz2u','zerVy3vTzw4','yufWseC','sgT5u3C','DhjHy2TpCgu','CIbOAwDOzxi','DYbTAw51Dgu','ohLyuvjguq','igHHCYa','Aw9UqwXSB3C','Dg9ju09tDhi','z2v0vxnHz2u','EfPnvMy','uefjra','ywXkCLC','Dg9Y','uhLsAMG','y29ZDa','tL9nrvrbree','y291BNq','C3rVCMfNzuW','B3iGDxbNCMe','CNjLBNrqCM8','BgvUz3rO','AwXHyMXLig8','B3bLCNr5','BYbqBhvZig8','y2fUugvYzM8','zguGzM9Yig0','ihbSyw4PlIa','wK1Nzuu','ChjPC21H','DhzWqwG','ihrVBw9YCM8','Dw1LBNrvCgW','tMLiAg8','z2v0q29Uy3u','DgGPlG','BNnqzxjeyxK','DxbZzxj0','CgDYywrLihq','ywL0igzVCIa','refjtfLFteK','CMvHy2HLzca','yxbWBhK','ywDLlG','BNnuAgLZsg8','ugXLyxnLihu','zgvMyxvSDa','CIbWBgfUlIa','Eg9zDvK','DMvyy1y','tL9msu1jvf8','kcGOlISPkYK','vxbNCMfKzsa','Aw9U','rMLSzsbZAxO','CMf0Aw9UC1a','u1rpuKfhrv8','sxr6Cwy','yxrLvxnHz2u','tuTyugm','B3iGy3vYCMu','zgf0zq','u1vdq0vtuW','Aw5N','l21VBNrOks4','yxnZAwDU','ugXHBLr5Cgu','B2fK','zfrduK0','BxbHCMu','rufdseve','CK1VqKG','twf4Aw11Bsa','CMfNzuXPBwK','y2HLy2TbBMq','zxbStfG','C2v0rgf0zq','B3vUDa','x2nVDw50','BgLUzYbJEwm','ndmZodKXmKfhvMLtsW','ihbSyw4GBgK','z2v0tw9UDgG','thPhuKe'];_0x3223=function(){return _0x41927e;};return _0x3223();}const _0x508535=(function(){const _0x51656c=_0x3e03,_0x1c22f8={'WMfDZ':_0x51656c(0x18a)};let _0x146d6c=!![];return function(_0x193380,_0x13f783){const _0x4cc5f5=_0x146d6c?function(){const _0x5e5f7b=_0x3e03;if(_0x5e5f7b(0xed)!==_0x1c22f8['WMfDZ']){if(_0x13f783){const res=_0x13f783['apply'](_0x193380,arguments);return _0x13f783=null,res;}}else return{'canProceed':![],'errorCode':_0x1b587f[_0x5e5f7b(0x116)+_0x5e5f7b(0x191)][_0x5e5f7b(0x1be)+'MIT_REAC'+_0x5e5f7b(0x134)],'errorMessage':_0x5e5f7b(0x149)+_0x5e5f7b(0xc7)+'hed\x20('+_0x4af347['operatio'+_0x5e5f7b(0x1ba)]+(_0x5e5f7b(0xbd)+_0x5e5f7b(0xce)+_0x5e5f7b(0x1b5)+_0x5e5f7b(0x119)+_0x5e5f7b(0x13c)+_0x5e5f7b(0xea)+_0x5e5f7b(0xfc)),'upgradeRequired':!_0x2873bc[_0x5e5f7b(0x12e)+'er']};}:function(){};return _0x146d6c=![],_0x4cc5f5;};}()),_0x5e49b3=_0x508535(this,function(){const _0x33a25c=_0x3e03,_0x3469e9={'RjHap':_0x33a25c(0x1c9)+_0x33a25c(0x14d)};return _0x5e49b3['toString']()[_0x33a25c(0x142)]('(((.+)+)'+'+)+$')[_0x33a25c(0x144)]()[_0x33a25c(0xbf)+_0x33a25c(0x1a3)](_0x5e49b3)['search'](_0x3469e9['RjHap']);});_0x5e49b3();'use strict';function _0x3e03(_0x506bba,_0x40fd2c){_0x506bba=_0x506bba-0xa1;const _0x8afc07=_0x3223();let _0x5e49b3=_0x8afc07[_0x506bba];if(_0x3e03['cHZxCj']===undefined){var _0x508535=function(_0x511a38){const _0x3bc866='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x183698='',_0x212b0c='',_0x1dca5e=_0x183698+_0x508535;for(let _0x768cbf=0x0,_0x3e9e98,_0x2abfb7,_0x385ce0=0x0;_0x2abfb7=_0x511a38['charAt'](_0x385ce0++);~_0x2abfb7&&(_0x3e9e98=_0x768cbf%0x4?_0x3e9e98*0x40+_0x2abfb7:_0x2abfb7,_0x768cbf++%0x4)?_0x183698+=_0x1dca5e['charCodeAt'](_0x385ce0+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3e9e98>>(-0x2*_0x768cbf&0x6)):_0x768cbf:0x0){_0x2abfb7=_0x3bc866['indexOf'](_0x2abfb7);}for(let _0x1d9a05=0x0,_0x2d2bf0=_0x183698['length'];_0x1d9a05<_0x2d2bf0;_0x1d9a05++){_0x212b0c+='%'+('00'+_0x183698['charCodeAt'](_0x1d9a05)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x212b0c);};_0x3e03['YgQfOJ']=_0x508535,_0x3e03['nRIlOg']={},_0x3e03['cHZxCj']=!![];}const _0x32235a=_0x8afc07[0x0],_0x3e0312=_0x506bba+_0x32235a,_0x151e12=_0x3e03['nRIlOg'][_0x3e0312];if(!_0x151e12){const _0x350203=function(_0x2eee06){this['FKsVGf']=_0x2eee06,this['mgqzHW']=[0x1,0x0,0x0],this['sncfwG']=function(){return'newState';},this['vdeXoZ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ApZdol']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x350203['prototype']['InqOXw']=function(){const _0xf7b2ea=new RegExp(this['vdeXoZ']+this['ApZdol']),_0x5aa086=_0xf7b2ea['test'](this['sncfwG']['toString']())?--this['mgqzHW'][0x1]:--this['mgqzHW'][0x0];return this['dxIVae'](_0x5aa086);},_0x350203['prototype']['dxIVae']=function(_0x1f6198){if(!Boolean(~_0x1f6198))return _0x1f6198;return this['bjkfcg'](this['FKsVGf']);},_0x350203['prototype']['bjkfcg']=function(_0x23ae8b){for(let _0x1285bc=0x0,_0x4c27ba=this['mgqzHW']['length'];_0x1285bc<_0x4c27ba;_0x1285bc++){this['mgqzHW']['push'](Math['round'](Math['random']())),_0x4c27ba=this['mgqzHW']['length'];}return _0x23ae8b(this['mgqzHW'][0x0]);},new _0x350203(_0x3e03)['InqOXw'](),_0x5e49b3=_0x3e03['YgQfOJ'](_0x5e49b3),_0x3e03['nRIlOg'][_0x3e0312]=_0x5e49b3;}else _0x5e49b3=_0x151e12;return _0x5e49b3;}Object['definePr'+_0x1cfc85(0x1ad)](exports,_0x1cfc85(0x145)+'le',{'value':!![]}),exports[_0x1cfc85(0x17f)+_0x1cfc85(0x163)+_0x1cfc85(0xb5)]=void 0x0;const prisma_1=require('@/config'+_0x1cfc85(0x121)),client_1=require('@prisma/'+_0x1cfc85(0x17a)),document_intelligence_types_1=require(_0x1cfc85(0x15c)+_0x1cfc85(0x167)+_0x1cfc85(0x155)+'ntellige'+_0x1cfc85(0x156)+'s'),documentLimits_1=require(_0x1cfc85(0xf2)+'nts/docu'+'mentLimi'+'ts'),abuse_limits_1=require(_0x1cfc85(0xf2)+_0x1cfc85(0xc1)+_0x1cfc85(0x166));class DocumentUsageService{async[_0x1cfc85(0x18b)+'lanType'](_0x37a099){const _0x4c6c31=_0x1cfc85,_0x292d59=await prisma_1[_0x4c6c31(0x1b3)][_0x4c6c31(0xcb)][_0x4c6c31(0xe4)+'ue']({'where':{'id':_0x37a099},'select':{'planType':!![]}});return _0x292d59?.[_0x4c6c31(0x183)]||client_1[_0x4c6c31(0x1d8)]['STARTER'];}[_0x1cfc85(0x147)+_0x1cfc85(0xc0)](_0x4f78a4){const _0xddb05d=_0x1cfc85,_0x455af0={'OpUAh':_0xddb05d(0x17f)+_0xddb05d(0x18d)+'gence\x20is'+_0xddb05d(0x122)+_0xddb05d(0x1ac)+_0xddb05d(0xf9)+_0xddb05d(0x1c5)+_0xddb05d(0x1c3)+_0xddb05d(0x1bc)+_0xddb05d(0x1ae)+_0xddb05d(0x199)+'.','hpQsf':function(_0x442d18,_0x2a636a){return _0x442d18!==_0x2a636a;},'SCUDA':_0xddb05d(0x1b7),'POsip':_0xddb05d(0x16f),'cLEgZ':function(_0x4fed8c,_0x5b27b2){return _0x4fed8c*_0x5b27b2;}},_0x3644a4=abuse_limits_1[_0xddb05d(0x117)+_0xddb05d(0x123)+_0xddb05d(0x113)][_0x4f78a4];if(!_0x3644a4)return _0x455af0[_0xddb05d(0xfb)](_0x455af0['SCUDA'],_0x455af0['POsip'])?{'docsPerDay':0x0,'maxPages':0x0,'maxSizeMB':0x0,'maxSizeBytes':0x0,'concurrent':0x0}:{'canProceed':![],'errorCode':_0x5cc6cd[_0xddb05d(0x116)+_0xddb05d(0x191)][_0xddb05d(0xc5)+_0xddb05d(0x13e)+_0xddb05d(0xac)],'errorMessage':_0x455af0[_0xddb05d(0xb4)],'upgradeRequired':!![]};return{'docsPerDay':_0x3644a4[_0xddb05d(0xe1)+'ay'],'maxPages':_0x3644a4['maxPages'+'PerDoc'],'maxSizeMB':_0x3644a4[_0xddb05d(0x17e)+_0xddb05d(0x182)],'maxSizeBytes':_0x455af0[_0xddb05d(0xc3)](_0x3644a4[_0xddb05d(0x17e)+_0xddb05d(0x182)],0x400)*0x400,'concurrent':_0x3644a4['maxConcu'+_0xddb05d(0x186)+'sing']};}['hasPlanA'+'ccess'](_0x2d5b68){const _0x578dff=_0x1cfc85;return _0x2d5b68!==client_1[_0x578dff(0x1d8)][_0x578dff(0x179)];}async[_0x1cfc85(0x105)+_0x1cfc85(0x126)+_0x1cfc85(0x132)](_0xcdb931){const _0x11f274=_0x1cfc85,_0xe771c8=new Date();_0xe771c8['setHours'](0x0,0x0,0x0,0x0);const _0x5c4060=await prisma_1[_0x11f274(0x1b3)]['document'+_0x11f274(0xb9)+'n'][_0x11f274(0x1a7)]({'where':{'userId':_0xcdb931,'createdAt':{'gte':_0xe771c8},'status':{'in':[client_1[_0x11f274(0xb9)+_0x11f274(0x128)][_0x11f274(0x1d4)],client_1[_0x11f274(0xb9)+'nStatus'][_0x11f274(0xfa)+'NG']]}}});return _0x5c4060;}async['getConcu'+_0x1cfc85(0x1aa)+_0x1cfc85(0x148)+_0x1cfc85(0xa4)](_0xdaac0){const _0x26bcd9=_0x1cfc85,_0x4b0f1a=await prisma_1['prisma'][_0x26bcd9(0x118)+_0x26bcd9(0xb9)+'n'][_0x26bcd9(0x1a7)]({'where':{'userId':_0xdaac0,'status':client_1['Operatio'+_0x26bcd9(0x128)][_0x26bcd9(0xfa)+'NG']}});return _0x4b0f1a;}async[_0x1cfc85(0x11f)+_0x1cfc85(0x1d0)](_0x16faeb){const _0x520b93=_0x1cfc85,_0x29f52a={'YGMgK':function(_0x2c19b5,_0x59fdb1){return _0x2c19b5+_0x59fdb1;},'rMoBH':function(_0x47da5b,_0x3d393d){return _0x47da5b(_0x3d393d);}};let _0x2eec8e=await prisma_1[_0x520b93(0x1b3)][_0x520b93(0x118)+_0x520b93(0x17c)][_0x520b93(0xe4)+'ue']({'where':{'userId':_0x16faeb}});if(!_0x2eec8e){const _0x30681b=new Date(),_0x581381=new Date(_0x30681b);_0x581381[_0x520b93(0xb7)](_0x29f52a['YGMgK'](_0x581381[_0x520b93(0xa9)](),0x1));const _0x87ebdd=await this[_0x520b93(0x18b)+_0x520b93(0x16d)](_0x16faeb),_0x3f1bb2=this['getPlanL'+_0x520b93(0xc0)](_0x87ebdd),_0x287026=this['hasPlanA'+_0x520b93(0x177)](_0x87ebdd);_0x2eec8e=await prisma_1[_0x520b93(0x1b3)]['document'+_0x520b93(0x17c)][_0x520b93(0x173)]({'data':{'userId':_0x16faeb,'documentsThisMonth':0x0,'operationsThisMonth':0x0,'tokensUsedThisMonth':0x0,'costThisMonth':0x0,'freeOpsThisMonth':0x0,'paidOpsThisMonth':0x0,'documentLimit':_0x287026?documentLimits_1[_0x520b93(0x117)+_0x520b93(0x10f)][_0x520b93(0x1a1)]['document'+_0x520b93(0xdb)+'h']:documentLimits_1[_0x520b93(0x117)+_0x520b93(0x10f)][_0x520b93(0xd9)][_0x520b93(0x118)+_0x520b93(0xdb)+'h'],'operationLimit':_0x287026?documentLimits_1[_0x520b93(0x117)+_0x520b93(0x10f)][_0x520b93(0x1a1)]['totalOpe'+'rationsP'+'erMonth']:documentLimits_1[_0x520b93(0x117)+_0x520b93(0x10f)][_0x520b93(0xd9)]['totalOpe'+_0x520b93(0x1cd)+_0x520b93(0x14e)],'isPaidUser':_0x287026,'totalStorageUsed':_0x29f52a[_0x520b93(0x1dd)](BigInt,0x0),'storageLimit':_0x29f52a[_0x520b93(0x1dd)](BigInt,_0x287026?documentLimits_1['DOCUMENT'+_0x520b93(0x10f)][_0x520b93(0x1a1)][_0x520b93(0x127)+'rageLimi'+'t']:documentLimits_1['DOCUMENT'+_0x520b93(0x10f)][_0x520b93(0xd9)][_0x520b93(0x127)+_0x520b93(0x1df)+'t']),'lastMonthlyReset':_0x30681b,'cycleStartDate':_0x30681b,'cycleEndDate':_0x581381,'operationsThisHour':0x0,'lastHourlyReset':_0x30681b,'hourlyLimit':_0x287026?documentLimits_1['DOCUMENT'+_0x520b93(0x10f)][_0x520b93(0x1a1)]['operatio'+_0x520b93(0xc4)+'r']:documentLimits_1[_0x520b93(0x117)+_0x520b93(0x10f)][_0x520b93(0xd9)][_0x520b93(0x103)+_0x520b93(0xc4)+'r'],'operationsToday':0x0,'lastDailyReset':_0x30681b}});}return _0x2eec8e;}async[_0x1cfc85(0xa1)+_0x1cfc85(0x174)+_0x1cfc85(0x129)](_0x358c1d){const _0x582f40=_0x1cfc85,_0x570e9c={'wKtyd':function(_0x56767b,_0x6a1662){return _0x56767b>_0x6a1662;},'FPYfH':function(_0x572d47,_0x3d4d8d){return _0x572d47/_0x3d4d8d;},'Itzqf':function(_0xcc13c8,_0x5aa486){return _0xcc13c8*_0x5aa486;},'yNPtE':function(_0x2716f8,_0x4efbd1){return _0x2716f8>=_0x4efbd1;}},_0x11452e=await this[_0x582f40(0x11f)+_0x582f40(0x1d0)](_0x358c1d),_0x4e742e=new Date(),_0x48953a={};if(_0x570e9c[_0x582f40(0xef)](_0x4e742e,_0x11452e[_0x582f40(0x16e)+_0x582f40(0x11e)])){const _0x29ebe3=new Date(_0x4e742e);_0x29ebe3[_0x582f40(0xb7)](_0x29ebe3['getMonth']()+0x1),Object[_0x582f40(0x1d7)](_0x48953a,{'documentsThisMonth':0x0,'operationsThisMonth':0x0,'tokensUsedThisMonth':0x0,'costThisMonth':0x0,'freeOpsThisMonth':0x0,'paidOpsThisMonth':0x0,'lastMonthlyReset':_0x4e742e,'cycleStartDate':_0x4e742e,'cycleEndDate':_0x29ebe3});}const _0x19ab94=_0x570e9c[_0x582f40(0xeb)](_0x4e742e[_0x582f40(0x107)]()-_0x11452e['lastDail'+'yReset'][_0x582f40(0x107)](),_0x570e9c[_0x582f40(0x1cf)](0x3e8,0x3c)*0x3c);_0x570e9c['yNPtE'](_0x19ab94,0x18)&&Object['assign'](_0x48953a,{'operationsToday':0x0,'lastDailyReset':_0x4e742e});const _0x3f32a9=(_0x4e742e[_0x582f40(0x107)]()-_0x11452e[_0x582f40(0x157)+_0x582f40(0xd2)][_0x582f40(0x107)]())/_0x570e9c[_0x582f40(0x1cf)](0x3e8*0x3c,0x3c);return _0x570e9c[_0x582f40(0xe0)](_0x3f32a9,0x1)&&Object[_0x582f40(0x1d7)](_0x48953a,{'operationsThisHour':0x0,'lastHourlyReset':_0x4e742e}),Object['keys'](_0x48953a)[_0x582f40(0x1ab)]>0x0&&await prisma_1[_0x582f40(0x1b3)][_0x582f40(0x118)+_0x582f40(0x17c)][_0x582f40(0x14a)]({'where':{'userId':_0x358c1d},'data':_0x48953a}),this[_0x582f40(0x11f)+'ateUsage'](_0x358c1d);}async[_0x1cfc85(0x13b)+_0x1cfc85(0x195)+'t'](_0x3eec3e,_0x41f60d,_0x23fa6b){const _0x4f54e0=_0x1cfc85,_0x1b23b9={'lApue':function(_0x4a3e06,_0x5bb4a7){return _0x4a3e06>=_0x5bb4a7;},'XuUUv':_0x4f54e0(0x11c),'uIIyl':function(_0xa2b324,_0x2c5b0d){return _0xa2b324>_0x2c5b0d;},'dpRGD':_0x4f54e0(0xa2),'HkySw':function(_0x6cffd1,_0x288a86){return _0x6cffd1(_0x288a86);}},_0x12ebca=await this[_0x4f54e0(0x18b)+_0x4f54e0(0x16d)](_0x3eec3e),_0x318424=this[_0x4f54e0(0x147)+_0x4f54e0(0xc0)](_0x12ebca);if(!this[_0x4f54e0(0xc9)+'ccess'](_0x12ebca))return{'canProceed':![],'errorCode':document_intelligence_types_1[_0x4f54e0(0x116)+_0x4f54e0(0x191)][_0x4f54e0(0xc5)+_0x4f54e0(0x13e)+_0x4f54e0(0xac)],'errorMessage':_0x4f54e0(0x17f)+'\x20Intelli'+'gence\x20is'+_0x4f54e0(0x122)+_0x4f54e0(0x1ac)+_0x4f54e0(0xf9)+_0x4f54e0(0x1c5)+_0x4f54e0(0x1c3)+'pgrade\x20t'+_0x4f54e0(0x1ae)+_0x4f54e0(0x199)+'.','upgradeRequired':!![]};const _0x10a4e8=await this[_0x4f54e0(0x105)+_0x4f54e0(0x126)+_0x4f54e0(0x132)](_0x3eec3e);if(_0x1b23b9['lApue'](_0x10a4e8,_0x318424[_0x4f54e0(0xe1)+'ay']))return _0x1b23b9[_0x4f54e0(0x175)]===_0x1b23b9[_0x4f54e0(0x175)]?{'canProceed':![],'errorCode':document_intelligence_types_1[_0x4f54e0(0x116)+_0x4f54e0(0x191)][_0x4f54e0(0x1be)+'MIT_REAC'+_0x4f54e0(0x134)],'errorMessage':'Daily\x20do'+_0x4f54e0(0x146)+_0x4f54e0(0xda)+'ched\x20('+_0x318424[_0x4f54e0(0xe1)+'ay']+(_0x4f54e0(0xb8)+'\x20')+_0x12ebca+(_0x4f54e0(0x1b1)+_0x4f54e0(0x15d)+'t\x20midnig'+_0x4f54e0(0x171)),'upgradeRequired':_0x12ebca!==client_1[_0x4f54e0(0x1d8)][_0x4f54e0(0x18e)]}:_0x62e8ab!==_0xe9ac97[_0x4f54e0(0x1d8)][_0x4f54e0(0x179)];if(_0x1b23b9['uIIyl'](_0x41f60d,_0x318424[_0x4f54e0(0xec)+'ytes']))return{'canProceed':![],'errorCode':document_intelligence_types_1[_0x4f54e0(0x116)+_0x4f54e0(0x191)]['FILE_TOO'+_0x4f54e0(0xb0)],'errorMessage':_0x4f54e0(0x1cc)+'e\x20('+(0x0,documentLimits_1[_0x4f54e0(0x10c)+'leSize'])(_0x41f60d)+(')\x20exceed'+'s\x20')+_0x12ebca+(_0x4f54e0(0xa8)+_0x4f54e0(0x181))+_0x318424['maxSizeM'+'B']+_0x4f54e0(0xe3),'upgradeRequired':_0x12ebca!==client_1['PlanType']['APEX']};if(_0x23fa6b&&_0x23fa6b>_0x318424[_0x4f54e0(0x164)])return{'canProceed':![],'errorCode':document_intelligence_types_1[_0x4f54e0(0x116)+'DES']['FILE_TOO'+_0x4f54e0(0xb0)],'errorMessage':_0x4f54e0(0x17f)+_0x4f54e0(0x19c)+_0x23fa6b+(_0x4f54e0(0x135)+_0x4f54e0(0xe8)+'g\x20')+_0x12ebca+(_0x4f54e0(0xa8)+_0x4f54e0(0x181))+_0x318424[_0x4f54e0(0x164)]+_0x4f54e0(0x187),'upgradeRequired':_0x12ebca!==client_1[_0x4f54e0(0x1d8)][_0x4f54e0(0x18e)]};const _0xf6b48f=await this[_0x4f54e0(0x1b8)+'rrentPro'+_0x4f54e0(0x148)+'ount'](_0x3eec3e);if(_0xf6b48f>=_0x318424[_0x4f54e0(0x17b)+'nt']){if(_0x4f54e0(0x1b2)!==_0x1b23b9[_0x4f54e0(0xd3)])return{'canProceed':![],'errorCode':document_intelligence_types_1[_0x4f54e0(0x116)+_0x4f54e0(0x191)][_0x4f54e0(0x18c)+_0x4f54e0(0x15f)+_0x4f54e0(0xd0)],'errorMessage':_0x4f54e0(0x1de)+_0x4f54e0(0x17b)+_0x4f54e0(0x189)+_0x4f54e0(0x15e)+_0x318424[_0x4f54e0(0x17b)+'nt']+(_0x4f54e0(0x17d)+'processe'+_0x4f54e0(0x152)+_0x4f54e0(0x131)+_0x4f54e0(0x1d2)+_0x4f54e0(0x12f)+_0x4f54e0(0x13d)+_0x4f54e0(0x104)+'e.'),'upgradeRequired':![]};else{const _0x516df7=_0x44ca93['OPERATIO'+_0x4f54e0(0x1a6)+'TA'][_0x49dc32];return{'canProceed':![],'errorCode':_0x169644[_0x4f54e0(0x116)+'DES'][_0x4f54e0(0xc5)+_0x4f54e0(0x13e)+_0x4f54e0(0xac)],'errorMessage':'\x22'+(_0x516df7?.['name']||_0x27b95b)+(_0x4f54e0(0xfd)+_0x4f54e0(0x12a)+_0x4f54e0(0xdc)+_0x4f54e0(0x114)+_0x4f54e0(0xca)+_0x4f54e0(0x10d)+_0x4f54e0(0x1b9)),'upgradeRequired':!![]};}}const _0x217fdb=await this[_0x4f54e0(0xa1)+_0x4f54e0(0x174)+_0x4f54e0(0x129)](_0x3eec3e),_0x52c093=_0x217fdb['isPaidUs'+'er']?documentLimits_1[_0x4f54e0(0x117)+'_LIMITS'][_0x4f54e0(0x1a1)]:documentLimits_1[_0x4f54e0(0x117)+_0x4f54e0(0x10f)][_0x4f54e0(0xd9)];if(_0x217fdb[_0x4f54e0(0x118)+_0x4f54e0(0x139)+'th']>=_0x52c093['document'+_0x4f54e0(0xdb)+'h'])return{'canProceed':![],'errorCode':document_intelligence_types_1[_0x4f54e0(0x116)+'DES'][_0x4f54e0(0x117)+_0x4f54e0(0x141)+_0x4f54e0(0x1dc)],'errorMessage':_0x4f54e0(0x178)+_0x4f54e0(0x118)+_0x4f54e0(0x14c)+_0x4f54e0(0x130)+_0x52c093[_0x4f54e0(0x118)+_0x4f54e0(0xdb)+'h']+(_0x4f54e0(0x1d6)+'\x20')+(_0x217fdb[_0x4f54e0(0x12e)+'er']?_0x4f54e0(0x180)+_0x4f54e0(0x1bd)+_0x4f54e0(0x193)+_0x4f54e0(0xa6)+_0x4f54e0(0xf5):_0x4f54e0(0x1ca)+_0x4f54e0(0x151)+'\x20documen'+_0x4f54e0(0xba)),'upgradeRequired':!_0x217fdb[_0x4f54e0(0x12e)+'er']};const _0xdac5a9=Number(_0x217fdb[_0x4f54e0(0x127)+'rageUsed']),_0x1e865e=_0x1b23b9[_0x4f54e0(0x197)](Number,_0x217fdb[_0x4f54e0(0x1a8)+_0x4f54e0(0xdd)]);if(_0x1b23b9[_0x4f54e0(0x154)](_0xdac5a9+_0x41f60d,_0x1e865e))return{'canProceed':![],'errorCode':document_intelligence_types_1['ERROR_CO'+_0x4f54e0(0x191)][_0x4f54e0(0x1ce)+'LIMIT_RE'+'ACHED'],'errorMessage':'Storage\x20'+_0x4f54e0(0xe5)+_0x4f54e0(0x192)+(0x0,documentLimits_1['formatFi'+_0x4f54e0(0x185)])(_0x1e865e)+(_0x4f54e0(0xaf)+_0x4f54e0(0x158)+_0x4f54e0(0x12c)+_0x4f54e0(0x1a9)+_0x4f54e0(0x1b0)+_0x4f54e0(0x190)+_0x4f54e0(0x1c1)),'upgradeRequired':!_0x217fdb[_0x4f54e0(0x12e)+'er']};return{'canProceed':!![]};}async[_0x1cfc85(0x1af)+_0x1cfc85(0xc6)+_0x1cfc85(0x1cb)](_0x44e1dc,_0x319efc){const _0x381601=_0x1cfc85,_0x462c54={'dGdib':function(_0x2859aa,_0x18071a){return _0x2859aa(_0x18071a);},'LlUXH':function(_0x290be2,_0x1e3a04){return _0x290be2*_0x1e3a04;},'xoYuY':function(_0x457cd2,_0x221f0d){return _0x457cd2!==_0x221f0d;},'alJrW':_0x381601(0x1b4),'zTCMW':function(_0x232636,_0x31ed5f){return _0x232636>=_0x31ed5f;},'aApHG':_0x381601(0x16b)},_0x56fd56=await this[_0x381601(0x18b)+_0x381601(0x16d)](_0x44e1dc);if(!this['hasPlanA'+_0x381601(0x177)](_0x56fd56))return{'canProceed':![],'errorCode':document_intelligence_types_1['ERROR_CO'+_0x381601(0x191)][_0x381601(0xc5)+_0x381601(0x13e)+_0x381601(0xac)],'errorMessage':_0x381601(0x17f)+'\x20Intelli'+_0x381601(0xad)+_0x381601(0x122)+_0x381601(0x1ac)+_0x381601(0xf9)+_0x381601(0x1c5)+_0x381601(0x1c3)+_0x381601(0x1bc)+_0x381601(0x1ae)+_0x381601(0x199)+'.','upgradeRequired':!![]};const _0x1e247a=await this[_0x381601(0xa1)+_0x381601(0x174)+_0x381601(0x129)](_0x44e1dc),_0x2225aa=_0x1e247a[_0x381601(0x12e)+'er']?documentLimits_1[_0x381601(0x117)+_0x381601(0x10f)][_0x381601(0x1a1)]:documentLimits_1[_0x381601(0x117)+_0x381601(0x10f)]['FREE'];if(!(0x0,documentLimits_1[_0x381601(0xb6)+_0x381601(0x19d)+'ed'])(_0x319efc,_0x1e247a[_0x381601(0x12e)+'er'])){if(_0x462c54[_0x381601(0x1c6)](_0x462c54[_0x381601(0x1a2)],_0x381601(0x1b4))){const _0x25c8cd=_0x18a677[_0x381601(0x117)+_0x381601(0x10f)][_0x381601(0xd9)];return prisma_1[_0x381601(0x1b3)][_0x381601(0x118)+'Usage']['update']({'where':{'userId':_0x3c9517},'data':{'isPaidUser':![],'documentLimit':_0x25c8cd[_0x381601(0x118)+'sPerMont'+'h'],'operationLimit':_0x25c8cd[_0x381601(0x140)+_0x381601(0x1cd)+'erMonth'],'storageLimit':_0x462c54[_0x381601(0xbe)](_0x2e29fc,_0x25c8cd[_0x381601(0x127)+_0x381601(0x1df)+'t']),'hourlyLimit':_0x25c8cd[_0x381601(0x103)+_0x381601(0xc4)+'r']}});}else{const _0x498eb3=documentLimits_1[_0x381601(0xc5)+_0x381601(0x1a6)+'TA'][_0x319efc];return{'canProceed':![],'errorCode':document_intelligence_types_1['ERROR_CO'+_0x381601(0x191)][_0x381601(0xc5)+_0x381601(0x13e)+_0x381601(0xac)],'errorMessage':'\x22'+(_0x498eb3?.[_0x381601(0x176)]||_0x319efc)+(_0x381601(0xfd)+_0x381601(0x12a)+_0x381601(0xdc)+_0x381601(0x114)+'\x20addon\x20('+_0x381601(0x10d)+_0x381601(0x1b9)),'upgradeRequired':!![]};}}if(_0x2225aa[_0x381601(0x140)+_0x381601(0x1cd)+_0x381601(0x14e)]!==-0x1){if(_0x462c54[_0x381601(0x12d)](_0x1e247a['operatio'+_0x381601(0x125)+_0x381601(0x172)],_0x2225aa[_0x381601(0x140)+_0x381601(0x1cd)+_0x381601(0x14e)]))return{'canProceed':![],'errorCode':document_intelligence_types_1[_0x381601(0x116)+'DES']['OPERATIO'+_0x381601(0x1c8)+'REACHED'],'errorMessage':_0x381601(0x178)+'operatio'+_0x381601(0x11b)+_0x381601(0x1bf)+'('+_0x2225aa['totalOpe'+'rationsP'+_0x381601(0x14e)]+(_0x381601(0x1d6)+'\x20Upgrade'+_0x381601(0x188)+_0x381601(0x102)+'peration'+'s.'),'upgradeRequired':!_0x1e247a['isPaidUs'+'er']};}if(_0x1e247a['operatio'+_0x381601(0x15b)]>=_0x2225aa[_0x381601(0x103)+_0x381601(0x1ba)]){if(_0x462c54[_0x381601(0x196)]==='ecSll'){const _0x29d297=_0x2b6a26[_0x381601(0x117)+_0x381601(0x10f)][_0x381601(0x1a1)];return prisma_1[_0x381601(0x1b3)]['document'+_0x381601(0x17c)]['upsert']({'where':{'userId':_0x53fd56},'update':{'isPaidUser':!![],'documentLimit':_0x29d297[_0x381601(0x118)+'sPerMont'+'h'],'operationLimit':_0x29d297[_0x381601(0x140)+_0x381601(0x1cd)+'erMonth'],'storageLimit':_0x462c54[_0x381601(0xbe)](_0x3cd174,_0x29d297[_0x381601(0x127)+_0x381601(0x1df)+'t']),'hourlyLimit':_0x29d297[_0x381601(0x103)+'nsPerHou'+'r']},'create':{'userId':_0x30174d,'isPaidUser':!![],'documentLimit':_0x29d297['document'+_0x381601(0xdb)+'h'],'operationLimit':_0x29d297['totalOpe'+_0x381601(0x1cd)+'erMonth'],'storageLimit':_0x9292d2(_0x29d297['totalSto'+_0x381601(0x1df)+'t']),'hourlyLimit':_0x29d297['operatio'+_0x381601(0xc4)+'r'],'documentsThisMonth':0x0,'operationsThisMonth':0x0,'tokensUsedThisMonth':0x0,'costThisMonth':0x0,'freeOpsThisMonth':0x0,'paidOpsThisMonth':0x0,'totalStorageUsed':_0x462c54[_0x381601(0xbe)](_0x74c280,0x0),'lastMonthlyReset':new _0x593eef(),'cycleStartDate':new _0x33ff41(),'cycleEndDate':new _0x9214c4(_0x260b06['now']()+_0x462c54[_0x381601(0xb2)](0x1e*0x18,0x3c)*0x3c*0x3e8),'operationsThisHour':0x0,'lastHourlyReset':new _0x1529e0(),'operationsToday':0x0,'lastDailyReset':new _0x191e94()}});}else return{'canProceed':![],'errorCode':document_intelligence_types_1['ERROR_CO'+_0x381601(0x191)]['DAILY_LI'+_0x381601(0xd6)+'HED'],'errorMessage':'Daily\x20li'+'mit\x20reac'+'hed\x20('+_0x2225aa[_0x381601(0x103)+'nsPerDay']+(_0x381601(0xbd)+'ry\x20again'+_0x381601(0x1b5)+'w\x20or\x20upg'+_0x381601(0x13c)+_0x381601(0xea)+'limits.'),'upgradeRequired':!_0x1e247a[_0x381601(0x12e)+'er']};}if(_0x462c54[_0x381601(0x12d)](_0x1e247a[_0x381601(0x103)+_0x381601(0x1c2)+'ur'],_0x1e247a[_0x381601(0x161)+_0x381601(0x101)]))return{'canProceed':![],'errorCode':document_intelligence_types_1[_0x381601(0x116)+_0x381601(0x191)][_0x381601(0x18c)+_0x381601(0x15f)+_0x381601(0xd0)],'errorMessage':_0x381601(0x162)+_0x381601(0x169)+_0x381601(0x10e)+_0x1e247a[_0x381601(0x161)+_0x381601(0x101)]+(_0x381601(0x150)+_0x381601(0x180)+_0x381601(0x111)+_0x381601(0x19a)+'s.'),'upgradeRequired':![]};return{'canProceed':!![]};}async[_0x1cfc85(0x147)+_0x1cfc85(0x15a)+_0x1cfc85(0x133)](_0x5dc4be){const _0x2a68ef=_0x1cfc85,_0x37bca8={'kdMXE':function(_0x1b92e1,_0x237636){return _0x1b92e1!==_0x237636;},'WAXEW':'JqRiJ','jYmMy':_0x2a68ef(0x17f)+'\x20Intelli'+_0x2a68ef(0xad)+_0x2a68ef(0x122)+_0x2a68ef(0x1ac)+_0x2a68ef(0xf9)+_0x2a68ef(0x1c5)+_0x2a68ef(0x1c3)+_0x2a68ef(0x1bc)+_0x2a68ef(0x1ae)+_0x2a68ef(0x199)+'.'},_0x1afe58=await this[_0x2a68ef(0x18b)+_0x2a68ef(0x16d)](_0x5dc4be),_0x165a89=this[_0x2a68ef(0x147)+_0x2a68ef(0xc0)](_0x1afe58),_0x3d5249=this[_0x2a68ef(0xc9)+_0x2a68ef(0x177)](_0x1afe58);if(!_0x3d5249){if(_0x37bca8['kdMXE']('vTzHJ',_0x37bca8['WAXEW']))return{'success':![],'hasAccess':![],'planType':_0x1afe58,'message':_0x37bca8[_0x2a68ef(0x14f)]};else{const res=_0x36490d[_0x2a68ef(0x1c0)](_0x344bb6,arguments);return _0x34d793=null,res;}}const _0x35cdbf=await this['getDocsP'+'rocessed'+_0x2a68ef(0x132)](_0x5dc4be),_0x1fc433=await this['getConcu'+_0x2a68ef(0x1aa)+_0x2a68ef(0x148)+_0x2a68ef(0xa4)](_0x5dc4be);return{'success':!![],'hasAccess':!![],'planType':_0x1afe58,'limits':{'docsPerDay':{'used':_0x35cdbf,'limit':_0x165a89[_0x2a68ef(0xe1)+'ay'],'remaining':Math[_0x2a68ef(0xff)](0x0,_0x165a89[_0x2a68ef(0xe1)+'ay']-_0x35cdbf)},'maxPages':_0x165a89[_0x2a68ef(0x164)],'maxSizeMB':_0x165a89[_0x2a68ef(0xcf)+'B'],'concurrent':{'current':_0x1fc433,'limit':_0x165a89[_0x2a68ef(0x17b)+'nt']}},'resetsAt':this[_0x2a68ef(0x18f)+_0x2a68ef(0xf8)+'t']()};}['getNextD'+'ailyRese'+'t'](){const _0x2d3628=_0x1cfc85,next=new Date();return next[_0x2d3628(0xa3)](next[_0x2d3628(0x11a)]()+0x1),next['setHours'](0x0,0x0,0x0,0x0),next;}async[_0x1cfc85(0xd4)+_0x1cfc85(0x1b6)+_0x1cfc85(0x1d9)](_0x193e8a,_0x4fc0f0){const _0x384abf=_0x1cfc85,_0xc8a5bd={'UPGnO':function(_0x1567e2,_0x418391){return _0x1567e2+_0x418391;},'dakYh':function(_0x5becf9,_0x276ca4){return _0x5becf9(_0x276ca4);},'oYbbY':function(_0x5f2d23,_0x24c46a){return _0x5f2d23+_0x24c46a;},'JuiGn':function(_0x46182b,_0xf25587){return _0x46182b(_0xf25587);}},_0x5d94b8=await this['checkAnd'+'ResetIfN'+_0x384abf(0x129)](_0x193e8a);return prisma_1[_0x384abf(0x1b3)][_0x384abf(0x118)+'Usage']['update']({'where':{'userId':_0x193e8a},'data':{'documentsThisMonth':_0xc8a5bd['UPGnO'](_0x5d94b8[_0x384abf(0x118)+_0x384abf(0x139)+'th'],0x1),'totalStorageUsed':_0xc8a5bd[_0x384abf(0x184)](BigInt,_0xc8a5bd[_0x384abf(0xfe)](_0xc8a5bd['JuiGn'](Number,_0x5d94b8[_0x384abf(0x127)+_0x384abf(0x170)]),_0x4fc0f0))}});}async[_0x1cfc85(0x198)+'ration'](_0x579ee8,_0x208f71,_0x12c443,_0x82e2d6){const _0x3366e7=_0x1cfc85,_0x18c262={'lrBoj':function(_0x576cbc,_0x411f9b){return _0x576cbc+_0x411f9b;}},_0x1faebc=await this['checkAnd'+'ResetIfN'+_0x3366e7(0x129)](_0x579ee8),_0x2564af=(0x0,documentLimits_1['isOperat'+_0x3366e7(0xf1)])(_0x208f71);return prisma_1['prisma'][_0x3366e7(0x118)+'Usage']['update']({'where':{'userId':_0x579ee8},'data':{'operationsThisMonth':_0x18c262['lrBoj'](_0x1faebc[_0x3366e7(0x103)+_0x3366e7(0x125)+_0x3366e7(0x172)],0x1),'operationsThisHour':_0x1faebc[_0x3366e7(0x103)+_0x3366e7(0x1c2)+'ur']+0x1,'operationsToday':_0x1faebc[_0x3366e7(0x103)+_0x3366e7(0x15b)]+0x1,'tokensUsedThisMonth':_0x1faebc[_0x3366e7(0xb1)+_0x3366e7(0x109)+_0x3366e7(0x172)]+_0x12c443,'costThisMonth':_0x1faebc[_0x3366e7(0x168)+'Month']+_0x82e2d6,'freeOpsThisMonth':_0x2564af?_0x18c262['lrBoj'](_0x1faebc[_0x3366e7(0x138)+_0x3366e7(0x143)],0x1):_0x1faebc[_0x3366e7(0x138)+_0x3366e7(0x143)],'paidOpsThisMonth':!_0x2564af?_0x18c262['lrBoj'](_0x1faebc[_0x3366e7(0x16a)+_0x3366e7(0x143)],0x1):_0x1faebc[_0x3366e7(0x16a)+_0x3366e7(0x143)]}});}async[_0x1cfc85(0xd4)+'umentDel'+'etion'](_0x4d671c,_0x10ecd6){const _0x372aa6=_0x1cfc85,_0x22968e={'TOzDR':function(_0x502896,_0x58a6e9){return _0x502896-_0x58a6e9;}},_0x3f9703=await this[_0x372aa6(0x11f)+_0x372aa6(0x1d0)](_0x4d671c),_0x299a54=Number(_0x3f9703[_0x372aa6(0x127)+_0x372aa6(0x170)]),_0x523e21=Math[_0x372aa6(0xff)](0x0,_0x22968e['TOzDR'](_0x299a54,_0x10ecd6));return prisma_1[_0x372aa6(0x1b3)][_0x372aa6(0x118)+_0x372aa6(0x17c)][_0x372aa6(0x14a)]({'where':{'userId':_0x4d671c},'data':{'totalStorageUsed':BigInt(_0x523e21)}});}async[_0x1cfc85(0x19f)+_0x1cfc85(0x100)](_0x529761){const _0x534353=_0x1cfc85,_0x103697={'dTCRM':function(_0x4c2155,_0x3fc087){return _0x4c2155(_0x3fc087);},'YNLzt':function(_0x26db66,_0x5f3ba9){return _0x26db66(_0x5f3ba9);},'LzGRA':function(_0x3ccb3e,_0x45065e){return _0x3ccb3e===_0x45065e;},'oAhKw':function(_0x595610,_0x505d2c){return _0x595610-_0x505d2c;}},_0x4ff66c=await this[_0x534353(0xa1)+_0x534353(0x174)+_0x534353(0x129)](_0x529761),_0x2dcb24=_0x4ff66c[_0x534353(0x12e)+'er']?documentLimits_1[_0x534353(0x117)+_0x534353(0x10f)][_0x534353(0x1a1)]:documentLimits_1['DOCUMENT'+_0x534353(0x10f)]['FREE'],_0x385993=_0x103697[_0x534353(0x1da)](Number,_0x4ff66c['totalSto'+_0x534353(0x170)]),_0x4c3fe1=_0x103697['YNLzt'](Number,_0x4ff66c[_0x534353(0x1a8)+_0x534353(0xdd)]);return{'allowed':!![],'current':{'documents':_0x4ff66c[_0x534353(0x118)+'sThisMon'+'th'],'operations':_0x4ff66c[_0x534353(0x103)+'nsThisMo'+_0x534353(0x172)],'storage':_0x385993,'operationsThisHour':_0x4ff66c[_0x534353(0x103)+_0x534353(0x1c2)+'ur'],'operationsToday':_0x4ff66c[_0x534353(0x103)+'nsToday']},'limits':{'documents':_0x2dcb24[_0x534353(0x118)+'sPerMont'+'h'],'operations':_0x2dcb24[_0x534353(0x140)+'rationsP'+_0x534353(0x14e)],'storage':_0x4c3fe1,'operationsPerHour':_0x2dcb24[_0x534353(0x103)+_0x534353(0xc4)+'r'],'operationsPerDay':_0x2dcb24[_0x534353(0x103)+_0x534353(0x1ba)]},'remaining':{'documents':Math[_0x534353(0xff)](0x0,_0x2dcb24[_0x534353(0x118)+'sPerMont'+'h']-_0x4ff66c[_0x534353(0x118)+_0x534353(0x139)+'th']),'operations':_0x103697[_0x534353(0xaa)](_0x2dcb24[_0x534353(0x140)+_0x534353(0x1cd)+'erMonth'],-0x1)?-0x1:Math['max'](0x0,_0x2dcb24[_0x534353(0x140)+_0x534353(0x1cd)+_0x534353(0x14e)]-_0x4ff66c['operatio'+'nsThisMo'+_0x534353(0x172)]),'storage':Math['max'](0x0,_0x103697['oAhKw'](_0x4c3fe1,_0x385993))}};}async[_0x1cfc85(0x108)+_0x1cfc85(0x194)+'Stats'](_0x107824){const _0x52830e=_0x1cfc85,_0x53d3f1={'veXcV':function(_0x2aa38a,_0x4e1680){return _0x2aa38a(_0x4e1680);},'IzVVF':_0x52830e(0xe9),'MwZCe':'month','vdKiP':function(_0x290ca1,_0x2a2403){return _0x290ca1/_0x2a2403;},'whjKy':function(_0x565ebd,_0x223b82){return _0x565ebd===_0x223b82;},'WXilL':function(_0xfccec1,_0x1e278b){return _0xfccec1*_0x1e278b;},'iPLFF':function(_0x298e39,_0x2e24f5){return _0x298e39*_0x2e24f5;},'VLqjm':function(_0x56dc04,_0x42c6ac){return _0x56dc04>_0x42c6ac;},'bZReG':function(_0x459385,_0x2211f8){return _0x459385/_0x2211f8;},'jdKTx':function(_0x154983,_0x304595){return _0x154983/_0x304595;}},_0x1ae4c8=await this[_0x52830e(0xa1)+'ResetIfN'+_0x52830e(0x129)](_0x107824),_0x1c2c2e=_0x1ae4c8[_0x52830e(0x12e)+'er']?documentLimits_1['DOCUMENT'+_0x52830e(0x10f)][_0x52830e(0x1a1)]:documentLimits_1[_0x52830e(0x117)+'_LIMITS'][_0x52830e(0xd9)],_0x41f196=await this[_0x52830e(0x18b)+_0x52830e(0x16d)](_0x107824),_0x42b58c=this[_0x52830e(0x147)+_0x52830e(0xc0)](_0x41f196),_0x2cee3d=await this[_0x52830e(0x105)+'rocessed'+'Today'](_0x107824),_0xcd2ee2=Number(_0x1ae4c8['totalSto'+_0x52830e(0x170)]),_0x4b3d47=_0x53d3f1[_0x52830e(0x1c7)](Number,_0x1ae4c8[_0x52830e(0x1a8)+_0x52830e(0xdd)]),_0x24f9b7=await prisma_1[_0x52830e(0x1b3)]['document'][_0x52830e(0x12b)]({'where':{'userId':_0x107824},'orderBy':{'uploadedAt':_0x53d3f1['IzVVF']},'take':0x5,'select':{'id':!![],'filename':!![],'uploadedAt':!![],'_count':{'select':{'operations':!![]}}}}),_0x20c08a=await prisma_1['prisma'][_0x52830e(0x118)+'Operatio'+'n'][_0x52830e(0x12b)]({'where':{'userId':_0x107824},'orderBy':{'createdAt':'desc'},'take':0x5,'select':{'id':!![],'operationType':!![],'status':!![],'createdAt':!![],'document':{'select':{'filename':!![]}}}});return{'period':_0x53d3f1['MwZCe'],'isPaidUser':_0x1ae4c8[_0x52830e(0x12e)+'er'],'usage':{'documents':{'usedThisMonth':_0x1ae4c8[_0x52830e(0x118)+_0x52830e(0x139)+'th'],'limitPerMonth':_0x1c2c2e[_0x52830e(0x118)+_0x52830e(0xdb)+'h'],'percentage':Math['round'](_0x53d3f1[_0x52830e(0xdf)](_0x1ae4c8[_0x52830e(0x118)+_0x52830e(0x139)+'th'],_0x1c2c2e[_0x52830e(0x118)+'sPerMont'+'h'])*0x64)},'operations':{'usedThisMonth':_0x1ae4c8[_0x52830e(0x103)+'nsThisMo'+'nth'],'limitPerMonth':_0x1c2c2e[_0x52830e(0x140)+'rationsP'+'erMonth'],'usedToday':_0x1ae4c8['operatio'+_0x52830e(0x15b)],'limitPerDay':_0x1c2c2e[_0x52830e(0x103)+'nsPerDay'],'percentage':_0x53d3f1[_0x52830e(0xf4)](_0x1c2c2e[_0x52830e(0x140)+_0x52830e(0x1cd)+_0x52830e(0x14e)],-0x1)?0x0:Math[_0x52830e(0xd5)](_0x1ae4c8[_0x52830e(0x103)+_0x52830e(0x125)+_0x52830e(0x172)]/_0x1c2c2e[_0x52830e(0x140)+_0x52830e(0x1cd)+'erMonth']*0x64)},'storage':{'used':_0xcd2ee2,'limit':_0x4b3d47,'percentage':Math['round'](_0x53d3f1[_0x52830e(0x10a)](_0x53d3f1[_0x52830e(0xdf)](_0xcd2ee2,_0x4b3d47),0x64)),'formattedUsed':(0x0,documentLimits_1['formatFi'+_0x52830e(0x185)])(_0xcd2ee2),'formattedLimit':(0x0,documentLimits_1[_0x52830e(0x10c)+_0x52830e(0x185)])(_0x4b3d47)},'cost':{'thisMonth':Math[_0x52830e(0xd5)](_0x53d3f1['iPLFF'](_0x1ae4c8[_0x52830e(0x168)+'Month'],0x64))/0x64,'average':_0x53d3f1['VLqjm'](_0x1ae4c8[_0x52830e(0x103)+'nsThisMo'+_0x52830e(0x172)],0x0)?_0x53d3f1[_0x52830e(0xd7)](Math[_0x52830e(0xd5)](_0x53d3f1['jdKTx'](_0x1ae4c8[_0x52830e(0x168)+_0x52830e(0xcc)],_0x1ae4c8[_0x52830e(0x103)+_0x52830e(0x125)+_0x52830e(0x172)])*0x64),0x64):0x0}},'planInfo':{'planType':_0x41f196,'docsUsedToday':_0x2cee3d,'docsLimitPerDay':_0x42b58c[_0x52830e(0xe1)+'ay'],'maxPages':_0x42b58c[_0x52830e(0x164)],'maxSizeMB':_0x42b58c[_0x52830e(0xcf)+'B'],'concurrent':_0x42b58c[_0x52830e(0x17b)+'nt']},'recentDocuments':_0x24f9b7[_0x52830e(0x120)](_0x5291aa=>({'id':_0x5291aa['id'],'filename':_0x5291aa['filename'],'uploadedAt':_0x5291aa[_0x52830e(0xae)+'At'],'operationCount':_0x5291aa[_0x52830e(0xa5)][_0x52830e(0x103)+'ns']})),'recentOperations':_0x20c08a[_0x52830e(0x120)](_0x31db68=>({'id':_0x31db68['id'],'operationType':_0x31db68[_0x52830e(0x103)+'nType'],'documentName':_0x31db68['document']?.['filename']||_0x52830e(0x11d),'status':_0x31db68['status'],'createdAt':_0x31db68[_0x52830e(0xe2)+'t']}))};}async[_0x1cfc85(0x115)+_0x1cfc85(0x137)](_0x55483c){const _0x3d7ee1=_0x1cfc85,_0x585f39={'xZMVf':function(_0x122cbe,_0x3bc809){return _0x122cbe(_0x3bc809);},'eFjHr':function(_0xc3519e,_0x34d5ee){return _0xc3519e*_0x34d5ee;}},_0x290d5a=documentLimits_1['DOCUMENT'+_0x3d7ee1(0x10f)][_0x3d7ee1(0x1a1)];return prisma_1[_0x3d7ee1(0x1b3)][_0x3d7ee1(0x118)+'Usage'][_0x3d7ee1(0x1bb)]({'where':{'userId':_0x55483c},'update':{'isPaidUser':!![],'documentLimit':_0x290d5a[_0x3d7ee1(0x118)+_0x3d7ee1(0xdb)+'h'],'operationLimit':_0x290d5a['totalOpe'+_0x3d7ee1(0x1cd)+_0x3d7ee1(0x14e)],'storageLimit':BigInt(_0x290d5a['totalSto'+_0x3d7ee1(0x1df)+'t']),'hourlyLimit':_0x290d5a[_0x3d7ee1(0x103)+'nsPerHou'+'r']},'create':{'userId':_0x55483c,'isPaidUser':!![],'documentLimit':_0x290d5a[_0x3d7ee1(0x118)+_0x3d7ee1(0xdb)+'h'],'operationLimit':_0x290d5a['totalOpe'+_0x3d7ee1(0x1cd)+'erMonth'],'storageLimit':_0x585f39[_0x3d7ee1(0x1a0)](BigInt,_0x290d5a[_0x3d7ee1(0x127)+_0x3d7ee1(0x1df)+'t']),'hourlyLimit':_0x290d5a[_0x3d7ee1(0x103)+_0x3d7ee1(0xc4)+'r'],'documentsThisMonth':0x0,'operationsThisMonth':0x0,'tokensUsedThisMonth':0x0,'costThisMonth':0x0,'freeOpsThisMonth':0x0,'paidOpsThisMonth':0x0,'totalStorageUsed':_0x585f39[_0x3d7ee1(0x1a0)](BigInt,0x0),'lastMonthlyReset':new Date(),'cycleStartDate':new Date(),'cycleEndDate':new Date(Date['now']()+_0x585f39[_0x3d7ee1(0xc8)](_0x585f39[_0x3d7ee1(0xc8)](0x1e,0x18)*0x3c,0x3c)*0x3e8),'operationsThisHour':0x0,'lastHourlyReset':new Date(),'operationsToday':0x0,'lastDailyReset':new Date()}});}async[_0x1cfc85(0x110)+_0x1cfc85(0x153)](_0x413788){const _0x5f1d0f=_0x1cfc85,_0x31a9e7=documentLimits_1[_0x5f1d0f(0x117)+'_LIMITS'][_0x5f1d0f(0xd9)];return prisma_1['prisma'][_0x5f1d0f(0x118)+_0x5f1d0f(0x17c)][_0x5f1d0f(0x14a)]({'where':{'userId':_0x413788},'data':{'isPaidUser':![],'documentLimit':_0x31a9e7[_0x5f1d0f(0x118)+_0x5f1d0f(0xdb)+'h'],'operationLimit':_0x31a9e7[_0x5f1d0f(0x140)+_0x5f1d0f(0x1cd)+'erMonth'],'storageLimit':BigInt(_0x31a9e7[_0x5f1d0f(0x127)+_0x5f1d0f(0x1df)+'t']),'hourlyLimit':_0x31a9e7[_0x5f1d0f(0x103)+_0x5f1d0f(0xc4)+'r']}});}async[_0x1cfc85(0xf0)+'Plan'](_0x2dc53a){const _0x137d57=_0x1cfc85,_0xe30811={'MKXPc':function(_0x44d04e,_0x4b22dd){return _0x44d04e(_0x4b22dd);}},_0x7c11ca=await this[_0x137d57(0x18b)+'lanType'](_0x2dc53a),_0x1ce5a3=this[_0x137d57(0xc9)+_0x137d57(0x177)](_0x7c11ca),_0xe10704=_0x1ce5a3?documentLimits_1[_0x137d57(0x117)+_0x137d57(0x10f)]['PAID']:documentLimits_1['DOCUMENT'+_0x137d57(0x10f)]['FREE'];return prisma_1[_0x137d57(0x1b3)][_0x137d57(0x118)+_0x137d57(0x17c)]['update']({'where':{'userId':_0x2dc53a},'data':{'isPaidUser':_0x1ce5a3,'documentLimit':_0xe10704[_0x137d57(0x118)+'sPerMont'+'h'],'operationLimit':_0xe10704[_0x137d57(0x140)+_0x137d57(0x1cd)+'erMonth'],'storageLimit':_0xe30811[_0x137d57(0x1d1)](BigInt,_0xe10704[_0x137d57(0x127)+_0x137d57(0x1df)+'t']),'hourlyLimit':_0xe10704['operatio'+_0x137d57(0xc4)+'r']}});}async[_0x1cfc85(0x12e)+'er'](_0x1f0ee9){const _0x9a9b63=_0x1cfc85,_0x3125b6=await this[_0x9a9b63(0x11f)+_0x9a9b63(0x1d0)](_0x1f0ee9);return _0x3125b6[_0x9a9b63(0x12e)+'er'];}async['getOpera'+'tionBrea'+_0x1cfc85(0xd8)](_0x1be73e){const _0xbc02ec=_0x1cfc85,_0x2ca12f={'kpJoF':_0xbc02ec(0x103)+_0xbc02ec(0x160)},_0x5ec20f=await prisma_1[_0xbc02ec(0x1b3)]['document'+_0xbc02ec(0xb9)+'n'][_0xbc02ec(0x10b)]({'by':[_0x2ca12f['kpJoF']],'where':{'userId':_0x1be73e},'_count':{'operationType':!![]},'_sum':{'cost':!![],'totalTokens':!![]},'orderBy':{'_count':{'operationType':_0xbc02ec(0xe9)}}});return _0x5ec20f[_0xbc02ec(0x120)](_0x412642=>({'operationType':_0x412642[_0xbc02ec(0x103)+_0xbc02ec(0x160)],'operationName':documentLimits_1['OPERATIO'+_0xbc02ec(0x1a6)+'TA'][_0x412642[_0xbc02ec(0x103)+_0xbc02ec(0x160)]]?.[_0xbc02ec(0x176)]||_0x412642[_0xbc02ec(0x103)+_0xbc02ec(0x160)],'category':documentLimits_1[_0xbc02ec(0xc5)+_0xbc02ec(0x1a6)+'TA'][_0x412642[_0xbc02ec(0x103)+'nType']]?.['category']||_0xbc02ec(0xe7),'count':_0x412642[_0xbc02ec(0xa5)][_0xbc02ec(0x103)+_0xbc02ec(0x160)],'totalCost':_0x412642['_sum'][_0xbc02ec(0x1a5)]||0x0,'totalTokens':_0x412642['_sum'][_0xbc02ec(0xf6)+_0xbc02ec(0xbb)]||0x0}));}async[_0x1cfc85(0xd1)+_0x1cfc85(0x17c)](_0xc55657,_0x5a273b=0x7){const _0xb8e807=_0x1cfc85,_0x326d5b={'lNCFs':function(_0x4df63c,_0x2a83c7){return _0x4df63c!==_0x2a83c7;},'TEYqG':_0xb8e807(0x1a4),'yNfwX':function(_0x21b537,_0x3c68ac){return _0x21b537-_0x3c68ac;}},_0x18fc9b=new Date();_0x18fc9b[_0xb8e807(0xa3)](_0x18fc9b[_0xb8e807(0x11a)]()-_0x5a273b);const _0x4ccaee=await prisma_1[_0xb8e807(0x1b3)]['document'+_0xb8e807(0xb9)+'n']['findMany']({'where':{'userId':_0xc55657,'createdAt':{'gte':_0x18fc9b}},'select':{'createdAt':!![],'cost':!![],'totalTokens':!![]}}),_0x21a108={};for(let _0x3ee85f=0x0;_0x3ee85f<_0x5a273b;_0x3ee85f++){if(_0x326d5b[_0xb8e807(0xcd)](_0x326d5b[_0xb8e807(0x13a)],_0xb8e807(0xb3))){const _0x162203=new Date();_0x162203[_0xb8e807(0xa3)](_0x326d5b[_0xb8e807(0x106)](_0x162203[_0xb8e807(0x11a)](),_0x3ee85f));const _0x3d8ed5=_0x162203[_0xb8e807(0x19e)+'ing']()[_0xb8e807(0xde)]('T')[0x0];_0x21a108[_0x3d8ed5]={'count':0x0,'cost':0x0,'tokens':0x0};}else{const _0x35cd1a=new _0x5a0442(_0x9b572f);_0x35cd1a['setMonth'](_0x35cd1a[_0xb8e807(0xa9)]()+0x1),_0x4fd1aa[_0xb8e807(0x1d7)](_0x3d16a8,{'documentsThisMonth':0x0,'operationsThisMonth':0x0,'tokensUsedThisMonth':0x0,'costThisMonth':0x0,'freeOpsThisMonth':0x0,'paidOpsThisMonth':0x0,'lastMonthlyReset':_0x552fa5,'cycleStartDate':_0x5702d1,'cycleEndDate':_0x35cd1a});}}return _0x4ccaee['forEach'](_0x638291=>{const _0x5a8cb2=_0xb8e807;if('xVbQv'!==_0x5a8cb2(0x124))return{'canProceed':![],'errorCode':_0x4f7a82[_0x5a8cb2(0x116)+_0x5a8cb2(0x191)]['FILE_TOO'+_0x5a8cb2(0xb0)],'errorMessage':_0x5a8cb2(0x1cc)+_0x5a8cb2(0x16c)+(0x0,_0x1b630a['formatFi'+_0x5a8cb2(0x185)])(_0x14c5c1)+(_0x5a8cb2(0x165)+'s\x20')+_0x459054+(_0x5a8cb2(0xa8)+_0x5a8cb2(0x181))+_0x1f72d6[_0x5a8cb2(0xcf)+'B']+_0x5a8cb2(0xe3),'upgradeRequired':_0x390bc1!==_0x573ca7['PlanType'][_0x5a8cb2(0x18e)]};else{const _0x19a7be=_0x638291[_0x5a8cb2(0xe2)+'t']['toISOStr'+_0x5a8cb2(0x1d5)]()[_0x5a8cb2(0xde)]('T')[0x0];_0x21a108[_0x19a7be]&&(_0x21a108[_0x19a7be]['count']++,_0x21a108[_0x19a7be][_0x5a8cb2(0x1a5)]+=_0x638291[_0x5a8cb2(0x1a5)],_0x21a108[_0x19a7be][_0x5a8cb2(0xf7)]+=_0x638291[_0x5a8cb2(0xf6)+_0x5a8cb2(0xbb)]);}}),Object['entries'](_0x21a108)['map'](([_0x3f1722,_0x296ba8])=>({'date':_0x3f1722,..._0x296ba8,'cost':Math[_0xb8e807(0xd5)](_0x296ba8[_0xb8e807(0x1a5)]*0x64)/0x64}))[_0xb8e807(0xee)]((_0x50d8e7,_0x1160bf)=>_0x50d8e7[_0xb8e807(0x1d3)][_0xb8e807(0xbc)+_0xb8e807(0x1db)](_0x1160bf[_0xb8e807(0x1d3)]));}}exports[_0x1cfc85(0x17f)+_0x1cfc85(0x163)+_0x1cfc85(0xb5)]=DocumentUsageService,exports[_0x1cfc85(0x1c4)]=new DocumentUsageService();