function _0x5c33(){const _0x1c7193=['z2v0qMvZDfe','vxnLC1rVDge','rv9dt05gsuC','y3jTvxnLC1q','lY4Ul2nVBMy','AwCVD29YA3m','zxnuB3rHBa','CgXHBIbMB3i','x19LC01Vzhu','CMvNAw9U','Dg9vChbLCKm','qhbYAxnTys8','CMvZDw1L','zxjqywnRuxu','CgfJzs5JB24','zuzYzwvrDw8','vxbKyxrLuge','zxHOyxvZDgu','u1rbuLrfuG','B3rH','C2vK','Cg9YDgzVBgK','kcGOlISPkYK','zxnvC2vK','y2TtDgf0Dxm','lI4VlI4VlI4','AwvUDa','zMLUzezPCNm','nZyXowfSAMnWrW','r3bey1G','yxnL','zvbVD2vYuge','DgLLCG','CfHgwfu','vefFufjpvKK','zvf1B3rHu2u','CgfJA0LK','EKXVv1m','ndq1nJLyENfAruK','yxnJ','y29UDgvUDa','zNjLzq','Dg9mB3DLCKm','DgLVBLbSyw4','zhHxtfm','B3bLCNr5','EMvgCMvLuxu','y29UC3rYDwm','Dxj6v3y','Aw52B2LJzvu','ChjVDMLKzxi','revs','yxbWBhK','zMLUze1HBNK','odqYnLHuruLTuG','vefFtu9eruW','y3jLyxrL','CMvZDw1Lvxm','nZK4ntyWsw9HENLn','AgfZuxvVDge','C2vZvxnLza','Aw5PDgLHBgK','kYKRja','Dg9tDhjPBMC','v29YA3nWywm','sKL0Au4','mtaZnJmWBxjQvxzs','qundrvnt','otG4nZmXwfvWsurY','DxbKyxrL','rLjfrv9rvu8','C2vZvg90ywW','zvf1B3rH','D29YA3nWywm','C2vHCMnO','CMvTywLUAw4','s1vxwwK','y2HLy2TqB3C','Cg93zxjWywm','B1vZzxnuB3q','ueXvuW','mJG0nuvVsvDACW','z2v0vxnLCLC','DxnLCG','uNzRvNu','Bw9KzwW','zfHTrLi','BwfW','y29UDgvUDfu','B3rHBa','mJGYmg5ZC2zVEa','ue9xrvjFuee','zMLUzfvUAxe','y3jTvxnLC1u','B3jRC3bHy2u','B1vZzxnvC2u','ywDL','EerYuLK','BM9Uzq','DKjeEKK','zgvMAw5Luhi','rNj1y0K','vunAtg8','ndHLBKTLwvm','ntfOAxvSB2K','u3rHDhvZ','uxvqBwC','igzVDw5K','y2HLy2TgCMu','vxnLC1vZzwq','EfjNENG','Dg9Y','zMLN','ywn0AxzL','vxnLCIbUB3q','q0Tt','C3vIC2nYAxa','CNzPy2u','tgTIueG','ntv6A3DKCuS','zevpvMO','y2H4whu','v09ss1nqqum'];_0x5c33=function(){return _0x1c7193;};return _0x5c33();}const _0x1fea4a=_0x47c5;(function(_0x5a1b15,_0x5a2001){const _0xbdf24e=_0x47c5,_0x444614=_0x5a1b15();while(!![]){try{const _0x4cf99d=parseInt(_0xbdf24e(0x1a7))/0x1+-parseInt(_0xbdf24e(0x1c1))/0x2*(parseInt(_0xbdf24e(0x178))/0x3)+-parseInt(_0xbdf24e(0x16a))/0x4*(-parseInt(_0xbdf24e(0x161))/0x5)+parseInt(_0xbdf24e(0x177))/0x6*(parseInt(_0xbdf24e(0x1b1))/0x7)+-parseInt(_0xbdf24e(0x1c5))/0x8+-parseInt(_0xbdf24e(0x1cf))/0x9+-parseInt(_0xbdf24e(0x1cd))/0xa*(-parseInt(_0xbdf24e(0x187))/0xb);if(_0x4cf99d===_0x5a2001)break;else _0x444614['push'](_0x444614['shift']());}catch(_0x498d52){_0x444614['push'](_0x444614['shift']());}}}(_0x5c33,0x38347));const _0x4f7f1f=(function(){let _0x2ebb54=!![];return function(_0x5294f7,_0x1f6943){const _0x4bce3d=_0x2ebb54?function(){if(_0x1f6943){const res=_0x1f6943['apply'](_0x5294f7,arguments);return _0x1f6943=null,res;}}:function(){};return _0x2ebb54=![],_0x4bce3d;};}()),_0x44b05f=_0x4f7f1f(this,function(){const _0x2da141=_0x47c5;return _0x44b05f[_0x2da141(0x1ca)]()[_0x2da141(0x15a)](_0x2da141(0x1a1)+_0x2da141(0x1c9))[_0x2da141(0x1ca)]()[_0x2da141(0x1ba)+_0x2da141(0x17f)](_0x44b05f)[_0x2da141(0x15a)](_0x2da141(0x1a1)+_0x2da141(0x1c9));});_0x44b05f();'use strict';Object[_0x1fea4a(0x174)+_0x1fea4a(0x1b8)](exports,_0x1fea4a(0x193)+'le',{'value':!![]}),exports[_0x1fea4a(0x159)+'eQuotaSe'+_0x1fea4a(0x185)]=exports[_0x1fea4a(0x1cb)+'eQuotaSe'+_0x1fea4a(0x185)]=void 0x0;function _0x47c5(_0x50e99d,_0x397ecd){_0x50e99d=_0x50e99d-0x155;const _0x1ee954=_0x5c33();let _0x44b05f=_0x1ee954[_0x50e99d];if(_0x47c5['lenvKb']===undefined){var _0x4f7f1f=function(_0x4e70b4){const _0x5be7f6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x762d89='',_0x393b7f='',_0xa70ef8=_0x762d89+_0x4f7f1f;for(let _0x35221f=0x0,_0x155131,_0x116aaa,_0x36301d=0x0;_0x116aaa=_0x4e70b4['charAt'](_0x36301d++);~_0x116aaa&&(_0x155131=_0x35221f%0x4?_0x155131*0x40+_0x116aaa:_0x116aaa,_0x35221f++%0x4)?_0x762d89+=_0xa70ef8['charCodeAt'](_0x36301d+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x155131>>(-0x2*_0x35221f&0x6)):_0x35221f:0x0){_0x116aaa=_0x5be7f6['indexOf'](_0x116aaa);}for(let _0x236d20=0x0,_0x1995c6=_0x762d89['length'];_0x236d20<_0x1995c6;_0x236d20++){_0x393b7f+='%'+('00'+_0x762d89['charCodeAt'](_0x236d20)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x393b7f);};_0x47c5['zfvFvC']=_0x4f7f1f,_0x47c5['WGLHjF']={},_0x47c5['lenvKb']=!![];}const _0x5c33a9=_0x1ee954[0x0],_0x47c5a9=_0x50e99d+_0x5c33a9,_0x178a05=_0x47c5['WGLHjF'][_0x47c5a9];if(!_0x178a05){const _0x1681cf=function(_0x252df8){this['lfyjdV']=_0x252df8,this['dGdRoT']=[0x1,0x0,0x0],this['mmDxlt']=function(){return'newState';},this['HXRHOy']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['tOMQns']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1681cf['prototype']['VMGzrb']=function(){const _0x212b4e=new RegExp(this['HXRHOy']+this['tOMQns']),_0xdd91d3=_0x212b4e['test'](this['mmDxlt']['toString']())?--this['dGdRoT'][0x1]:--this['dGdRoT'][0x0];return this['jemazP'](_0xdd91d3);},_0x1681cf['prototype']['jemazP']=function(_0x3e0634){if(!Boolean(~_0x3e0634))return _0x3e0634;return this['QmvbvY'](this['lfyjdV']);},_0x1681cf['prototype']['QmvbvY']=function(_0x190f74){for(let _0x588de1=0x0,_0x1a5310=this['dGdRoT']['length'];_0x588de1<_0x1a5310;_0x588de1++){this['dGdRoT']['push'](Math['round'](Math['random']())),_0x1a5310=this['dGdRoT']['length'];}return _0x190f74(this['dGdRoT'][0x0]);},new _0x1681cf(_0x47c5)['VMGzrb'](),_0x44b05f=_0x47c5['zfvFvC'](_0x44b05f),_0x47c5['WGLHjF'][_0x47c5a9]=_0x44b05f;}else _0x44b05f=_0x178a05;return _0x44b05f;}const client_1=require(_0x1fea4a(0x196)+'client'),workspace_config_1=require(_0x1fea4a(0x1a4)+_0x1fea4a(0x18f)+_0x1fea4a(0x190)+_0x1fea4a(0x199)+_0x1fea4a(0x180)),prisma=new client_1['PrismaCl'+(_0x1fea4a(0x1a5))]();class WorkspaceQuotaService{async[_0x1fea4a(0x17c)+_0x1fea4a(0x158)](_0x2f6d8d,_0x28b655){const _0x46631c=_0x1fea4a,_0x115c70={'JItiN':function(_0x4f55fd,_0x39df2a){return _0x4f55fd===_0x39df2a;},'urzWv':function(_0xc057cd,_0x334a61){return _0xc057cd>_0x334a61;}},_0x53c0f5=await prisma[_0x46631c(0x163)][_0x46631c(0x16c)+'ue']({'where':{'id':_0x2f6d8d},'select':{'subscriptionPlan':!![]}});if(!_0x53c0f5)throw new Error(_0x46631c(0x182)+'\x20found');const _0x14be28=_0x53c0f5[_0x46631c(0x184)+_0x46631c(0x1b6)][_0x46631c(0x195)+_0x46631c(0x1a9)]();if(_0x115c70[_0x46631c(0x1cc)](_0x14be28,_0x46631c(0x19d)))return{'hasQuota':![],'remaining':0x0,'total':0x0};let _0x53dc5b=await prisma[_0x46631c(0x159)+_0x46631c(0x19a)+'ta'][_0x46631c(0x16c)+'ue']({'where':{'userId':_0x2f6d8d}});!_0x53dc5b&&(_0x53dc5b=await this[_0x46631c(0x1c8)+_0x46631c(0x1b9)+_0x46631c(0x19e)](_0x2f6d8d,_0x14be28));const _0x53993a=_0x28b655[_0x46631c(0x1b5)+'ase'](),_0x3e6db6=_0x53993a+_0x46631c(0x17d),_0x355c0f=_0x53993a+(_0x46631c(0x18c)+'l'),_0x1f8fc5=_0x53dc5b[_0x3e6db6],_0x15539e=_0x53dc5b[_0x355c0f],_0x1888ff=_0x15539e-_0x1f8fc5;return{'hasQuota':_0x115c70[_0x46631c(0x1bb)](_0x1888ff,0x0),'remaining':_0x1888ff,'total':_0x15539e};}async[_0x1fea4a(0x15d)+'erPackQu'+_0x1fea4a(0x19e)](_0x36d570,_0x291610){const _0x33d0b1=_0x1fea4a,_0x3e574d={'RvkVu':_0x33d0b1(0x1b2),'GpDcX':'cooAw','dxWLS':function(_0x7cd561,_0x4007d9){return _0x7cd561-_0x4007d9;}},_0x393931=await prisma[_0x33d0b1(0x159)+_0x33d0b1(0x1aa)+'ck'][_0x33d0b1(0x1a6)+'t']({'where':{'userId':_0x36d570,'status':_0x33d0b1(0x181),'OR':[{'expiresAt':null},{'expiresAt':{'gt':new Date()}}]},'orderBy':{'purchasedAt':_0x3e574d[_0x33d0b1(0x164)]}});if(!_0x393931)return _0x33d0b1(0x171)!==_0x3e574d[_0x33d0b1(0x1a8)]?{'hasQuota':![],'remaining':0x0,'total':0x0,'packId':null,'tier':null}:{'hasQuota':![],'remaining':0x0,'total':0x0};const _0x5419cb=_0x291610[_0x33d0b1(0x1b5)+_0x33d0b1(0x1a9)](),_0x3eeaa5=_0x5419cb+_0x33d0b1(0x17d),_0x3c419d=_0x5419cb+('UsesTota'+'l'),_0x2a925d=_0x393931[_0x3eeaa5],_0x2907c7=_0x393931[_0x3c419d],_0x346d5d=_0x3e574d[_0x33d0b1(0x1b7)](_0x2907c7,_0x2a925d);return{'hasQuota':_0x346d5d>0x0,'remaining':_0x346d5d,'total':_0x2907c7,'packId':_0x393931['id'],'tier':_0x393931['tier']};}async[_0x1fea4a(0x18b)+'uota'](_0x408783,_0x55662d){const _0xb8b534=_0x1fea4a,_0x54be17={'dEOVj':function(_0x42654a,_0x549766){return _0x42654a!==_0x549766;},'xRgzx':'vBDzI','QuPmg':_0xb8b534(0x1b4),'gbkGJ':_0xb8b534(0x15e)+'k','FRTVf':_0xb8b534(0x172)},_0xc9172c=await this['checkFre'+_0xb8b534(0x158)](_0x408783,_0x55662d);if(_0xc9172c[_0xb8b534(0x1c6)]){if(_0x54be17[_0xb8b534(0x188)](_0xb8b534(0x173),_0x54be17[_0xb8b534(0x17e)])){if(_0x5a9276){const res=_0x3c5d89[_0xb8b534(0x1bf)](_0xa2cf9a,arguments);return _0x212d0f=null,res;}}else return{'source':_0x54be17[_0xb8b534(0x17a)],'remaining':_0xc9172c[_0xb8b534(0x15b)+'g'],'model':workspace_config_1[_0xb8b534(0x18a)+_0xb8b534(0x18d)][_0xb8b534(0x156)+_0xb8b534(0x1c2)],'provider':workspace_config_1['WORKSPAC'+_0xb8b534(0x18d)][_0xb8b534(0x156)+_0xb8b534(0x1ad)+_0xb8b534(0x1be)]};}const _0x16d1c9=await this[_0xb8b534(0x15d)+_0xb8b534(0x198)+_0xb8b534(0x19e)](_0x408783,_0x55662d);if(_0x16d1c9[_0xb8b534(0x1c6)]&&_0x16d1c9[_0xb8b534(0x1af)]){const _0x151bf7=workspace_config_1[_0xb8b534(0x18a)+_0xb8b534(0x18d)][_0xb8b534(0x16b)+_0xb8b534(0x183)][_0x16d1c9['tier']];return{'source':_0x54be17['gbkGJ'],'remaining':_0x16d1c9[_0xb8b534(0x15b)+'g'],'packId':_0x16d1c9[_0xb8b534(0x1af)],'model':_0x151bf7[_0xb8b534(0x165)],'provider':_0x151bf7[_0xb8b534(0x1bd)]};}return{'source':_0x54be17['FRTVf'],'remaining':0x0,'model':'','provider':''};}async['deductUs'+_0x1fea4a(0x170)](_0x345a02,_0x48138d,_0x2f102d,_0x4853cf,_0x473224=0x0){const _0x428ba3=_0x1fea4a,_0x1623e2={'KUWYi':_0x428ba3(0x1b4),'zLoWS':_0x428ba3(0x15e)+'k','HdytW':_0x428ba3(0x189)},_0x402126=_0x48138d[_0x428ba3(0x1b5)+_0x428ba3(0x1a9)](),_0x5b4037=_0x402126+_0x428ba3(0x17d);if(_0x2f102d===_0x1623e2[_0x428ba3(0x15c)])await prisma[_0x428ba3(0x159)+_0x428ba3(0x19a)+'ta']['update']({'where':{'userId':_0x345a02},'data':{[_0x5b4037]:{'increment':0x1},'tokensUsed':{'increment':_0x473224}}});else{if(_0x2f102d===_0x1623e2[_0x428ba3(0x1b0)]&&_0x4853cf){if(_0x1623e2['HdytW']==='gkrWa'){const _0xd9042c=_0x1681cf?function(){const _0x59b1a2=_0x428ba3;if(_0x588de1){const res=_0x59ded7[_0x59b1a2(0x1bf)](_0x20b75e,arguments);return _0x2eae97=null,res;}}:function(){};return _0x190f74=![],_0xd9042c;}else await prisma['workspac'+_0x428ba3(0x1aa)+'ck'][_0x428ba3(0x155)]({'where':{'id':_0x4853cf},'data':{[_0x5b4037]:{'increment':0x1},'tokensUsed':{'increment':_0x473224}}}),await this['checkAnd'+_0x428ba3(0x19b)+_0x428ba3(0x1a3)](_0x4853cf);}}}async['initiali'+'zeFreeQu'+_0x1fea4a(0x19e)](_0x4409e4,_0x5e3055){const _0x6a909a=_0x1fea4a,_0x445ddb=workspace_config_1[_0x6a909a(0x18a)+'E_CONFIG']['FREE_QUO'+'TA'][_0x5e3055];if(!_0x445ddb)throw new Error('Invalid\x20'+_0x6a909a(0x192)+'\x20free\x20qu'+_0x6a909a(0x19e));return prisma['workspac'+_0x6a909a(0x19a)+'ta'][_0x6a909a(0x1c3)]({'data':{'userId':_0x4409e4,'subscriptionPlan':_0x5e3055,'resumeUsesTotal':_0x445ddb[_0x6a909a(0x197)],'invoiceUsesTotal':_0x445ddb['invoice'],'portfolioUsesTotal':_0x445ddb[_0x6a909a(0x1a0)+'o'],'crmUsesTotal':_0x445ddb['crm'],'contentUsesTotal':_0x445ddb[_0x6a909a(0x1b3)]}});}async['checkAnd'+_0x1fea4a(0x19b)+'ckStatus'](_0x100fa0){const _0x1a8c28=_0x1fea4a,_0x5d1547={'FrucI':function(_0x119ce7,_0x4fc97f){return _0x119ce7+_0x4fc97f;},'dXmFR':function(_0xd0447,_0x35a7c4){return _0xd0447+_0x35a7c4;},'LkbPH':function(_0x193a44,_0x5e2415){return _0x193a44+_0x5e2415;},'UCZLo':function(_0x5949ee,_0x129d6a){return _0x5949ee+_0x129d6a;},'pXFXU':function(_0x51e52a,_0x159d6e){return _0x51e52a+_0x159d6e;},'RcvQu':function(_0x9dc0cd,_0x4bb43d){return _0x9dc0cd>=_0x4bb43d;}},_0x2b13e2=await prisma[_0x1a8c28(0x159)+'ePowerPa'+'ck'][_0x1a8c28(0x16c)+'ue']({'where':{'id':_0x100fa0}});if(!_0x2b13e2)return;const _0x454d5b=_0x5d1547[_0x1a8c28(0x175)](_0x5d1547[_0x1a8c28(0x166)](_0x5d1547[_0x1a8c28(0x186)](_0x2b13e2[_0x1a8c28(0x1c4)+_0x1a8c28(0x1a2)],_0x2b13e2[_0x1a8c28(0x1bc)+_0x1a8c28(0x1c7)]),_0x2b13e2[_0x1a8c28(0x1a0)+_0x1a8c28(0x16f)+'d'])+_0x2b13e2['crmUsesU'+'sed'],_0x2b13e2[_0x1a8c28(0x168)+_0x1a8c28(0x1c7)]),_0x4bbbb1=_0x5d1547[_0x1a8c28(0x176)](_0x5d1547[_0x1a8c28(0x176)](_0x5d1547[_0x1a8c28(0x1ac)](_0x2b13e2['resumeUs'+_0x1a8c28(0x191)],_0x2b13e2[_0x1a8c28(0x1bc)+_0x1a8c28(0x157)])+_0x2b13e2[_0x1a8c28(0x1a0)+'oUsesTot'+'al'],_0x2b13e2[_0x1a8c28(0x18e)+_0x1a8c28(0x169)]),_0x2b13e2[_0x1a8c28(0x168)+_0x1a8c28(0x157)]);_0x5d1547['RcvQu'](_0x454d5b,_0x4bbbb1)&&await prisma[_0x1a8c28(0x159)+_0x1a8c28(0x1aa)+'ck'][_0x1a8c28(0x155)]({'where':{'id':_0x100fa0},'data':{'status':_0x1a8c28(0x19c)+'d'}});}async[_0x1fea4a(0x162)+_0x1fea4a(0x16e)+_0x1fea4a(0x179)](_0x23e866){const _0x4d4071=_0x1fea4a,_0x331bfd=await prisma[_0x4d4071(0x163)][_0x4d4071(0x16c)+'ue']({'where':{'id':_0x23e866},'select':{'subscriptionPlan':!![],'region':!![]}});if(!_0x331bfd)throw new Error(_0x4d4071(0x182)+_0x4d4071(0x17b));const _0x3bf8eb=_0x331bfd['subscrip'+_0x4d4071(0x1b6)]['toUpperC'+_0x4d4071(0x1a9)](),_0x34a26a=_0x3bf8eb===_0x4d4071(0x19d),_0x1f36ce=_0x34a26a?null:await prisma[_0x4d4071(0x159)+_0x4d4071(0x19a)+'ta']['findUniq'+'ue']({'where':{'userId':_0x23e866}}),_0x2e481a=await prisma[_0x4d4071(0x159)+'ePowerPa'+'ck'][_0x4d4071(0x1c0)]({'where':{'userId':_0x23e866,'status':_0x4d4071(0x181)}});return{'plan':_0x3bf8eb,'region':_0x331bfd[_0x4d4071(0x194)],'hasToolsAccess':!_0x34a26a,'freeQuota':_0x1f36ce?{'resume':{'used':_0x1f36ce['resumeUs'+_0x4d4071(0x1a2)],'total':_0x1f36ce[_0x4d4071(0x1c4)+_0x4d4071(0x191)]},'invoice':{'used':_0x1f36ce[_0x4d4071(0x1bc)+'sesUsed'],'total':_0x1f36ce[_0x4d4071(0x1bc)+_0x4d4071(0x157)]},'portfolio':{'used':_0x1f36ce[_0x4d4071(0x1a0)+_0x4d4071(0x16f)+'d'],'total':_0x1f36ce[_0x4d4071(0x1a0)+_0x4d4071(0x15f)+'al']},'crm':{'used':_0x1f36ce['crmUsesU'+_0x4d4071(0x19f)],'total':_0x1f36ce['crmUsesT'+_0x4d4071(0x169)]},'content':{'used':_0x1f36ce[_0x4d4071(0x168)+_0x4d4071(0x1c7)],'total':_0x1f36ce[_0x4d4071(0x168)+_0x4d4071(0x157)]}}:null,'powerPacks':_0x2e481a[_0x4d4071(0x167)](_0x152ca4=>({'id':_0x152ca4['id'],'tier':_0x152ca4[_0x4d4071(0x1ab)],'resume':{'used':_0x152ca4[_0x4d4071(0x1c4)+_0x4d4071(0x1a2)],'total':_0x152ca4['resumeUs'+_0x4d4071(0x191)]},'invoice':{'used':_0x152ca4[_0x4d4071(0x1bc)+'sesUsed'],'total':_0x152ca4[_0x4d4071(0x1bc)+_0x4d4071(0x157)]},'portfolio':{'used':_0x152ca4['portfoli'+_0x4d4071(0x16f)+'d'],'total':_0x152ca4['portfoli'+'oUsesTot'+'al']},'crm':{'used':_0x152ca4[_0x4d4071(0x16d)+_0x4d4071(0x19f)],'total':_0x152ca4[_0x4d4071(0x18e)+_0x4d4071(0x169)]},'content':{'used':_0x152ca4[_0x4d4071(0x168)+_0x4d4071(0x1c7)],'total':_0x152ca4[_0x4d4071(0x168)+_0x4d4071(0x157)]}})),'availablePacks':workspace_config_1[_0x4d4071(0x18a)+_0x4d4071(0x18d)][_0x4d4071(0x1ce)][_0x3bf8eb]||[_0x4d4071(0x160)]};}}exports[_0x1fea4a(0x1cb)+_0x1fea4a(0x1ae)+_0x1fea4a(0x185)]=WorkspaceQuotaService,exports[_0x1fea4a(0x159)+_0x1fea4a(0x1ae)+_0x1fea4a(0x185)]=new WorkspaceQuotaService();