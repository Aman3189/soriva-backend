const _0x1c6946=_0x29c5;(function(_0x17924d,_0x32f93a){const _0x3ecb71=_0x29c5,_0x2ca8f5=_0x17924d();while(!![]){try{const _0x1d6fec=parseInt(_0x3ecb71(0x199))/0x1+parseInt(_0x3ecb71(0x131))/0x2*(parseInt(_0x3ecb71(0x187))/0x3)+-parseInt(_0x3ecb71(0x1d2))/0x4+parseInt(_0x3ecb71(0x149))/0x5+-parseInt(_0x3ecb71(0xf6))/0x6+parseInt(_0x3ecb71(0x1ba))/0x7*(parseInt(_0x3ecb71(0x125))/0x8)+parseInt(_0x3ecb71(0x10c))/0x9;if(_0x1d6fec===_0x32f93a)break;else _0x2ca8f5['push'](_0x2ca8f5['shift']());}catch(_0x559ac3){_0x2ca8f5['push'](_0x2ca8f5['shift']());}}}(_0x1602,0x42a83));const _0x436cee=(function(){const _0x58e769=_0x29c5,_0x1b423f={'rhrUN':_0x58e769(0x1b9)+_0x58e769(0x1d9)+_0x58e769(0x19f),'pylEM':function(_0x5f5a6e,_0x418ffd){return _0x5f5a6e!==_0x418ffd;},'gPaPg':'kjhkp','SHWKx':_0x58e769(0x100)};let _0x169870=!![];return function(_0x160669,_0xf0b161){const _0x443e9f=_0x58e769;if(_0x443e9f(0x100)===_0x1b423f['SHWKx']){const _0x52703a=_0x169870?function(){const _0x36079c=_0x443e9f,_0x493fe6={'SeHOY':_0x1b423f['rhrUN']};if(_0x1b423f['pylEM'](_0x36079c(0x122),_0x1b423f[_0x36079c(0x16d)])){if(_0xf0b161){const res=_0xf0b161['apply'](_0x160669,arguments);return _0xf0b161=null,res;}}else try{return this[_0x36079c(0x1b1)][_0x36079c(0x195)+_0x36079c(0x16e)+_0x36079c(0x1cd)]&&_0x327fd8['info'](_0x36079c(0x1ce)+'trieval\x20'+_0x36079c(0x1b4)+_0x36079c(0x1a0)+_0x36079c(0x1c9),_0x5e9b65['query'][_0x36079c(0x1d7)+'g'](0x0,0x32)),[];}catch(_0x139f55){return _0x44c1bd['error'](_0x493fe6[_0x36079c(0x163)],_0x139f55),[];}}:function(){};return _0x169870=![],_0x52703a;}else{const _0x5dab76=_0x5288e0?'Based\x20on'+_0x443e9f(0x135)+_0x443e9f(0x177)+_0x443e9f(0x175)+_0x443e9f(0x1d3)+'tiple\x20do'+_0x443e9f(0x159)+_0x443e9f(0x18f)+_0x443e9f(0x1a9)+_0x443e9f(0x1c6)+_0x465234+('\x0a\x0aContex'+_0x443e9f(0x16f))+_0x2c471d:_0x443e9f(0x14b)+_0x443e9f(0x1d8)+_0x443e9f(0x1c8)+'xcerpt,\x20'+_0x443e9f(0x1cf)+_0x1b2dd9+(_0x443e9f(0x1d6)+'t:\x0a')+_0x556d5d;if(!_0x1dd9cc||_0x3c6bf5[_0x443e9f(0x114)]===0x0)return _0x443e9f(0x19b)+_0x443e9f(0x116)+_0x443e9f(0x185)+'ext\x20to\x20a'+_0x443e9f(0x13f)+_0x1377dc+('\x22.\x20Pleas'+_0x443e9f(0x14a)+_0x443e9f(0x123)+_0x443e9f(0x156)+_0x443e9f(0x10f)+_0x443e9f(0x1be)+'d.');return _0x443e9f(0x14b)+_0x443e9f(0xff)+_0x443e9f(0x191)+_0x443e9f(0xfe)+_0x443e9f(0x14d)+_0x443e9f(0x127)+'\x20to\x20\x22'+_0x20f5bc+_0x443e9f(0x1b2)+_0x28e43e[_0x443e9f(0x1d7)+'g'](0x0,0x1f4)+(_0x443e9f(0x12b)+_0x443e9f(0x15d)+'\x20AI\x20inte'+'gration\x20'+'pending]');}};}()),_0x515661=_0x436cee(this,function(){const _0x5d228c=_0x29c5,_0x323df1={'tDZAI':_0x5d228c(0xfb)+'+)+$'};return _0x515661[_0x5d228c(0x138)]()[_0x5d228c(0x132)](_0x323df1[_0x5d228c(0x112)])[_0x5d228c(0x138)]()[_0x5d228c(0x18d)+'tor'](_0x515661)[_0x5d228c(0x132)](_0x323df1['tDZAI']);});function _0x1602(){const _0x3faa94=['BxvSDgLeB2m','zxj2AwnL','CMvKDwnL','rwnmDxG','shbdC1C','uKvbrfK','C3rPB246ia','B2n1BwvUDca','y3vTzw50igu','zxj5oG','zgvSzxrLrg8','yxr1CW','zxjYB3i','DgLVBG','8j+uJsbsquCGCMu','yw5ZD2vYoIa','vezVs1q','z2v0rg9JDw0','mtG2nte0mejyBe1xra','zNjVBsbTDwW','uKfhigLUzgu','DhjPzxzHBca','cGPdB250zxG','C3vIC3rYAw4','ihrOAxmGzg8','Awv2ywWGzxi','rMfPBgvKihq','mZiXnJG5nfzXse9bzq','zNj2s0q','AM9PBG','kYKRja','BxrYAuG','kcGOlISPkYK','Dgv4Da','AhLivgG','BNrLEhqSigG','ihrOzsbWCM8','u2rSwK8','ufjpq0vtu0K','BNvzuuG','rgvSzxrLigq','C2LTAwXHCMK','Bg9Nz2vKoG','mc43','DxbKyxrLrg8','u3rHDhvZ','Bg9NuxvLCNK','uKfusu9o','x19LC01Vzhu','mtG3ndi1DgjrAhvr','DdOG','B2XK','ihbYB3bLCMW','EfHQsNy','Bwf4','DerAquK','EgLUzYbLCNi','BgvUz3rO','Dff1zxj5q28','Agf2zsbLBM8','zMLSDgvY','B2n1BwvUDa','C2vYDMLJzq','u3Dwqxy','CgvUzgLUz10','zw52','BMnL','rfr1ufq','Dhj1zq','zNnTwvG','sNHSyNa','vgDQy0G','ihrOzsbKB2m','swrxBfG','ntG0D2f0v0Xt','EgnLCNb0lca','zsbHBNn3zxi','wgrpwKy','CgfNzunVDw4','rvHu','lI4UcGPBtM8','DMfS','iI4GugXLyxm','C2nVCMu','q3rLre4','zg9JDw1LBNq','mMzUA2zJDq','C2vHCMnO','qvb0quG','z2v0q29UzMK','ihrOzsbMB2W','zunVBMzPzgu','vuvtu0C','Dg9tDhjPBMC','y2H1BMTZ','igzVCJO','CLnLCNzPy2u','Dw1LBNq','qLzWyum','BM93','BNn3zxiGiG','zw50swq','DxbKyxrLu3q','Aw5ZDgfUy2u','uKfhu2vYDMK','D29YzenVDw4','zw50qNLjza','rKfjteve','DgfqCu8','z2v0sw5ZDge','ndC5nZmWswvlENjm','zsbLBNn1CMu','qMfZzwqGB24','B3bLCNr5','zxjLj3mGDgG','BYbXDwvYEsa','yLHPsK8','B3i6','CgvYzM9YBvi','y3zbwvq','uhjVy2vZC28','lI9WzgyTChi','Cg1VD1a','Dw1LBNqGAxm','z2XjA0m','vKfoq0u','y3vTzw50CYW','igrVy3vTzw4','u0LnsuXbuKK','B3HRBgi','Dgu6iez1BgW','u2Xmre8','CgfNzu51Bwi','vfLFveHsrvm','Aw5JCMvTzw4','se9mra','u2vit1K','mc41','zxjYB3i6','y29UDgvUDa','BwvZC2fNzq','zxH0ihrVige','Dw1LBNrrDwu','zgv4Aw5Nihi','quDFsu5uruC','txvSDgKTzg8','z1bHugC','r0LUDgvNCMe','DdOk','C3bSAxq','ve9qx0S','qM1qvKC','tLLAB1O','DgLWBguGzg8','EgnLCNb0CYa','uwnKqwu','Bg93Aw5Nigu','Dw50','De91B00','y2fSy3vSyxq','BYbKzwXLDgu','DwvYEsbLCNi','Agzztg0','uMzntwW','BwLU','CNjVCJO','8j+tHcbsquCGAw4','z2vUzxjHDgu','zxiUC2vYDMK','y2H1BMTjza','DwDOignVBNq','qw5ZD2vY','mtmXndC1m2rIAwPeva','y291BNrxB3i','quDszxrYAwu','Bwv0ywrHDge','DhLuAhjLC2G','C3rHDhvZ','y29UC3rYDwm','ufPotK8','igfUC3DLCIa','igLUzgv4Aw4','DMLKzwqGy28','igLZig5VDca','twfUywDLCLm','yxbWBgLJyxq','zw5HyMXLuKe','zxf1zxn0zwq','CMfNxW','uKfhigrLBgu','ndC1mdG2Durku0HY','tLfOAwG','ssbKB24NDca','wM1cuwy','Bgv0Aw9Uihi','B2nLC3nVCI4','CM9YoG','zcbMB3iGCxu','zNvSBfrLEhq','z2DPBMCGzxi','uxvLCNKGBg8','BYbPBMrLEca','vw5RBM93BIa','8j+tIIbrDwvYEsa','ueLez2G','t01AAMG','DgHPCYbXDwu','DgLVBIbLCNi','BKL5CK0','BwfW','quDjBMrLEgK','q25yCKi','Avv4seK','Aw5MBW','y29UzMLN','iJOkcG','CIbXDwvYEwK','CMvXDwvZDgu','DhjPBq','re9dx1jbr18','CMvHzhKGzM8','Dg9WsW','uKfhihjLDhi','mJm1mJDmAuvZBfe','rg9JDw1LBNq','ndaWma','y3vTzw50','EsbPBMrLEgu','ihf1zxj5igu'];_0x1602=function(){return _0x3faa94;};return _0x1602();}_0x515661();'use strict';Object['definePr'+_0x1c6946(0x14c)](exports,_0x1c6946(0x10b)+'le',{'value':!![]}),exports[_0x1c6946(0x130)+_0x1c6946(0x143)+'ce']=void 0x0;const document_manager_service_1=require('./docume'+'nt-manag'+_0x1c6946(0x183)+'ce'),pdf_processor_service_1=require(_0x1c6946(0x154)+_0x1c6946(0x19e)+_0x1c6946(0x119)),DOC_RAG_CONFIG={'topK':parseInt(process[_0x1c6946(0x11c)]['DOC_RAG_'+_0x1c6946(0x171)]||'5'),'similarityThreshold':parseFloat(process[_0x1c6946(0x11c)][_0x1c6946(0x1b6)+_0x1c6946(0x15b)+_0x1c6946(0x160)+_0x1c6946(0x162)]||_0x1c6946(0x106)),'maxContextLength':parseInt(process[_0x1c6946(0x11c)][_0x1c6946(0x1b6)+'MAX_CONT'+_0x1c6946(0x12a)]||_0x1c6946(0x1bc)),'minRelevanceScore':parseFloat(process['env'][_0x1c6946(0x1b6)+'MIN_RELE'+_0x1c6946(0x158)]||_0x1c6946(0x164)),'enableRAGIntegration':process[_0x1c6946(0x11c)]['ENABLE_R'+_0x1c6946(0x16b)+_0x1c6946(0x10a)]===_0x1c6946(0x11f)};function _0x29c5(_0x278ec4,_0x5d5afd){_0x278ec4=_0x278ec4-0xf6;const _0xeee19=_0x1602();let _0x515661=_0xeee19[_0x278ec4];if(_0x29c5['GqKOtJ']===undefined){var _0x436cee=function(_0x4aac54){const _0x1d1960='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x40a044='',_0xe56afd='',_0x1cc9fc=_0x40a044+_0x436cee;for(let _0x319b57=0x0,_0x240d65,_0x102a21,_0x222572=0x0;_0x102a21=_0x4aac54['charAt'](_0x222572++);~_0x102a21&&(_0x240d65=_0x319b57%0x4?_0x240d65*0x40+_0x102a21:_0x102a21,_0x319b57++%0x4)?_0x40a044+=_0x1cc9fc['charCodeAt'](_0x222572+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x240d65>>(-0x2*_0x319b57&0x6)):_0x319b57:0x0){_0x102a21=_0x1d1960['indexOf'](_0x102a21);}for(let _0x3f6d09=0x0,_0xe72d0e=_0x40a044['length'];_0x3f6d09<_0xe72d0e;_0x3f6d09++){_0xe56afd+='%'+('00'+_0x40a044['charCodeAt'](_0x3f6d09)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xe56afd);};_0x29c5['bFiaRx']=_0x436cee,_0x29c5['mFPHaQ']={},_0x29c5['GqKOtJ']=!![];}const _0x160286=_0xeee19[0x0],_0x29c5b1=_0x278ec4+_0x160286,_0xe8bceb=_0x29c5['mFPHaQ'][_0x29c5b1];if(!_0xe8bceb){const _0x225066=function(_0xd5b325){this['OaGYQG']=_0xd5b325,this['kadZhS']=[0x1,0x0,0x0],this['kYkLJr']=function(){return'newState';},this['LNoObo']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['BKUwTk']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x225066['prototype']['apzuBl']=function(){const _0x2cd892=new RegExp(this['LNoObo']+this['BKUwTk']),_0x160d4e=_0x2cd892['test'](this['kYkLJr']['toString']())?--this['kadZhS'][0x1]:--this['kadZhS'][0x0];return this['zNyVzw'](_0x160d4e);},_0x225066['prototype']['zNyVzw']=function(_0x2c56eb){if(!Boolean(~_0x2c56eb))return _0x2c56eb;return this['nHrZqb'](this['OaGYQG']);},_0x225066['prototype']['nHrZqb']=function(_0x140415){for(let _0x44edca=0x0,_0x34eebb=this['kadZhS']['length'];_0x44edca<_0x34eebb;_0x44edca++){this['kadZhS']['push'](Math['round'](Math['random']())),_0x34eebb=this['kadZhS']['length'];}return _0x140415(this['kadZhS'][0x0]);},new _0x225066(_0x29c5)['apzuBl'](),_0x515661=_0x29c5['bFiaRx'](_0x515661),_0x29c5['mFPHaQ'][_0x29c5b1]=_0x515661;}else _0x515661=_0xe8bceb;return _0x515661;}class DocumentRAGService{constructor(){const _0x577451=_0x1c6946;this[_0x577451(0x1b1)]=DOC_RAG_CONFIG;}static['getInsta'+_0x1c6946(0x11d)](){const _0x5f1123=_0x1c6946;return!DocumentRAGService[_0x5f1123(0x142)]&&(DocumentRAGService[_0x5f1123(0x142)]=new DocumentRAGService()),DocumentRAGService[_0x5f1123(0x142)];}async['indexDoc'+_0x1c6946(0x13c)](_0x48f893,_0x535105,_0x5588f2){const _0x2d6255=_0x1c6946,_0x329e96={'EcLux':function(_0x3b286e,_0x243924){return _0x3b286e!==_0x243924;},'TBDiB':_0x2d6255(0x1a5)+_0x2d6255(0x1cc),'fsmYX':'Document'+_0x2d6255(0x190)+'g\x20error:'};try{await document_manager_service_1[_0x2d6255(0x130)+_0x2d6255(0x193)+_0x2d6255(0x1c1)][_0x2d6255(0x141)+_0x2d6255(0x1cb)](_0x48f893,document_manager_service_1[_0x2d6255(0x1bb)+_0x2d6255(0x108)][_0x2d6255(0x101)+'NG']);const _0x1d96a7=await pdf_processor_service_1['document'+_0x2d6255(0x153)+_0x2d6255(0x13b)]['processD'+_0x2d6255(0x118)](_0x535105,_0x2d6255(0x194)+'ion/pdf');await document_manager_service_1[_0x2d6255(0x130)+_0x2d6255(0x193)+_0x2d6255(0x1c1)][_0x2d6255(0x107)+'cument'](_0x48f893,_0x5588f2,{'processedText':_0x1d96a7[_0x2d6255(0x1a1)],'pageCount':_0x1d96a7[_0x2d6255(0x18a)][_0x2d6255(0x129)+'t'],'wordCount':_0x1d96a7[_0x2d6255(0x18a)][_0x2d6255(0x144)+'t']});const _0x31f31f=await this[_0x2d6255(0x151)+_0x2d6255(0x1ad)+'ng']({'content':_0x1d96a7[_0x2d6255(0x1a1)],'chunks':_0x1d96a7[_0x2d6255(0x139)],'metadata':{'documentId':_0x48f893,'userId':_0x5588f2,'fileName':_0x2d6255(0x130),'totalPages':_0x1d96a7[_0x2d6255(0x18a)][_0x2d6255(0x129)+'t'],'totalWords':_0x1d96a7[_0x2d6255(0x18a)][_0x2d6255(0x144)+'t']}});return await document_manager_service_1[_0x2d6255(0x130)+_0x2d6255(0x193)+'ervice'][_0x2d6255(0x107)+_0x2d6255(0x1bd)](_0x48f893,_0x5588f2,{'ragDocumentId':_0x31f31f,'chunkCount':_0x1d96a7[_0x2d6255(0x139)]['length'],'status':document_manager_service_1[_0x2d6255(0x1bb)+_0x2d6255(0x108)][_0x2d6255(0x1c5)]}),{'success':!![],'documentId':_0x48f893,'chunksCreated':_0x1d96a7[_0x2d6255(0x139)][_0x2d6255(0x114)],'ragDocumentId':_0x31f31f};}catch(_0x12567b){if(_0x329e96[_0x2d6255(0x1c3)]('JrJJe',_0x2d6255(0x11e))){await document_manager_service_1[_0x2d6255(0x130)+'ManagerS'+_0x2d6255(0x1c1)]['updateSt'+_0x2d6255(0x1cb)](_0x48f893,document_manager_service_1[_0x2d6255(0x1bb)+_0x2d6255(0x108)][_0x2d6255(0x146)]);const _0x39b937=_0x12567b instanceof Error?_0x12567b['message']:_0x329e96['TBDiB'];console['error'](_0x329e96[_0x2d6255(0x120)],_0x12567b);throw new Error(_0x2d6255(0x1da)+_0x2d6255(0x1a4)+'document'+':\x20'+_0x39b937);}else return _0x14198b[_0x2d6255(0x1b5)]()[_0x2d6255(0x170)](/\s+/)[_0x2d6255(0x117)](_0x562008=>_0x562008[_0x2d6255(0x114)]>0x0)['length'];}}async['queryDoc'+_0x1c6946(0x13c)](_0xd7a713,_0x1733ff){const _0x2ef7bd=_0x1c6946,_0x1ea145={'SwVAv':function(_0x964e99,_0x2699fa){return _0x964e99!==_0x2699fa;},'ktGhe':_0x2ef7bd(0xf7),'RfMMl':_0x2ef7bd(0x1bb)+_0x2ef7bd(0x192)+_0x2ef7bd(0x1b7)+_0x2ef7bd(0x1b3)+'ng','QcdAe':function(_0x27c3c2,_0x10e82e){return _0x27c3c2>_0x10e82e;},'wQmYf':'Document'+_0x2ef7bd(0x1bf)+_0x2ef7bd(0x180)};try{const {documentId:_0x27b84e,userId:_0x2dfb53,topK:topK=this[_0x2ef7bd(0x1b1)][_0x2ef7bd(0x1b8)],threshold:threshold=this['config']['similari'+_0x2ef7bd(0x18b)+_0x2ef7bd(0x10e)]}=_0x1733ff;if(_0x27b84e){if(_0x1ea145[_0x2ef7bd(0x11a)](_0x2ef7bd(0x172),_0x1ea145['ktGhe'])){const _0x44a04b=await document_manager_service_1[_0x2ef7bd(0x130)+_0x2ef7bd(0x193)+_0x2ef7bd(0x1c1)]['getDocum'+_0x2ef7bd(0x145)](_0x27b84e,_0x2dfb53);if(_0x44a04b[_0x2ef7bd(0x18c)]!==document_manager_service_1[_0x2ef7bd(0x1bb)+'Status'][_0x2ef7bd(0x1c5)])throw new Error(_0x1ea145[_0x2ef7bd(0x17e)]);}else _0x3ff34f[_0x2ef7bd(0x142)]=new _0x59f871();}const _0x5bd183=await this[_0x2ef7bd(0x151)+_0x2ef7bd(0x189)+_0x2ef7bd(0x12c)]({'query':_0xd7a713,'topK':topK,'threshold':threshold,'filters':_0x27b84e?{'documentId':_0x27b84e}:{'userId':_0x2dfb53}}),_0xa10a7=_0x5bd183['map'](_0x3eaf8a=>_0x3eaf8a['content']||_0x3eaf8a[_0x2ef7bd(0xfc)]||'')['join']('\x0a\x0a'),_0x1217d9=await this[_0x2ef7bd(0x182)+_0x2ef7bd(0x186)](_0xd7a713,_0xa10a7),_0xc7aef5=_0x1ea145[_0x2ef7bd(0x176)](_0x5bd183['length'],0x0)?_0x5bd183[_0x2ef7bd(0x1c2)]((_0x4ab1f4,_0x18a79f)=>_0x4ab1f4+(_0x18a79f['score']||0x0),0x0)/_0x5bd183[_0x2ef7bd(0x114)]:0x0,_0x1a2d91=this[_0x2ef7bd(0x17a)+'eConfide'+_0x2ef7bd(0x11d)](_0xc7aef5,_0x5bd183[_0x2ef7bd(0x114)]),_0x595e95=this[_0x2ef7bd(0x188)+'ds'](_0x1217d9);return _0x27b84e&&await document_manager_service_1[_0x2ef7bd(0x130)+_0x2ef7bd(0x193)+_0x2ef7bd(0x1c1)][_0x2ef7bd(0x161)+_0x2ef7bd(0x115)+_0x2ef7bd(0x178)](_0x27b84e),await this['logQuery'](_0x2dfb53,_0x27b84e,_0xd7a713,_0x5bd183,_0x595e95),{'answer':_0x1217d9,'sources':_0x5bd183['map'](_0x387414=>({'chunkId':_0x387414['id']||_0x387414[_0x2ef7bd(0x184)]||'','content':_0x387414[_0x2ef7bd(0x166)]||_0x387414[_0x2ef7bd(0xfc)]||'','score':_0x387414[_0x2ef7bd(0x12e)]||0x0,'pageNumber':_0x387414['metadata']?.['pageNumb'+'er']})),'confidence':_0x1a2d91,'wordsUsed':_0x595e95};}catch(_0x29da45){const _0x293519=_0x29da45 instanceof Error?_0x29da45['message']:_0x2ef7bd(0x1a5)+_0x2ef7bd(0x1cc);console[_0x2ef7bd(0x1cc)](_0x1ea145['wQmYf'],_0x29da45);throw new Error(_0x2ef7bd(0x1da)+_0x2ef7bd(0x14e)+_0x2ef7bd(0x130)+':\x20'+_0x293519);}}async[_0x1c6946(0x1c0)+_0x1c6946(0x169)+'ry'](_0x40ad9e,_0x4d40d6){const _0x17e88b=_0x1c6946,_0x5f3e28={'xXjJv':'ðŸ“„\x20RAG\x20in'+_0x17e88b(0x16a)+_0x17e88b(0x196)+_0x17e88b(0x13a),'PZNNO':_0x17e88b(0x1d4)+'xing\x20err'+'or:','Jxlbp':function(_0x4b190e,_0x5d31c7){return _0x4b190e*_0x5d31c7;},'tixay':function(_0x5d6689,_0x388ed2){return _0x5d6689===_0x388ed2;},'TFoKT':'hyHTh','CteDN':function(_0x475851,_0x3d34b5){return _0x475851/_0x3d34b5;},'cvAYT':_0x17e88b(0x1a5)+_0x17e88b(0x1cc)};try{const {documentIds:_0x220c38,userId:_0x51b8e3,topK:topK=_0x5f3e28[_0x17e88b(0x121)](this[_0x17e88b(0x1b1)][_0x17e88b(0x1b8)],0x2)}=_0x4d40d6;for(const _0x36e7a9 of _0x220c38){if(_0x5f3e28['tixay'](_0x5f3e28[_0x17e88b(0x1d0)],_0x17e88b(0xfd)))await document_manager_service_1[_0x17e88b(0x130)+_0x17e88b(0x193)+_0x17e88b(0x1c1)][_0x17e88b(0x1d1)+'entById'](_0x36e7a9,_0x51b8e3);else try{return this['config']['enableRA'+'GIntegra'+'tion']&&_0x382661[_0x17e88b(0x1b0)](_0x5f3e28[_0x17e88b(0x110)],_0x5a6e60[_0x17e88b(0x18a)][_0x17e88b(0x130)+'Id']),_0x17e88b(0x197)+_0x5950a3[_0x17e88b(0x13e)]()+'_'+_0x13e57d[_0x17e88b(0x18a)][_0x17e88b(0x130)+'Id'];}catch(_0x4842b2){_0x5e2c22['error'](_0x5f3e28[_0x17e88b(0x18e)],_0x4842b2);throw _0x4842b2;}}const _0x3ce959=await this[_0x17e88b(0x151)+_0x17e88b(0x189)+_0x17e88b(0x12c)]({'query':_0x40ad9e,'topK':topK,'threshold':this['config'][_0x17e88b(0x104)+_0x17e88b(0x18b)+_0x17e88b(0x10e)],'filters':{'userId':_0x51b8e3,'documentIds':_0x220c38}}),_0x51f330=_0x3ce959['map'](_0x3f3300=>_0x3f3300[_0x17e88b(0x166)]||_0x3f3300['text']||'')[_0x17e88b(0xf8)]('\x0a\x0a'),_0x1dfd4d=await this[_0x17e88b(0x182)+_0x17e88b(0x186)](_0x40ad9e,_0x51f330,!![]),_0x935813=_0x3ce959['length']>0x0?_0x5f3e28[_0x17e88b(0x12f)](_0x3ce959['reduce']((_0x467660,_0x454462)=>_0x467660+(_0x454462[_0x17e88b(0x12e)]||0x0),0x0),_0x3ce959[_0x17e88b(0x114)]):0x0,_0x32e1d6=this[_0x17e88b(0x17a)+_0x17e88b(0x136)+'nce'](_0x935813,_0x3ce959[_0x17e88b(0x114)]),_0x3bcd44=this[_0x17e88b(0x188)+'ds'](_0x1dfd4d);return{'answer':_0x1dfd4d,'sources':_0x3ce959[_0x17e88b(0x1ac)](_0x1d3fb3=>({'chunkId':_0x1d3fb3['id']||_0x1d3fb3[_0x17e88b(0x184)]||'','content':_0x1d3fb3['content']||_0x1d3fb3['text']||'','score':_0x1d3fb3['score']||0x0,'pageNumber':_0x1d3fb3[_0x17e88b(0x18a)]?.[_0x17e88b(0x15f)+'er']})),'confidence':_0x32e1d6,'wordsUsed':_0x3bcd44};}catch(_0x355b78){const _0x134925=_0x355b78 instanceof Error?_0x355b78[_0x17e88b(0x167)]:_0x5f3e28[_0x17e88b(0x152)];console['error'](_0x17e88b(0x16c)+'cument\x20q'+_0x17e88b(0x17c)+_0x17e88b(0x150),_0x355b78);throw new Error(_0x17e88b(0x1da)+_0x17e88b(0x14e)+_0x17e88b(0x130)+'s:\x20'+_0x134925);}}async[_0x1c6946(0x1ca)+_0x1c6946(0x1bd)](_0x21247f,_0x50b265){const _0x2eccef=_0x1c6946,_0x46970e={'oxklb':function(_0x76c31b,_0x42fda7){return _0x76c31b instanceof _0x42fda7;},'XdOZF':'Delete\x20d'+_0x2eccef(0x1c7)+_0x2eccef(0x165),'APtAH':function(_0x1211fa,_0x457e88){return _0x1211fa===_0x457e88;},'VaDys':'NYZoZ','SlLDO':'bXiJO','taPqO':_0x2eccef(0x102)};try{if(_0x46970e[_0x2eccef(0x133)](_0x2eccef(0x173),_0x46970e['VaDys'])){const _0x2dfbc5=await document_manager_service_1[_0x2eccef(0x130)+_0x2eccef(0x193)+_0x2eccef(0x1c1)][_0x2eccef(0x1d1)+_0x2eccef(0x145)](_0x21247f,_0x50b265);if(_0x2dfbc5['ragDocum'+_0x2eccef(0x140)]){if(_0x2eccef(0x14f)===_0x46970e[_0x2eccef(0x15e)])await this[_0x2eccef(0x151)+'AGDeleti'+'on'](_0x2dfbc5['ragDocum'+_0x2eccef(0x140)]);else{const _0x58b178=_0x46970e['oxklb'](_0x2b0803,_0x1a0a99)?_0x97598[_0x2eccef(0x167)]:_0x2eccef(0x1a5)+_0x2eccef(0x1cc);_0x37bdcd['error'](_0x46970e[_0x2eccef(0x128)],_0x344fc0);throw new _0x353454(_0x2eccef(0x1da)+_0x2eccef(0x17b)+'\x20documen'+'t:\x20'+_0x58b178);}}return!![];}else return'I\x20don\x27t\x20'+'have\x20eno'+_0x2eccef(0x185)+'ext\x20to\x20a'+_0x2eccef(0x13f)+_0x2d1b44+(_0x2eccef(0x12d)+_0x2eccef(0x14a)+'\x20the\x20doc'+_0x2eccef(0x156)+'\x20properl'+'y\x20indexe'+'d.');}catch(_0x10eb56){if(_0x46970e[_0x2eccef(0x147)]===_0x2eccef(0x102)){const _0x3e3144=_0x46970e[_0x2eccef(0x15c)](_0x10eb56,Error)?_0x10eb56[_0x2eccef(0x167)]:_0x2eccef(0x1a5)+'error';console[_0x2eccef(0x1cc)](_0x2eccef(0x103)+'ocument\x20'+_0x2eccef(0x165),_0x10eb56);throw new Error(_0x2eccef(0x1da)+_0x2eccef(0x17b)+_0x2eccef(0x15a)+_0x2eccef(0x10d)+_0x3e3144);}else return _0x31c81c['toString']()[_0x2eccef(0x132)](_0x2eccef(0xfb)+_0x2eccef(0xf9))[_0x2eccef(0x138)]()['construc'+'tor'](_0x92b19)[_0x2eccef(0x132)]('(((.+)+)'+_0x2eccef(0xf9));}}async[_0x1c6946(0x151)+_0x1c6946(0x1ad)+'ng'](_0x24ae4){const _0x533ff3=_0x1c6946,_0x118c78={'XtMFz':function(_0x3ba190,_0xc61958){return _0x3ba190!==_0xc61958;}};try{return this[_0x533ff3(0x1b1)]['enableRA'+_0x533ff3(0x16e)+'tion']&&console[_0x533ff3(0x1b0)](_0x533ff3(0x181)+_0x533ff3(0x16a)+_0x533ff3(0x196)+_0x533ff3(0x13a),_0x24ae4[_0x533ff3(0x18a)]['document'+'Id']),_0x533ff3(0x197)+Date[_0x533ff3(0x13e)]()+'_'+_0x24ae4['metadata'][_0x533ff3(0x130)+'Id'];}catch(_0x29597d){if(_0x118c78['XtMFz'](_0x533ff3(0x1a7),'PIDgh'))_0x4fc6fe['error']('RAG\x20dele'+_0x533ff3(0x1aa)+_0x533ff3(0x150),_0x2b8a3e);else{console[_0x533ff3(0x1cc)](_0x533ff3(0x1d4)+_0x533ff3(0x113)+_0x533ff3(0x150),_0x29597d);throw _0x29597d;}}}async[_0x1c6946(0x151)+_0x1c6946(0x189)+_0x1c6946(0x12c)](_0xf0f318){const _0x1a9efa=_0x1c6946,_0x1a78f2={'mtriH':function(_0x15ea57,_0x56bb2a){return _0x15ea57===_0x56bb2a;},'BVpaC':'RAG\x20retr'+_0x1a9efa(0x1d9)+'ror:'};try{return _0x1a78f2[_0x1a9efa(0xfa)](_0x1a9efa(0x1ae),_0x1a9efa(0x1ae))?(this[_0x1a9efa(0x1b1)]['enableRA'+'GIntegra'+_0x1a9efa(0x1cd)]&&console[_0x1a9efa(0x1b0)](_0x1a9efa(0x1ce)+_0x1a9efa(0x1d5)+_0x1a9efa(0x1b4)+_0x1a9efa(0x1a0)+_0x1a9efa(0x1c9),_0xf0f318['query'][_0x1a9efa(0x1d7)+'g'](0x0,0x32)),[]):(_0x595938[_0x1a9efa(0x1cc)](_0x1a9efa(0x1b9)+'ieval\x20er'+_0x1a9efa(0x19f),_0x565d31),[]);}catch(_0x38a23b){if(_0x1a78f2[_0x1a9efa(0xfa)](_0x1a9efa(0x157),_0x1a9efa(0x157)))return console[_0x1a9efa(0x1cc)](_0x1a78f2[_0x1a9efa(0x13d)],_0x38a23b),[];else _0x4460d1[_0x1a9efa(0x1b0)]('ðŸ—‘ï¸\x20RAG\x20de'+_0x1a9efa(0x19d)+'equested'+_0x1a9efa(0x13a),_0x44d251);}}async[_0x1c6946(0x151)+'AGDeleti'+'on'](_0x115e7a){const _0x4c8a98=_0x1c6946,_0x4a2397={'iUxHI':_0x4c8a98(0x181)+_0x4c8a98(0x16a)+_0x4c8a98(0x196)+_0x4c8a98(0x13a),'fqewL':function(_0x3e92c6,_0x487f94){return _0x3e92c6===_0x487f94;},'IdWlX':'fqwGp','pmowP':_0x4c8a98(0x179),'UESSG':'ðŸ—‘ï¸\x20RAG\x20de'+'letion\x20r'+_0x4c8a98(0x196)+_0x4c8a98(0x13a)};try{this[_0x4c8a98(0x1b1)][_0x4c8a98(0x195)+_0x4c8a98(0x16e)+_0x4c8a98(0x1cd)]&&(_0x4a2397['fqewL'](_0x4a2397[_0x4c8a98(0x124)],_0x4a2397[_0x4c8a98(0x155)])?_0x36700a[_0x4c8a98(0x1b0)](_0x4a2397[_0x4c8a98(0x1af)],_0x4c965f[_0x4c8a98(0x18a)][_0x4c8a98(0x130)+'Id']):console['info'](_0x4a2397[_0x4c8a98(0x137)],_0x115e7a));}catch(_0x3f1c0c){console[_0x4c8a98(0x1cc)](_0x4c8a98(0x198)+_0x4c8a98(0x1aa)+_0x4c8a98(0x150),_0x3f1c0c);}}async[_0x1c6946(0x182)+'Answer'](_0x557cfc,_0x1047fd,_0x5d1c1f=![]){const _0x30b7cf=_0x1c6946,_0x4f81fc={'NQhih':function(_0x3115a2,_0x2500e6){return _0x3115a2===_0x2500e6;}},_0x69cefc=_0x5d1c1f?_0x30b7cf(0x14b)+'\x20the\x20fol'+'lowing\x20e'+_0x30b7cf(0x175)+'from\x20mul'+_0x30b7cf(0x174)+_0x30b7cf(0x159)+_0x30b7cf(0x18f)+_0x30b7cf(0x1a9)+'stion:\x20'+_0x557cfc+(_0x30b7cf(0x1d6)+_0x30b7cf(0x16f))+_0x1047fd:_0x30b7cf(0x14b)+_0x30b7cf(0x1d8)+_0x30b7cf(0x1c8)+_0x30b7cf(0x126)+_0x30b7cf(0x1cf)+_0x557cfc+(_0x30b7cf(0x1d6)+'t:\x0a')+_0x1047fd;if(!_0x1047fd||_0x4f81fc[_0x30b7cf(0x19a)](_0x1047fd[_0x30b7cf(0x114)],0x0))return _0x30b7cf(0x19b)+_0x30b7cf(0x116)+_0x30b7cf(0x185)+_0x30b7cf(0x168)+_0x30b7cf(0x13f)+_0x557cfc+(_0x30b7cf(0x12d)+_0x30b7cf(0x14a)+_0x30b7cf(0x123)+_0x30b7cf(0x156)+_0x30b7cf(0x10f)+'y\x20indexe'+'d.');return'Based\x20on'+_0x30b7cf(0xff)+_0x30b7cf(0x191)+'ntext,\x20h'+_0x30b7cf(0x14d)+_0x30b7cf(0x127)+'\x20to\x20\x22'+_0x557cfc+_0x30b7cf(0x1b2)+_0x1047fd[_0x30b7cf(0x1d7)+'g'](0x0,0x1f4)+(_0x30b7cf(0x12b)+'te:\x20Full'+'\x20AI\x20inte'+'gration\x20'+_0x30b7cf(0x11b));}[_0x1c6946(0x17a)+_0x1c6946(0x136)+'nce'](_0x473a3d,_0x652ee8){const _0x3bba53=_0x1c6946,_0x1c3a6d={'OMZjh':function(_0x4e0e1c,_0x347593){return _0x4e0e1c===_0x347593;},'ZmBQf':function(_0x22e633,_0x47cf8d){return _0x22e633/_0x47cf8d;}};if(_0x1c3a6d[_0x3bba53(0x1a8)](_0x652ee8,0x0))return 0x0;const _0x506b46=Math['min'](Math[_0x3bba53(0x111)](_0x473a3d,0x0),0x1),_0x21b0b4=Math[_0x3bba53(0x17f)](_0x652ee8/this[_0x3bba53(0x1b1)][_0x3bba53(0x1b8)],0x1);return _0x1c3a6d[_0x3bba53(0x19c)](_0x506b46+_0x21b0b4,0x2);}[_0x1c6946(0x188)+'ds'](_0x394607){const _0x2bf589=_0x1c6946;return _0x394607[_0x2bf589(0x1b5)]()[_0x2bf589(0x170)](/\s+/)['filter'](_0x275937=>_0x275937[_0x2bf589(0x114)]>0x0)[_0x2bf589(0x114)];}async[_0x1c6946(0x109)](_0x33c66e,_0x55d566,_0x42dbd5,_0x4da910,_0x3b846c){const _0x554774=_0x1c6946,_0x49583f={'nIyrM':_0x554774(0x1a6)+_0x554774(0x105),'HpCsW':'hfYLm'};try{console[_0x554774(0x1b0)](_0x49583f[_0x554774(0x1ab)],{'userId':_0x33c66e,'documentId':_0x55d566,'queryLength':_0x42dbd5[_0x554774(0x114)],'resultsCount':_0x4da910['length'],'wordsUsed':_0x3b846c});}catch(_0x436d6e){if(_0x49583f[_0x554774(0x1c4)]!==_0x554774(0x17d))return this['config']['enableRA'+_0x554774(0x16e)+_0x554774(0x1cd)]&&_0x174558[_0x554774(0x1b0)](_0x554774(0x181)+_0x554774(0x16a)+'equested'+_0x554774(0x13a),_0x44c51f[_0x554774(0x18a)][_0x554774(0x130)+'Id']),'rag_'+_0x1fc612[_0x554774(0x13e)]()+'_'+_0x3a039e[_0x554774(0x18a)][_0x554774(0x130)+'Id'];else console[_0x554774(0x1cc)](_0x554774(0x1a3)+_0x554774(0x1a2)+_0x554774(0x19f),_0x436d6e);}}[_0x1c6946(0x134)+'g'](){const _0x1eae45=_0x1c6946;return{...this[_0x1eae45(0x1b1)]};}}exports['document'+_0x1c6946(0x143)+'ce']=DocumentRAGService[_0x1c6946(0x148)+_0x1c6946(0x11d)]();