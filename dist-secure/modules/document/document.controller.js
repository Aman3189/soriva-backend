const _0x31b7d9=_0x1e2e;(function(_0x30c733,_0x529ed0){const _0x36edc4=_0x1e2e,_0xccda7a=_0x30c733();while(!![]){try{const _0x12aeef=parseInt(_0x36edc4(0x194))/0x1*(-parseInt(_0x36edc4(0x127))/0x2)+parseInt(_0x36edc4(0x12d))/0x3*(-parseInt(_0x36edc4(0x235))/0x4)+-parseInt(_0x36edc4(0x23f))/0x5+parseInt(_0x36edc4(0x1e2))/0x6+parseInt(_0x36edc4(0x28a))/0x7+parseInt(_0x36edc4(0x2a1))/0x8+parseInt(_0x36edc4(0x1d9))/0x9*(-parseInt(_0x36edc4(0x137))/0xa);if(_0x12aeef===_0x529ed0)break;else _0xccda7a['push'](_0xccda7a['shift']());}catch(_0x48b736){_0xccda7a['push'](_0xccda7a['shift']());}}}(_0x23ab,0x9d172));const _0x3a4cd1=(function(){const _0xcc0590=_0x1e2e,_0x244447={'fnXdR':_0xcc0590(0x245),'UntoV':'STARTER'};let _0x536aeb=!![];return function(_0x3ba205,_0x4eae79){const _0x4e335b=_0x536aeb?function(){const _0x3174a9=_0x1e2e,_0x18c1a9={'wedBa':_0x244447[_0x3174a9(0x14d)],'spdrZ':_0x3174a9(0x133),'RDKNL':_0x244447['UntoV']};if(_0x3174a9(0x19e)===_0x3174a9(0x19e)){if(_0x4eae79){const res=_0x4eae79[_0x3174a9(0x153)](_0x3ba205,arguments);return _0x4eae79=null,res;}}else switch(_0x3e59a7?.[_0x3174a9(0x10c)+_0x3174a9(0x1b4)]()){case _0x3174a9(0x12b):return _0x3174a9(0x12b);case _0x3174a9(0x245):return _0x18c1a9[_0x3174a9(0x1af)];case'APEX':case _0x3174a9(0x25b)+'N':return _0x18c1a9[_0x3174a9(0x14e)];default:return _0x18c1a9[_0x3174a9(0x1b7)];}}:function(){};return _0x536aeb=![],_0x4e335b;};}()),_0x309df1=_0x3a4cd1(this,function(){const _0x5ed2cf=_0x1e2e,_0x276075={'pwbMS':'(((.+)+)'+_0x5ed2cf(0x1f1)};return _0x309df1[_0x5ed2cf(0x25d)]()['search'](_0x276075[_0x5ed2cf(0x1f8)])[_0x5ed2cf(0x25d)]()[_0x5ed2cf(0x181)+_0x5ed2cf(0x221)](_0x309df1)[_0x5ed2cf(0x165)](_0x276075[_0x5ed2cf(0x1f8)]);});_0x309df1();function _0x1e2e(_0x16471f,_0x26beec){_0x16471f=_0x16471f-0xc6;const _0x543975=_0x23ab();let _0x309df1=_0x543975[_0x16471f];if(_0x1e2e['KyPPan']===undefined){var _0x3a4cd1=function(_0x81b195){const _0x5c8768='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1048a4='',_0x4945cc='',_0x304192=_0x1048a4+_0x3a4cd1;for(let _0x50d578=0x0,_0x3627fd,_0xda37ef,_0x17769d=0x0;_0xda37ef=_0x81b195['charAt'](_0x17769d++);~_0xda37ef&&(_0x3627fd=_0x50d578%0x4?_0x3627fd*0x40+_0xda37ef:_0xda37ef,_0x50d578++%0x4)?_0x1048a4+=_0x304192['charCodeAt'](_0x17769d+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3627fd>>(-0x2*_0x50d578&0x6)):_0x50d578:0x0){_0xda37ef=_0x5c8768['indexOf'](_0xda37ef);}for(let _0x3437c5=0x0,_0x321046=_0x1048a4['length'];_0x3437c5<_0x321046;_0x3437c5++){_0x4945cc+='%'+('00'+_0x1048a4['charCodeAt'](_0x3437c5)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4945cc);};_0x1e2e['pcrjdW']=_0x3a4cd1,_0x1e2e['LPeUTV']={},_0x1e2e['KyPPan']=!![];}const _0x23ab24=_0x543975[0x0],_0x1e2e57=_0x16471f+_0x23ab24,_0x11b634=_0x1e2e['LPeUTV'][_0x1e2e57];if(!_0x11b634){const _0x44078f=function(_0x23d411){this['kOpeji']=_0x23d411,this['hcmzuQ']=[0x1,0x0,0x0],this['GScEwP']=function(){return'newState';},this['jAHrLM']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['tWTXWt']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x44078f['prototype']['zxZRKr']=function(){const _0x2cf11f=new RegExp(this['jAHrLM']+this['tWTXWt']),_0x400e1d=_0x2cf11f['test'](this['GScEwP']['toString']())?--this['hcmzuQ'][0x1]:--this['hcmzuQ'][0x0];return this['vJJVmY'](_0x400e1d);},_0x44078f['prototype']['vJJVmY']=function(_0x26cf50){if(!Boolean(~_0x26cf50))return _0x26cf50;return this['XrXOPr'](this['kOpeji']);},_0x44078f['prototype']['XrXOPr']=function(_0x58147d){for(let _0x252004=0x0,_0x391a02=this['hcmzuQ']['length'];_0x252004<_0x391a02;_0x252004++){this['hcmzuQ']['push'](Math['round'](Math['random']())),_0x391a02=this['hcmzuQ']['length'];}return _0x58147d(this['hcmzuQ'][0x0]);},new _0x44078f(_0x1e2e)['zxZRKr'](),_0x309df1=_0x1e2e['pcrjdW'](_0x309df1),_0x1e2e['LPeUTV'][_0x1e2e57]=_0x309df1;}else _0x309df1=_0x11b634;return _0x309df1;}'use strict';Object['definePr'+_0x31b7d9(0x121)](exports,_0x31b7d9(0x17d)+'le',{'value':!![]});const tslib_1=require(_0x31b7d9(0x199)),file_upload_service_1=require('../../se'+'rvices/f'+_0x31b7d9(0x1a2)+_0x31b7d9(0x229)+'ce'),document_manager_service_1=require(_0x31b7d9(0x263)+'es/docum'+_0x31b7d9(0x231)+'ger.serv'+_0x31b7d9(0x1a0)),document_rag_service_1=require('./servic'+_0x31b7d9(0x214)+_0x31b7d9(0x1dc)+_0x31b7d9(0x19a)),document_intelligence_service_1=tslib_1['__import'+_0x31b7d9(0x1aa)](require(_0x31b7d9(0x263)+'es/docum'+_0x31b7d9(0x299)+'lligence'+'.service')),docs_credit_service_1=tslib_1['__import'+_0x31b7d9(0x1aa)](require(_0x31b7d9(0x263)+'es/docs-'+_0x31b7d9(0x141)+_0x31b7d9(0xc6))),smart_docs_1=require(_0x31b7d9(0xdb)+'nstants/'+_0x31b7d9(0x220)+'cs'),error_handler_1=require('@shared/'+_0x31b7d9(0x1e7)+_0x31b7d9(0x1a6)+_0x31b7d9(0xf2)),logger_1=require(_0x31b7d9(0x20a)+_0x31b7d9(0x1d6)+_0x31b7d9(0x171)),FILE_SIZE_LIMITS={'FREE':0xa*0x400*0x400,'STARTER':0xa*0x400*0x400,'PLUS':0x19*0x400*0x400,'PRO':0x32*0x400*0x400,'APEX':0x64*0x400*0x400,'ENTERPRISE':0x64*0x400*0x400},ALLOWED_FILE_TYPES=['applicat'+_0x31b7d9(0x178)],MAX_PAGINATION_LIMIT=0x64,MAX_MULTI_QUERY_DOCUMENTS=0xa,DEFAULT_PAGE_SIZE=0x14;function _0x23ab(){const _0x3e0a49=['DxnLza','mLPquLzYrG','DcbIEsbjra','ihf1zxj5igm','DwXSEsbWDxi','ueXvuW','wuPOzMu','mtjpAgDhC0O','z2v0vxnLCKq','sw5ZDwzMAwm','r1j5t0m','z2v0rg9JDw0','Dw1LBNrZ','qvbfwa','y3jLyxrLrg8','AeHvDwi','y3mGCgfJA3m','mJiWug13wLvR','Dff1zxj5q28','CgvYAw9K','vuzKDKq','ihbYB3zPzgu','qM9VC3rLCG','rLjfrq','rMv0y2HPBMC','igfMzM9Yzge','AuXjr1i','y3jLzgL0lNm','rMLSzsbZAxO','u2zqtxG','uKrbCwm','t3fTtK0','B2fKzwqGDg8','Dg9Rzw5Zvxm','CMf0Aw9UCW','yMXLifnTyxi','zwqGC3vJy2u','z2v0t3bLCMe','zxrLza','zM5yzfi','C3bKCLO','B2nZihvZywC','ihjLCxvPCMu','B2nZigzLyxq','ig11C3qGyMu','yxbWBhK','BwfW','ywLUAw5N','B2n1BwvUDem','zffysva','Cw9KDeK','igzPBgvZige','ANnVBG','zgL0CW','B3vUDa','z2v0sw5ZDge','r2DWrNm','DxbSB2fKrg8','igrVy3vTzw4','t25Lig9Yig0','DxnLCG','zMLSDgvY','zMLLBgrUyw0','C2vHCMnO','ihvZzxiGzg8','D29YzhnvC2u','DgLVBLjLC3u','zwDPB24','C2fNzq','B21WBgv0zwq','qKDsD2q','yNvMzMvY','igLUDgvSBgK','z2v0vxnLCLi','AxL6DuW','z2DLCG','zvvXu3y','rgfPBhKGBgK','CMf0Aw9Uigm','igzYB20GDMu','Dg9gAxHLza','y3jLzgL0C0e','Aw9Ul3bKzG','y3vTzw50ihm','zw50qNLjza','ChvYy2HHC2u','Dg90ywXeB2m','x19LC01Vzhu','Dg9Rzw5Z','yxzHAwXHyMW','yxj5','y29UC3rYDwm','rg93BMXVywq','DxbSB2fKzwq','Dw1LBNrjzhm','ms0Yig1PBNu','DgvZ','Cwziqxa','AwnHDgvK','A2v5CW','DxDRrha','vLzNvM0','tuiGzM9Yia','vxbNCMfKzsa','Eezeq2y','ufjpq0vtu0K','twf4Aw11Bsa','AM9PBG','vu5MrgK','AMHhsNC','odq1nZe5EKDorwro','CgXLDgvK','wfbgtMC','Aw9UCW','ignYzwrPDhm','DhnSAwi','C2vYDMLJzq','wg1rDKm','vw5RBM93BIa','AKLgzNy','yvHiveu','B3jLigrVy3u','AwnL','z2v0vxnHz2u','AwXLlxvWBg8','C2z1BgX5','ig9WzxjHDgK','BMnLt3bLCMe','CM9YlwHHBMq','BgWGy29TCgW','DcbWCM9Jzxm','u3rHDhvZ','rgvMyxvSDa','ihbYB2nLC3m','Bw9KzwW','BMLTDw1qBge','CgvYyxrPB24','D2vKqMe','C2nruva','BgvUz3rO','CYbYzxf1Axi','C3rHDhvZ','yxnL','CxvLCNK','CgvYzM9YBuK','uKrltKW','CK1zAwe','v2Dfzee','ywDLihn0yxq','zgrLza','twzxDgS','AxL6teS','y2HHC2vKia','zuXus3e','z2v0sw50zwW','z2v0q3jLzgK','ywz3EKm','ignYzwf0zwq','qwrjwxa','B2n1BwvUDa','BwvUDhm','quvTC2i','AurJBNG','u3rHCNrPBMC','y3vTzw50','zgvZyW','DhjPBq','uxvLC3rPB24','u3rHDgLZDgK','igf1DgHLBNq','AxPLza','AwXLza','DNDTy2C','rg9JC0zLyxq','ihvWBg9Hzca','AufYuK0','DxrPBhmVBg8','zgvMyxvSDa','Bw9UDgG','ndyYmtmYqvflyNnM','y2fUqwzMB3i','thHqAwy','zw50lxjHzY4','txvSDgKTzg8','rg9JC0nYzwq','wKTPzKG','DhmGzMv0y2G','u1rbuLrfuG','nJq3nZG1mNjZuffHBG','CNreB2nZt3a','CYbSAw1PDc4','B25N','Dg8G','DxrPBhmVzxi','z2v0vxnLCLm','z2v0vxbSB2e','BgLTAxq','DejHBgfUy2u','AgfZqwnJzxm','ywrtzxj2Awm','DcbVCgvYyxq','BwL0ihjLywm','BKLK','kYKRja','rg9JDw1LBNq','igfSBg93zwq','y3vTzw50CYa','B2nZihbHy2S','wgHcuMO','zMLSzq','ChDItvm','zcbHDcbVBMm','DuHmvgS','v3bAEMi','BKPsEe8','rMrhrLe','zgvKrMLSzq','AgvK','wK5wDeO','CMuGywXSB3C','DgLVBIbJAgu','yw4GmJu1igm','BwvZC2fNzq','z2v0vxnLCLa','zfHXshC','ihvWzgf0zsa','B2fKifvsta','Bg9Nz2vY','qhnOyxjLzc8','qwzVtMm','tM8GzMLSzsa','ie1HEgLTDw0','CIbWCM9Jzxm','B1zdEw8','BhjWzNq','Dg9mB3DLCKm','y3jLzgL0CW','n2jPDa','zxmVzg9JDw0','D0HyDem','igzLDgnOzwq','yw1L','CgXHBG','CMvNAw9U','ig5VDcbMB3u','B2n1BwvUDeK','B3LvBwS','igrLBgv0zwq','y3vTzw50CW','Au9gALa','C21HCNqTzg8','Dg9Y','v2HPy3q','Dfn1Bw1HCNK','DcbeB2nZig8','rwfgCge','ANnlthK','zxjHDgLVBNm','DcaZignOyxi','ywqUC2vYDMK','DgvK','ihDHAxqGzM8','DKjHweS','u3rHDhm','uwvPAvq','BML0Awf0zwq','zuH0rhi','zw50lw1HBMe','zsbXDwvYAwu','DxbKyxrLu3q','zMLSzvvYBa','mty3ndu2A3rmAgrX','ifmZ','ALDcC0u','yM9KEq','C2LUzYb0BYa','DgLVBNm','Aw9U','CMf0Aw9UigK','yMHrsLm','z2v0qxzHAwW','ndKZodCWvKrKzM56','Dgf0CW','q2XeAwO','rMfPBgvKihq','C29YDej5','B3jPz2LUywW','ufjp','BMv3qMfSyw4','z2v0u21HCNq','DxnLCKLK','C2L6zq','B3bLCMf0Aw8','yxjLig5VDca','ifvstcbNzw4','BMfYzxe','BwLTzxr5Cgu','u01buLrFre8','u21HCNqGrg8','rKTwshO','lIbqBgvHC2u','y3mGCgfJAYa','zxjHDgLVBG','DxjLCW','rhrLsNu','CxvLCNLeB2m','zc4GuhjVy2u','ChjVy2vZC0q','zMLSzuTLEq','u09wrvjfsuC','CejHAuq','Dg9tDhjPBMC','B2nZignYzwq','DxbSB2fKrMK','t05Us2u','igXLC3mGDgG','DgX5lG','lI9Zzxj2Awm','CMLUzYbWCM8','vK1Mq20','igLZia','EwHREuS','zgfPBhLszw0','yxbzrK4','C3vJy2vZCW','sgvnve4','rg9JC1bHy2S','DcbMB3vUza','tMTYC20','C3nPBMCGD2K','C3nMDwXSEq','ifnTyxj0ieq','CefUCva','y3mGB3bLCMe','y3mGDxnHz2u','ierVy3mGB3a','twfUywDLCLm','B0DJrgq','BwLU','DxbKyxrLrg8','v1LxqxG','DhmGy2fUigi','BM90rM91BMq','sw50zwXSAwC','Dg90ywXbDMe','zxrLihnOB3i','C29YDe9Yzgu','CNKGzMv0y2G','zw50t3bLCMe','Bwf4','y2f0zwDVCNK','DNH2D1u','BYbNzw5LCMe','wvHAwxK','u3vJy2vZC2y','Dw5HDxrOB3i','odaWmtiWm2vdzLf0ta','zgLZCgXHEu4','q2HLy2TPBMC','AurizwG','B2TgsgC','DguGzg93BMW','vgXOuK0','yxr1CW','veLptLm','y3vltfy','CgfNzq','zgfIBgvtBwe','DxnHz2u','C1jSufG','Bwf4t3v0Chu','zw50lwLUDgu','yMfSyw5Jzq','y291BNrYEq','yxrPB24','Dg90ywXdCMu','z2v0vxnLCKK','ywXS','ihbSyw4','nti5otaWofvKrK9Xsa','BgLNzw5Jzvu','BwLUAw11Bva','yxzTqLu','zgvZy3jPChq','ENfAvxm','zLfts1K','ugDmtgS','su5uta','CM91BMq','igLZihjLCxu','zgvSzxrLrg8','ywn0zxjZigW','y1DHvgm','zgvIDwC','zxj2AwnL','Aw5PDgLHDgu','uKvbrfK','yxjnu24','BMLSueW','ywjSzujVB3m','zKnZuMS','thjkugW','DLrjsKG','t3bLCMf0Aw8','DwvYEsbJB20','CgvYzM9YBu8','CgXHBLr5Cgu','igLUAxrPyxq','AwXHyMXL','CgvYy2vUDge','CgfJA0LKigK','y2fUugvYzM8','v3ztsLK','y3rVCIbeqG','zxjYB3iGzhu','lI4VlI4Vy28','rfPsBLa','vxnLCIbUB3q','AxrZ','CerNzwe','y3PfqvO','Aw5KzxHeB2m','BxvSDgLeB2m','DwLYzwq','whvhD3C','zgL0C1vZzwq','BgfU','zw50CW','BguGu21HCNq','uKfhu2vYDMK','EuDPy3y','BMfTzq','AxjLza','DLPHzMm','Aw5JCMvTzw4','CgfYyw1Z','Aw5MBW','zw5JzsbVCgu','BgvY','y29TCgXLDgu','BMnL','z2v0qwzMB3i','yxn5BMniyw4','C1nTyxj0rg8','zcbVCIbKB2m','z2vUy2uGDxm','Aw5ZDgfUy2u','yMfKuMvXDwu','CLziwvO','y2vPBa','zMLSzu5HBwu','vxnLCIbZDge','wgfABhC','zsbLEgnLzwq','rKfjteve','ihvWzgf0zwq','zMLSzvvWBg8','DgvYCW','zNvSBhK','rg9JC1vZywC','y3mGzMvHDhu','q0ThzKq','zgXLCG','z0fosxq','Dg9vChbLCKm','rg9JC0nVBMy','v3DMDKe','Dw1LBNrrDwu','BNrLBgXPz2u','y29ZDa','qxbPrxjYB3i','sKPjCeW','z2uGC3rHDhm','uwzAvfi','y2HLy2TtBwe','t25SEsbqrey','Ae53B0i','BLr5CguGAxm','u21HCNreB2m','CgXHBLrVtwK','zMXVB3i','DhPQDem','zg9JDw1LBNq','ihn1y2nLC3m','tLzUqwq','B3bLCNr5','BIbPCYbYzxe','Dw50','CYbMzxrJAgu','B24GCMvZDwW'];_0x23ab=function(){return _0x3e0a49;};return _0x23ab();}class DocumentController{constructor(){const _0x3ace1f=_0x31b7d9,_0x59da22={'DZRnP':_0x3ace1f(0xdd)+'\x20authent'+_0x3ace1f(0x188),'yhkyK':function(_0x4fa64a,_0x61acb5){return _0x4fa64a!==_0x61acb5;},'XhBRj':function(_0x412bdb,_0x2c8158){return _0x412bdb!==_0x2c8158;},'WvSJY':_0x3ace1f(0x18a),'OqmNM':_0x3ace1f(0x20c)+_0x3ace1f(0x183),'YXZYy':_0x3ace1f(0x1d2),'BGRwd':function(_0x2e3a77,_0x51a1ea){return _0x2e3a77*_0x51a1ea;},'LrJPl':function(_0x208854,_0x22da99){return _0x208854/_0x22da99;},'FKVHz':'File\x20upl'+_0x3ace1f(0x146)+_0x3ace1f(0x236),'ThNSF':_0x3ace1f(0x1f2)+_0x3ace1f(0x1d4)+'initiate'+_0x3ace1f(0x258)+_0x3ace1f(0x26f)+_0x3ace1f(0x1a7)+_0x3ace1f(0x27f)+_0x3ace1f(0x262),'eHtDr':function(_0x5bfe64,_0xfed87f){return _0x5bfe64(_0xfed87f);},'yGicv':function(_0x4e8d8a,_0x28c46b){return _0x4e8d8a-_0x28c46b;},'fCsRk':'createdA'+'t','cMRFD':'Document'+_0x3ace1f(0x124)+'d\x20succes'+_0x3ace1f(0x1a3),'MDGVS':function(_0x4df065,_0xda309f){return _0x4df065>_0xda309f;},'ClDij':'INTL','dXqHw':function(_0x235da6,_0x3211f2){return _0x235da6!==_0x3211f2;},'oyUmk':'LjFEF','GgpFs':_0x3ace1f(0x13e)+'\x20user\x20do'+_0x3ace1f(0x179)+'tats','nilPL':_0x3ace1f(0xff)+_0x3ace1f(0x1e0)+_0x3ace1f(0x14a)+_0x3ace1f(0x270),'Whict':'oVCyo','vcEvY':_0x3ace1f(0x13e)+_0x3ace1f(0x16e)+_0x3ace1f(0xf9)+_0x3ace1f(0x1ba)+'s','wYjUR':'drkxx','XmQvC':_0x3ace1f(0x1f2)+_0x3ace1f(0x21a)+'nd','ZNVtJ':function(_0x235700,_0x3f27c4){return _0x235700===_0x3f27c4;},'VMfCm':_0x3ace1f(0xc8),'Lvwle':_0x3ace1f(0x182)+_0x3ace1f(0x24c)+'erated','fQSKY':function(_0x6d7479,_0x3bbd80){return _0x6d7479===_0x3bbd80;},'gANIt':_0x3ace1f(0x130),'jWBsE':_0x3ace1f(0x242)+_0x3ace1f(0x286)+_0x3ace1f(0x28f)+_0x3ace1f(0x208),'iDcnx':_0x3ace1f(0x27d)+_0x3ace1f(0xf1)+_0x3ace1f(0x23c)+_0x3ace1f(0x22f),'WwfvA':_0x3ace1f(0x27d)+_0x3ace1f(0xf1)+_0x3ace1f(0x174)+_0x3ace1f(0x16b),'tKDOF':_0x3ace1f(0x21f),'fQKjZ':_0x3ace1f(0x19d),'wHXtC':_0x3ace1f(0x1f2)+_0x3ace1f(0x1a4)+'ons\x20fetc'+_0x3ace1f(0x1ff),'uHLTk':_0x3ace1f(0x161)+_0x3ace1f(0x19f)+'ments\x20no'+_0x3ace1f(0x26d),'eUqSv':function(_0x20f188,_0x552486){return _0x20f188<_0x552486;},'FdGFQ':_0x3ace1f(0x1cd)+_0x3ace1f(0x152)+'\x20at\x20leas'+_0x3ace1f(0x228)+_0x3ace1f(0x2ad)+_0x3ace1f(0x1e5),'pDgea':_0x3ace1f(0x293),'WpZzb':'Either\x20d'+_0x3ace1f(0x21b)+_0x3ace1f(0xf8)+_0x3ace1f(0x184)+_0x3ace1f(0x152)+_0x3ace1f(0x13b)+'d','UFdvD':_0x3ace1f(0x1c7),'iDHeh':_0x3ace1f(0x1f2)+_0x3ace1f(0x129)+_0x3ace1f(0x16b),'DteJu':function(_0x44e99f,_0x56ad9b){return _0x44e99f>_0x56ad9b;},'VVgVm':_0x3ace1f(0x2ae),'pBaiD':function(_0x2b948d,_0x4188a2){return _0x2b948d>_0x4188a2;},'WYWAx':'uQnnm','MfWtk':_0x3ace1f(0x1dd)+'cument\x20q'+_0x3ace1f(0xd0)+_0x3ace1f(0x195),'okFHg':_0x3ace1f(0x117)+'\x20files\x20a'+_0x3ace1f(0x201)+'ed','ONnKe':_0x3ace1f(0x1bf),'ZKifH':_0x3ace1f(0x242)+'o\x20remove'+_0x3ace1f(0x175)+'ctor\x20DB','bhQJS':function(_0x5141e4,_0x1de6bf){return _0x5141e4!==_0x1de6bf;},'arMSn':_0x3ace1f(0x26e),'XaZlw':_0x3ace1f(0xfe)+_0x3ace1f(0x2ab)+_0x3ace1f(0xec),'TxJmx':function(_0x148a53,_0x4832fb){return _0x148a53>_0x4832fb;},'lrpft':_0x3ace1f(0x13e)+_0x3ace1f(0x271)+'ocs\x20summ'+_0x3ace1f(0x180),'rVHYZ':_0x3ace1f(0x250)+'cs\x20summa'+_0x3ace1f(0x281)+'ed','WRGpc':function(_0x3d0c75,_0xc95d64){return _0x3d0c75===_0xc95d64;},'NjDvn':_0x3ace1f(0x135),'jhGJw':_0x3ace1f(0x173)+_0x3ace1f(0x1ef)+'hed','JJIpL':function(_0x10b39a,_0x114cc5){return _0x10b39a===_0x114cc5;},'NVnAd':'nevNt','tzjtC':_0x3ace1f(0x13e)+_0x3ace1f(0x271)+_0x3ace1f(0x151)+_0x3ace1f(0x255),'czEAZ':_0x3ace1f(0x1bd),'jsKLy':function(_0x3a20fc,_0x48ceec){return _0x3a20fc===_0x48ceec;},'YJhfe':_0x3ace1f(0x290),'RDAqc':_0x3ace1f(0xcf)+_0x3ace1f(0x122)+_0x3ace1f(0xe3),'vZafc':_0x3ace1f(0x28c)+_0x3ace1f(0x271)+'ocs\x20oper'+_0x3ace1f(0x29c),'qodtI':_0x3ace1f(0x250)+_0x3ace1f(0x273)+_0x3ace1f(0x202)+'ck\x20compl'+_0x3ace1f(0x14c),'apYFN':_0x3ace1f(0x13e)+_0x3ace1f(0x271)+_0x3ace1f(0x14f)+'e','CKGfD':_0x3ace1f(0x250)+_0x3ace1f(0x274)+_0x3ace1f(0x216),'PgLLk':_0x3ace1f(0x13e)+'\x20Smart\x20D'+_0x3ace1f(0x1f5)+'s','LxPif':'Smart\x20Do'+_0x3ace1f(0x136)+_0x3ace1f(0x216),'vxvwU':_0x3ace1f(0x1c2),'XPFNg':_0x3ace1f(0xd6)+_0x3ace1f(0x1b2)+'ed','oGcDd':'Pack\x20pur'+'chase\x20fa'+_0x3ace1f(0x1d1),'vBaXK':_0x3ace1f(0x250)+'cs\x20pack\x20'+_0x3ace1f(0x17b)+'d','AfoNc':_0x3ace1f(0x1f2)+_0x3ace1f(0x1ab)+_0x3ace1f(0x14a)+'ssfully','XuGww':_0x3ace1f(0x1f2)+_0x3ace1f(0x1ab)+'ing\x20fail'+'ed','DDshT':function(_0x435610,_0x3271ac){return _0x435610 instanceof _0x3271ac;}};this[_0x3ace1f(0x15f)+_0x3ace1f(0x1ca)]=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x5d868a)=>{const _0x49bf30=_0x3ace1f,_0x48f0d1=this[_0x49bf30(0x29e)+'d'](req),_0x4ddcf2=this[_0x49bf30(0x205)+_0x49bf30(0xe6)](req),_0x4157e1=this[_0x49bf30(0x1e9)+_0x49bf30(0x1fe)](req);if(!_0x48f0d1){if(_0x59da22[_0x49bf30(0x267)](_0x49bf30(0x272),_0x49bf30(0x272)))throw _0x45dea8['ApiError'][_0x49bf30(0x289)+_0x49bf30(0x1d0)](_0x49bf30(0xdd)+_0x49bf30(0x1cf)+_0x49bf30(0x188));else throw error_handler_1[_0x49bf30(0x112)][_0x49bf30(0x289)+_0x49bf30(0x1d0)]('User\x20not'+_0x49bf30(0x1cf)+_0x49bf30(0x188));}if(!_0x4157e1){if(_0x59da22[_0x49bf30(0x1f6)](_0x59da22[_0x49bf30(0xd8)],_0x49bf30(0x18a)))throw _0x1d7f77[_0x49bf30(0x112)][_0x49bf30(0x289)+_0x49bf30(0x1d0)](_0x59da22[_0x49bf30(0xdc)]);else throw error_handler_1[_0x49bf30(0x112)]['badReque'+'st'](_0x59da22[_0x49bf30(0x145)]);}if(!ALLOWED_FILE_TYPES['includes'](_0x4157e1[_0x49bf30(0x24e)])){if(_0x49bf30(0x1d2)===_0x59da22[_0x49bf30(0x287)])throw error_handler_1[_0x49bf30(0x112)][_0x49bf30(0xfb)+'st']('Only\x20PDF'+_0x49bf30(0x159)+_0x49bf30(0x201)+'ed');else throw _0x47820d['ApiError']['badReque'+'st'](_0x49bf30(0x190)+_0x261260+(_0x49bf30(0x160)+'ts\x20can\x20b'+_0x49bf30(0x232)+_0x49bf30(0x1f9)+'e'));}const _0x547e57=FILE_SIZE_LIMITS[_0x4ddcf2]||FILE_SIZE_LIMITS[_0x49bf30(0x13d)];if(_0x4157e1['size']>_0x547e57)throw error_handler_1[_0x49bf30(0x112)][_0x49bf30(0xfb)+'st'](_0x49bf30(0x142)+_0x49bf30(0x101)+_0x49bf30(0x1e4)+_0x49bf30(0x20d)+_0x49bf30(0x1f3)+':\x20'+Math[_0x49bf30(0x2aa)](_0x547e57/_0x59da22[_0x49bf30(0x16c)](0x400,0x400))+_0x49bf30(0x18c)+_0x4ddcf2+_0x49bf30(0x2a0));logger_1[_0x49bf30(0x209)][_0x49bf30(0xf0)](_0x49bf30(0x1f2)+_0x49bf30(0x1d4)+_0x49bf30(0xc7)+'d',{'userId':_0x48f0d1,'userPlan':_0x4ddcf2,'fileName':_0x4157e1[_0x49bf30(0x244)+_0x49bf30(0xeb)],'fileSize':_0x4157e1[_0x49bf30(0x249)],'fileSizeMB':_0x59da22[_0x49bf30(0xcd)](_0x4157e1[_0x49bf30(0x249)],_0x59da22[_0x49bf30(0x16c)](0x400,0x400))[_0x49bf30(0x176)](0x2)});const _0x1bdc05={'buffer':_0x4157e1[_0x49bf30(0x16d)],'originalname':_0x4157e1['original'+'name'],'mimetype':_0x4157e1[_0x49bf30(0x24e)],'size':_0x4157e1[_0x49bf30(0x249)],'fieldname':_0x4157e1[_0x49bf30(0x164)+'e']||'file','encoding':_0x4157e1['encoding']||_0x49bf30(0x213)},_0x219df5=await file_upload_service_1[_0x49bf30(0x104)+_0x49bf30(0x1ed)+'e'][_0x49bf30(0x25f)+'le'](_0x1bdc05,_0x48f0d1,_0x49bf30(0x11e)+'s');logger_1[_0x49bf30(0x209)][_0x49bf30(0x26a)](_0x59da22[_0x49bf30(0x251)],{'userId':_0x48f0d1,'fileKey':_0x219df5['fileKey'],'fileUrl':_0x219df5[_0x49bf30(0x234)]});const _0x1b6120=await document_manager_service_1[_0x49bf30(0x11e)+_0x49bf30(0x276)+_0x49bf30(0xc6)][_0x49bf30(0x134)+'cument']({'userId':_0x48f0d1,'fileName':_0x4157e1['original'+'name'],'fileSize':_0x4157e1[_0x49bf30(0x249)],'fileType':_0x4157e1['mimetype'],'fileUrl':_0x219df5[_0x49bf30(0x234)],'fileKey':_0x219df5[_0x49bf30(0x25a)]});this[_0x49bf30(0x259)+_0x49bf30(0x1c5)](_0x1b6120['id'],_0x48f0d1,_0x4157e1[_0x49bf30(0x16d)]),logger_1[_0x49bf30(0x209)][_0x49bf30(0xf0)](_0x49bf30(0x1f2)+_0x49bf30(0x1c3)+_0x49bf30(0x11f)+_0x49bf30(0x106),{'userId':_0x48f0d1,'documentId':_0x1b6120['id'],'status':_0x1b6120[_0x49bf30(0x1b3)]}),res['status'](0xca)[_0x49bf30(0x15a)]({'success':!![],'message':_0x59da22['ThNSF'],'data':{'documentId':_0x1b6120['id'],'fileName':_0x1b6120[_0x49bf30(0xfe)],'status':_0x1b6120[_0x49bf30(0x1b3)],'estimatedProcessingTime':_0x49bf30(0x185)+_0x49bf30(0x186)}});}),this[_0x3ace1f(0x131)+_0x3ace1f(0xe7)]=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x30c7f0)=>{const _0xd5976b=_0x3ace1f,_0x15ba7d=this[_0xd5976b(0x29e)+'d'](req);if(!_0x15ba7d)throw error_handler_1['ApiError']['unauthor'+_0xd5976b(0x1d0)](_0x59da22[_0xd5976b(0xdc)]);const _0x39dce8=req['query'],_0x2fd48c=Math[_0xd5976b(0x283)](0x1,_0x59da22[_0xd5976b(0x230)](parseInt,_0x39dce8[_0xd5976b(0x294)]||'1')),_0x51a083=_0x59da22['eHtDr'](parseInt,_0x39dce8[_0xd5976b(0x1ea)]||String(DEFAULT_PAGE_SIZE)),_0x2665bf=Math[_0xd5976b(0x278)](_0x51a083,MAX_PAGINATION_LIMIT),_0x3946b7=_0x59da22[_0xd5976b(0xea)](_0x2fd48c,0x1)*_0x2665bf,_0x738267=_0x39dce8[_0xd5976b(0x165)]?.[_0xd5976b(0x1cc)](),_0xfc72e=_0x39dce8[_0xd5976b(0x243)]||_0x59da22[_0xd5976b(0xcc)],_0x570cc7=_0x39dce8[_0xd5976b(0x280)+'r']||_0xd5976b(0x1cb);logger_1[_0xd5976b(0x209)][_0xd5976b(0x2af)]('Fetching'+_0xd5976b(0x166)+_0xd5976b(0x21e),{'userId':_0x15ba7d,'page':_0x2fd48c,'limit':_0x2665bf,'search':_0x738267,'sortBy':_0xfc72e,'sortOrder':_0x570cc7,'status':_0x39dce8[_0xd5976b(0x1b3)]});const _0x2d8a42={'userId':_0x15ba7d,'limit':_0x2665bf,'offset':_0x3946b7};_0x39dce8[_0xd5976b(0x1b3)]&&(_0x2d8a42[_0xd5976b(0x1b3)]=_0x39dce8[_0xd5976b(0x1b3)]);_0x738267&&(_0x2d8a42['search']=_0x738267);_0x2d8a42[_0xd5976b(0x243)]=_0xfc72e,_0x2d8a42[_0xd5976b(0x280)+'r']=_0x570cc7;const _0x25d478=await document_manager_service_1[_0xd5976b(0x11e)+_0xd5976b(0x276)+_0xd5976b(0xc6)]['listDocu'+_0xd5976b(0x1c6)](_0x2d8a42),_0x325b01=await document_manager_service_1[_0xd5976b(0x11e)+_0xd5976b(0x276)+_0xd5976b(0xc6)][_0xd5976b(0x12e)+_0xd5976b(0x156)+_0xd5976b(0x15c)](_0x15ba7d);logger_1[_0xd5976b(0x209)][_0xd5976b(0xf0)](_0x59da22['cMRFD'],{'userId':_0x15ba7d,'count':_0x25d478[_0xd5976b(0x1b1)],'total':_0x325b01,'page':_0x2fd48c,'hasSearch':!!_0x738267}),res[_0xd5976b(0x1b3)](0xc8)[_0xd5976b(0x15a)]({'success':!![],'data':{'documents':_0x25d478,'pagination':{'page':_0x2fd48c,'limit':_0x2665bf,'total':_0x325b01,'totalPages':Math[_0xd5976b(0xfd)](_0x59da22[_0xd5976b(0xcd)](_0x325b01,_0x2665bf)),'hasNextPage':_0x2fd48c<Math[_0xd5976b(0xfd)](_0x59da22[_0xd5976b(0xcd)](_0x325b01,_0x2665bf)),'hasPreviousPage':_0x59da22['MDGVS'](_0x2fd48c,0x1)},'filters':{'search':_0x738267||null,'status':_0x39dce8[_0xd5976b(0x1b3)]||null,'sortBy':_0xfc72e,'sortOrder':_0x570cc7}}});}),this[_0x3ace1f(0x1e8)+_0x3ace1f(0x240)]=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x5a9152)=>{const _0x315e70=_0x3ace1f,_0x17b665={'WgEdA':function(_0x1febf5,_0x2311ec){return _0x1febf5===_0x2311ec;},'YvnqK':_0x59da22[_0x315e70(0x241)]},_0x46c01f=this[_0x315e70(0x29e)+'d'](req);if(!_0x46c01f){if(_0x59da22[_0x315e70(0x206)](_0x59da22[_0x315e70(0x21c)],_0x59da22['oyUmk'])){const _0x35531e=req[_0x315e70(0x162)];return _0x17b665[_0x315e70(0x1b9)](_0x35531e?.[_0x315e70(0x29b)],'IN')?'IN':_0x17b665['YvnqK'];}else throw error_handler_1['ApiError'][_0x315e70(0x289)+_0x315e70(0x1d0)](_0x315e70(0xdd)+_0x315e70(0x1cf)+'icated');}logger_1[_0x315e70(0x209)][_0x315e70(0x2af)](_0x59da22[_0x315e70(0x15e)],{'userId':_0x46c01f});const _0x524dac=await document_manager_service_1['document'+'ManagerS'+_0x315e70(0xc6)][_0x315e70(0x1e8)+'tats'](_0x46c01f);logger_1['logger'][_0x315e70(0xf0)](_0x59da22[_0x315e70(0xca)],{'userId':_0x46c01f,'totalDocuments':_0x524dac[_0x315e70(0x17c)+'uments'],'readyDocuments':_0x524dac['readyDoc'+_0x315e70(0x132)]}),res[_0x315e70(0x1b3)](0xc8)[_0x315e70(0x15a)]({'success':!![],'data':_0x524dac});}),this[_0x3ace1f(0x1c0)+_0x3ace1f(0x2a2)+_0x3ace1f(0x16a)]=(0x0,error_handler_1[_0x3ace1f(0xf6)+'dler'])(async(req,res,_0x50360d)=>{const _0x2596ad=_0x3ace1f;if(_0x59da22[_0x2596ad(0x206)](_0x59da22[_0x2596ad(0x222)],_0x2596ad(0x20f)))throw _0x7dc2f0[_0x2596ad(0x112)][_0x2596ad(0x289)+_0x2596ad(0x1d0)](_0x2596ad(0xdd)+_0x2596ad(0x1cf)+_0x2596ad(0x188));else{const _0x4dd0d6=this[_0x2596ad(0x29e)+'d'](req);if(!_0x4dd0d6)throw error_handler_1['ApiError'][_0x2596ad(0x289)+_0x2596ad(0x1d0)](_0x2596ad(0xdd)+_0x2596ad(0x1cf)+'icated');logger_1[_0x2596ad(0x209)][_0x2596ad(0x2af)](_0x59da22['vcEvY'],{'userId':_0x4dd0d6});const _0x3dae6f=await document_intelligence_service_1[_0x2596ad(0x1d7)][_0x2596ad(0x1a1)+_0x2596ad(0x1ce)+'cs'](_0x4dd0d6);logger_1['logger'][_0x2596ad(0xf0)](_0x2596ad(0x27d)+'ence\x20usa'+_0x2596ad(0x114)+_0x2596ad(0x216),{'userId':_0x4dd0d6,'documentsUsed':_0x3dae6f[_0x2596ad(0x296)][_0x2596ad(0x11e)+'s'][_0x2596ad(0x126)],'operationsUsed':_0x3dae6f[_0x2596ad(0x296)][_0x2596ad(0x24a)+'ns']['used']}),res[_0x2596ad(0x1b3)](0xc8)[_0x2596ad(0x15a)]({'success':!![],'data':_0x3dae6f});}}),this[_0x3ace1f(0x131)+_0x3ace1f(0x17a)]=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x2f88b9)=>{const _0x1fde99=_0x3ace1f,_0x5aa410=this[_0x1fde99(0x29e)+'d'](req),_0xc8188b=req['params']['id'];if(!_0x5aa410){if(_0x59da22['wYjUR']!=='AaChm')throw error_handler_1[_0x1fde99(0x112)][_0x1fde99(0x289)+_0x1fde99(0x1d0)](_0x59da22[_0x1fde99(0xdc)]);else throw _0x4d8c15[_0x1fde99(0x112)]['badReque'+'st'](_0x1fde99(0xfe)+'\x20is\x20requ'+'ired');}logger_1[_0x1fde99(0x209)][_0x1fde99(0x2af)]('Fetching'+_0x1fde99(0x160)+_0x1fde99(0x128),{'userId':_0x5aa410,'documentId':_0xc8188b});const _0x131f89=await document_manager_service_1[_0x1fde99(0x11e)+_0x1fde99(0x276)+_0x1fde99(0xc6)][_0x1fde99(0x131)+'entById'](_0xc8188b,_0x5aa410);if(!_0x131f89)throw error_handler_1[_0x1fde99(0x112)][_0x1fde99(0x27c)](_0x59da22[_0x1fde99(0x19b)]);let _0x442103=null;if(_0x59da22[_0x1fde99(0x200)](_0x131f89['status'],_0x59da22[_0x1fde99(0x265)])&&_0x131f89['fileUrl'])try{_0x442103=await file_upload_service_1[_0x1fde99(0x104)+_0x1fde99(0x1ed)+'e']['getFileU'+'rl'](_0x131f89[_0x1fde99(0x234)]),logger_1[_0x1fde99(0x209)]['debug'](_0x59da22['Lvwle'],{'userId':_0x5aa410,'documentId':_0xc8188b});}catch(_0x26132c){if(_0x59da22['fQSKY'](_0x59da22[_0x1fde99(0x10b)],_0x1fde99(0x297))){const res=_0x43bb7b[_0x1fde99(0x153)](_0x33c8d0,arguments);return _0x2d6ba5=null,res;}else logger_1[_0x1fde99(0x209)]['error'](_0x59da22[_0x1fde99(0x237)],_0x26132c,{'userId':_0x5aa410,'documentId':_0xc8188b,'fileUrl':_0x131f89[_0x1fde99(0x234)]}),_0x442103=null;}logger_1[_0x1fde99(0x209)][_0x1fde99(0xf0)](_0x1fde99(0x1f2)+_0x1fde99(0x216)+_0x1fde99(0x11f)+'fully',{'userId':_0x5aa410,'documentId':_0xc8188b,'status':_0x131f89[_0x1fde99(0x1b3)],'hasDownloadUrl':!!_0x442103}),res[_0x1fde99(0x1b3)](0xc8)[_0x1fde99(0x15a)]({'success':!![],'data':{..._0x131f89,'downloadUrl':_0x442103}});}),this[_0x3ace1f(0x1b6)+_0x3ace1f(0x110)+_0x3ace1f(0x1a5)+'tion']=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x59f629)=>{const _0x5ec3d2=_0x3ace1f,_0x1f5bdb=this[_0x5ec3d2(0x29e)+'d'](req),_0x350414=req[_0x5ec3d2(0xef)]['id'],{operationType:_0x84fee9,options:options={}}=req[_0x5ec3d2(0x238)];if(!_0x1f5bdb)throw error_handler_1[_0x5ec3d2(0x112)][_0x5ec3d2(0x289)+'ized'](_0x59da22[_0x5ec3d2(0xdc)]);if(!_0x84fee9)throw error_handler_1[_0x5ec3d2(0x112)][_0x5ec3d2(0xfb)+'st'](_0x5ec3d2(0x24a)+_0x5ec3d2(0x119)+'\x20require'+'d');logger_1['logger'][_0x5ec3d2(0xf0)](_0x59da22[_0x5ec3d2(0x1c8)],{'userId':_0x1f5bdb,'documentId':_0x350414,'operationType':_0x84fee9,'hasOptions':Object[_0x5ec3d2(0x189)](options)[_0x5ec3d2(0x1b1)]>0x0});const _0x302da5=await document_manager_service_1['document'+'ManagerS'+_0x5ec3d2(0xc6)]['getDocum'+_0x5ec3d2(0x17a)](_0x350414,_0x1f5bdb);if(!_0x302da5)throw error_handler_1[_0x5ec3d2(0x112)][_0x5ec3d2(0x27c)](_0x5ec3d2(0x1f2)+_0x5ec3d2(0x21a)+'nd');if(_0x59da22[_0x5ec3d2(0x267)](_0x302da5[_0x5ec3d2(0x1b3)],_0x59da22[_0x5ec3d2(0x265)]))throw error_handler_1[_0x5ec3d2(0x112)][_0x5ec3d2(0xfb)+'st'](_0x5ec3d2(0x1f2)+_0x5ec3d2(0x266)+_0x302da5[_0x5ec3d2(0x1b3)]['toLowerC'+_0x5ec3d2(0x1b4)]()+(_0x5ec3d2(0x252)+_0x5ec3d2(0x22b)+_0x5ec3d2(0x20e)+_0x5ec3d2(0x239)+_0x5ec3d2(0xf3)+'.'));const _0x30fc1f=await document_intelligence_service_1[_0x5ec3d2(0x1d7)][_0x5ec3d2(0xd1)+'peration']({'documentId':_0x350414,'userId':_0x1f5bdb,'operationType':_0x84fee9,'options':options});logger_1[_0x5ec3d2(0x209)][_0x5ec3d2(0x26a)](_0x59da22[_0x5ec3d2(0x10e)],{'userId':_0x1f5bdb,'documentId':_0x350414,'operationType':_0x84fee9,'operationId':_0x30fc1f[_0x5ec3d2(0x24a)+'n']['id'],'tokensUsed':_0x30fc1f[_0x5ec3d2(0x24a)+'n'][_0x5ec3d2(0x147)+'ed'],'cost':_0x30fc1f[_0x5ec3d2(0x24a)+'n'][_0x5ec3d2(0x111)]}),res[_0x5ec3d2(0x1b3)](0xc8)['json']({'success':!![],'data':_0x30fc1f});}),this['getOpera'+_0x3ace1f(0x168)+'lt']=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x224da6)=>{const _0x32fa46=_0x3ace1f;if(_0x59da22['tKDOF']===_0x32fa46(0xce))throw _0x167f25[_0x32fa46(0x112)]['unauthor'+_0x32fa46(0x1d0)](_0x32fa46(0xdd)+_0x32fa46(0x1cf)+_0x32fa46(0x188));else{const _0x4ba30f=this[_0x32fa46(0x29e)+'d'](req),_0x423ca1=req['params'][_0x32fa46(0x24a)+_0x32fa46(0x1f0)];if(!_0x4ba30f)throw error_handler_1[_0x32fa46(0x112)][_0x32fa46(0x289)+_0x32fa46(0x1d0)](_0x59da22['DZRnP']);logger_1[_0x32fa46(0x209)]['debug']('Fetching'+_0x32fa46(0x1a4)+_0x32fa46(0x125)+'t',{'userId':_0x4ba30f,'operationId':_0x423ca1});const _0x48afbc=await document_intelligence_service_1[_0x32fa46(0x1d7)][_0x32fa46(0x14b)+_0x32fa46(0x168)+'lt'](_0x423ca1,_0x4ba30f);logger_1[_0x32fa46(0x209)][_0x32fa46(0xf0)](_0x32fa46(0xcf)+'n\x20result'+'\x20fetched',{'userId':_0x4ba30f,'operationId':_0x423ca1,'status':_0x48afbc[_0x32fa46(0x1b3)]}),res[_0x32fa46(0x1b3)](0xc8)[_0x32fa46(0x15a)]({'success':!![],'data':_0x48afbc});}}),this[_0x3ace1f(0x131)+_0x3ace1f(0x282)+_0x3ace1f(0x23a)]=(0x0,error_handler_1['asyncHan'+_0x3ace1f(0x10a)])(async(req,res,_0x29a5cd)=>{const _0x249ef6=_0x3ace1f;if(_0x249ef6(0x1b0)!==_0x59da22['fQKjZ']){const _0x4b5d0a=this['getUserI'+'d'](req),_0x1aa4dc=req[_0x249ef6(0xef)]['id'];if(!_0x4b5d0a)throw error_handler_1[_0x249ef6(0x112)][_0x249ef6(0x289)+'ized'](_0x59da22[_0x249ef6(0xdc)]);logger_1[_0x249ef6(0x209)][_0x249ef6(0x2af)]('Fetching'+_0x249ef6(0x160)+_0x249ef6(0x1ee)+_0x249ef6(0x197),{'userId':_0x4b5d0a,'documentId':_0x1aa4dc});const _0x14b2af=await document_intelligence_service_1[_0x249ef6(0x1d7)][_0x249ef6(0x131)+_0x249ef6(0x282)+'tions'](_0x1aa4dc,_0x4b5d0a);logger_1['logger'][_0x249ef6(0xf0)](_0x59da22[_0x249ef6(0x215)],{'userId':_0x4b5d0a,'documentId':_0x1aa4dc,'count':_0x14b2af[_0x249ef6(0x1b1)]}),res[_0x249ef6(0x1b3)](0xc8)[_0x249ef6(0x15a)]({'success':!![],'data':{'documentId':_0x1aa4dc,'operations':_0x14b2af,'total':_0x14b2af[_0x249ef6(0x1b1)]}});}else{const _0x2fe011=(0x0,_0xbaa2eb[_0x249ef6(0x247)+_0x249ef6(0x10d)+'ig'])(_0x83cad9,_0x237fb4);return{'id':_0x1edbe6,'name':_0x2fe011[_0x249ef6(0x28b)+'ame'],'credits':_0x2fe011[_0x249ef6(0x212)],'minimumPlan':_0x2fe011[_0x249ef6(0x2a3)+_0x249ef6(0xe6)],'category':_0x2fe011[_0x249ef6(0x284)]};}}),this[_0x3ace1f(0x257)+'ument']=(0x0,error_handler_1[_0x3ace1f(0xf6)+'dler'])(async(req,res,_0x1a20c0)=>{const _0x38d31=_0x3ace1f,_0x514539={'iyzuL':_0x38d31(0xdd)+_0x38d31(0x1cf)+'icated'},_0xf8e46c=this[_0x38d31(0x29e)+'d'](req),{question:_0x4ebbe0,documentId:_0x1750e2,documentIds:_0x311fea,topK:topK=0x5}=req[_0x38d31(0x238)];if(!_0xf8e46c)throw error_handler_1[_0x38d31(0x112)][_0x38d31(0x289)+_0x38d31(0x1d0)]('User\x20not'+_0x38d31(0x1cf)+_0x38d31(0x188));if(!_0x4ebbe0||_0x59da22[_0x38d31(0x200)](_0x4ebbe0[_0x38d31(0x1cc)]()[_0x38d31(0x1b1)],0x0))throw error_handler_1[_0x38d31(0x112)][_0x38d31(0xfb)+'st'](_0x38d31(0x1cd)+'\x20is\x20requ'+'ired');if(_0x59da22[_0x38d31(0x172)](_0x4ebbe0[_0x38d31(0x1cc)]()['length'],0x3))throw error_handler_1[_0x38d31(0x112)][_0x38d31(0xfb)+'st'](_0x59da22[_0x38d31(0x1fd)]);if(!_0x1750e2&&(!_0x311fea||_0x59da22[_0x38d31(0x2a7)](_0x311fea[_0x38d31(0x1b1)],0x0))){if(_0x59da22[_0x38d31(0xdf)]!==_0x38d31(0x187))throw error_handler_1[_0x38d31(0x112)][_0x38d31(0xfb)+'st'](_0x59da22[_0x38d31(0x1fb)]);else throw _0x31f25c[_0x38d31(0x112)][_0x38d31(0x289)+_0x38d31(0x1d0)]('User\x20not'+_0x38d31(0x1cf)+_0x38d31(0x188));}if(_0x311fea&&_0x311fea[_0x38d31(0x1b1)]>MAX_MULTI_QUERY_DOCUMENTS)throw error_handler_1[_0x38d31(0x112)][_0x38d31(0xfb)+'st'](_0x38d31(0x190)+MAX_MULTI_QUERY_DOCUMENTS+('\x20documen'+_0x38d31(0x27b)+_0x38d31(0x232)+_0x38d31(0x1f9)+'e'));logger_1['logger'][_0x38d31(0xf0)](_0x38d31(0x1f2)+'\x20query\x20i'+_0x38d31(0x22f),{'userId':_0xf8e46c,'documentId':_0x1750e2,'documentCount':_0x311fea?.['length']||0x1,'questionLength':_0x4ebbe0[_0x38d31(0x1cc)]()['length'],'topK':topK});if(_0x1750e2){if(_0x38d31(0x22e)===_0x59da22[_0x38d31(0x13a)])throw _0x20df50[_0x38d31(0x112)]['unauthor'+_0x38d31(0x1d0)](_0x59da22[_0x38d31(0xdc)]);else{const _0x13374f=await document_manager_service_1[_0x38d31(0x11e)+'ManagerS'+_0x38d31(0xc6)][_0x38d31(0x131)+_0x38d31(0x17a)](_0x1750e2,_0xf8e46c);if(!_0x13374f)throw error_handler_1[_0x38d31(0x112)][_0x38d31(0x27c)](_0x59da22[_0x38d31(0x19b)]);if(_0x59da22[_0x38d31(0x206)](_0x13374f[_0x38d31(0x1b3)],_0x59da22['VMfCm'])){if('cOMai'!==_0x38d31(0x192))throw error_handler_1[_0x38d31(0x112)][_0x38d31(0xfb)+'st'](_0x38d31(0x1f2)+_0x38d31(0x266)+_0x13374f[_0x38d31(0x1b3)][_0x38d31(0x211)+_0x38d31(0x1b4)]()+(_0x38d31(0x252)+_0x38d31(0x22b)+_0x38d31(0x20e)+_0x38d31(0x239)+'complete'+'.'));else throw _0x1bb499[_0x38d31(0x112)][_0x38d31(0x27c)](_0x59da22[_0x38d31(0x1fa)]);}const _0x11296c=await document_rag_service_1['document'+'RAGServi'+'ce']['queryDoc'+'ument'](_0x4ebbe0,{'documentId':_0x1750e2,'userId':_0xf8e46c,'topK':topK});await document_manager_service_1[_0x38d31(0x11e)+_0x38d31(0x276)+_0x38d31(0xc6)][_0x38d31(0xee)+'tQueryCo'+_0x38d31(0x123)](_0x1750e2),logger_1[_0x38d31(0x209)][_0x38d31(0x26a)](_0x59da22[_0x38d31(0x28d)],{'userId':_0xf8e46c,'documentId':_0x1750e2,'wordsUsed':_0x11296c[_0x38d31(0x167)+'d']}),res[_0x38d31(0x1b3)](0xc8)['json']({'success':!![],'data':_0x11296c});return;}}if(_0x311fea&&_0x59da22[_0x38d31(0x256)](_0x311fea[_0x38d31(0x1b1)],0x0)){if(_0x38d31(0x18e)===_0x59da22[_0x38d31(0x18b)])throw _0x3a28af['ApiError'][_0x38d31(0x289)+_0x38d31(0x1d0)](_0x514539[_0x38d31(0x170)]);else{const _0x39ce53=await Promise[_0x38d31(0x29f)](_0x311fea[_0x38d31(0x154)](_0x41d24e=>document_manager_service_1[_0x38d31(0x11e)+'ManagerS'+_0x38d31(0xc6)][_0x38d31(0x131)+'entById'](_0x41d24e,_0xf8e46c))),_0x51779e=_0x39ce53[_0x38d31(0x163)](_0x5396c9=>!_0x5396c9);if(_0x51779e[_0x38d31(0x1b1)]>0x0)throw error_handler_1[_0x38d31(0x112)][_0x38d31(0x27c)](_0x59da22[_0x38d31(0x1fa)]);const _0x5979db=_0x39ce53[_0x38d31(0x163)](_0x37d3ea=>_0x37d3ea&&_0x37d3ea[_0x38d31(0x1b3)]!=='READY');if(_0x59da22[_0x38d31(0x25c)](_0x5979db[_0x38d31(0x1b1)],0x0)){if(_0x59da22[_0x38d31(0x27a)]===_0x59da22[_0x38d31(0x27a)]){const _0x3deddd=_0x5979db[_0x38d31(0x154)](_0x33186a=>_0x33186a?.[_0x38d31(0xfe)])[_0x38d31(0x163)](Boolean)[_0x38d31(0x191)](',\x20');throw error_handler_1[_0x38d31(0x112)][_0x38d31(0xfb)+'st']('The\x20foll'+'owing\x20do'+_0x38d31(0x1f4)+_0x38d31(0x24b)+'ready:\x20'+_0x3deddd+(_0x38d31(0x252)+_0x38d31(0x22b)+_0x38d31(0x20e)+'sing.'));}else throw _0x5ce50e[_0x38d31(0x112)][_0x38d31(0xfb)+'st'](_0x38d31(0x24a)+'nType\x20is'+_0x38d31(0x150)+'d');}const _0x1f90e6=await document_rag_service_1[_0x38d31(0x11e)+_0x38d31(0xe9)+'ce'][_0x38d31(0xe2)+_0x38d31(0x10f)+'ry'](_0x4ebbe0,{'documentIds':_0x311fea,'userId':_0xf8e46c,'topK':topK});await Promise[_0x38d31(0x29f)](_0x311fea['map'](_0x241c1b=>document_manager_service_1[_0x38d31(0x11e)+_0x38d31(0x276)+'ervice'][_0x38d31(0xee)+_0x38d31(0x138)+_0x38d31(0x123)](_0x241c1b))),logger_1[_0x38d31(0x209)][_0x38d31(0x26a)](_0x59da22[_0x38d31(0x1bc)],{'userId':_0xf8e46c,'documentCount':_0x311fea['length'],'wordsUsed':_0x1f90e6['wordsUse'+'d']}),res[_0x38d31(0x1b3)](0xc8)[_0x38d31(0x15a)]({'success':!![],'data':_0x1f90e6});}}}),this['deleteDo'+_0x3ace1f(0x1ca)]=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x149e7e)=>{const _0x2b629c=_0x3ace1f,_0x2c493b={'zqZUs':_0x59da22[_0x2b629c(0x28e)]},_0xded2c0=this['getUserI'+'d'](req),_0x3de460=req[_0x2b629c(0xef)]['id'];if(!_0xded2c0)throw error_handler_1[_0x2b629c(0x112)][_0x2b629c(0x289)+_0x2b629c(0x1d0)](_0x59da22[_0x2b629c(0xdc)]);logger_1['logger'][_0x2b629c(0xf0)](_0x2b629c(0x1f2)+'\x20deletio'+'n\x20initia'+_0x2b629c(0x22a),{'userId':_0xded2c0,'documentId':_0x3de460});const _0x3d3fea=await document_manager_service_1[_0x2b629c(0x11e)+_0x2b629c(0x276)+_0x2b629c(0xc6)][_0x2b629c(0x131)+'entById'](_0x3de460,_0xded2c0);if(!_0x3d3fea)throw error_handler_1[_0x2b629c(0x112)][_0x2b629c(0x27c)](_0x59da22['XmQvC']);if(_0x59da22[_0x2b629c(0x2a7)](_0x3d3fea[_0x2b629c(0x1b3)],_0x2b629c(0xc8)))try{await document_rag_service_1[_0x2b629c(0x11e)+'RAGServi'+'ce']['deleteDo'+_0x2b629c(0x1ca)](_0x3de460,_0xded2c0),logger_1['logger'][_0x2b629c(0x2af)](_0x2b629c(0x1f2)+'\x20removed'+'\x20from\x20ve'+_0x2b629c(0xd9),{'userId':_0xded2c0,'documentId':_0x3de460});}catch(_0x347f27){if(_0x59da22[_0x2b629c(0x1f6)](_0x2b629c(0x26b),_0x59da22[_0x2b629c(0x260)]))logger_1[_0x2b629c(0x209)]['error'](_0x59da22[_0x2b629c(0x1df)],_0x347f27,{'userId':_0xded2c0,'documentId':_0x3de460});else throw _0x37e95f[_0x2b629c(0x112)][_0x2b629c(0xfb)+'st'](_0x2c493b[_0x2b629c(0x2a6)]);}await document_manager_service_1[_0x2b629c(0x11e)+'ManagerS'+_0x2b629c(0xc6)][_0x2b629c(0x2ac)+_0x2b629c(0x1ca)](_0x3de460,_0xded2c0),logger_1[_0x2b629c(0x209)][_0x2b629c(0x26a)](_0x2b629c(0x1f2)+_0x2b629c(0x21d)+_0x2b629c(0x11f)+_0x2b629c(0x106),{'userId':_0xded2c0,'documentId':_0x3de460,'fileName':_0x3d3fea[_0x2b629c(0xfe)]}),res[_0x2b629c(0x1b3)](0xc8)[_0x2b629c(0x15a)]({'success':!![],'message':'Document'+'\x20deleted'+_0x2b629c(0x11f)+_0x2b629c(0x106),'data':{'documentId':_0x3de460,'fileName':_0x3d3fea['fileName']}});}),this[_0x3ace1f(0x279)+'cument']=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x401f78)=>{const _0xddb41c=_0x3ace1f,_0x3cafd8=this[_0xddb41c(0x29e)+'d'](req),_0x53bf5e=req[_0xddb41c(0xef)]['id'],{fileName:_0x2ffdcc}=req[_0xddb41c(0x238)];if(!_0x3cafd8){if(_0x59da22[_0xddb41c(0x23d)](_0x59da22[_0xddb41c(0xc9)],_0xddb41c(0x24d)))throw error_handler_1['ApiError']['unauthor'+_0xddb41c(0x1d0)](_0x59da22[_0xddb41c(0xdc)]);else throw _0x5e659d[_0xddb41c(0x112)]['badReque'+'st'](_0xddb41c(0x1cd)+'\x20is\x20requ'+_0xddb41c(0xec));}if(!_0x2ffdcc||_0x59da22['fQSKY'](_0x2ffdcc[_0xddb41c(0x1cc)]()['length'],0x0))throw error_handler_1[_0xddb41c(0x112)][_0xddb41c(0xfb)+'st'](_0x59da22[_0xddb41c(0x100)]);if(_0x59da22['TxJmx'](_0x2ffdcc[_0xddb41c(0x1cc)]()['length'],0xff))throw error_handler_1['ApiError']['badReque'+'st'](_0xddb41c(0xfe)+_0xddb41c(0x152)+_0xddb41c(0x261)+_0xddb41c(0x203)+'haracter'+'s');logger_1[_0xddb41c(0x209)]['info'](_0xddb41c(0x1f2)+_0xddb41c(0x207)+_0xddb41c(0xc7)+'d',{'userId':_0x3cafd8,'documentId':_0x53bf5e,'newFileName':_0x2ffdcc});const _0x252ab0=await document_manager_service_1[_0xddb41c(0x11e)+_0xddb41c(0x276)+'ervice'][_0xddb41c(0x131)+_0xddb41c(0x17a)](_0x53bf5e,_0x3cafd8);if(!_0x252ab0)throw error_handler_1['ApiError']['notFound'](_0xddb41c(0x1f2)+'\x20not\x20fou'+'nd');const _0x5f0cb6={'fileName':_0x2ffdcc[_0xddb41c(0x1cc)]()},_0x15b29d=await document_manager_service_1['document'+_0xddb41c(0x276)+_0xddb41c(0xc6)][_0xddb41c(0x279)+_0xddb41c(0x1ca)](_0x53bf5e,_0x3cafd8,_0x5f0cb6);logger_1[_0xddb41c(0x209)][_0xddb41c(0x26a)](_0xddb41c(0x1f2)+'\x20updated'+'\x20success'+_0xddb41c(0x106),{'userId':_0x3cafd8,'documentId':_0x53bf5e,'oldFileName':_0x252ab0[_0xddb41c(0xfe)],'newFileName':_0x15b29d['fileName']}),res[_0xddb41c(0x1b3)](0xc8)[_0xddb41c(0x15a)]({'success':!![],'message':_0xddb41c(0x1f2)+_0xddb41c(0x103)+_0xddb41c(0x11f)+_0xddb41c(0x106),'data':_0x15b29d});}),this[_0x3ace1f(0x247)+_0x3ace1f(0x1de)+_0x3ace1f(0xde)]=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x6fefc6)=>{const _0x525455=_0x3ace1f,_0x493d0d=this['getUserI'+'d'](req);if(!_0x493d0d)throw error_handler_1[_0x525455(0x112)][_0x525455(0x289)+_0x525455(0x1d0)](_0x59da22[_0x525455(0xdc)]);logger_1[_0x525455(0x209)][_0x525455(0x2af)](_0x525455(0x13e)+_0x525455(0x271)+_0x525455(0x25e)+_0x525455(0xde),{'userId':_0x493d0d});const _0x4bc5b2=await docs_credit_service_1[_0x525455(0x1d7)][_0x525455(0x1c1)+_0x525455(0x1eb)](_0x493d0d);logger_1[_0x525455(0x209)][_0x525455(0xf0)]('Smart\x20Do'+'cs\x20credi'+_0x525455(0x1e0)+'ed',{'userId':_0x493d0d,'totalAvailable':_0x4bc5b2[_0x525455(0x27e)+_0x525455(0xd4)],'percentageUsed':_0x4bc5b2[_0x525455(0xd5)+'geUsed']}),res[_0x525455(0x1b3)](0xc8)[_0x525455(0x15a)]({'success':!![],'data':_0x4bc5b2});}),this[_0x3ace1f(0x247)+'DocsSumm'+_0x3ace1f(0x180)]=(0x0,error_handler_1['asyncHan'+_0x3ace1f(0x10a)])(async(req,res,_0x1c03f1)=>{const _0x2f2b45=_0x3ace1f,_0x5c08cd=this['getUserI'+'d'](req);if(!_0x5c08cd)throw error_handler_1[_0x2f2b45(0x112)][_0x2f2b45(0x289)+_0x2f2b45(0x1d0)](_0x2f2b45(0xdd)+_0x2f2b45(0x1cf)+_0x2f2b45(0x188));logger_1[_0x2f2b45(0x209)][_0x2f2b45(0x2af)](_0x59da22[_0x2f2b45(0x210)],{'userId':_0x5c08cd});const _0x1c1694=await docs_credit_service_1[_0x2f2b45(0x1d7)]['getCredi'+_0x2f2b45(0x223)](_0x5c08cd);logger_1[_0x2f2b45(0x209)][_0x2f2b45(0xf0)](_0x59da22[_0x2f2b45(0xfc)],{'userId':_0x5c08cd,'plan':_0x1c1694[_0x2f2b45(0x218)],'totalAvailable':_0x1c1694[_0x2f2b45(0x29a)]['totalAva'+_0x2f2b45(0xd4)]}),res['status'](0xc8)[_0x2f2b45(0x15a)]({'success':!![],'data':_0x1c1694});}),this[_0x3ace1f(0x247)+_0x3ace1f(0x1d3)+'ures']=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x369166)=>{const _0x3029a1=_0x3ace1f,_0x5a99db={'QfZTR':function(_0x463811,_0x325c6d){return _0x59da22['WRGpc'](_0x463811,_0x325c6d);},'AdIYp':_0x59da22['NjDvn'],'XcUKE':_0x59da22[_0x3029a1(0x193)],'iArRM':function(_0x18a7b5,_0x1e6f40){return _0x18a7b5||_0x1e6f40;},'SfPMx':function(_0x2b75be,_0x1aa262){const _0x10d05c=_0x3029a1;return _0x59da22[_0x10d05c(0xcd)](_0x2b75be,_0x1aa262);}};if(_0x59da22[_0x3029a1(0x113)](_0x59da22[_0x3029a1(0x120)],_0x59da22[_0x3029a1(0x120)])){const _0x4d248f=this[_0x3029a1(0x29e)+'d'](req),_0x2cab65=this[_0x3029a1(0x11b)+_0x3029a1(0x1ad)+'n'](this[_0x3029a1(0x205)+_0x3029a1(0xe6)](req)),_0x2b8474=this['getUserR'+_0x3029a1(0x169)](req);if(!_0x4d248f)throw error_handler_1['ApiError'][_0x3029a1(0x289)+'ized'](_0x59da22['DZRnP']);logger_1[_0x3029a1(0x209)][_0x3029a1(0x2af)](_0x59da22[_0x3029a1(0x11d)],{'userId':_0x4d248f,'userPlan':_0x2cab65,'region':_0x2b8474});const _0x2b9fb2=await docs_credit_service_1[_0x3029a1(0x1d7)][_0x3029a1(0x1c1)+_0x3029a1(0x1eb)](_0x4d248f),_0x4ab43b=await docs_credit_service_1[_0x3029a1(0x1d7)]['getAffor'+'dableOpe'+'rations'](_0x4d248f,_0x2b8474),_0x3124ce=smart_docs_1[_0x3029a1(0x24f)+'CS_OPERA'+_0x3029a1(0x292)][_0x3029a1(0x154)](_0x37675a=>{const _0x13254e=_0x3029a1,_0x3b5e06=(0x0,smart_docs_1[_0x13254e(0x247)+_0x13254e(0x10d)+'ig'])(_0x37675a,_0x2b8474),_0x55f6cd=(0x0,smart_docs_1['canAcces'+_0x13254e(0xf7)+'csFeatur'+'e'])(_0x2cab65,_0x37675a),_0x47e72e=_0x4ab43b['includes'](_0x37675a);let _0x419aee=null;if(!_0x55f6cd)_0x5a99db[_0x13254e(0x115)]('EmWqL',_0x5a99db[_0x13254e(0x1c4)])?_0x3df6e5[_0x13254e(0xfa)]=new _0x49e44b():_0x419aee=_0x13254e(0x18d)+_0x13254e(0x1e6)+_0x3b5e06[_0x13254e(0x2a3)+_0x13254e(0xe6)]+('\x20to\x20unlo'+'ck');else!_0x47e72e&&(_0x2b9fb2['dailyRem'+'aining']<_0x3b5e06[_0x13254e(0x212)]?_0x419aee=_0x5a99db['XcUKE']:_0x419aee=_0x13254e(0x12f)+'ient\x20cre'+_0x13254e(0x15b));return{'id':_0x37675a,'name':_0x3b5e06['displayN'+_0x13254e(0x217)],'description':_0x3b5e06[_0x13254e(0x2a5)+_0x13254e(0x23b)],'category':_0x3b5e06[_0x13254e(0x284)],'credits':_0x3b5e06[_0x13254e(0x212)],'minimumPlan':_0x3b5e06['minimumP'+_0x13254e(0xe6)],'model':_0x3b5e06[_0x13254e(0x1ac)],'provider':_0x3b5e06['provider'],'maxOutputTokens':_0x3b5e06[_0x13254e(0x298)+'tTokens'],'tokens':_0x3b5e06[_0x13254e(0x17e)],'isLocked':_0x5a99db[_0x13254e(0x1d5)](!_0x55f6cd,!_0x47e72e),'hasAccess':_0x55f6cd,'canAfford':_0x47e72e,'lockReason':_0x419aee,'runsAvailable':_0x55f6cd?Math[_0x13254e(0x278)](Math[_0x13254e(0x11c)](_0x5a99db[_0x13254e(0x143)](_0x2b9fb2[_0x13254e(0x27e)+_0x13254e(0xd4)],_0x3b5e06[_0x13254e(0x212)])),Math[_0x13254e(0x11c)](_0x5a99db[_0x13254e(0x143)](_0x2b9fb2[_0x13254e(0x268)+_0x13254e(0x155)],_0x3b5e06['credits']))):0x0};}),_0x618565={'STARTER':_0x3124ce['filter'](_0x256afc=>_0x256afc['minimumP'+_0x3029a1(0xe6)]===_0x3029a1(0x1e1)),'PLUS':_0x3124ce[_0x3029a1(0x163)](_0x550ce3=>_0x550ce3['minimumP'+_0x3029a1(0xe6)]===_0x3029a1(0x12b)),'PRO':_0x3124ce[_0x3029a1(0x163)](_0x19e360=>_0x19e360[_0x3029a1(0x2a3)+'lan']===_0x3029a1(0x245)),'APEX':_0x3124ce[_0x3029a1(0x163)](_0x37cb6f=>_0x37cb6f[_0x3029a1(0x2a3)+_0x3029a1(0xe6)]===_0x3029a1(0x133))},_0x3c6ee2=_0x3124ce['reduce']((_0x47d3c4,_0x3aa436)=>{const _0x427e03=_0x3029a1;if(!_0x47d3c4[_0x3aa436[_0x427e03(0x284)]])_0x47d3c4[_0x3aa436['category']]=[];return _0x47d3c4[_0x3aa436[_0x427e03(0x284)]]['push'](_0x3aa436),_0x47d3c4;},{});logger_1[_0x3029a1(0x209)][_0x3029a1(0xf0)](_0x3029a1(0x250)+_0x3029a1(0x108)+'res\x20fetc'+_0x3029a1(0x1ff),{'userId':_0x4d248f,'total':_0x3124ce['length'],'unlocked':_0x3124ce[_0x3029a1(0x163)](_0x3cbd46=>_0x3cbd46[_0x3029a1(0x1ec)+'s'])['length'],'affordable':_0x3124ce['filter'](_0x1b0c38=>_0x1b0c38[_0x3029a1(0x1da)+'d'])[_0x3029a1(0x1b1)]}),res[_0x3029a1(0x1b3)](0xc8)[_0x3029a1(0x15a)]({'success':!![],'data':{'features':_0x3124ce,'byPlan':_0x618565,'byCategory':_0x3c6ee2,'summary':{'total':_0x3124ce['length'],'unlocked':_0x3124ce[_0x3029a1(0x163)](_0x5f3a2c=>_0x5f3a2c[_0x3029a1(0x1ec)+'s'])[_0x3029a1(0x1b1)],'affordable':_0x3124ce[_0x3029a1(0x163)](_0xa2a931=>_0xa2a931['canAffor'+'d'])[_0x3029a1(0x1b1)],'locked':_0x3124ce[_0x3029a1(0x163)](_0x130fea=>_0x130fea['isLocked'])[_0x3029a1(0x1b1)]},'userPlan':_0x2cab65,'balance':_0x2b9fb2}});}else return req['file'];}),this[_0x3ace1f(0x116)+_0x3ace1f(0x1e3)+_0x3ace1f(0x254)]=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x5346bf)=>{const _0x4c9522=_0x3ace1f,_0x10c470=this['getUserI'+'d'](req),{operation:_0x1cae7f}=req['body'],_0x367cab=this['getUserR'+'egion'](req);if(!_0x10c470){if(_0x59da22[_0x4c9522(0x206)](_0x59da22[_0x4c9522(0xe0)],_0x4c9522(0x1bd))){const _0x2b5a1b=req[_0x4c9522(0x162)];return _0x2b5a1b?.['plan']||_0x2b5a1b?.[_0x4c9522(0xd2)]||_0x4c9522(0x13d);}else throw error_handler_1[_0x4c9522(0x112)][_0x4c9522(0x289)+_0x4c9522(0x1d0)]('User\x20not'+_0x4c9522(0x1cf)+_0x4c9522(0x188));}if(!_0x1cae7f){if(_0x59da22[_0x4c9522(0x226)](_0x59da22[_0x4c9522(0x12c)],'UJwoz'))throw _0x5cee4b['ApiError']['badReque'+'st'](_0x4c9522(0x1f2)+_0x4c9522(0x266)+_0x34afe7[_0x4c9522(0x1b3)][_0x4c9522(0x211)+_0x4c9522(0x1b4)]()+(_0x4c9522(0x252)+_0x4c9522(0x22b)+_0x4c9522(0x20e)+_0x4c9522(0x239)+_0x4c9522(0xf3)+'.'));else throw error_handler_1[_0x4c9522(0x112)][_0x4c9522(0xfb)+'st'](_0x59da22[_0x4c9522(0x144)]);}logger_1[_0x4c9522(0x209)]['debug'](_0x59da22[_0x4c9522(0xed)],{'userId':_0x10c470,'operation':_0x1cae7f});const _0x640c9d=await docs_credit_service_1['default'][_0x4c9522(0xd7)+'rmOperat'+_0x4c9522(0x23b)](_0x10c470,_0x1cae7f,_0x367cab),_0x56448c=(0x0,smart_docs_1[_0x4c9522(0x247)+'DocsConf'+'ig'])(_0x1cae7f,_0x367cab);logger_1['logger']['info'](_0x59da22[_0x4c9522(0x158)],{'userId':_0x10c470,'operation':_0x1cae7f,'canProceed':_0x640c9d['canProce'+'ed']}),res[_0x4c9522(0x1b3)](0xc8)[_0x4c9522(0x15a)]({'success':!![],'data':{..._0x640c9d,'operation':_0x1cae7f,'operationName':_0x56448c[_0x4c9522(0x28b)+'ame'],'creditCost':_0x56448c[_0x4c9522(0x212)],'minimumPlan':_0x56448c['minimumP'+_0x4c9522(0xe6)]}});}),this['getSmart'+_0x3ace1f(0x107)+'e']=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x34e9b5)=>{const _0x32bdda=_0x3ace1f,_0x5bd2c9=this[_0x32bdda(0x29e)+'d'](req),_0x1e8054=req[_0x32bdda(0x1b5)][_0x32bdda(0x139)]||_0x32bdda(0x1d8);if(!_0x5bd2c9)throw error_handler_1[_0x32bdda(0x112)]['unauthor'+_0x32bdda(0x1d0)](_0x32bdda(0xdd)+_0x32bdda(0x1cf)+'icated');logger_1['logger'][_0x32bdda(0x2af)](_0x59da22[_0x32bdda(0x269)],{'userId':_0x5bd2c9,'period':_0x1e8054});const _0x32a298=await docs_credit_service_1['default']['getUsage'+_0x32bdda(0x22d)](_0x5bd2c9,_0x1e8054);logger_1[_0x32bdda(0x209)]['info'](_0x59da22[_0x32bdda(0x109)],{'userId':_0x5bd2c9,'period':_0x1e8054,'totalCreditsUsed':_0x32a298[_0x32bdda(0x29d)+_0x32bdda(0xe5)]}),res['status'](0xc8)[_0x32bdda(0x15a)]({'success':!![],'data':_0x32a298});}),this['getSmart'+_0x3ace1f(0x26c)+'s']=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x3e4d1a)=>{const _0x42dd70=_0x3ace1f;if(_0x59da22[_0x42dd70(0x206)](_0x42dd70(0x118),_0x42dd70(0x118)))throw _0x22fcf2['ApiError'][_0x42dd70(0x289)+_0x42dd70(0x1d0)](_0x42dd70(0xdd)+'\x20authent'+_0x42dd70(0x188));else{const _0x5f0481=this[_0x42dd70(0x29e)+'d'](req);if(!_0x5f0481)throw error_handler_1[_0x42dd70(0x112)][_0x42dd70(0x289)+'ized'](_0x59da22['DZRnP']);logger_1[_0x42dd70(0x209)]['debug'](_0x59da22[_0x42dd70(0x2a8)],{'userId':_0x5f0481});const _0x29baf9=await docs_credit_service_1['default'][_0x42dd70(0x23e)+_0x42dd70(0xcb)+_0x42dd70(0x105)](_0x5f0481);logger_1[_0x42dd70(0x209)][_0x42dd70(0xf0)](_0x59da22[_0x42dd70(0x1db)],{'userId':_0x5f0481,'available':_0x29baf9[_0x42dd70(0x17f)+'e'],'packCount':_0x29baf9['packs'][_0x42dd70(0x1b1)],'region':_0x29baf9[_0x42dd70(0x219)]}),res[_0x42dd70(0x1b3)](0xc8)[_0x42dd70(0x15a)]({'success':!![],'data':_0x29baf9});}}),this['purchase'+_0x3ace1f(0x11a)+'sPack']=(0x0,error_handler_1[_0x3ace1f(0xf6)+_0x3ace1f(0x10a)])(async(req,res,_0x2a0ee2)=>{const _0x21dbf2=_0x3ace1f,_0x1641fa=this[_0x21dbf2(0x29e)+'d'](req),{packId:_0x126b4e}=req[_0x21dbf2(0x238)];if(!_0x1641fa){if(_0x21dbf2(0x2a4)===_0x59da22[_0x21dbf2(0x285)])throw _0x3f126a['ApiError'][_0x21dbf2(0x289)+'ized'](_0x21dbf2(0xdd)+_0x21dbf2(0x1cf)+_0x21dbf2(0x188));else throw error_handler_1[_0x21dbf2(0x112)][_0x21dbf2(0x289)+'ized'](_0x21dbf2(0xdd)+'\x20authent'+_0x21dbf2(0x188));}if(!_0x126b4e)throw error_handler_1[_0x21dbf2(0x112)][_0x21dbf2(0xfb)+'st'](_0x59da22[_0x21dbf2(0x196)]);logger_1['logger']['info'](_0x21dbf2(0x250)+_0x21dbf2(0x253)+_0x21dbf2(0x17b)+_0x21dbf2(0xd3)+'ed',{'userId':_0x1641fa,'packId':_0x126b4e});const _0x5eebae=await docs_credit_service_1[_0x21dbf2(0x1d7)]['purchase'+_0x21dbf2(0x13c)](_0x1641fa,_0x126b4e);if(!_0x5eebae[_0x21dbf2(0x26a)])throw error_handler_1[_0x21dbf2(0x112)]['badReque'+'st'](_0x5eebae['error']||_0x59da22[_0x21dbf2(0x277)]);logger_1[_0x21dbf2(0x209)][_0x21dbf2(0x26a)](_0x59da22[_0x21dbf2(0x22c)],{'userId':_0x1641fa,'packId':_0x126b4e,'creditsAdded':_0x5eebae[_0x21dbf2(0x177)+_0x21dbf2(0x1bb)],'newTotal':_0x5eebae[_0x21dbf2(0x246)+'ce']['totalAva'+'ilable']}),res['status'](0xc8)['json']({'success':!![],'message':_0x21dbf2(0x288)+_0x21dbf2(0x12a)+_0x21dbf2(0x1be)+_0x5eebae[_0x21dbf2(0x177)+'dded']+(_0x21dbf2(0x198)+'!'),'data':_0x5eebae});}),this[_0x3ace1f(0xf5)+_0x3ace1f(0x295)+_0x3ace1f(0x1e3)+'s']=(0x0,error_handler_1['asyncHan'+_0x3ace1f(0x10a)])(async(req,res,_0x2cf932)=>{const _0x363db3=_0x3ace1f,_0x10f317=this[_0x363db3(0x29e)+'d'](req),_0x290cf6=this['getUserR'+_0x363db3(0x169)](req);if(!_0x10f317)throw error_handler_1['ApiError'][_0x363db3(0x289)+_0x363db3(0x1d0)](_0x59da22[_0x363db3(0xdc)]);logger_1[_0x363db3(0x209)][_0x363db3(0x2af)](_0x363db3(0x13e)+_0x363db3(0x13f)+_0x363db3(0x149)+_0x363db3(0x224)+_0x363db3(0x1ae)+'s',{'userId':_0x10f317});const _0x248f45=await docs_credit_service_1['default']['getAffor'+'dableOpe'+_0x363db3(0x148)](_0x10f317,_0x290cf6),_0x25c958=_0x248f45[_0x363db3(0x154)](_0x2bc40a=>{const _0x29cc85=_0x363db3,_0x3b8ab0=(0x0,smart_docs_1[_0x29cc85(0x247)+_0x29cc85(0x10d)+'ig'])(_0x2bc40a,_0x290cf6);return{'id':_0x2bc40a,'name':_0x3b8ab0[_0x29cc85(0x28b)+'ame'],'credits':_0x3b8ab0[_0x29cc85(0x212)],'minimumPlan':_0x3b8ab0['minimumP'+_0x29cc85(0xe6)],'category':_0x3b8ab0[_0x29cc85(0x284)]};});logger_1[_0x363db3(0x209)][_0x363db3(0xf0)]('Affordab'+_0x363db3(0xe8)+_0x363db3(0x275)+_0x363db3(0x227)+_0x363db3(0x216),{'userId':_0x10f317,'count':_0x248f45[_0x363db3(0x1b1)]}),res[_0x363db3(0x1b3)](0xc8)['json']({'success':!![],'data':{'operations':_0x25c958,'count':_0x248f45['length']}});}),this[_0x3ace1f(0x259)+_0x3ace1f(0x1c5)]=async(_0x41ffb7,_0x3bece9,_0x3c7f0a)=>{const _0x371b05=_0x3ace1f;if(_0x371b05(0x140)!==_0x371b05(0x140))throw _0x548759[_0x371b05(0x112)]['unauthor'+_0x371b05(0x1d0)](_0x371b05(0xdd)+_0x371b05(0x1cf)+_0x371b05(0x188));else try{logger_1[_0x371b05(0x209)][_0x371b05(0xf0)](_0x371b05(0x1c9)+_0x371b05(0x160)+_0x371b05(0x1a8)+'sing',{'documentId':_0x41ffb7,'userId':_0x3bece9}),await document_manager_service_1['document'+_0x371b05(0x276)+_0x371b05(0xc6)]['updateSt'+_0x371b05(0x291)](_0x41ffb7,document_manager_service_1[_0x371b05(0x1f2)+_0x371b05(0x1a9)][_0x371b05(0x18f)+'NG']),await document_rag_service_1['document'+_0x371b05(0xe9)+'ce'][_0x371b05(0xe1)+'ument'](_0x41ffb7,_0x3c7f0a,_0x3bece9),logger_1[_0x371b05(0x209)]['success'](_0x59da22[_0x371b05(0x20b)],{'documentId':_0x41ffb7,'userId':_0x3bece9});}catch(_0x1823a9){logger_1[_0x371b05(0x209)]['error'](_0x59da22[_0x371b05(0xe4)],_0x1823a9,{'documentId':_0x41ffb7,'userId':_0x3bece9});const _0x245e74=_0x59da22['DDshT'](_0x1823a9,Error)?_0x1823a9[_0x371b05(0x204)]:_0x371b05(0x19c)+_0x371b05(0xda)+_0x371b05(0x264)+'cessing';await document_manager_service_1['document'+_0x371b05(0x276)+'ervice'][_0x371b05(0x233)+_0x371b05(0x291)](_0x41ffb7,document_manager_service_1[_0x371b05(0x1f2)+_0x371b05(0x1a9)][_0x371b05(0x102)],_0x245e74);}};}static['getInsta'+'nce'](){const _0x165442=_0x31b7d9,_0x3a6bdb={'uuIrq':_0x165442(0x225)};if(!DocumentController[_0x165442(0xfa)]){if(_0x3a6bdb['uuIrq']!==_0x165442(0x157))DocumentController[_0x165442(0xfa)]=new DocumentController();else throw _0x1a1d4f['ApiError'][_0x165442(0x289)+_0x165442(0x1d0)](_0x165442(0xdd)+_0x165442(0x1cf)+_0x165442(0x188));}return DocumentController['instance'];}[_0x31b7d9(0x29e)+'d'](req){const _0x1b4152=_0x31b7d9,_0xf7b060=req[_0x1b4152(0x162)];return _0xf7b060?.[_0x1b4152(0x248)]||_0xf7b060?.['id'];}[_0x31b7d9(0x205)+_0x31b7d9(0xe6)](req){const _0x36e7f1=_0x31b7d9,_0x5435c8=req[_0x36e7f1(0x162)];return _0x5435c8?.[_0x36e7f1(0x218)]||_0x5435c8?.['planType']||_0x36e7f1(0x13d);}['getUploa'+_0x31b7d9(0x1fe)](req){const _0x1ebfb4=_0x31b7d9;return req[_0x1ebfb4(0x1f7)];}[_0x31b7d9(0x16f)+_0x31b7d9(0x169)](req){const _0xfa2277=_0x31b7d9,_0x107590={'rMYia':_0xfa2277(0x2a9)},_0x49d3cd=req[_0xfa2277(0x162)];return _0x49d3cd?.['country']==='IN'?'IN':_0x107590[_0xfa2277(0x1b8)];}[_0x31b7d9(0x11b)+_0x31b7d9(0x1ad)+'n'](_0x1d757d){const _0x363a2f=_0x31b7d9,_0x136f68={'GwVUH':_0x363a2f(0x12b),'nJRxO':'SOVEREIG'+'N'};switch(_0x1d757d?.[_0x363a2f(0x10c)+'ase']()){case _0x363a2f(0x12b):return _0x136f68['GwVUH'];case'PRO':return _0x363a2f(0x245);case _0x363a2f(0x133):case _0x136f68[_0x363a2f(0x1fc)]:return'APEX';default:return _0x363a2f(0x1e1);}}}exports[_0x31b7d9(0x1d7)]=DocumentController[_0x31b7d9(0x15d)+_0x31b7d9(0xf4)]();