const _0x212175=_0x4695;(function(_0x75bdbe,_0x4bad73){const _0x49ecec=_0x4695,_0x1a0feb=_0x75bdbe();while(!![]){try{const _0x32b3ef=parseInt(_0x49ecec(0x1bd))/0x1*(parseInt(_0x49ecec(0x16e))/0x2)+parseInt(_0x49ecec(0x10c))/0x3+-parseInt(_0x49ecec(0x109))/0x4+parseInt(_0x49ecec(0x148))/0x5+-parseInt(_0x49ecec(0xc1))/0x6*(parseInt(_0x49ecec(0xfb))/0x7)+-parseInt(_0x49ecec(0x138))/0x8+parseInt(_0x49ecec(0x145))/0x9;if(_0x32b3ef===_0x4bad73)break;else _0x1a0feb['push'](_0x1a0feb['shift']());}catch(_0x30b702){_0x1a0feb['push'](_0x1a0feb['shift']());}}}(_0x4447,0x9f2ec));const _0x434859=(function(){const _0x10cc8b={'SlNbn':function(_0x599816,_0x4d70ff){return _0x599816!==_0x4d70ff;},'gkhhS':'CCnpy'};let _0x5f092e=!![];return function(_0x4fa984,_0x19a503){const _0x5bfdde=_0x5f092e?function(){const _0xe823da=_0x4695;if(_0x10cc8b['SlNbn'](_0xe823da(0x174),_0x10cc8b[_0xe823da(0xb1)]))return{'success':![],'error':_0xe823da(0x12c)+_0xe823da(0xae)+'\x20('+_0x5781d8['MAX_BRAN'+'CHES_PER'+_0xe823da(0x130)]+(_0xe823da(0x17e)+'d'),'reason':_0xe823da(0x136)+_0xe823da(0x1b2)};else{if(_0x19a503){const res=_0x19a503['apply'](_0x4fa984,arguments);return _0x19a503=null,res;}}}:function(){};return _0x5f092e=![],_0x5bfdde;};}()),_0x4d1b88=_0x434859(this,function(){const _0x4fb4b3=_0x4695,_0x545f37={'YkCQX':_0x4fb4b3(0x112)+_0x4fb4b3(0xc8)};return _0x4d1b88[_0x4fb4b3(0x161)]()['search']('(((.+)+)'+_0x4fb4b3(0xc8))[_0x4fb4b3(0x161)]()[_0x4fb4b3(0x121)+_0x4fb4b3(0x151)](_0x4d1b88)[_0x4fb4b3(0x188)](_0x545f37[_0x4fb4b3(0x1af)]);});_0x4d1b88();'use strict';Object[_0x212175(0xba)+_0x212175(0x101)](exports,_0x212175(0x115)+'le',{'value':!![]}),exports[_0x212175(0xe1)+_0x212175(0xee)]=exports[_0x212175(0x119)+_0x212175(0xee)]=void 0x0;const prisma_1=require(_0x212175(0xce)+_0x212175(0x1a5)+_0x212175(0xbd)),constants_1=require(_0x212175(0xce)+_0x212175(0x192)+'ts');class BranchingConfig{static[_0x212175(0xc7)+_0x212175(0x156)+_0x212175(0xe7)](_0x4d97b4){const _0x429b64=_0x212175;return this[_0x429b64(0x133)+'ITS'][_0x4d97b4]||0x0;}}BranchingConfig[_0x212175(0x10d)]=process['env'][_0x212175(0xe8)+_0x212175(0xaf)+'D']!=='false',BranchingConfig[_0x212175(0x14f)+_0x212175(0x153)+'_SESSION']=parseInt(process[_0x212175(0x106)]['MAX_BRAN'+'CHES_PER'+_0x212175(0x130)]||'10'),BranchingConfig['MAX_BRAN'+_0x212175(0x110)]=parseInt(process['env'][_0x212175(0x14f)+_0x212175(0x110)]||'5'),BranchingConfig[_0x212175(0x195)+_0x212175(0xc6)+'BLED']=process[_0x212175(0x106)]['BRANCH_A'+_0x212175(0xed)+_0x212175(0xb9)+_0x212175(0x114)]===_0x212175(0x117),BranchingConfig[_0x212175(0xb5)+'AFTER_DA'+'YS']=parseInt(process['env'][_0x212175(0x1a7)+_0x212175(0x152)+'FTER_DAY'+'S']||'30'),BranchingConfig[_0x212175(0x17c)+'ATION_EN'+'ABLED']=process[_0x212175(0x106)]['BRANCH_V'+_0x212175(0xf0)+_0x212175(0x1ab)+_0x212175(0x197)]!=='false',BranchingConfig[_0x212175(0x171)+'ON_ENABL'+'ED']=process['env'][_0x212175(0x1a7)+'OMPARISO'+'N_ENABLE'+'D']!==_0x212175(0x118),BranchingConfig[_0x212175(0x107)+'ABLED']=process[_0x212175(0x106)][_0x212175(0x139)+_0x212175(0xfc)+_0x212175(0x197)]===_0x212175(0x117),BranchingConfig[_0x212175(0x133)+_0x212175(0xfd)]={[constants_1[_0x212175(0x10b)][_0x212175(0x16f)]]:0x0,[constants_1['PlanType']['PLUS']]:0x3,[constants_1[_0x212175(0x10b)][_0x212175(0x193)]]:0x5,[constants_1['PlanType'][_0x212175(0x16b)]]:0xa,[constants_1[_0x212175(0x10b)][_0x212175(0x15f)+'N']]:0x1869f};function _0x4695(_0x4fa94e,_0x5da7a2){_0x4fa94e=_0x4fa94e-0xa7;const _0x16361c=_0x4447();let _0x4d1b88=_0x16361c[_0x4fa94e];if(_0x4695['ilXmKo']===undefined){var _0x434859=function(_0x593438){const _0x185630='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x191fdb='',_0x5c8e88='',_0xe73dd7=_0x191fdb+_0x434859;for(let _0x4df3ff=0x0,_0x5c6e50,_0x1ce649,_0x5f14f4=0x0;_0x1ce649=_0x593438['charAt'](_0x5f14f4++);~_0x1ce649&&(_0x5c6e50=_0x4df3ff%0x4?_0x5c6e50*0x40+_0x1ce649:_0x1ce649,_0x4df3ff++%0x4)?_0x191fdb+=_0xe73dd7['charCodeAt'](_0x5f14f4+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x5c6e50>>(-0x2*_0x4df3ff&0x6)):_0x4df3ff:0x0){_0x1ce649=_0x185630['indexOf'](_0x1ce649);}for(let _0x2bbf7f=0x0,_0x4ed739=_0x191fdb['length'];_0x2bbf7f<_0x4ed739;_0x2bbf7f++){_0x5c8e88+='%'+('00'+_0x191fdb['charCodeAt'](_0x2bbf7f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5c8e88);};_0x4695['waYpEH']=_0x434859,_0x4695['XEBBgc']={},_0x4695['ilXmKo']=!![];}const _0x444729=_0x16361c[0x0],_0x469569=_0x4fa94e+_0x444729,_0x564fcf=_0x4695['XEBBgc'][_0x469569];if(!_0x564fcf){const _0x26ee0a=function(_0xeb972c){this['PKRUiQ']=_0xeb972c,this['nhMvin']=[0x1,0x0,0x0],this['qtZePt']=function(){return'newState';},this['DJePYK']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['YULeFI']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x26ee0a['prototype']['gZALTv']=function(){const _0x27ad82=new RegExp(this['DJePYK']+this['YULeFI']),_0x5191fe=_0x27ad82['test'](this['qtZePt']['toString']())?--this['nhMvin'][0x1]:--this['nhMvin'][0x0];return this['ziAQKZ'](_0x5191fe);},_0x26ee0a['prototype']['ziAQKZ']=function(_0x5853ea){if(!Boolean(~_0x5853ea))return _0x5853ea;return this['ORhIiI'](this['PKRUiQ']);},_0x26ee0a['prototype']['ORhIiI']=function(_0x31b9ee){for(let _0x3cf391=0x0,_0x29a160=this['nhMvin']['length'];_0x3cf391<_0x29a160;_0x3cf391++){this['nhMvin']['push'](Math['round'](Math['random']())),_0x29a160=this['nhMvin']['length'];}return _0x31b9ee(this['nhMvin'][0x0]);},new _0x26ee0a(_0x4695)['gZALTv'](),_0x4d1b88=_0x4695['waYpEH'](_0x4d1b88),_0x4695['XEBBgc'][_0x469569]=_0x4d1b88;}else _0x4d1b88=_0x564fcf;return _0x4d1b88;}function _0x4447(){const _0x567ece=['yMjsChy','mJm4sxv5Cxrm','rvjhrv9ftKe','svrt','B3rFzM91BMq','DgvKoG','zujYyw5JAeq','B3bLCNr5','quDdzgu','yw5JAa','C0D3y24','w0jYyw5JAgK','zw52','tuvsr0vFru4','C2zSDhe','ndiZnJG5nNzVCeHLtG','zNzcCKK','ugXHBLr5Cgu','mZm0nZKXnLflzMLxza','ru5bqKXfra','CLnnAgW','BMnOigrLBgu','q0HFrevqveG','y2HLC19Yzwe','kcGOlISPkYK','t2vHu0W','teve','x19LC01Vzhu','v1jRzKy','Dhj1zq','zMfSC2u','qNjHBMnOAw4','C29Tzq','y2HPBgrYzw4','t2XrvKq','tuPJquW','zv0G8j+mSYbcCMe','zgvSzxrLtwe','q2rLveK','y29UC3rYDwm','Aw5ZDgfUy2u','igvYCM9YoG','q0TvtfK','CMXKlwnSyxm','qNjHBMnOvhi','BIbPCYbKAxm','A25gwfm','Cwrry3i','igjYyw5JAa','yNjHBMnOxW','twf4Aw11Bsa','CwzSuxe','Agndre0','z2v0qNjHBMm','x1nfu1njt04','CIbHy2nLC3m','BMHREK0','ueXbtL9msu0','BvHQr08','y291BNq','C3LZDgvTx2W','DgLVBLbSyw4','odCWodG0mgDxuKrfqW','qLjbtKnix00','C2LVBIbUB3q','DxnLCG','zv0G8j+mSYbjBMK','y3jLyxrLqNi','ufDmrxK','zsbICMfUy2G','zxjYB3i','igzVDw5K','y29TCgfYzui','B21WyxjPC28','zgLZywjSzwq','mty5nZiYodftzw1sD3q','y2HHDfnLC3m','vKjRtNG','mJm4nJC4mhzJyvvdAG','y2HLza','C2vZC2LVBKK','zxb0AcaO','ig1LC3nHz2u','yNjHBMnOswq','vgvnvge','tufyx0jsqu4','ChvZAa','Dg9Y','tevbtLvqx0e','q0Hfu19qrvi','uezSshi','ywjSzwq','yw5JAgvZrM8','B21WBgv0ztO','qMDkuKC','zv0G8j+uJsbcCMe','rMfPBgvKihq','AgLNAgvYlG','vwvWDgC','BLfxuhm','ifbstYbVCIa','u09wrvjfsuC','BKTvyLO','Dg9tDhjPBMC','zgvSzxrLqNi','zxnZywDLig4','z3jVDxbcEq','zNrur2K','Bg9N','BYbJB21Wyxi','D1LVqve','Bwzdug4','DxnLCL9UB3q','qvbfwa','y2fSy3vSyxq','vxnLCIbUB3q','mtGWmfj3Chf1sG','u1rbuLrfuG','z3jHzguGDg8','q09nuefssvm','ww91CIbWBge','y2XLyw51Ce8','q0nUChK','uKfOquO','BMnOignVBxa','BM90x2zVDw4','zM9YrwfJAa','B0zRqKm','vw1xEvq','zcbMB3iGEw8','vKLtvufmsvO','qNjHBMnOswq','ksbYzwfJAgu','BMDtzxj2Awm','ywXS','Bxr2tgW','zxb0Aa','r1HVBfq','CMfUy2GGDhi','yw5JAdO','zv0Gq29TCge','y29UDgvUDa','C2vHCMnO','Bwf4','yK1wwhu','CxLKu1q','CYbYzw1VDMu','z2vUzxjHDgu','qNjHBMnOigq','DgLHBgL6zwq','zv0GrgvSzxq','CNqGyNjHBMm','l2nVBNn0yw4','ufjp','C3vIC2nYAxa','qvvut19dteu','CM9Szq','qKXfra','vfbVAw0','CYbMzwf0Dxi','y2XLyw51Cca','qwLos0S','ruzJDNa','B3jNyw5PEMu','yxnJ','C29YDa','zv0G4PYfienYzq','rMDTu0e','igzVDw5Kig8','q2HHDcbZzxm','Dgu6','l2nVBMzPzY8','zwXLDgvKicG','qLjbtKnix0m','zu1HEerLChq','yw5JAcb0CMu','zv0Gr2v0igi','veLptL9ftKe','BKDHyNy','igrLBMLLza','ve91swe','wwTduvG','EfnSsuK','qNjHBMnOigm','Aw1PDa','BgrcCMfUy2G','yxbWBhK','C3nHz2vjza','BwfW','zv0Gqxv0BY0','Aw9U','zwq6','v215Dva','BwvZC2fNzum','uMLArxG','nJCZsxDgDxry','quj1z2y','Bwf4x2rLChq','wxfquhG','zMLUzfvUAxe','BMP4zKK','C2DhANa','CMuGyNjHBMm','CgfYzw50x24','yNjHBMnOzxm','r19ftKfcteu','BgvUz3rO','z2TOAfm','ugfYzw50ig0','yurivKq','ANbYvKi','q0Xfqu5vuf8','y1berNK','z2v0sw5ZDge','AfrYzwu','tLvqx0voqui','zgvMAw5Luhi','yxrZigvYCM8','DeXTz0S','ChjPC21H','B3vUDa','A0nPz0y','tLzuEu4','mJi2nZy0uNDurfDN','zwuGzxjYB3i','B3qGC3vWCg8','ihjLDhjPzxy','Ag1gt3y','qu5vuf9ftKe','z2v0twf4qNi','kYKRja','zvDJtLK','zMvHDhvYzv8','yNPYtwK','z0P1rwe','A1nXt0G','lI4VlI4VlI4','vNLKB0m','CgfYzw50twu','CMfUy2HLCW','zv0Gq29UzMK','BwvZC2fNzxm','zsbPCYbKAxm','BYbKzwXLDgu','CgXHBL9SAw0','zYbMzwf0Dxi','zvPbt1u','z2v0','C2XPy2u','y3jntgq','thPZzhG','CMfUy2GGC3q','BwvZC2fNzq','rfH5BwC','ueXoshG','yNjHBMnOAw4','BIbKB2vZig4','zMLUze1HBNK','zxjYB3i6','C2v0','B3qGzM91BMq','CLbSyw4','qLjbtKnisu4','BYbNzxqGyNi','BMnL','y3jLyxrLzee','x2zVDw5K','vvrpx0nmrue','z1nLCNzPy2u','AgfZ','svnvquXjwKe','zKvfv3G','C2v0rgf0zq','z2v0vgLTzq','ihDPDgGGD28','yxrPBMCGyNi','BYbJCMvHDgu','BM93','quzurvjFree','BMnOihn0yxq'];_0x4447=function(){return _0x567ece;};return _0x4447();}class BranchingService{constructor(){const _0x39fa74=_0x212175;console[_0x39fa74(0x166)]('[Branchi'+'ngServic'+_0x39fa74(0x13c)+_0x39fa74(0x18f)+_0x39fa74(0xf4)+_0x39fa74(0x125)+_0x39fa74(0x199)+'es'),console[_0x39fa74(0x166)](_0x39fa74(0x105)+_0x39fa74(0x17f)+_0x39fa74(0xd2)+'g:',{'enabled':BranchingConfig[_0x39fa74(0x10d)],'maxBranches':BranchingConfig[_0x39fa74(0x14f)+'CHES_PER'+_0x39fa74(0x130)],'maxDepth':BranchingConfig['MAX_BRAN'+_0x39fa74(0x110)],'autoCleanup':BranchingConfig[_0x39fa74(0x195)+_0x39fa74(0xc6)+_0x39fa74(0x197)]});}static[_0x212175(0xb7)+_0x212175(0xea)](){const _0x1ce8a2=_0x212175,_0x184c89={'WksRy':function(_0x564544,_0xb194a7){return _0x564544===_0xb194a7;},'fEEWx':'GyEcM'};if(!BranchingService[_0x1ce8a2(0x122)]){if(_0x184c89['WksRy'](_0x184c89[_0x1ce8a2(0xf1)],'GyEcM'))BranchingService['instance']=new BranchingService();else return _0x1c3fc6[_0x1ce8a2(0x161)]()['search']('(((.+)+)'+_0x1ce8a2(0xc8))[_0x1ce8a2(0x161)]()[_0x1ce8a2(0x121)+_0x1ce8a2(0x151)](_0x173c06)[_0x1ce8a2(0x188)](_0x1ce8a2(0x112)+_0x1ce8a2(0xc8));}return BranchingService[_0x1ce8a2(0x122)];}async[_0x212175(0x13d)+_0x212175(0x103)](_0x28ce9a){const _0x2e2aba=_0x212175,_0x5eba75={'RiZEx':_0x2e2aba(0x119)+'g\x20featur'+_0x2e2aba(0xd4)+_0x2e2aba(0x155),'EbsTY':function(_0x3af8b1,_0x2a1c56){return _0x3af8b1!==_0x2a1c56;},'MyIcn':'qgcQK','GBWAP':_0x2e2aba(0x10a),'gJuEa':function(_0x12d1f6,_0x2a846c){return _0x12d1f6===_0x2a846c;},'knFXS':_0x2e2aba(0x14e),'qflQq':_0x2e2aba(0xd6)+'it','MJcAL':function(_0x3b7aaa,_0x31a2c2){return _0x3b7aaa>=_0x31a2c2;},'xSlII':function(_0x138cb8,_0x236e31){return _0x138cb8>=_0x236e31;},'mtvLl':_0x2e2aba(0x136)+_0x2e2aba(0x1b2),'BgJRG':'max_dept'+'h_reache'+'d','mfCPn':function(_0x18a64f,_0x823815){return _0x18a64f+_0x823815;},'JvoTz':function(_0x8b10bc,_0x12cc3c){return _0x8b10bc+_0x12cc3c;}},{sessionId:_0x1d9f0c,parentMessageId:_0x5a92c8,userId:_0x403261}=_0x28ce9a;try{if(!BranchingConfig[_0x2e2aba(0x10d)])return _0x2e2aba(0xdf)==='DXymg'?{'success':![],'error':_0x2e2aba(0x119)+_0x2e2aba(0xd7)+_0x2e2aba(0xd4)+'abled','reason':_0x2e2aba(0xca)+_0x2e2aba(0x144)}:{'success':![],'error':_0x5eba75[_0x2e2aba(0x1bc)],'reason':_0x2e2aba(0xca)+'disabled'};const _0x65bf3c=await prisma_1['prisma'][_0x2e2aba(0x146)+_0x2e2aba(0x1b8)][_0x2e2aba(0xa9)+'ue']({'where':{'id':_0x1d9f0c,'userId':_0x403261}});if(!_0x65bf3c)return _0x5eba75['EbsTY'](_0x5eba75['MyIcn'],_0x5eba75['GBWAP'])?{'success':![],'error':_0x2e2aba(0x1a3)+_0x2e2aba(0x13a)+_0x2e2aba(0x1a2)+_0x2e2aba(0x131)+'\x20denied','reason':'session_'+_0x2e2aba(0x177)+'d'}:(!_0x1cf073[_0x2e2aba(0x122)]&&(_0x3fd7ed['instance']=new _0x36f651()),_0x320840[_0x2e2aba(0x122)]);const _0x560ae9=await prisma_1[_0x2e2aba(0xbd)][_0x2e2aba(0x13b)][_0x2e2aba(0xa9)+'ue']({'where':{'id':_0x403261},'select':{'subscriptionPlan':!![]}});if(!_0x560ae9){if(_0x5eba75['EbsTY'](_0x2e2aba(0x160),'YxlyN'))return{'success':![],'error':_0x2e2aba(0x16d)+_0x2e2aba(0x141),'reason':_0x2e2aba(0x16a)+_0x2e2aba(0xec)};else{const res=_0x5dcfdd[_0x2e2aba(0x1b4)](_0x49f3c3,arguments);return _0x392662=null,res;}}const _0x1fd8d4=BranchingConfig[_0x2e2aba(0xc7)+'anchesFo'+_0x2e2aba(0xe7)](_0x560ae9[_0x2e2aba(0x194)+_0x2e2aba(0x137)]);if(_0x5eba75[_0x2e2aba(0xcc)](_0x1fd8d4,0x0))return _0x5eba75[_0x2e2aba(0x128)]===_0x2e2aba(0x14e)?{'success':![],'error':_0x2e2aba(0x172)+_0x2e2aba(0xe2)+'ot\x20suppo'+_0x2e2aba(0x191)+'hing.\x20Up'+_0x2e2aba(0x170)+_0x2e2aba(0x15e)+_0x2e2aba(0x15b),'reason':_0x5eba75[_0x2e2aba(0x12d)]}:this[_0x2e2aba(0x133)+'ITS'][_0x4641b6]||0x0;const _0x2ad4ff=await prisma_1[_0x2e2aba(0xbd)][_0x2e2aba(0xde)][_0x2e2aba(0x164)]({'by':[_0x2e2aba(0x14d)],'where':{'sessionId':_0x1d9f0c,'branchId':{'not':null}}}),_0x34c916=_0x2ad4ff[_0x2e2aba(0xb0)];if(_0x5eba75[_0x2e2aba(0x11d)](_0x34c916,_0x1fd8d4))return{'success':![],'error':_0x2e2aba(0x12c)+_0x2e2aba(0xae)+'\x20('+_0x1fd8d4+(')\x20reache'+_0x2e2aba(0x17b)+'ur\x20plan'),'reason':'max_bran'+_0x2e2aba(0x111)+_0x2e2aba(0x149)};if(_0x5eba75[_0x2e2aba(0x1b0)](_0x34c916,BranchingConfig[_0x2e2aba(0x14f)+_0x2e2aba(0x153)+_0x2e2aba(0x130)]))return{'success':![],'error':'Maximum\x20'+'branches'+'\x20('+BranchingConfig[_0x2e2aba(0x14f)+_0x2e2aba(0x153)+_0x2e2aba(0x130)]+(_0x2e2aba(0x17e)+'d'),'reason':_0x5eba75[_0x2e2aba(0x181)]};const _0x50f824=await prisma_1[_0x2e2aba(0xbd)]['message'][_0x2e2aba(0xa9)+'ue']({'where':{'id':_0x5a92c8}});if(!_0x50f824||_0x50f824[_0x2e2aba(0x14a)+'d']!==_0x1d9f0c)return{'success':![],'error':_0x2e2aba(0xb2)+_0x2e2aba(0x163)+_0x2e2aba(0xe6),'reason':_0x2e2aba(0xad)+_0x2e2aba(0xfe)};const _0x161f46=await this['calculat'+_0x2e2aba(0x100)+_0x2e2aba(0x182)](_0x5a92c8);if(_0x161f46>=BranchingConfig['MAX_BRAN'+_0x2e2aba(0x110)])return{'success':![],'error':_0x2e2aba(0x12c)+'branch\x20d'+_0x2e2aba(0x14b)+BranchingConfig['MAX_BRAN'+_0x2e2aba(0x110)]+(_0x2e2aba(0x17e)+'d'),'reason':_0x5eba75[_0x2e2aba(0x158)]};const _0x2dc8fe=this[_0x2e2aba(0x18d)+_0x2e2aba(0x17d)](_0x1d9f0c,_0x5eba75[_0x2e2aba(0x169)](_0x34c916,0x1));return console['log']('[Branchi'+_0x2e2aba(0x17f)+_0x2e2aba(0x1a0)+_0x2e2aba(0xf5)+_0x2e2aba(0x185),{'branchId':_0x2dc8fe,'branchNumber':_0x34c916+0x1,'parentMessageId':_0x5a92c8,'depth':_0x161f46}),{'success':!![],'branchId':_0x2dc8fe,'branchNumber':_0x5eba75['JvoTz'](_0x34c916,0x1)};}catch(_0xe861ac){const _0x3b9070=_0xe861ac;return console[_0x2e2aba(0x140)](_0x2e2aba(0x105)+_0x2e2aba(0x17f)+'e]\x20Creat'+_0x2e2aba(0x13f)+'\x20error:',_0x3b9070),{'success':![],'error':_0x3b9070[_0x2e2aba(0xde)]||'Failed\x20t'+_0x2e2aba(0xf6)+_0x2e2aba(0x12a)};}}async[_0x212175(0x12f)+_0x212175(0xb8)](_0x7e6561){const _0x53e315=_0x212175,_0x1f22ae={'GXolT':_0x53e315(0xb2)+'essage\x20n'+'ot\x20found','qytHJ':_0x53e315(0xa7)+'h_reache'+'d','nkGfe':_0x53e315(0x1ac),'gYwtu':_0x53e315(0xc5),'Ueptg':function(_0x2847fa,_0x3bde1d){return _0x2847fa===_0x3bde1d;},'ABugf':_0x53e315(0x19c),'OeaSL':function(_0xcae3bc,_0x8cdf02){return _0xcae3bc||_0x8cdf02;},'BdiNz':'main','hcCDM':function(_0x20a2eb,_0x57709d){return _0x20a2eb-_0x57709d;},'nQWPs':function(_0x2b9370,_0x1dce40){return _0x2b9370&&_0x1dce40;},'kAqxo':'max_bran'+'ches_rea'+'ched','WmyuP':function(_0x5a6c04,_0x503c00){return _0x5a6c04===_0x503c00;},'mXjGO':_0x53e315(0x19b),'sfltq':_0x53e315(0x1a3)+_0x53e315(0x13a)+_0x53e315(0x1a2)+'r\x20access'+'\x20denied','pVwyh':_0x53e315(0xc9),'sazkg':'[Branchi'+'ngServic'+_0x53e315(0x1aa)+_0x53e315(0x184)+_0x53e315(0xc2)+':'},{sessionId:_0x4ac7bb,userId:_0x501f5e,includeMessages:includeMessages=![]}=_0x7e6561;try{const _0x120d2c=await prisma_1['prisma'][_0x53e315(0x146)+_0x53e315(0x1b8)][_0x53e315(0xa9)+'ue']({'where':{'id':_0x4ac7bb,'userId':_0x501f5e}});if(!_0x120d2c)return _0x1f22ae[_0x53e315(0x1ba)](_0x53e315(0x129),_0x1f22ae[_0x53e315(0x134)])?{'success':![],'error':_0x1f22ae[_0x53e315(0x183)],'reason':_0x53e315(0xad)+_0x53e315(0xfe)}:{'success':![],'error':_0x1f22ae[_0x53e315(0x108)]};const _0x3000ca=await prisma_1['prisma'][_0x53e315(0xde)][_0x53e315(0xe3)]({'where':{'sessionId':_0x4ac7bb},'orderBy':{'createdAt':_0x53e315(0x19e)},'select':{'id':!![],'role':!![],'content':includeMessages,'branchId':!![],'parentMessageId':!![],'createdAt':!![]}}),_0x2e0a54=new Map();_0x3000ca['forEach'](_0x1ec9ec=>{const _0x547333=_0x53e315;if(_0x1f22ae['nkGfe']===_0x547333(0xaa)){const _0x355ac2=_0x26ee0a?function(){if(_0x3cf391){const res=_0x4f6e50['apply'](_0x39da37,arguments);return _0x22351e=null,res;}}:function(){};return _0x31b9ee=![],_0x355ac2;}else{const _0x3cffed=_0x1ec9ec['branchId']||null;if(!_0x2e0a54[_0x547333(0xef)](_0x3cffed)){if(_0x1f22ae['gYwtu']!==_0x547333(0xc5))return{'success':![],'error':'Maximum\x20'+'branch\x20d'+_0x547333(0x14b)+_0x5ab31f['MAX_BRAN'+'CH_DEPTH']+(_0x547333(0x17e)+'d'),'reason':_0x1f22ae['qytHJ']};else _0x2e0a54[_0x547333(0xe5)](_0x3cffed,[]);}_0x2e0a54[_0x547333(0xd9)](_0x3cffed)[_0x547333(0x150)](_0x1ec9ec);}});const _0x21417a=[];_0x2e0a54[_0x53e315(0x178)]((_0x2dd63c,_0x4bdb92)=>{const _0x237d17=_0x53e315;if(_0x1f22ae[_0x237d17(0x15c)]('EFcvp',_0x1f22ae[_0x237d17(0x1be)])){const _0x55279e={'branchId':_0x1f22ae[_0x237d17(0x113)](_0x4bdb92,_0x1f22ae['BdiNz']),'parentMessageId':_0x2dd63c[0x0]?.['parentMe'+'ssageId']||null,'messageCount':_0x2dd63c[_0x237d17(0xb0)],'createdAt':_0x2dd63c[0x0]?.[_0x237d17(0xeb)+'t']||new Date(),'updatedAt':_0x2dd63c[_0x1f22ae[_0x237d17(0x12e)](_0x2dd63c['length'],0x1)]?.[_0x237d17(0xeb)+'t']||new Date(),'children':[],..._0x1f22ae[_0x237d17(0x15d)](includeMessages,{'messages':_0x2dd63c['map'](_0x6bbe03=>({'id':_0x6bbe03['id'],'role':_0x6bbe03[_0x237d17(0x196)],'content':_0x6bbe03[_0x237d17(0x187)]||'','createdAt':_0x6bbe03['createdA'+'t']}))})};_0x21417a[_0x237d17(0x150)](_0x55279e);}else return{'success':![],'error':_0x237d17(0x1a3)+_0x237d17(0x13a)+_0x237d17(0x1a2)+_0x237d17(0x131)+'\x20denied'};});const _0x5e0d90=this[_0x53e315(0x19d)+_0x53e315(0x126)+'ee'](_0x21417a);return console[_0x53e315(0x166)](_0x53e315(0x105)+_0x53e315(0x17f)+_0x53e315(0x11e)+'nch\x20tree'+_0x53e315(0xc4)+_0x53e315(0x1b9),{'totalBranches':_0x21417a[_0x53e315(0xb0)],'includeMessages':includeMessages}),{'success':!![],'tree':_0x5e0d90,'totalBranches':_0x21417a[_0x53e315(0xb0)]};}catch(_0x1e019d){if(_0x1f22ae['pVwyh']===_0x1f22ae['pVwyh']){const _0x3d8ea7=_0x1e019d;return console[_0x53e315(0x140)](_0x1f22ae['sazkg'],_0x3d8ea7),{'success':![],'error':_0x3d8ea7[_0x53e315(0xde)]||_0x53e315(0x15a)+'o\x20get\x20br'+_0x53e315(0x1a9)+'e'};}else return{'success':![],'error':_0x53e315(0x12c)+'branches'+'\x20('+_0x49582a+(_0x53e315(0x17e)+'d\x20for\x20yo'+'ur\x20plan'),'reason':_0x1f22ae['kAqxo']};}}async[_0x212175(0x142)+_0x212175(0xd1)](_0x30da56){const _0x15e75d=_0x212175,_0x424d01={'AQINP':_0x15e75d(0x16d)+_0x15e75d(0x141),'eZAOU':_0x15e75d(0x16a)+_0x15e75d(0xec),'kSqOH':_0x15e75d(0x1b1)+_0x15e75d(0x143)+_0x15e75d(0x127)+_0x15e75d(0x155),'LECfk':'PFlHr','aDHVD':_0x15e75d(0x13e),'CdeTI':'Chat\x20ses'+_0x15e75d(0x13a)+_0x15e75d(0x1a2)+_0x15e75d(0x131)+_0x15e75d(0x1ad),'PLNHx':'asc','qydST':function(_0x90e61c,_0x2e84bd){return _0x90e61c===_0x2e84bd;},'oFkBC':'One\x20or\x20b'+'oth\x20bran'+'ches\x20not'+_0x15e75d(0x141),'rSMhl':'root','VydoC':function(_0x300bb2,_0x126817){return _0x300bb2!==_0x126817;}},{sessionId:_0x3dabb1,userId:_0x16dd0f,branchId1:_0x5e38eb,branchId2:_0x3ab9d0}=_0x30da56;try{if(!BranchingConfig['COMPARIS'+'ON_ENABL'+'ED'])return _0x15e75d(0x154)===_0x424d01['LECfk']?{'success':![],'error':'Branch\x20c'+_0x15e75d(0x143)+_0x15e75d(0x127)+_0x15e75d(0x155)}:{'success':![],'error':_0x15e75d(0x1a3)+_0x15e75d(0x13a)+_0x15e75d(0x1a2)+_0x15e75d(0x131)+_0x15e75d(0x1ad)};const _0x36ebfe=await prisma_1[_0x15e75d(0xbd)][_0x15e75d(0x146)+_0x15e75d(0x1b8)][_0x15e75d(0xa9)+'ue']({'where':{'id':_0x3dabb1,'userId':_0x16dd0f}});if(!_0x36ebfe)return _0x15e75d(0x13e)===_0x424d01[_0x15e75d(0xb3)]?{'success':![],'error':_0x424d01[_0x15e75d(0x120)]}:{'success':![],'error':_0x424d01['AQINP'],'reason':_0x424d01[_0x15e75d(0xd8)]};const _0xb8fad1=await prisma_1[_0x15e75d(0xbd)][_0x15e75d(0xde)]['findMany']({'where':{'sessionId':_0x3dabb1,'branchId':_0x5e38eb},'orderBy':{'createdAt':_0x424d01[_0x15e75d(0xe0)]},'select':{'id':!![],'content':!![],'role':!![],'parentMessageId':!![]}}),_0x1bb4ab=await prisma_1[_0x15e75d(0xbd)][_0x15e75d(0xde)][_0x15e75d(0xe3)]({'where':{'sessionId':_0x3dabb1,'branchId':_0x3ab9d0},'orderBy':{'createdAt':'asc'},'select':{'id':!![],'content':!![],'role':!![],'parentMessageId':!![]}});if(_0x424d01[_0x15e75d(0x18b)](_0xb8fad1[_0x15e75d(0xb0)],0x0)||_0x1bb4ab[_0x15e75d(0xb0)]===0x0)return{'success':![],'error':_0x424d01[_0x15e75d(0x179)]};const _0x4d1e76=_0xb8fad1[0x0][_0x15e75d(0xd0)+_0x15e75d(0x1b5)]||_0x1bb4ab[0x0][_0x15e75d(0xd0)+'ssageId']||_0x424d01[_0x15e75d(0x10e)],_0x2be72c={'branch1':{'branchId':_0x5e38eb,'messageCount':_0xb8fad1['length'],'messages':_0xb8fad1[_0x15e75d(0x1b6)](_0xc111e9=>({'id':_0xc111e9['id'],'content':_0xc111e9[_0x15e75d(0x187)],'role':_0xc111e9['role']}))},'branch2':{'branchId':_0x3ab9d0,'messageCount':_0x1bb4ab[_0x15e75d(0xb0)],'messages':_0x1bb4ab['map'](_0x24242e=>({'id':_0x24242e['id'],'content':_0x24242e[_0x15e75d(0x187)],'role':_0x24242e[_0x15e75d(0x196)]}))},'differences':{'divergencePoint':_0x4d1e76,'uniqueToBranch1':_0xb8fad1['length'],'uniqueToBranch2':_0x1bb4ab[_0x15e75d(0xb0)]}};return console['log']('[Branchi'+_0x15e75d(0x17f)+_0x15e75d(0x159)+_0x15e75d(0x176)+'arison\x20c'+_0x15e75d(0x157),{'branch1Messages':_0xb8fad1[_0x15e75d(0xb0)],'branch2Messages':_0x1bb4ab[_0x15e75d(0xb0)],'divergencePoint':_0x4d1e76}),{'success':!![],'comparison':_0x2be72c};}catch(_0x52fb07){if(_0x424d01[_0x15e75d(0xcf)]('bMVXu',_0x15e75d(0x18a)))return{'success':![],'error':_0x424d01[_0x15e75d(0xcd)]};else{const _0x3cbba8=_0x52fb07;return console['error'](_0x15e75d(0x105)+_0x15e75d(0x17f)+_0x15e75d(0x186)+_0x15e75d(0xac)+'hes\x20erro'+'r:',_0x3cbba8),{'success':![],'error':_0x3cbba8[_0x15e75d(0xde)]||_0x15e75d(0x15a)+_0x15e75d(0x167)+'e\x20branch'+'es'};}}}async[_0x212175(0x162)+'anch'](_0x2dc096){const _0x307d16=_0x212175,_0x98e20b={'nhkzM':'Your\x20pla'+'n\x20does\x20n'+_0x307d16(0xc3)+_0x307d16(0x191)+'hing.\x20Up'+_0x307d16(0x170)+_0x307d16(0x15e)+_0x307d16(0x15b),'SHzbz':_0x307d16(0xd6)+'it','UjNKx':'UfCBc','FGvUE':_0x307d16(0x105)+_0x307d16(0x17f)+_0x307d16(0x190)+'e\x20branch'+_0x307d16(0x123),'bbRpv':_0x307d16(0x15a)+_0x307d16(0xd5)+'\x20branch'},{sessionId:_0x4a8c19,userId:_0x5a3534,branchId:_0x14c2fa}=_0x2dc096;try{const _0x446c86=await prisma_1[_0x307d16(0xbd)]['chatSess'+_0x307d16(0x1b8)][_0x307d16(0xa9)+'ue']({'where':{'id':_0x4a8c19,'userId':_0x5a3534}});if(!_0x446c86)return _0x98e20b['UjNKx']!==_0x307d16(0x198)?{'success':![],'error':_0x307d16(0x1a3)+_0x307d16(0x13a)+'\x20found\x20o'+'r\x20access'+_0x307d16(0x1ad)}:{'success':![],'error':_0x98e20b[_0x307d16(0x132)],'reason':_0x98e20b['SHzbz']};const _0x56acb3=await prisma_1['prisma'][_0x307d16(0xde)][_0x307d16(0x11f)+'ny']({'where':{'sessionId':_0x4a8c19,'branchId':_0x14c2fa}});return console['log'](_0x307d16(0x105)+_0x307d16(0x17f)+'e]\x20ðŸ—‘ï¸\x20Bra'+_0x307d16(0x10f)+_0x307d16(0xff),{'branchId':_0x14c2fa,'messagesDeleted':_0x56acb3[_0x307d16(0x135)]}),{'success':!![],'messagesDeleted':_0x56acb3[_0x307d16(0x135)],'message':_0x307d16(0x18e)+_0x307d16(0x1a6)+_0x56acb3[_0x307d16(0x135)]+(_0x307d16(0x14c)+_0x307d16(0x18c)+'d)')};}catch(_0x4eab2b){const _0x1157ac=_0x4eab2b;return console[_0x307d16(0x140)](_0x98e20b['FGvUE'],_0x1157ac),{'success':![],'error':_0x1157ac[_0x307d16(0xde)]||_0x98e20b[_0x307d16(0xfa)]};}}async[_0x212175(0x12f)+'hStats'](_0x18a8a6){const _0x221708=_0x212175,_0x5c0abd={'UmWyT':'asc','sGwcn':_0x221708(0x1a3)+_0x221708(0x13a)+_0x221708(0x1a2)+_0x221708(0x131)+_0x221708(0x1ad),'QpfyW':function(_0x116b0a,_0x26e953){return _0x116b0a-_0x26e953;},'AGCde':'[Branchi'+_0x221708(0x17f)+'e]\x20ðŸ“Š\x20Bra'+_0x221708(0xf9)+'s:'},{sessionId:_0x46eab6,userId:_0x444690}=_0x18a8a6;try{const _0x58a156=await prisma_1[_0x221708(0xbd)][_0x221708(0x146)+_0x221708(0x1b8)][_0x221708(0xa9)+'ue']({'where':{'id':_0x46eab6,'userId':_0x444690}});if(!_0x58a156)return{'success':![],'error':_0x5c0abd[_0x221708(0x104)]};const _0x2553d1=await prisma_1[_0x221708(0xbd)][_0x221708(0xde)][_0x221708(0x164)]({'by':[_0x221708(0x14d)],'where':{'sessionId':_0x46eab6,'branchId':{'not':null}},'_count':{'id':!![]}}),_0x14b862=await prisma_1[_0x221708(0xbd)][_0x221708(0xde)][_0x221708(0x135)]({'where':{'sessionId':_0x46eab6}}),_0x32cb50=await Promise[_0x221708(0x180)](_0x2553d1[_0x221708(0x1b6)](async _0x6f77e=>{const _0x1a7d54=_0x221708,_0xc363a8=await prisma_1[_0x1a7d54(0xbd)]['message'][_0x1a7d54(0xe3)]({'where':{'sessionId':_0x46eab6,'branchId':_0x6f77e[_0x1a7d54(0x14d)]},'orderBy':{'createdAt':_0x5c0abd[_0x1a7d54(0x17a)]},'take':0x1});return{'branchId':_0x6f77e[_0x1a7d54(0x14d)],'messageCount':_0x6f77e['_count']['id'],'createdAt':_0xc363a8[0x0]?.[_0x1a7d54(0xeb)+'t']};})),_0x20207a=_0x32cb50[_0x221708(0x19f)]((_0x340d44,_0x27d093)=>_0x27d093[_0x221708(0x1bb)+_0x221708(0xbe)]-_0x340d44['messageC'+_0x221708(0xbe)])[_0x221708(0xda)](0x0,0x5),_0x513f8c=_0x32cb50[_0x221708(0x19f)]((_0x4bf0c0,_0x384b54)=>(_0x4bf0c0[_0x221708(0xeb)+'t']?.[_0x221708(0xf3)]()||0x0)-(_0x384b54[_0x221708(0xeb)+'t']?.['getTime']()||0x0)),_0x1f0328={'totalBranches':_0x2553d1[_0x221708(0xb0)],'maxDepth':await this[_0x221708(0x16c)+_0x221708(0x1a8)+'h'](_0x46eab6),'totalMessages':_0x14b862,'branchesWithMostMessages':_0x20207a[_0x221708(0x1b6)](_0x1c2a86=>({'branchId':_0x1c2a86['branchId'],'messageCount':_0x1c2a86[_0x221708(0x1bb)+_0x221708(0xbe)]})),'oldestBranch':_0x513f8c[0x0]?{'branchId':_0x513f8c[0x0][_0x221708(0x14d)],'createdAt':_0x513f8c[0x0][_0x221708(0xeb)+'t']}:undefined,'newestBranch':_0x513f8c[_0x5c0abd['QpfyW'](_0x513f8c[_0x221708(0xb0)],0x1)]?{'branchId':_0x513f8c[_0x513f8c[_0x221708(0xb0)]-0x1][_0x221708(0x14d)],'createdAt':_0x513f8c[_0x513f8c[_0x221708(0xb0)]-0x1]['createdA'+'t']}:undefined};return console[_0x221708(0x166)](_0x5c0abd[_0x221708(0x102)],_0x1f0328),{'success':!![],'stats':_0x1f0328};}catch(_0x157dbf){const _0x23c018=_0x157dbf;return console[_0x221708(0x140)]('[Branchi'+'ngServic'+'e]\x20Get\x20b'+_0x221708(0xdd)+_0x221708(0xbb)+'r:',_0x23c018),{'success':![],'error':_0x23c018['message']||'Failed\x20t'+'o\x20get\x20br'+'anch\x20sta'+'ts'};}}async[_0x212175(0x173)+_0x212175(0x1b3)+'es'](){const _0x212c2e=_0x212175,_0x6ca4ee={'HTqRK':_0x212c2e(0xcb),'wYoAQ':_0x212c2e(0x1a1),'xdrwj':function(_0x1e89cf,_0x5d2636){return _0x1e89cf-_0x5d2636;},'crMLd':_0x212c2e(0x105)+_0x212c2e(0x17f)+_0x212c2e(0x1b7)+_0x212c2e(0x19a)+_0x212c2e(0xe4)};if(!BranchingConfig[_0x212c2e(0x195)+'ANUP_ENA'+'BLED']){if(_0x6ca4ee['HTqRK']===_0x6ca4ee[_0x212c2e(0x168)])return{'success':![],'error':_0x212c2e(0x1a3)+'sion\x20not'+_0x212c2e(0x1a2)+_0x212c2e(0x131)+_0x212c2e(0x1ad)};else return;}try{const _0x132856=new Date();_0x132856[_0x212c2e(0xf2)](_0x6ca4ee['xdrwj'](_0x132856['getDate'](),BranchingConfig[_0x212c2e(0xb5)+_0x212c2e(0xf8)+'YS']));const _0x170bea=await prisma_1['prisma'][_0x212c2e(0xde)][_0x212c2e(0x11f)+'ny']({'where':{'branchId':{'not':null},'createdAt':{'lt':_0x132856}}});console[_0x212c2e(0x166)](_0x212c2e(0x105)+'ngServic'+'e]\x20ðŸ§¹\x20Aut'+'o-cleanu'+'p\x20comple'+_0x212c2e(0x1a4),{'messagesDeleted':_0x170bea[_0x212c2e(0x135)],'cutoffDate':_0x132856});}catch(_0x30edf6){const _0x28d3d3=_0x30edf6;console[_0x212c2e(0x140)](_0x6ca4ee[_0x212c2e(0xdb)],_0x28d3d3);}}[_0x212175(0x18d)+_0x212175(0x17d)](_0x22e9df,_0x5b89fe){const _0x8c302c=_0x212175,_0x42dc12=Date[_0x8c302c(0xf7)]();return _0x8c302c(0x12b)+_0x22e9df['substrin'+'g'](0x0,0x8)+'_'+_0x5b89fe+'_'+_0x42dc12;}async[_0x212175(0x16c)+_0x212175(0x100)+_0x212175(0x182)](_0x3aa690){const _0xac8efb=_0x212175,_0x22eac3={'cPDFy':function(_0x309434,_0x322e65){return _0x309434<_0x322e65;},'CKULY':function(_0x41eca4,_0x1fb718){return _0x41eca4===_0x1fb718;},'pIGrb':'LnqTy','eryHx':_0xac8efb(0x1ae)};let _0x149ae2=0x0,_0xc3e497=_0x3aa690;while(_0xc3e497&&_0x22eac3[_0xac8efb(0xb6)](_0x149ae2,0x64)){if(_0x22eac3[_0xac8efb(0x124)](_0x22eac3['pIGrb'],_0x22eac3['eryHx']))return;else{const _0x23a6a0=await prisma_1[_0xac8efb(0xbd)][_0xac8efb(0xde)][_0xac8efb(0xa9)+'ue']({'where':{'id':_0xc3e497},'select':{'parentMessageId':!![]}});if(!_0x23a6a0||!_0x23a6a0[_0xac8efb(0xd0)+_0xac8efb(0x1b5)])break;_0xc3e497=_0x23a6a0[_0xac8efb(0xd0)+_0xac8efb(0x1b5)],_0x149ae2++;}}return _0x149ae2;}async[_0x212175(0x16c)+'eMaxDept'+'h'](_0x4c7e1b){const _0x407ace=_0x212175,_0x364de7={'kCigF':'TlbBn'},_0x43ec37=await prisma_1[_0x407ace(0xbd)][_0x407ace(0xde)][_0x407ace(0xe3)]({'where':{'sessionId':_0x4c7e1b},'select':{'id':!![]}});let _0x3e025d=0x0;for(const _0x532a11 of _0x43ec37){if(_0x364de7[_0x407ace(0xbf)]==='ioDsX')_0x52362d['log'](_0x407ace(0x105)+_0x407ace(0x17f)+_0x407ace(0x13c)+'tialized'+_0x407ace(0xf4)+_0x407ace(0x125)+_0x407ace(0x199)+'es'),_0x258445[_0x407ace(0x166)](_0x407ace(0x105)+_0x407ace(0x17f)+_0x407ace(0xd2)+'g:',{'enabled':_0x57c249[_0x407ace(0x10d)],'maxBranches':_0x46f168[_0x407ace(0x14f)+_0x407ace(0x153)+_0x407ace(0x130)],'maxDepth':_0x34f390[_0x407ace(0x14f)+_0x407ace(0x110)],'autoCleanup':_0x4da9da[_0x407ace(0x195)+_0x407ace(0xc6)+'BLED']});else{const _0x35d07f=await this[_0x407ace(0x16c)+_0x407ace(0x100)+'epth'](_0x532a11['id']);_0x3e025d=Math[_0x407ace(0x189)](_0x3e025d,_0x35d07f);}}return _0x3e025d;}[_0x212175(0x19d)+'BranchTr'+'ee'](_0x4b5dd5){const _0x6f6149=_0x212175,_0x3c7561={'tLmgK':_0x6f6149(0x105)+'ngServic'+'e]\x20Auto-'+'cleanup\x20'+_0x6f6149(0xe4),'VBkNx':function(_0x48137e,_0x2b5cb2){return _0x48137e===_0x2b5cb2;},'YqPPx':_0x6f6149(0x105)+_0x6f6149(0x17f)+_0x6f6149(0x1aa)+_0x6f6149(0x184)+_0x6f6149(0xc2)+':','BGZeT':_0x6f6149(0xab),'Lzsdx':function(_0x1cafc5,_0x523ab1){return _0x1cafc5!==_0x523ab1;},'OlQVD':function(_0x3530bd,_0x5810b9){return _0x3530bd!==_0x5810b9;},'RAhAJ':'ZgEvp'},_0x246a1d=[];return _0x4b5dd5[_0x6f6149(0x178)](_0x26edc2=>{const _0x2a063d=_0x6f6149;if(!_0x26edc2[_0x2a063d(0xd0)+_0x2a063d(0x1b5)]){if(_0x2a063d(0xab)!==_0x3c7561['BGZeT']){const _0x1bfc52={'branchId':_0x4ec41f||'main','parentMessageId':_0x30126f[0x0]?.[_0x2a063d(0xd0)+'ssageId']||null,'messageCount':_0xce4cdf['length'],'createdAt':_0x2e5948[0x0]?.['createdA'+'t']||new _0x3f59bc(),'updatedAt':_0x170052[_0x17ea50[_0x2a063d(0xb0)]-0x1]?.[_0x2a063d(0xeb)+'t']||new _0x409762(),'children':[],..._0x59c4a8&&{'messages':_0x4da02b[_0x2a063d(0x1b6)](_0x5e89d6=>({'id':_0x5e89d6['id'],'role':_0x5e89d6[_0x2a063d(0x196)],'content':_0x5e89d6[_0x2a063d(0x187)]||'','createdAt':_0x5e89d6[_0x2a063d(0xeb)+'t']}))}};_0x132c07['push'](_0x1bfc52);}else _0x246a1d[_0x2a063d(0x150)](_0x26edc2);}else{let _0xef9b23=![];for(const _0x436a83 of _0x4b5dd5){if(_0x3c7561[_0x2a063d(0xdc)]('NVTyN',_0x2a063d(0xc0))){if(_0x59007b){const res=_0x1e8900[_0x2a063d(0x1b4)](_0x4e4e48,arguments);return _0x5486a8=null,res;}}else{if(_0x436a83['messages']&&_0x436a83[_0x2a063d(0xd3)][_0x2a063d(0xb0)]>0x0){if(_0x3c7561[_0x2a063d(0x11c)](_0x3c7561[_0x2a063d(0x175)],_0x2a063d(0x116))){const _0x1ba8c7=_0x436a83[_0x2a063d(0xd3)][_0x2a063d(0x11a)](_0x49b761=>{const _0x1d1f5b=_0x2a063d,_0x155be9={'jprVB':_0x3c7561[_0x1d1f5b(0xbc)]};if(_0x3c7561[_0x1d1f5b(0x147)](_0x1d1f5b(0x165),'nLMwa')){const _0x1edbe4=_0x330317;_0x41044a[_0x1d1f5b(0x140)](_0x155be9[_0x1d1f5b(0xb4)],_0x1edbe4);}else return _0x3c7561[_0x1d1f5b(0x147)](_0x49b761['id'],_0x26edc2['parentMe'+_0x1d1f5b(0x1b5)]);});if(_0x1ba8c7){_0x436a83[_0x2a063d(0x11b)]['push'](_0x26edc2),_0xef9b23=!![];break;}}else{const _0x52ed60=_0x4786b0;return _0x4914b8[_0x2a063d(0x140)](_0x3c7561[_0x2a063d(0xa8)],_0x52ed60),{'success':![],'error':_0x52ed60['message']||_0x2a063d(0x15a)+_0x2a063d(0xe9)+_0x2a063d(0x1a9)+'e'};}}}}!_0xef9b23&&_0x246a1d[_0x2a063d(0x150)](_0x26edc2);}}),_0x246a1d;}}exports[_0x212175(0x119)+_0x212175(0xee)]=BranchingService,exports[_0x212175(0xe1)+_0x212175(0xee)]=BranchingService[_0x212175(0xb7)+'nce']();