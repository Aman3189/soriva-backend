const _0x310888=_0x39b2;(function(_0x63ee3a,_0x3f0117){const _0x2cdc38=_0x39b2,_0x3a548c=_0x63ee3a();while(!![]){try{const _0x448ced=-parseInt(_0x2cdc38(0x1b3))/0x1+parseInt(_0x2cdc38(0x1c6))/0x2+-parseInt(_0x2cdc38(0x1a4))/0x3+parseInt(_0x2cdc38(0x1ed))/0x4+-parseInt(_0x2cdc38(0x1da))/0x5*(parseInt(_0x2cdc38(0x1fb))/0x6)+parseInt(_0x2cdc38(0x1eb))/0x7+-parseInt(_0x2cdc38(0x1a0))/0x8;if(_0x448ced===_0x3f0117)break;else _0x3a548c['push'](_0x3a548c['shift']());}catch(_0x4ccca8){_0x3a548c['push'](_0x3a548c['shift']());}}}(_0x42d8,0xafa1d));const _0x3645e0=(function(){let _0x30bfe0=!![];return function(_0x1e544f,_0x445165){const _0x4f7041={'Rjven':'DKbob'},_0x30d808=_0x30bfe0?function(){const _0x340472=_0x39b2;if(_0x4f7041[_0x340472(0x1c2)]!==_0x340472(0x1a9)){if(_0x445165){const res=_0x445165[_0x340472(0x1d1)](_0x1e544f,arguments);return _0x445165=null,res;}}else switch(_0x3eb54b){case _0x3fbc02['PlanType'][_0x340472(0x1fe)]:return{'maxOrbits':0x1,'maxTagsPerOrbit':0x3,'maxConversationsPerOrbit':0x32,'canCustomizeColors':![],'canPinOrbits':![]};case _0x57f66a[_0x340472(0x1e2)][_0x340472(0x1f7)]:return{'maxOrbits':0x3,'maxTagsPerOrbit':0xa,'maxConversationsPerOrbit':0x64,'canCustomizeColors':!![],'canPinOrbits':![]};case _0x530bfd[_0x340472(0x1e2)][_0x340472(0x1ef)]:return{'maxOrbits':0xa,'maxTagsPerOrbit':0x14,'maxConversationsPerOrbit':0x1f4,'canCustomizeColors':!![],'canPinOrbits':!![]};case _0x17a2f7[_0x340472(0x1e2)][_0x340472(0x18e)]:case _0x3443e0[_0x340472(0x1e2)][_0x340472(0x17d)]:return{'maxOrbits':-0x1,'maxTagsPerOrbit':-0x1,'maxConversationsPerOrbit':-0x1,'canCustomizeColors':!![],'canPinOrbits':!![]};default:return(0x0,_0x161684['getOrbit'+_0x340472(0x1d6)])(_0x34d96d['PlanType'][_0x340472(0x1fe)]);}}:function(){};return _0x30bfe0=![],_0x30d808;};}()),_0x31d58a=_0x3645e0(this,function(){const _0x324b4c=_0x39b2,_0x2a0858={'rPmjn':_0x324b4c(0x1bc)+_0x324b4c(0x19f)};return _0x31d58a['toString']()['search'](_0x324b4c(0x1bc)+_0x324b4c(0x19f))[_0x324b4c(0x1a7)]()[_0x324b4c(0x1e6)+'tor'](_0x31d58a)[_0x324b4c(0x187)](_0x2a0858['rPmjn']);});_0x31d58a();'use strict';Object[_0x310888(0x18a)+_0x310888(0x1f4)](exports,_0x310888(0x1ea)+'le',{'value':!![]}),exports['deleteOr'+_0x310888(0x18f)]=exports['getOrbit'+_0x310888(0x1df)]=exports['createOr'+_0x310888(0x18f)]=exports['getOrbit'+_0x310888(0x189)+_0x310888(0x1c0)]=exports['removeCo'+_0x310888(0x19b)+_0x310888(0x1d9)+_0x310888(0x1d3)]=exports[_0x310888(0x203)+'rsationT'+_0x310888(0x1fd)]=exports[_0x310888(0x1dc)+_0x310888(0x1d3)]=exports[_0x310888(0x1c7)+_0x310888(0x1d3)]=exports[_0x310888(0x1f9)+_0x310888(0x1d3)]=exports[_0x310888(0x1e5)+_0x310888(0x19c)]=exports[_0x310888(0x196)+_0x310888(0x18b)]=exports['createDe'+'faultOrb'+'it']=exports[_0x310888(0x1e5)+_0x310888(0x1d6)]=void 0x0;const client_1=require(_0x310888(0x197)+_0x310888(0x1e0)),plans_1=require(_0x310888(0x1db)+'/constan'+_0x310888(0x201)),prisma=new client_1[(_0x310888(0x1a1))+(_0x310888(0x191))](),getOrbitLimits=_0x54a2b6=>{const _0x25024a=_0x310888;switch(_0x54a2b6){case plans_1[_0x25024a(0x1e2)]['STARTER']:return{'maxOrbits':0x1,'maxTagsPerOrbit':0x3,'maxConversationsPerOrbit':0x32,'canCustomizeColors':![],'canPinOrbits':![]};case plans_1[_0x25024a(0x1e2)]['PLUS']:return{'maxOrbits':0x3,'maxTagsPerOrbit':0xa,'maxConversationsPerOrbit':0x64,'canCustomizeColors':!![],'canPinOrbits':![]};case plans_1[_0x25024a(0x1e2)][_0x25024a(0x1ef)]:return{'maxOrbits':0xa,'maxTagsPerOrbit':0x14,'maxConversationsPerOrbit':0x1f4,'canCustomizeColors':!![],'canPinOrbits':!![]};case plans_1[_0x25024a(0x1e2)][_0x25024a(0x18e)]:case plans_1[_0x25024a(0x1e2)]['LIFE']:return{'maxOrbits':-0x1,'maxTagsPerOrbit':-0x1,'maxConversationsPerOrbit':-0x1,'canCustomizeColors':!![],'canPinOrbits':!![]};default:return(0x0,exports[_0x25024a(0x1e5)+_0x25024a(0x1d6)])(plans_1[_0x25024a(0x1e2)][_0x25024a(0x1fe)]);}};exports['getOrbit'+_0x310888(0x1d6)]=getOrbitLimits;const createDefaultOrbit=async _0x4e8e92=>{const _0x1e654a=_0x310888,_0x209c26={'fcksp':_0x1e654a(0x17e)+_0x1e654a(0x199)+'it','kzhWB':_0x1e654a(0x1cb)},_0x2e4267=await prisma['orbit'][_0x1e654a(0x1ae)]({'data':{'userId':_0x4e8e92,'name':_0x1e654a(0x180)+_0x1e654a(0x1af),'description':_0x209c26['fcksp'],'icon':'ðŸŒŒ','color':_0x209c26[_0x1e654a(0x204)],'isDefault':!![],'sortOrder':0x0}});return{..._0x2e4267,'description':_0x2e4267[_0x1e654a(0x1ab)+'ion']??undefined,'icon':_0x2e4267[_0x1e654a(0x1cf)]??'ðŸŒŒ','color':_0x2e4267[_0x1e654a(0x17b)]??_0x1e654a(0x1cb),'conversationCount':0x0,'tagCount':0x0};};exports[_0x310888(0x1ac)+_0x310888(0x1de)+'it']=createDefaultOrbit;const getUserOrbits=async _0xf0692e=>{const _0x5932e5=_0x310888,_0x325d77={'gCFpy':_0x5932e5(0x181),'tqIwL':'asc'},_0x383ae0=await prisma[_0x5932e5(0x1e4)][_0x5932e5(0x18d)]({'where':{'userId':_0xf0692e},'include':{'_count':{'select':{'conversations':!![],'tags':!![]}},'conversations':{'orderBy':{'addedAt':_0x5932e5(0x181)},'take':0x1,'select':{'addedAt':!![]}}},'orderBy':[{'isPinned':_0x325d77['gCFpy']},{'sortOrder':_0x325d77[_0x5932e5(0x1f5)]},{'createdAt':_0x325d77['gCFpy']}]});return _0x383ae0[_0x5932e5(0x1c4)](_0x48a6be=>({'id':_0x48a6be['id'],'userId':_0x48a6be[_0x5932e5(0x192)],'name':_0x48a6be[_0x5932e5(0x1f1)],'description':_0x48a6be[_0x5932e5(0x1ab)+_0x5932e5(0x1b1)]??undefined,'icon':_0x48a6be[_0x5932e5(0x1cf)]??'ðŸŒŒ','color':_0x48a6be[_0x5932e5(0x17b)]??_0x5932e5(0x1cb),'isDefault':_0x48a6be[_0x5932e5(0x1ca)+'t'],'isPinned':_0x48a6be[_0x5932e5(0x1a2)],'sortOrder':_0x48a6be[_0x5932e5(0x205)+'r'],'createdAt':_0x48a6be[_0x5932e5(0x185)+'t'],'updatedAt':_0x48a6be[_0x5932e5(0x1c8)+'t'],'conversationCount':_0x48a6be[_0x5932e5(0x179)][_0x5932e5(0x18c)+_0x5932e5(0x1c0)],'tagCount':_0x48a6be[_0x5932e5(0x179)]['tags'],'lastActivityAt':_0x48a6be[_0x5932e5(0x18c)+_0x5932e5(0x1c0)][0x0]?.['addedAt']}));};exports['getUserO'+'rbits']=getUserOrbits;const getOrbitById=async(_0xa8f7f0,_0x4f3f0c)=>{const _0x70addb=_0x310888,_0xa6e1bf={'hTNYj':'desc'},_0x155f88=await prisma[_0x70addb(0x1e4)]['findFirs'+'t']({'where':{'id':_0xa8f7f0,'userId':_0x4f3f0c},'include':{'_count':{'select':{'conversations':!![],'tags':!![]}},'conversations':{'orderBy':{'addedAt':_0xa6e1bf[_0x70addb(0x1f8)]},'take':0x1,'select':{'addedAt':!![]}}}});if(!_0x155f88)return null;return{'id':_0x155f88['id'],'userId':_0x155f88[_0x70addb(0x192)],'name':_0x155f88[_0x70addb(0x1f1)],'description':_0x155f88[_0x70addb(0x1ab)+_0x70addb(0x1b1)]??undefined,'icon':_0x155f88[_0x70addb(0x1cf)]??'ðŸŒŒ','color':_0x155f88[_0x70addb(0x17b)]??_0x70addb(0x1cb),'isDefault':_0x155f88[_0x70addb(0x1ca)+'t'],'isPinned':_0x155f88[_0x70addb(0x1a2)],'sortOrder':_0x155f88[_0x70addb(0x205)+'r'],'createdAt':_0x155f88[_0x70addb(0x185)+'t'],'updatedAt':_0x155f88[_0x70addb(0x1c8)+'t'],'conversationCount':_0x155f88[_0x70addb(0x179)][_0x70addb(0x18c)+_0x70addb(0x1c0)],'tagCount':_0x155f88['_count']['tags'],'lastActivityAt':_0x155f88[_0x70addb(0x18c)+_0x70addb(0x1c0)][0x0]?.[_0x70addb(0x19a)]};};exports[_0x310888(0x1e5)+'ById']=getOrbitById;const createOrbit=async(_0x56751f,_0x11b97b,_0x1af6af)=>{const _0x562f5e=_0x310888,_0x113af3={'bfXQC':_0x562f5e(0x1c9)+_0x562f5e(0x1e8),'PheYs':function(_0x25e3c8,_0x3d31c1){return _0x25e3c8!==_0x3d31c1;},'cIhbn':_0x562f5e(0x1dd),'XutwN':function(_0x134efe,_0x6be724){return _0x134efe>=_0x6be724;},'xhORJ':function(_0x1fa4a1,_0x577090){return _0x1fa4a1===_0x577090;},'VISFg':_0x562f5e(0x181),'GdvCf':function(_0xfd480a,_0x2edd3b){return _0xfd480a+_0x2edd3b;}},_0x295aaf=(0x0,exports[_0x562f5e(0x1e5)+_0x562f5e(0x1d6)])(_0x11b97b);if(_0x295aaf[_0x562f5e(0x1f6)+'s']!==-0x1){if(_0x113af3[_0x562f5e(0x1a8)](_0x113af3['cIhbn'],'sEhcf')){const _0x230945=await prisma['orbit'][_0x562f5e(0x1aa)]({'where':{'userId':_0x56751f}});if(_0x113af3[_0x562f5e(0x184)](_0x230945,_0x295aaf['maxOrbit'+'s'])){if(_0x113af3[_0x562f5e(0x188)](_0x562f5e(0x1c1),_0x562f5e(0x17a)))throw new _0x37743f(_0x113af3['bfXQC']);else throw new Error(_0x562f5e(0x1b6)+_0x562f5e(0x1ff)+'ed.\x20Maxi'+'mum\x20'+_0x295aaf[_0x562f5e(0x1f6)+'s']+('\x20orbits\x20'+_0x562f5e(0x1e7)));}}else throw new _0x575e1b(_0x562f5e(0x1e1)+_0x562f5e(0x1b5)+'d.\x20Maxim'+_0x562f5e(0x198)+_0x1786bf[_0x562f5e(0x186)+'erOrbit']+(_0x562f5e(0x206)+_0x562f5e(0x1d4)));}const _0x49c28d=await prisma[_0x562f5e(0x1e4)][_0x562f5e(0x1f0)+'t']({'where':{'userId':_0x56751f},'orderBy':{'sortOrder':_0x113af3[_0x562f5e(0x19e)]},'select':{'sortOrder':!![]}}),_0x3cb0d3=await prisma[_0x562f5e(0x1e4)][_0x562f5e(0x1ae)]({'data':{'userId':_0x56751f,'name':_0x1af6af[_0x562f5e(0x1f1)],'description':_0x1af6af[_0x562f5e(0x1ab)+_0x562f5e(0x1b1)],'icon':_0x1af6af[_0x562f5e(0x1cf)]||'ðŸŒŒ','color':_0x295aaf['canCusto'+'mizeColo'+'rs']?_0x1af6af[_0x562f5e(0x17b)]||'#6366f1':'#6366f1','sortOrder':_0x113af3['GdvCf'](_0x49c28d?.['sortOrde'+'r']||0x0,0x1)}});return{..._0x3cb0d3,'description':_0x3cb0d3[_0x562f5e(0x1ab)+'ion']??undefined,'icon':_0x3cb0d3[_0x562f5e(0x1cf)]??'ðŸŒŒ','color':_0x3cb0d3[_0x562f5e(0x17b)]??'#6366f1','conversationCount':0x0,'tagCount':0x0};};exports['createOr'+_0x310888(0x1d3)]=createOrbit;function _0x39b2(_0x520254,_0x21d4f7){_0x520254=_0x520254-0x178;const _0x33ab3a=_0x42d8();let _0x31d58a=_0x33ab3a[_0x520254];if(_0x39b2['tltkSs']===undefined){var _0x3645e0=function(_0x4e447c){const _0x1968ff='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x44efa8='',_0x398922='',_0x940a2=_0x44efa8+_0x3645e0;for(let _0x13ee0=0x0,_0x5bff16,_0x1e8430,_0x535ff9=0x0;_0x1e8430=_0x4e447c['charAt'](_0x535ff9++);~_0x1e8430&&(_0x5bff16=_0x13ee0%0x4?_0x5bff16*0x40+_0x1e8430:_0x1e8430,_0x13ee0++%0x4)?_0x44efa8+=_0x940a2['charCodeAt'](_0x535ff9+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x5bff16>>(-0x2*_0x13ee0&0x6)):_0x13ee0:0x0){_0x1e8430=_0x1968ff['indexOf'](_0x1e8430);}for(let _0xe3e522=0x0,_0x346208=_0x44efa8['length'];_0xe3e522<_0x346208;_0xe3e522++){_0x398922+='%'+('00'+_0x44efa8['charCodeAt'](_0xe3e522)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x398922);};_0x39b2['uhyLeg']=_0x3645e0,_0x39b2['jCsAlv']={},_0x39b2['tltkSs']=!![];}const _0x42d8fb=_0x33ab3a[0x0],_0x39b2f4=_0x520254+_0x42d8fb,_0x25a190=_0x39b2['jCsAlv'][_0x39b2f4];if(!_0x25a190){const _0x1058b0=function(_0x53148a){this['bNhQJe']=_0x53148a,this['mNyEwL']=[0x1,0x0,0x0],this['ZLCyHB']=function(){return'newState';},this['vsrpQs']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['JXznqb']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1058b0['prototype']['dceFbA']=function(){const _0x33666c=new RegExp(this['vsrpQs']+this['JXznqb']),_0x97d76b=_0x33666c['test'](this['ZLCyHB']['toString']())?--this['mNyEwL'][0x1]:--this['mNyEwL'][0x0];return this['CLSHNF'](_0x97d76b);},_0x1058b0['prototype']['CLSHNF']=function(_0xc4a577){if(!Boolean(~_0xc4a577))return _0xc4a577;return this['tSofJN'](this['bNhQJe']);},_0x1058b0['prototype']['tSofJN']=function(_0x10debb){for(let _0x1f0b23=0x0,_0x49e6ca=this['mNyEwL']['length'];_0x1f0b23<_0x49e6ca;_0x1f0b23++){this['mNyEwL']['push'](Math['round'](Math['random']())),_0x49e6ca=this['mNyEwL']['length'];}return _0x10debb(this['mNyEwL'][0x0]);},new _0x1058b0(_0x39b2)['dceFbA'](),_0x31d58a=_0x39b2['uhyLeg'](_0x31d58a),_0x39b2['jCsAlv'][_0x39b2f4]=_0x31d58a;}else _0x31d58a=_0x25a190;return _0x31d58a;}function _0x42d8(){const _0x285ab4=['C29YDe9Yzgu','ihrHz3mGywW','DgLVBKLK','DxbKyxrL','x2nVDw50','uNHhCvG','y29SB3i','txD4rhy','teLgrq','ww91CIbKzwy','Eu1Yz3i','txKGq29UDMu','zgvZyW','vw1UB1O','svPqELG','whv0D04','y3jLyxrLzee','Bwf4vgfNC1a','C2vHCMnO','EgHpuKO','q29UDMvYC2e','zgvMAw5Luhi','CMjPDhm','y29UDMvYC2e','zMLUze1HBNK','rurhrq','yML0vgfN','C1jkC1O','AwvUDa','DxnLCKLK','q2fUBM90ihi','zwXLDguGzgu','q2fUBM90igq','z2v0vxnLCK8','qhbYAxnTys8','Dw0G','yxvSDcbVCMi','ywrKzwrbDa','BNzLCNnHDgK','qNLjza','y2fUq3vZDg8','vKLtrMC','kYKRja','mtKXodq4sKvnuM9X','uhjPC21Hq2W','AxnqAw5Uzwq','yM1grvO','mZa2odmXmgLutLznwa','BxvTia','ugLUBMLUzYa','Dg9tDhjPBMC','ugHLwxm','tKvKyNy','y291BNq','zgvZy3jPChq','y3jLyxrLrgu','vxvsy0G','y3jLyxrL','CNnHDgLVBNm','thPTB3q','Aw9U','DgfNCW','nZGWndfmENHfBgC','zefYuMe','DcbYzwfJAgu','ugXHBIbSAw0','wLzzy2W','A2jfrgK','Bwf4q29UDMu','BgWUie1HEgK','CNnHDgLVBLq','kcGOlISPkYK','B3jIAxruywC','DMvYC2f0Aw8','zxjpCMjPDa','DgLVBNm','B3D5r2q','uMP2zw4','BgXVD2vKlG','BwfW','zgvSzxrL','mJKYotmYs01NBgTg','DxbKyxrLt3i','DxbKyxrLzee','t3jIAxqGBM8','AxnezwzHDwW','iZyZnJzMmq','zM91BMq','y2fUugLUt3i','BwL6zunVBg8','AwnVBG','uuzrAM4','yxbWBhK','t3jIAxqGzNu','yML0','Bg93zwqU','B3qGyxzHAwW','tgLTAxrZ','AenxzvG','zc4Gtwf4Aw0','B25gCM9Tt3i','mJa0mtC1yLPUz0zu','lI4VlI4VlI4','zgvSzxrLt3i','veDrAMK','zMf1BhrpCMi','vgfNCW','y2XPzw50','vgfNigXPBwK','ugXHBLr5Cgu','yxrPB25Zige','B3jIAxq','z2v0t3jIAxq','y29UC3rYDwm','ywXSB3DLzc4','DcbMB3vUza','B3jIAxrdB24','x19LC01Vzhu','mZy0mtKXohbTDwPgrW','zMf1BhqGB3i','ndG3mZeWnfvjt1n6CW','zMLUzfvUAxe','ufjp','zMLUzezPCNm','BMfTzq','AuXtA04','ugvYt3jIAxq','B3bLCNr5','DhfjD0W','Bwf4t3jIAxq','ueXvuW','AfrowwO','y3jLyxrLt3i','u0rIwgG','nLHTrwD1rq','CMvTB3zLq28','B09YyML0','u1rbuLrfuG','AxqGCMvHy2G','uwDtCfu','DhmVCgXHBNm','s0PHshK','ywrKq29UDMu','A3POv0i'];_0x42d8=function(){return _0x285ab4;};return _0x42d8();}const updateOrbit=async(_0x214078,_0x3a179e,_0x4e514e,_0x4dc447)=>{const _0x20317c=_0x310888,_0x1c0076={'sRJsZ':'Orbit\x20no'+_0x20317c(0x1e8),'WbOOE':_0x20317c(0x1f2),'MwxDv':_0x20317c(0x193)+'ename\x20de'+_0x20317c(0x1ec)+_0x20317c(0x1d3)},_0x5f1af7=await prisma[_0x20317c(0x1e4)][_0x20317c(0x1f0)+'t']({'where':{'id':_0x214078,'userId':_0x3a179e}});if(!_0x5f1af7)throw new Error(_0x1c0076[_0x20317c(0x190)]);if(_0x5f1af7['isDefaul'+'t']&&_0x4dc447[_0x20317c(0x1f1)]){if(_0x1c0076['WbOOE']===_0x20317c(0x1f2))throw new Error(_0x1c0076[_0x20317c(0x17c)]);else{if(_0x55ac8e){const res=_0x1facc3[_0x20317c(0x1d1)](_0x4574f1,arguments);return _0x44eaf7=null,res;}}}const _0x59577c=(0x0,exports[_0x20317c(0x1e5)+'Limits'])(_0x4e514e);if(_0x4dc447['isPinned']&&!_0x59577c[_0x20317c(0x1cd)+'bits'])throw new Error(_0x20317c(0x1a6)+'orbits\x20n'+_0x20317c(0x1d5)+'able\x20in\x20'+'your\x20pla'+'n');const _0x438864=await prisma[_0x20317c(0x1e4)][_0x20317c(0x178)]({'where':{'id':_0x214078},'data':{'name':_0x4dc447['name'],'description':_0x4dc447['descript'+_0x20317c(0x1b1)],'icon':_0x4dc447[_0x20317c(0x1cf)],'color':_0x59577c[_0x20317c(0x19d)+_0x20317c(0x1ce)+'rs']?_0x4dc447[_0x20317c(0x17b)]:undefined,'isPinned':_0x4dc447[_0x20317c(0x1a2)]},'include':{'_count':{'select':{'conversations':!![],'tags':!![]}}}});return{..._0x438864,'description':_0x438864[_0x20317c(0x1ab)+_0x20317c(0x1b1)]??undefined,'icon':_0x438864[_0x20317c(0x1cf)]??'ðŸŒŒ','color':_0x438864[_0x20317c(0x17b)]??_0x20317c(0x1cb),'conversationCount':_0x438864[_0x20317c(0x179)]['conversa'+_0x20317c(0x1c0)],'tagCount':_0x438864[_0x20317c(0x179)]['tags']};};exports[_0x310888(0x1c7)+'bit']=updateOrbit;const deleteOrbit=async(_0x5577f1,_0x3e5025)=>{const _0x2059bf=_0x310888,_0x385156={'kbEDi':_0x2059bf(0x1c9)+'t\x20found','QFQjn':_0x2059bf(0x195)+_0x2059bf(0x194)+_0x2059bf(0x1ec)+_0x2059bf(0x1d3)},_0x487224=await prisma[_0x2059bf(0x1e4)][_0x2059bf(0x1f0)+'t']({'where':{'id':_0x5577f1,'userId':_0x3e5025}});if(!_0x487224)throw new Error(_0x385156[_0x2059bf(0x1b8)]);if(_0x487224[_0x2059bf(0x1ca)+'t'])throw new Error(_0x385156[_0x2059bf(0x1d0)]);await prisma[_0x2059bf(0x1e4)][_0x2059bf(0x1c5)]({'where':{'id':_0x5577f1}});};exports[_0x310888(0x1dc)+_0x310888(0x1d3)]=deleteOrbit;const addConversationToOrbit=async(_0x164132,_0x41ecfe,_0x6b57a1,_0x15fcbb)=>{const _0x3d7f27=_0x310888,_0x769b1b={'hCWeX':function(_0x5d6afa,_0x4ed53b){return _0x5d6afa!==_0x4ed53b;},'SDbXh':function(_0x508488,_0x26b13c){return _0x508488>=_0x26b13c;}},_0x5e6219=await prisma['orbit'][_0x3d7f27(0x1f0)+'t']({'where':{'id':_0x164132,'userId':_0x41ecfe},'include':{'_count':{'select':{'conversations':!![]}}}});if(!_0x5e6219)throw new Error(_0x3d7f27(0x1c9)+_0x3d7f27(0x1e8));const _0x12c718=(0x0,exports[_0x3d7f27(0x1e5)+_0x3d7f27(0x1d6)])(_0x6b57a1);if(_0x769b1b[_0x3d7f27(0x1d7)](_0x12c718[_0x3d7f27(0x1b9)+'rsations'+_0x3d7f27(0x1f3)],-0x1)&&_0x769b1b[_0x3d7f27(0x1fa)](_0x5e6219[_0x3d7f27(0x179)]['conversa'+_0x3d7f27(0x1c0)],_0x12c718[_0x3d7f27(0x1b9)+_0x3d7f27(0x1af)+'PerOrbit']))throw new Error(_0x3d7f27(0x1d2)+_0x3d7f27(0x1ba)+_0x3d7f27(0x1a5)+_0x12c718[_0x3d7f27(0x1b9)+'rsations'+_0x3d7f27(0x1f3)]+('\x20convers'+_0x3d7f27(0x1e3)+_0x3d7f27(0x1c3)));await prisma[_0x3d7f27(0x1e9)+_0x3d7f27(0x1be)+'n'][_0x3d7f27(0x1ae)]({'data':{'orbitId':_0x164132,'conversationId':_0x15fcbb['conversa'+_0x3d7f27(0x207)],'isPinned':_0x15fcbb['isPinned']||![]}});};exports[_0x310888(0x203)+_0x310888(0x1bb)+_0x310888(0x1fd)]=addConversationToOrbit;const removeConversationFromOrbit=async(_0x46d7af,_0x49a36a,_0x49a7a7)=>{const _0x120149=_0x310888,_0x350f2b={'ZVYcl':_0x120149(0x1c9)+_0x120149(0x1e8)},_0x45385b=await prisma[_0x120149(0x1e4)]['findFirs'+'t']({'where':{'id':_0x46d7af,'userId':_0x49a7a7}});if(!_0x45385b)throw new Error(_0x350f2b[_0x120149(0x1b7)]);await prisma[_0x120149(0x1e9)+'versatio'+'n']['deleteMa'+'ny']({'where':{'orbitId':_0x46d7af,'conversationId':_0x49a36a}});};exports[_0x310888(0x1fc)+_0x310888(0x19b)+'onFromOr'+_0x310888(0x1d3)]=removeConversationFromOrbit;const getOrbitConversations=async(_0x316812,_0x323e5c)=>{const _0x2a2630=_0x310888,_0x1f164b={'IZPzX':_0x2a2630(0x1c9)+_0x2a2630(0x1e8),'UmnoZ':'desc'},_0x294713=await prisma[_0x2a2630(0x1e4)]['findFirs'+'t']({'where':{'id':_0x316812,'userId':_0x323e5c}});if(!_0x294713)throw new Error(_0x1f164b[_0x2a2630(0x183)]);const _0x4c6803=await prisma[_0x2a2630(0x1e9)+_0x2a2630(0x1be)+'n'][_0x2a2630(0x18d)]({'where':{'orbitId':_0x316812},'orderBy':[{'isPinned':_0x1f164b[_0x2a2630(0x182)]},{'addedAt':_0x1f164b[_0x2a2630(0x182)]}],'select':{'conversationId':!![]}});return _0x4c6803[_0x2a2630(0x1c4)](_0x33f45c=>_0x33f45c[_0x2a2630(0x18c)+_0x2a2630(0x207)]);};exports[_0x310888(0x1e5)+_0x310888(0x189)+_0x310888(0x1c0)]=getOrbitConversations;const createOrbitTag=async(_0x59015e,_0x11830c,_0x26dc76,_0x3ccd3a,_0x4d8107)=>{const _0x2d78cf=_0x310888,_0x572585={'sLVXp':function(_0x2a047a,_0x56a536){return _0x2a047a===_0x56a536;},'yMrgr':_0x2d78cf(0x1b0),'UuRcH':function(_0xbdfa1b,_0x234b21){return _0xbdfa1b||_0x234b21;},'KJaHy':'#8b5cf6'},_0x3cdfa9=await prisma[_0x2d78cf(0x1e4)][_0x2d78cf(0x1f0)+'t']({'where':{'id':_0x59015e,'userId':_0x11830c},'include':{'_count':{'select':{'tags':!![]}}}});if(!_0x3cdfa9){if(_0x572585['sLVXp'](_0x2d78cf(0x1b0),_0x572585[_0x2d78cf(0x17f)]))throw new Error(_0x2d78cf(0x1c9)+_0x2d78cf(0x1e8));else throw new _0x3626e7('Orbit\x20no'+'t\x20found');}const _0x460e18=(0x0,exports[_0x2d78cf(0x1e5)+_0x2d78cf(0x1d6)])(_0x26dc76);if(_0x460e18[_0x2d78cf(0x186)+_0x2d78cf(0x1bf)]!==-0x1&&_0x3cdfa9[_0x2d78cf(0x179)][_0x2d78cf(0x1b2)]>=_0x460e18['maxTagsP'+_0x2d78cf(0x1bf)])throw new Error(_0x2d78cf(0x1e1)+_0x2d78cf(0x1b5)+_0x2d78cf(0x1d8)+'um\x20'+_0x460e18[_0x2d78cf(0x186)+_0x2d78cf(0x1bf)]+(_0x2d78cf(0x206)+_0x2d78cf(0x1d4)));const _0x57a421=await prisma[_0x2d78cf(0x1bd)][_0x2d78cf(0x1ae)]({'data':{'orbitId':_0x59015e,'name':_0x3ccd3a,'color':_0x572585[_0x2d78cf(0x1ad)](_0x4d8107,_0x572585[_0x2d78cf(0x202)])}});return _0x57a421;};exports[_0x310888(0x1f9)+_0x310888(0x18f)]=createOrbitTag;const getOrbitTags=async(_0x2915f2,_0x26bccd)=>{const _0x3aa52f=_0x310888,_0x4ac867={'dArRa':_0x3aa52f(0x1c9)+_0x3aa52f(0x1e8),'EvTfg':_0x3aa52f(0x1a3)},_0x18e176=await prisma['orbit'][_0x3aa52f(0x1f0)+'t']({'where':{'id':_0x2915f2,'userId':_0x26bccd}});if(!_0x18e176){if(_0x3aa52f(0x1a3)===_0x4ac867['EvTfg'])throw new Error(_0x4ac867[_0x3aa52f(0x1b4)]);else throw new _0x46deda(_0x4ac867[_0x3aa52f(0x1b4)]);}return await prisma[_0x3aa52f(0x1bd)][_0x3aa52f(0x18d)]({'where':{'orbitId':_0x2915f2},'orderBy':{'createdAt':'asc'}});};exports[_0x310888(0x1e5)+_0x310888(0x1df)]=getOrbitTags;const deleteOrbitTag=async(_0x69fd61,_0x48f8a9)=>{const _0x173e00=_0x310888,_0x1d7521={'QgSpU':'Tag\x20not\x20'+_0x173e00(0x1cc)},_0x4e6b49=await prisma[_0x173e00(0x1bd)][_0x173e00(0x1ee)+'ue']({'where':{'id':_0x69fd61},'include':{'orbit':!![]}});if(!_0x4e6b49||_0x4e6b49[_0x173e00(0x1e4)][_0x173e00(0x192)]!==_0x48f8a9)throw new Error(_0x1d7521[_0x173e00(0x200)]);await prisma[_0x173e00(0x1bd)][_0x173e00(0x1c5)]({'where':{'id':_0x69fd61}});};exports[_0x310888(0x1dc)+_0x310888(0x18f)]=deleteOrbitTag;