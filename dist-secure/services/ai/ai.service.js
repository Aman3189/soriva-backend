const _0x4e4097=_0x33b1;(function(_0x3ec754,_0x66e441){const _0x2b8132=_0x33b1,_0x19c4f8=_0x3ec754();while(!![]){try{const _0x249ad7=parseInt(_0x2b8132(0x1ff))/0x1*(parseInt(_0x2b8132(0x1a5))/0x2)+parseInt(_0x2b8132(0x1cb))/0x3+-parseInt(_0x2b8132(0x1dd))/0x4+-parseInt(_0x2b8132(0x1e6))/0x5+-parseInt(_0x2b8132(0x22f))/0x6*(parseInt(_0x2b8132(0x211))/0x7)+-parseInt(_0x2b8132(0x25d))/0x8+-parseInt(_0x2b8132(0x180))/0x9*(-parseInt(_0x2b8132(0x18d))/0xa);if(_0x249ad7===_0x66e441)break;else _0x19c4f8['push'](_0x19c4f8['shift']());}catch(_0x5ec1fb){_0x19c4f8['push'](_0x19c4f8['shift']());}}}(_0x5500,0x1cab9));function _0x33b1(_0x13eb3c,_0x10d444){_0x13eb3c=_0x13eb3c-0x147;const _0x23b28a=_0x5500();let _0x1ec676=_0x23b28a[_0x13eb3c];if(_0x33b1['hdUvGb']===undefined){var _0x2f0899=function(_0x278cfa){const _0x5b2b6c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3fda33='',_0x51e203='',_0x1a8dac=_0x3fda33+_0x2f0899;for(let _0x47e4f3=0x0,_0x1fa67f,_0x136653,_0x194900=0x0;_0x136653=_0x278cfa['charAt'](_0x194900++);~_0x136653&&(_0x1fa67f=_0x47e4f3%0x4?_0x1fa67f*0x40+_0x136653:_0x136653,_0x47e4f3++%0x4)?_0x3fda33+=_0x1a8dac['charCodeAt'](_0x194900+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x1fa67f>>(-0x2*_0x47e4f3&0x6)):_0x47e4f3:0x0){_0x136653=_0x5b2b6c['indexOf'](_0x136653);}for(let _0x3e75f0=0x0,_0x3fb820=_0x3fda33['length'];_0x3e75f0<_0x3fb820;_0x3e75f0++){_0x51e203+='%'+('00'+_0x3fda33['charCodeAt'](_0x3e75f0)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x51e203);};_0x33b1['jdPWFN']=_0x2f0899,_0x33b1['XBKTxH']={},_0x33b1['hdUvGb']=!![];}const _0x5500a8=_0x23b28a[0x0],_0x33b16f=_0x13eb3c+_0x5500a8,_0x3b06c1=_0x33b1['XBKTxH'][_0x33b16f];if(!_0x3b06c1){const _0x423c8a=function(_0x3bcb7a){this['cHuFyU']=_0x3bcb7a,this['kQrbet']=[0x1,0x0,0x0],this['TKgdwJ']=function(){return'newState';},this['XSOcmC']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qjWqeA']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x423c8a['prototype']['LcuJDy']=function(){const _0x5e01b7=new RegExp(this['XSOcmC']+this['qjWqeA']),_0x43bbcf=_0x5e01b7['test'](this['TKgdwJ']['toString']())?--this['kQrbet'][0x1]:--this['kQrbet'][0x0];return this['zyVbMf'](_0x43bbcf);},_0x423c8a['prototype']['zyVbMf']=function(_0x529e68){if(!Boolean(~_0x529e68))return _0x529e68;return this['djfaAx'](this['cHuFyU']);},_0x423c8a['prototype']['djfaAx']=function(_0x2a97f6){for(let _0x193880=0x0,_0x270e9b=this['kQrbet']['length'];_0x193880<_0x270e9b;_0x193880++){this['kQrbet']['push'](Math['round'](Math['random']())),_0x270e9b=this['kQrbet']['length'];}return _0x2a97f6(this['kQrbet'][0x0]);},new _0x423c8a(_0x33b1)['LcuJDy'](),_0x1ec676=_0x33b1['jdPWFN'](_0x1ec676),_0x33b1['XBKTxH'][_0x33b16f]=_0x1ec676;}else _0x1ec676=_0x3b06c1;return _0x1ec676;}const _0x2f0899=(function(){const _0x574c9f=_0x33b1,_0x5b443f={'qzvRG':function(_0x2d5a4f,_0x4782e9){return _0x2d5a4f!==_0x4782e9;},'UbXKW':'oRTMm','lphsM':_0x574c9f(0x1f7)};let _0x470751=!![];return function(_0x363817,_0x47c725){const _0x1601ed=_0x574c9f;if(_0x5b443f[_0x1601ed(0x25e)](_0x5b443f[_0x1601ed(0x233)],_0x5b443f[_0x1601ed(0x246)])){const _0x46ac97=_0x470751?function(){const _0x4c1958=_0x1601ed;if(_0x47c725){const res=_0x47c725[_0x4c1958(0x219)](_0x363817,arguments);return _0x47c725=null,res;}}:function(){};return _0x470751=![],_0x46ac97;}else{if(_0x15c43d){const res=_0x4fd57c[_0x1601ed(0x219)](_0x3b14a5,arguments);return _0x5232d4=null,res;}}};}()),_0x1ec676=_0x2f0899(this,function(){const _0x520ed2=_0x33b1,_0x149cd1={'CSTSV':_0x520ed2(0x178)+_0x520ed2(0x210)};return _0x1ec676['toString']()['search'](_0x149cd1[_0x520ed2(0x216)])[_0x520ed2(0x213)]()[_0x520ed2(0x1f8)+_0x520ed2(0x1f5)](_0x1ec676)[_0x520ed2(0x15b)](_0x149cd1[_0x520ed2(0x216)]);});function _0x5500(){const _0x333a66=['BgXPBMCVDxm','twvZC2fNzvi','y2vDiokCHsbjBG','mZa1nZu3r1rHAxPu','y2fUvxnL','ienVB2XKB3C','BgLTAxrdB24','B21WDhmVC28','qu5usfjpueK','tuLux0vyq0u','zgfPBhLszw0','CMvTywLUAw4','BIbVBMX5ihq','ANDusNG','wNHSy0C','Ae9Srgi','Bw9KzwXjza','tw9KzwW','vvnbr0vFteK','uhjVDMLKzxi','ueXvuW','nduZntyWyxbNy0Pz','Dgf0Dxm','zwnR','rxjYB3jiyw4','u1PyEwe','zw52','zxnWB25Zzq','BhKGBgLTAxq','CIb0BYbRzwu','mZCYmZC1DuPjqMXi','z2v0ugXHBKK','BM93','y3jLyxrLquK','DxnLCK5HBwu','zsbWzxiGBgK','y291BNrxB3i','zMLSDgvY','z3jHy2vMDwW','rvjFqvbjx0S','swToqLq','r3DXthO','Aw9isei','qxfNvuS','vw5RBM93BIa','Dg9Y','Aw5ZDgfUy2u','quH4B0C','y29UC3rYDwm','zxjYB3i','BMuSihDPDgG','BwfW','lI4VlI4VBw8','rxbIrNa','B21WDa','m2TJzevVta','zxnZDxjL','y29UDMvYC2e','vvnfuG','z2vmAw1PDhm','BMvLzhnszwC','zguP','sw52ywXPzca','qxvXugy','zfLMvLm','zMLUzfvUAxe','t1bftKfjx0e','zhvSzxmVyMK','AgfUzgXLrxi','rMfPBgvKihq','C3rYzwfTv2K','shjUB1O','kYKRja','n0v2DLrzvG','Bw9UDgHSEvq','Dg9tDhjPBMC','AxqGAgfZigi','CMuGy2fWywm','q1nuu1y','B3iGBM93lIa','zwXZ','yxbWBhK','ugXHBLr5Cgu','r2L2zw4GDgG','t1bftLjpvvq','yuHrs3q','BgLTAxrZ','ww91j3zLihi','BvbYB21WDa','ywDLCG','vwDpChy','AwnL','AwvK','DgHgywXSyMe','igfNywLUlG','B25dAhvUAW','u1rbuLrfuG','B3vYignOyxq','CML2ys5Wzxi','Aw1PDa','u3rHDhngB3i','sM9YCwK','lI4U','mte0nZy2og15A2zHwq','CM9UzY4GugW','z2v0ugXHBG','DxnLCG','vwjys1C','y29Kzq','x19PBxbVCNq','igzVDw5K','CgXHBIb0Exa','DMfSDwvZ','z2v0u3rHDhm','BMP0suS','C3vIC2nYAxa','zhPTBxu','zc4Gvhj5ige','yNvKz2v0uhi','yw1L','C2vYDMLJzq','DMvYC2f0Aw8','BNnL','zwqGDg8Gz2u','quLtzxj2Awm','y29TCgXLDgK','BhbOC00','zwvUihjLywm','AxrPywXPEMu','zgfPBhLuB2S','t2rwuhi','ChjPC21H','DgvTCgvYyxq','AgvHBhrOq2G','zgvMyxvSDa','y3vYCMvK','BwvTB3j5rge','zxjYB3iGB2m','ChrZ','Ber5whq','CffZruS','q19bueLFs0u','AxmGy29UDgu','B2XL','Bw9UDgHSEvi','wwD1vfO','CgXHBLr5Cgu','C29UywXPDhK','ENbZBMi','mtu1mZqWofPRugT0tG','CxP2uKC','ufjp','C3LZDgvTuhi','zgfPBhLxB3i','uhjVBxb0','qvbfwa','CM9Y','D1bLuuu','Aw5JBhvKzxm','zcaOuhjVzhu','BMjoBLi','BMf0DxjHBe0','BNn0yw50CW','AevREvq','zgvSyxK','CM91Dgu','rgfPBhK','y29TCgXLEgK','C21H','Dw5RBM93BG','ywDLlNnLCNy','lI4VlI4Vy28','zxHLy3v0zvC','C3rYzwfTq2G','uxvHBgL0Eq','rgvMyxvSDa','BKHPC3rVCNK','y2HHDa','zYb3zw50ihC','ww91CIbKywK','twLKzgXLD2e','y2SGB3v0ig8','B0nWAuW','BMnL','z2v0shr0Cfm','lI9NCMfJzwy','BIbYzwfJAgu','zgvMAw5Luhi','BYbJAgvJAYa','D29YzhnvC2u','ywnR','C3qGmYbYzwW','zuPoy1K','u1Ltvevn','r09pr0Xfx0e','BMzPzY9WCMK','C2vHCMnO','ywPLy2W','swPlzKW','y2HLy2TvC2e','DgLVBLbYB20','vxnLCIbUB3q','ChjVy2vZCW','DwWTCMvZCg8','zxzLCNK','A3L1A3G','zxnZywDL','zxHWzwn0zwq','AgvKlIbdAgu','DgLVBKHPC3q','w0fju2vYDMK','rxncBxa','Cg9ir3G','DxnHz2uGBgK','BMfTzq','Ehq6ici','zgLZCgXHEu4','y3rPB24Gtw8','B2TLBNm','z2v0sw5ZDge','C2XPy2u','z2v0qxzHAwW','y29UDgvUDa','ywLtzxj2Awm','zgfPBhLmAw0','kcGOlISPkYK','BKnjwvq','EvP1rgO','BgvUz3rO','A2vUCW','DxjL','CM91DgLUzY4','CMvNzw5LCMe','oxjxter6rq','AM9PBG','C3bSAxq','DgLVBIbWBge','DhjPBq','D2fZtw9KAwy','whnXq04','CKjQCeq','zxzHBNqGzM8','u09wrvjfsuC','y2vPBa','DwDNzxn0Aw8','BIbcB29ZDgu','nde4nZm5mhbisMnoqG','DxiGqwrKlw8','C21HCNrsB3u','zwfZzsb0CNK','rfDRthK','zMfSBgjHy2S','y2vUDgfNzq','rLfuvfC','z2v0u3LZDgu','Cg9UC2u','Bw9UDgHSEuW','iIWGC3vNz2u','tw9UDgHSEq','Bg9N','CMrZ','AxrOrMfSBgi','zgXLCG','B3j5','tK5QsNe','CMvHC29U','BgDnvM0','quLfCNjVCG','BLnYEM8','DxnLCKLK','mteZmZK2zwXNBgD5','Bwf4vg9Rzw4','rurfra','ywjSzvbSyw4','ChjVDMLKzxi','zwfJAgvKihK','CY4GuMv0Dxi','C3rHDhvZq28','B3zPzgvYCW','CgXHBNnnyw4','ChjVBxb0vg8','DxnHz2u','zgvKDwn0v28','ww91CIbTB24','BwL0CW','rMfJDg9YEq','Axr5isdWN5Qa','DgLUz1nLCNy','B25dB21WBgu','BMzV','veXKz2i','BvHnD0q','zw1HAw5PBMC','zMLUywXszxm','CcbJAgf0DgK','y2XLyw5bsvi','zw5Z','BwvZC2fNzq','zgL2v0m','z0rHAwX5v28','CxDutuS','CMuVywKVChi','z2v0vxnLCK0','ueLFs0vz','zMfJDg9YEq'];_0x5500=function(){return _0x333a66;};return _0x5500();}_0x1ec676();'use strict';Object[_0x4e4097(0x152)+'operty'](exports,'__esModu'+'le',{'value':!![]}),exports[_0x4e4097(0x176)+'e']=exports['AIServic'+'e']=void 0x0;const tslib_1=require('tslib'),providers_1=require('../../co'+_0x4e4097(0x1c4)+_0x4e4097(0x1ad)),soriva_personality_1=require(_0x4e4097(0x273)+_0x4e4097(0x1c4)+_0x4e4097(0x1cf)+_0x4e4097(0x22a)+_0x4e4097(0x25b)),usage_service_1=tslib_1[_0x4e4097(0x235)+_0x4e4097(0x277)](require(_0x4e4097(0x1fc)+_0x4e4097(0x20b)+_0x4e4097(0x1c8)+_0x4e4097(0x272)+_0x4e4097(0x223))),prisma_1=require(_0x4e4097(0x273)+_0x4e4097(0x15a)+_0x4e4097(0x270)),constants_1=require(_0x4e4097(0x273)+_0x4e4097(0x26a)),graceful_response_1=require(_0x4e4097(0x150)+_0x4e4097(0x162)+_0x4e4097(0x242)),smart_routing_service_1=require('./smart-'+_0x4e4097(0x17e)+_0x4e4097(0x240)),PLAN_TYPE_MAPPING={'starter':constants_1[_0x4e4097(0x21a)]['STARTER'],'plus':constants_1[_0x4e4097(0x21a)][_0x4e4097(0x1dc)],'pro':constants_1['PlanType'][_0x4e4097(0x25f)],'apex':constants_1[_0x4e4097(0x21a)][_0x4e4097(0x263)],'sovereign':constants_1[_0x4e4097(0x21a)]['SOVEREIG'+'N'],'STARTER':constants_1[_0x4e4097(0x21a)][_0x4e4097(0x228)],'PLUS':constants_1[_0x4e4097(0x21a)][_0x4e4097(0x1dc)],'PRO':constants_1['PlanType'][_0x4e4097(0x25f)],'APEX':constants_1[_0x4e4097(0x21a)]['APEX'],'SOVEREIGN':constants_1[_0x4e4097(0x21a)][_0x4e4097(0x189)+'N']},RESPONSE_WORD_LIMITS={[constants_1[_0x4e4097(0x21a)][_0x4e4097(0x228)]]:0x50,[constants_1[_0x4e4097(0x21a)][_0x4e4097(0x1dc)]]:0x96,[constants_1['PlanType'][_0x4e4097(0x25f)]]:0x12c,[constants_1[_0x4e4097(0x21a)][_0x4e4097(0x263)]]:0x1f4,[constants_1[_0x4e4097(0x21a)][_0x4e4097(0x189)+'N']]:0x270f};function normalizePlanType(_0x9e9344){const _0x29dbb8=_0x4e4097;return PLAN_TYPE_MAPPING[_0x9e9344]||constants_1[_0x29dbb8(0x21a)][_0x29dbb8(0x228)];}function toSorivaPlan(_0xec440b){const _0x447b86=_0x4e4097,_0x384fd8={'TLdgb':'PLUS','AuqPf':_0x447b86(0x25f),'aHQKt':_0x447b86(0x263),'IkNBT':'SOVEREIG'+'N'},_0x22d8a0={[constants_1[_0x447b86(0x21a)][_0x447b86(0x228)]]:_0x447b86(0x228),[constants_1[_0x447b86(0x21a)][_0x447b86(0x1dc)]]:_0x384fd8[_0x447b86(0x1b9)],[constants_1[_0x447b86(0x21a)][_0x447b86(0x25f)]]:_0x384fd8[_0x447b86(0x207)],[constants_1[_0x447b86(0x21a)][_0x447b86(0x263)]]:_0x384fd8[_0x447b86(0x21d)],[constants_1[_0x447b86(0x21a)]['SOVEREIG'+'N']]:_0x384fd8[_0x447b86(0x1f0)]};return _0x22d8a0[_0xec440b]||'STARTER';}const HISTORY_LIMITS={[constants_1['PlanType']['STARTER']]:0x2,[constants_1[_0x4e4097(0x21a)]['PLUS']]:0x3,[constants_1[_0x4e4097(0x21a)][_0x4e4097(0x25f)]]:0x4,[constants_1[_0x4e4097(0x21a)]['APEX']]:0x6,[constants_1[_0x4e4097(0x21a)][_0x4e4097(0x189)+'N']]:0x32};class AIService{constructor(){const _0x44941d=_0x4e4097,_0x469bd7={'OdVPr':_0x44941d(0x169)+_0x44941d(0x1ca)+'itialize'+_0x44941d(0x267)+_0x44941d(0x170)+'de)'};this['factory']=providers_1['Provider'+_0x44941d(0x1b4)][_0x44941d(0x172)+_0x44941d(0x14e)]({'anthropicApiKey':process[_0x44941d(0x1e2)]['ANTHROPI'+_0x44941d(0x255)+'Y'],'googleApiKey':process[_0x44941d(0x1e2)]['GOOGLE_A'+_0x44941d(0x1c6)],'openaiApiKey':process['env']['OPENAI_A'+_0x44941d(0x1c6)],'openrouterApiKey':process[_0x44941d(0x1e2)][_0x44941d(0x21c)+_0x44941d(0x1ef)+'EY']}),console[_0x44941d(0x19a)](_0x469bd7[_0x44941d(0x24a)]);}static[_0x4e4097(0x172)+_0x4e4097(0x14e)](){const _0x49ce9c=_0x4e4097,_0x1c09cc={'IjKfL':function(_0x35888d,_0x46e2ca){return _0x35888d+_0x46e2ca;},'dzmmu':_0x49ce9c(0x22e),'ioHHB':_0x49ce9c(0x14d)};return!AIService[_0x49ce9c(0x1f6)]&&(_0x1c09cc[_0x49ce9c(0x1f2)]!==_0x1c09cc[_0x49ce9c(0x1f2)]?_0x56a4e6[_0x49ce9c(0x175)]=_0x1c09cc[_0x49ce9c(0x15d)](_0x3a4f52[_0x49ce9c(0x173)](0x0,_0x1c73f3)['join']('\x20'),_0x1c09cc[_0x49ce9c(0x23c)]):AIService[_0x49ce9c(0x1f6)]=new AIService()),AIService[_0x49ce9c(0x1f6)];}async[_0x4e4097(0x148)](_0xbeeb7d){const _0x3c2577=_0x4e4097,_0x3106ba={'ZxlcG':_0x3c2577(0x178)+_0x3c2577(0x210),'hOlDb':function(_0x3180e0,_0x161e08){return _0x3180e0(_0x161e08);},'hIUYb':_0x3c2577(0x1ba),'lDyXt':_0x3c2577(0x160)+'\x20found','DWkLy':function(_0x260e9a,_0x4b1bf1){return _0x260e9a/_0x4b1bf1;},'dYfVS':'SGtxi','yAjTA':function(_0xcfc7fd,_0x55f235){return _0xcfc7fd===_0x55f235;},'lgMVm':function(_0x452a5d,_0x2173dc){return _0x452a5d+_0x2173dc;},'tHWxP':_0x3c2577(0x22e),'FQTTW':function(_0x400b48,_0x3bdf17){return _0x400b48-_0x3bdf17;}},_0x1a5404=Date[_0x3c2577(0x1e8)]();try{const _0x384bd1=_0x3106ba[_0x3c2577(0x1d7)](normalizePlanType,_0xbeeb7d[_0x3c2577(0x25a)]),_0x180f0e=await prisma_1[_0x3c2577(0x24b)][_0x3c2577(0x232)][_0x3c2577(0x209)+'ue']({'where':{'id':_0xbeeb7d[_0x3c2577(0x1a4)]}});if(!_0x180f0e){if(_0x3106ba['hIUYb']!==_0x3106ba['hIUYb']){const _0x32d32b=new _0x34ad6a(_0x3f7165['naturalM'+_0x3c2577(0x165)]||_0x445f86[_0x3c2577(0x1a0)]);_0x32d32b[_0x3c2577(0x234)]=_0x3c2577(0x1da)+'MIT_EXCE'+_0x3c2577(0x1a7);throw _0x32d32b;}else throw new Error(_0x3106ba[_0x3c2577(0x253)]);}const _0x1f63cd=constants_1[_0x3c2577(0x1ae)+_0x3c2577(0x221)]['getPlan'](_0x384bd1);if(!_0x1f63cd){if(_0x3c2577(0x164)==='AYjWy')return _0x17db6f[_0x3c2577(0x213)]()[_0x3c2577(0x15b)](_0x3c2577(0x178)+_0x3c2577(0x210))[_0x3c2577(0x213)]()[_0x3c2577(0x1f8)+_0x3c2577(0x1f5)](_0x50cd83)[_0x3c2577(0x15b)](SEImso[_0x3c2577(0x1d6)]);else throw new Error(_0x3c2577(0x206)+_0x3c2577(0x23b)+'tion\x20pla'+'n');}const _0x1bb0be=Math[_0x3c2577(0x18a)](_0x3106ba[_0x3c2577(0x191)](_0xbeeb7d[_0x3c2577(0x1c0)][_0x3c2577(0x17b)],0x5)),_0x42ef0b=await this[_0x3c2577(0x15e)+_0x3c2577(0x203)](_0xbeeb7d[_0x3c2577(0x1a4)],_0x1bb0be);if(!_0x42ef0b['canUse']){const _0x42c965=new Error(_0x42ef0b[_0x3c2577(0x269)+'essage']||_0x42ef0b[_0x3c2577(0x1a0)]);_0x42c965[_0x3c2577(0x234)]='USAGE_LI'+_0x3c2577(0x1d1)+_0x3c2577(0x1a7),_0x42c965[_0x3c2577(0x1ac)+'de']=0x1ad;throw _0x42c965;}const _0x179fb7=await prisma_1['prisma'][_0x3c2577(0x1b0)][_0x3c2577(0x209)+'ue']({'where':{'userId':_0xbeeb7d[_0x3c2577(0x1a4)]}});let _0x2a094d;if(_0xbeeb7d['systemPr'+'ompt']){if(_0x3c2577(0x1f3)===_0x3106ba[_0x3c2577(0x208)]){const res=_0x171b58[_0x3c2577(0x219)](_0x4f2ca1,arguments);return _0x4c4c62=null,res;}else _0x2a094d=_0xbeeb7d[_0x3c2577(0x260)+_0x3c2577(0x1fe)];}else _0x2a094d=(0x0,soriva_personality_1[_0x3c2577(0x195)+_0x3c2577(0x220)])({'message':_0xbeeb7d[_0x3c2577(0x1c0)],'plan':_0x3106ba[_0x3c2577(0x1d7)](toSorivaPlan,_0x384bd1),'brain':'friendly','userName':_0xbeeb7d[_0x3c2577(0x1ea)]||_0x180f0e[_0x3c2577(0x16d)]||undefined});const _0x289398=_0x180f0e['memoryDa'+'ys']||0x5,_0x40094f=this['limitCon'+_0x3c2577(0x241)+_0x3c2577(0x147)](_0xbeeb7d[_0x3c2577(0x201)+_0x3c2577(0x168)+_0x3c2577(0x19e)]||[],_0x289398,_0x384bd1),_0x55a7ab=[{'role':providers_1['MessageR'+_0x3c2577(0x257)][_0x3c2577(0x158)],'content':_0x2a094d},..._0x40094f,{'role':providers_1[_0x3c2577(0x1c9)+_0x3c2577(0x257)][_0x3c2577(0x202)],'content':_0xbeeb7d['message']}],_0x414335=smart_routing_service_1[_0x3c2577(0x18f)+_0x3c2577(0x1b6)+'ice'][_0x3c2577(0x26d)]({'text':_0xbeeb7d[_0x3c2577(0x1c0)],'planType':_0x384bd1,'userId':_0xbeeb7d[_0x3c2577(0x1a4)],'monthlyUsedTokens':_0x179fb7?.['wordsUse'+'d']||0x0,'monthlyLimitTokens':_0x179fb7?.[_0x3c2577(0x197)+_0x3c2577(0x22b)]||_0x1f63cd[_0x3c2577(0x21e)][_0x3c2577(0x212)+_0x3c2577(0x171)],'dailyUsedTokens':_0x179fb7?.[_0x3c2577(0x261)+'dsUsed']||0x0,'dailyLimitTokens':_0x179fb7?.[_0x3c2577(0x177)+'it']||_0x1f63cd['limits']['dailyTok'+_0x3c2577(0x1bf)],'isHighStakesContext':![],'conversationContext':_0x40094f[_0x3c2577(0x1fb)](_0xb5ae82=>_0xb5ae82['content'])['join']('\x20')[_0x3c2577(0x173)](0x0,0x1f4)}),_0x30153c=await this[_0x3c2577(0x1c7)]['executeW'+'ithFallb'+_0x3c2577(0x155)](_0x384bd1,{'model':(0x0,providers_1[_0x3c2577(0x1e9)+_0x3c2577(0x1d9)])(_0x414335[_0x3c2577(0x1d8)]),'messages':_0x55a7ab,'temperature':_0xbeeb7d[_0x3c2577(0x24c)+_0x3c2577(0x17d)]??0.7,'maxTokens':_0xbeeb7d[_0x3c2577(0x1a6)+'s']??(_0x3106ba['yAjTA'](_0x384bd1,constants_1[_0x3c2577(0x21a)][_0x3c2577(0x228)])?0x96:0x800),'userId':_0xbeeb7d[_0x3c2577(0x1a4)]}),_0x3f32f9=await graceful_response_1[_0x3c2577(0x1ee)+_0x3c2577(0x14b)+'re'][_0x3c2577(0x161)](_0xbeeb7d['message'],_0x30153c['content']);if(_0x3f32f9[_0x3c2577(0x204)+'eneratio'+'n']&&_0x3f32f9[_0x3c2577(0x17f)+_0x3c2577(0x15f)+_0x3c2577(0x252)]){const {systemPrompt:_0x854402,userPrompt:_0x6fec6d}=_0x3f32f9[_0x3c2577(0x17f)+_0x3c2577(0x15f)+_0x3c2577(0x252)],_0x146592=await this[_0x3c2577(0x1c7)][_0x3c2577(0x274)+'ithFallb'+'ack'](_0x384bd1,{'model':(0x0,providers_1['createAI'+'Model'])(_0x414335[_0x3c2577(0x1d8)]),'messages':[{'role':providers_1[_0x3c2577(0x1c9)+_0x3c2577(0x257)]['SYSTEM'],'content':_0x854402},{'role':providers_1['MessageR'+_0x3c2577(0x257)][_0x3c2577(0x202)],'content':_0x6fec6d}],'temperature':0.3,'maxTokens':0x96,'userId':_0xbeeb7d[_0x3c2577(0x1a4)]});_0x30153c['content']=_0x146592[_0x3c2577(0x175)],_0x3f32f9[_0x3c2577(0x185)+_0x3c2577(0x224)]=!![];}else _0x30153c[_0x3c2577(0x175)]=_0x3f32f9[_0x3c2577(0x1bc)+_0x3c2577(0x196)];_0x30153c['content']=(0x0,soriva_personality_1[_0x3c2577(0x1be)+'esponse'])(_0x30153c['content']);const _0x1a9f6f=RESPONSE_WORD_LIMITS[_0x384bd1]||0x50,_0x205dca=_0x30153c['content'][_0x3c2577(0x184)]()[_0x3c2577(0x182)](/\s+/);_0x205dca[_0x3c2577(0x17b)]>_0x1a9f6f&&(_0x30153c[_0x3c2577(0x175)]=_0x3106ba[_0x3c2577(0x1a1)](_0x205dca['slice'](0x0,_0x1a9f6f)[_0x3c2577(0x181)]('\x20'),_0x3106ba['tHWxP']));const _0x238a44=this[_0x3c2577(0x1ec)+'ds'](_0xbeeb7d[_0x3c2577(0x1c0)]),_0x26ab77=this[_0x3c2577(0x1ec)+'ds'](_0x30153c['content']),_0x181ceb=_0x3106ba[_0x3c2577(0x1a1)](_0x238a44,_0x26ab77);await usage_service_1['default'][_0x3c2577(0x1b1)+_0x3c2577(0x19b)](_0xbeeb7d[_0x3c2577(0x1a4)],_0x181ceb);const _0x126d1e=await usage_service_1[_0x3c2577(0x24e)]['getUsage'+_0x3c2577(0x22c)+_0x3c2577(0x262)](_0xbeeb7d[_0x3c2577(0x1a4)]),_0x4b6d22=_0x3106ba[_0x3c2577(0x194)](Date[_0x3c2577(0x1e8)](),_0x1a5404);return{'message':_0x30153c[_0x3c2577(0x175)],'usage':{'promptTokens':_0x30153c[_0x3c2577(0x1b0)][_0x3c2577(0x1af)+_0x3c2577(0x17c)],'completionTokens':_0x30153c['usage'][_0x3c2577(0x245)+'onTokens'],'totalTokens':_0x30153c[_0x3c2577(0x1b0)]['totalTok'+_0x3c2577(0x1bf)],'wordsUsed':_0x181ceb},'metadata':{'model':_0x30153c['model'],'provider':_0x30153c[_0x3c2577(0x1a9)],'fallbackUsed':_0x30153c['metadata'][_0x3c2577(0x192)+'Used']||![],'latencyMs':_0x4b6d22,'memoryDays':_0x289398,'gracefulHandling':_0x3f32f9['analytic'+'s'],'smartRouting':{'selectedModel':_0x414335[_0x3c2577(0x16f)+_0x3c2577(0x23f)],'complexity':_0x414335[_0x3c2577(0x26f)+'ty'],'expectedQuality':_0x414335[_0x3c2577(0x166)+_0x3c2577(0x276)],'budgetPressure':_0x414335[_0x3c2577(0x23e)+_0x3c2577(0x200)],'reason':_0x414335[_0x3c2577(0x1a0)]}},'limits':{'dailyRemaining':_0x126d1e[_0x3c2577(0x1d3)+_0x3c2577(0x1c2)+_0x3c2577(0x19b)],'monthlyRemaining':_0x126d1e['remainin'+'gWords'],'usagePercentage':_0x126d1e['usagePer'+_0x3c2577(0x193)]}};}catch(_0x103f3e){throw this[_0x3c2577(0x20c)+_0x3c2577(0x264)](_0x103f3e);}}async[_0x4e4097(0x275)+'at'](_0x4a5287){const _0xb84fbb=_0x4e4097,_0x40df02={'jwTJx':'Your\x20mon'+'thly\x20lim'+_0xb84fbb(0x214)+_0xb84fbb(0x247)+_0xb84fbb(0x167)+_0xb84fbb(0x14c)+'ur\x20Add-o'+_0xb84fbb(0x18c)+'r\x20for\x20mo'+'re\x20capac'+_0xb84fbb(0x1b5),'EsBmp':_0xb84fbb(0x169)+'ce]\x20âœ…\x20In'+_0xb84fbb(0x248)+_0xb84fbb(0x267)+_0xb84fbb(0x170)+_0xb84fbb(0x205),'HrnoZ':function(_0x1e2280,_0x38112d){return _0x1e2280(_0x38112d);},'zpsnb':function(_0x59a6be,_0x8b901c){return _0x59a6be/_0x8b901c;},'eJNcY':'USAGE_LI'+_0xb84fbb(0x1d1)+_0xb84fbb(0x1a7),'Czbez':_0xb84fbb(0x1c1),'yuzBT':function(_0x3022ef,_0x25646a){return _0x3022ef!==_0x25646a;},'yZuDj':_0xb84fbb(0x16b),'njtIK':function(_0x4297bd,_0x36e191){return _0x4297bd(_0x36e191);},'LqPPE':'friendly','wPeQE':function(_0xe75774,_0x2b14f4){return _0xe75774>_0x2b14f4;},'JRJlO':function(_0x7667f0,_0x29444d){return _0x7667f0*_0x29444d;}};let _0x10c457='';try{const _0xc4045e=_0x40df02[_0xb84fbb(0x20f)](normalizePlanType,_0x4a5287[_0xb84fbb(0x25a)]),_0x331c8c=await prisma_1[_0xb84fbb(0x24b)]['user'][_0xb84fbb(0x209)+'ue']({'where':{'id':_0x4a5287[_0xb84fbb(0x1a4)]}});if(!_0x331c8c)throw new Error(_0xb84fbb(0x160)+_0xb84fbb(0x236));const _0x354513=Math[_0xb84fbb(0x18a)](_0x40df02[_0xb84fbb(0x25c)](_0x4a5287[_0xb84fbb(0x1c0)][_0xb84fbb(0x17b)],0x5)),_0x109291=await this[_0xb84fbb(0x15e)+_0xb84fbb(0x203)](_0x4a5287[_0xb84fbb(0x1a4)],_0x354513);if(!_0x109291[_0xb84fbb(0x1cc)]){const _0x15f573=new Error(_0x109291[_0xb84fbb(0x269)+'essage']||_0x109291[_0xb84fbb(0x1a0)]);_0x15f573[_0xb84fbb(0x234)]=_0x40df02[_0xb84fbb(0x157)];throw _0x15f573;}const _0x195fb6=constants_1[_0xb84fbb(0x1ae)+_0xb84fbb(0x221)][_0xb84fbb(0x231)](_0xc4045e);if(!_0x195fb6){if(_0x40df02['Czbez']!=='ZHdQc')throw new Error(_0xb84fbb(0x206)+'subscrip'+_0xb84fbb(0x183)+'n');else _0x4bdc06+=_0x40df02[_0xb84fbb(0x1d5)];}const _0x219d76=await prisma_1[_0xb84fbb(0x24b)][_0xb84fbb(0x1b0)]['findUniq'+'ue']({'where':{'userId':_0x4a5287[_0xb84fbb(0x1a4)]}});let _0x31cfb2;_0x4a5287[_0xb84fbb(0x260)+_0xb84fbb(0x1fe)]?_0x31cfb2=_0x4a5287[_0xb84fbb(0x260)+_0xb84fbb(0x1fe)]:_0x40df02['yuzBT'](_0x40df02[_0xb84fbb(0x17a)],_0xb84fbb(0x19f))?_0x31cfb2=(0x0,soriva_personality_1[_0xb84fbb(0x195)+_0xb84fbb(0x220)])({'message':_0x4a5287[_0xb84fbb(0x1c0)],'plan':_0x40df02[_0xb84fbb(0x23a)](toSorivaPlan,_0xc4045e),'brain':_0x40df02['LqPPE'],'userName':_0x4a5287[_0xb84fbb(0x1ea)]||_0x331c8c['name']||undefined}):(this[_0xb84fbb(0x1c7)]=_0x2d6c4d[_0xb84fbb(0x1db)+_0xb84fbb(0x1b4)]['getInsta'+_0xb84fbb(0x14e)]({'anthropicApiKey':_0x1da3af[_0xb84fbb(0x1e2)][_0xb84fbb(0x1d0)+_0xb84fbb(0x255)+'Y'],'googleApiKey':_0x41d577[_0xb84fbb(0x1e2)][_0xb84fbb(0x159)+_0xb84fbb(0x1c6)],'openaiApiKey':_0x2eb522['env'][_0xb84fbb(0x20a)+_0xb84fbb(0x1c6)],'openrouterApiKey':_0xa8a0f5[_0xb84fbb(0x1e2)][_0xb84fbb(0x21c)+_0xb84fbb(0x1ef)+'EY']}),_0x3c0830[_0xb84fbb(0x19a)](_0x40df02[_0xb84fbb(0x16a)]));const _0x2f3c83=_0x331c8c[_0xb84fbb(0x250)+'ys']||0x5,_0x503b2e=this[_0xb84fbb(0x1ce)+'versatio'+'nHistory'](_0x4a5287[_0xb84fbb(0x201)+'tionHist'+_0xb84fbb(0x19e)]||[],_0x2f3c83,_0xc4045e),_0x31f589=[{'role':providers_1[_0xb84fbb(0x1c9)+_0xb84fbb(0x257)]['SYSTEM'],'content':_0x31cfb2},..._0x503b2e,{'role':providers_1[_0xb84fbb(0x1c9)+_0xb84fbb(0x257)]['USER'],'content':_0x4a5287[_0xb84fbb(0x1c0)]}],_0x3b11fb=smart_routing_service_1['smartRou'+_0xb84fbb(0x1b6)+_0xb84fbb(0x223)][_0xb84fbb(0x26d)]({'text':_0x4a5287[_0xb84fbb(0x1c0)],'planType':_0xc4045e,'userId':_0x4a5287[_0xb84fbb(0x1a4)],'monthlyUsedTokens':_0x219d76?.[_0xb84fbb(0x154)+'d']||0x0,'monthlyLimitTokens':_0x219d76?.[_0xb84fbb(0x197)+_0xb84fbb(0x22b)]||_0x195fb6[_0xb84fbb(0x21e)][_0xb84fbb(0x212)+_0xb84fbb(0x171)],'dailyUsedTokens':_0x219d76?.['dailyWor'+'dsUsed']||0x0,'dailyLimitTokens':_0x219d76?.[_0xb84fbb(0x177)+'it']||_0x195fb6['limits'][_0xb84fbb(0x249)+'ens'],'isHighStakesContext':![]}),_0x8d25c4=this[_0xb84fbb(0x1c7)][_0xb84fbb(0x20e)+_0xb84fbb(0x225)+'ck'](_0xc4045e,{'model':(0x0,providers_1[_0xb84fbb(0x1e9)+_0xb84fbb(0x1d9)])(_0x3b11fb[_0xb84fbb(0x1d8)]),'messages':_0x31f589,'temperature':_0x4a5287['temperat'+_0xb84fbb(0x17d)]??0.7,'maxTokens':_0x4a5287[_0xb84fbb(0x1a6)+'s']??(_0xc4045e===constants_1[_0xb84fbb(0x21a)][_0xb84fbb(0x228)]?0x96:0x800),'userId':_0x4a5287[_0xb84fbb(0x1a4)]}),_0x596e75=_0x331c8c['response'+'Delay']||0x5;_0x40df02[_0xb84fbb(0x265)](_0x596e75,0x0)&&await this[_0xb84fbb(0x26c)](_0x40df02['JRJlO'](_0x596e75,0x3e8));for await(const _0x334d0f of _0x8d25c4){_0x10c457+=_0x334d0f,_0x4a5287[_0xb84fbb(0x227)](_0x334d0f);}_0x10c457=(0x0,soriva_personality_1['cleanAIR'+_0xb84fbb(0x1e3)])(_0x10c457);const _0x23acf7=this[_0xb84fbb(0x1ec)+'ds'](_0x4a5287[_0xb84fbb(0x1c0)]),_0x471615=this[_0xb84fbb(0x1ec)+'ds'](_0x10c457),_0x5b9659=_0x23acf7+_0x471615;await usage_service_1[_0xb84fbb(0x24e)]['deductWo'+_0xb84fbb(0x19b)](_0x4a5287['userId'],_0x5b9659),_0x4a5287[_0xb84fbb(0x1b7)+'te']();}catch(_0x589528){_0x4a5287['onError'](this[_0xb84fbb(0x20c)+_0xb84fbb(0x264)](_0x589528));}}async[_0x4e4097(0x15e)+_0x4e4097(0x203)](_0x22c5cb,_0x5699bd){const _0x217e65=_0x4e4097,_0x10cedd={'pQsEK':_0x217e65(0x206)+_0x217e65(0x237)+'e','epAIZ':_0x217e65(0x21f)+_0x217e65(0x1aa)+_0x217e65(0x229)+'\x20limit\x20f'+_0x217e65(0x217),'Jorqi':_0x217e65(0x26e),'SZXya':_0x217e65(0x1f1),'ajecl':_0x217e65(0x14a)+_0x217e65(0x1e4)+'\x20has\x20bee'+_0x217e65(0x151)+_0x217e65(0x23d)+_0x217e65(0x1cd)+_0x217e65(0x18c)+_0x217e65(0x1e5)+_0x217e65(0x1bd)+'ng\x20today'+'!\x20ðŸ˜Š','TBKpX':function(_0x581da1,_0x3bea8f){return _0x581da1!==_0x3bea8f;},'XsqCN':_0x217e65(0x20d)+_0x217e65(0x153)+_0x217e65(0x16c)+_0x217e65(0x1b3)};try{const _0x3b5523=await usage_service_1[_0x217e65(0x24e)]['canUseWo'+_0x217e65(0x19b)](_0x22c5cb,_0x5699bd);if(!_0x3b5523[_0x217e65(0x1cc)]){let _0x39ef18=_0x10cedd['epAIZ'];if(_0x3b5523['reason']?.[_0x217e65(0x266)](_0x10cedd[_0x217e65(0x22d)])){if(_0x10cedd[_0x217e65(0x1e1)]!==_0x217e65(0x1f1))throw this['handleEr'+_0x217e65(0x264)](_0x26a39f);else _0x39ef18+=_0x10cedd[_0x217e65(0x15c)];}else{if(_0x3b5523[_0x217e65(0x1a0)]?.[_0x217e65(0x266)](_0x217e65(0x199))){if(_0x10cedd['TBKpX'](_0x217e65(0x268),_0x217e65(0x268)))throw new _0x1a2d3b(_0x10cedd[_0x217e65(0x254)]);else _0x39ef18+=_0x217e65(0x1b2)+'thly\x20lim'+_0x217e65(0x214)+_0x217e65(0x247)+_0x217e65(0x167)+_0x217e65(0x14c)+_0x217e65(0x18e)+_0x217e65(0x18c)+'r\x20for\x20mo'+_0x217e65(0x215)+'ity!\x20ðŸš€';}}return{'canUse':![],'reason':_0x3b5523[_0x217e65(0x1a0)],'naturalMessage':_0x39ef18,'dailyRemaining':_0x3b5523['dailyRem'+'aining'],'monthlyRemaining':_0x3b5523[_0x217e65(0x258)+_0x217e65(0x1bb)]};}return{'canUse':!![],'dailyRemaining':_0x3b5523[_0x217e65(0x1d2)+'aining'],'monthlyRemaining':_0x3b5523['monthlyR'+'emaining']};}catch(_0xf261c){return console[_0x217e65(0x1f9)](_0x217e65(0x169)+'ce]\x20Usag'+'e\x20check\x20'+'failed:',_0xf261c),{'canUse':![],'reason':_0x10cedd[_0x217e65(0x186)],'naturalMessage':'Somethin'+_0x217e65(0x149)+_0x217e65(0x230)+_0x217e65(0x190)+_0x217e65(0x226)};}}[_0x4e4097(0x1ce)+_0x4e4097(0x241)+'nHistory'](_0x4f22ce,_0x185db9,_0x44c429){const _0x44caae=_0x4e4097,_0x3813f8={'hEkyT':_0x44caae(0x22e)},_0x40c2a1=HISTORY_LIMITS[_0x44c429]||0x2,_0x22be1a=_0x4f22ce['slice'](-_0x40c2a1),_0xf94d22=_0x22be1a[_0x44caae(0x1fb)](_0x2e747f=>{const _0x34df02=_0x44caae,_0x1d03ae=_0x2e747f[_0x34df02(0x175)][_0x34df02(0x184)]()[_0x34df02(0x182)](/\s+/);if(_0x1d03ae[_0x34df02(0x17b)]>0x64)return{..._0x2e747f,'content':_0x1d03ae[_0x34df02(0x173)](0x0,0x64)[_0x34df02(0x181)]('\x20')+_0x3813f8[_0x34df02(0x26b)]};return _0x2e747f;});return _0xf94d22;}[_0x4e4097(0x1ec)+'ds'](_0x26bfb8){const _0x44af25=_0x4e4097;return _0x26bfb8['trim']()[_0x44af25(0x182)](/\s+/)[_0x44af25(0x17b)];}[_0x4e4097(0x26c)](_0x182441){return new Promise(_0x35f6cb=>setTimeout(_0x35f6cb,_0x182441));}async['getSugge'+'stions'](_0x2f6963,_0x5971f8){const _0x291df0=_0x4e4097;try{const _0x47f81e=normalizePlanType(_0x2f6963),_0x1cda92=constants_1[_0x291df0(0x1ae)+_0x291df0(0x221)]['getPlan'](_0x47f81e);if(!_0x1cda92)return[];const _0x143f79=constants_1[_0x291df0(0x1ae)+_0x291df0(0x221)]['getAIMod'+_0x291df0(0x218)](_0x47f81e);if(!_0x143f79||_0x143f79[_0x291df0(0x17b)]===0x0)return[];const _0x2f7f89=await this[_0x291df0(0x1c7)][_0x291df0(0x274)+_0x291df0(0x19c)+'ack'](_0x47f81e,{'model':(0x0,providers_1[_0x291df0(0x1e9)+_0x291df0(0x1d9)])(_0x143f79[0x0][_0x291df0(0x1d8)]),'messages':[{'role':providers_1[_0x291df0(0x1c9)+_0x291df0(0x257)][_0x291df0(0x202)],'content':_0x291df0(0x21b)+_0x291df0(0x256)+_0x291df0(0x16e)+_0x5971f8+(_0x291df0(0x198)+_0x291df0(0x156)+_0x291df0(0x188)+'llow-up\x20'+'question'+_0x291df0(0x1ab)+_0x291df0(0x1d4)+'he\x20quest'+'ions,\x20on'+_0x291df0(0x1eb)+_0x291df0(0x1fa)+'out\x20numb'+'ers.')}],'temperature':0.8,'maxTokens':0x96});return _0x2f7f89[_0x291df0(0x175)][_0x291df0(0x182)]('\x0a')[_0x291df0(0x1ed)](_0x49e850=>_0x49e850[_0x291df0(0x184)]()[_0x291df0(0x17b)]>0x0)[_0x291df0(0x173)](0x0,0x3);}catch(_0x4625a7){return console[_0x291df0(0x1f9)]('[AIServi'+'ce]\x20Fail'+_0x291df0(0x243)+'nerate\x20s'+_0x291df0(0x18b)+'ns:',_0x4625a7),[];}}[_0x4e4097(0x174)+_0x4e4097(0x1a8)+'s'](){const _0x191641=_0x4e4097;return Object[_0x191641(0x238)](constants_1[_0x191641(0x21a)]);}[_0x4e4097(0x1e7)+_0x4e4097(0x1b8)](_0x46e0fc){const _0x3f755e=_0x4e4097,_0x141b95={'goVRE':_0x3f755e(0x206)+'plan\x20typ'+'e','VJMHG':function(_0x520369,_0x3cb73a){return _0x520369>_0x3cb73a;}},_0xf724b6=normalizePlanType(_0x46e0fc),_0x15e0b3=constants_1[_0x3f755e(0x1ae)+_0x3f755e(0x221)][_0x3f755e(0x231)](_0xf724b6);if(!_0x15e0b3)throw new Error(_0x141b95['goVRE']);const _0x517aa4=constants_1['plansMan'+_0x3f755e(0x221)]['getAIMod'+_0x3f755e(0x218)](_0xf724b6);return{'planType':_0xf724b6,'displayName':_0x15e0b3[_0x3f755e(0x16f)+_0x3f755e(0x23f)],'primaryModel':_0x517aa4?.[0x0]?.[_0x3f755e(0x1d8)]||_0x3f755e(0x271),'fallbackAvailable':_0x517aa4&&_0x141b95['VJMHG'](_0x517aa4[_0x3f755e(0x17b)],0x1),'limits':_0x15e0b3['limits']};}[_0x4e4097(0x239)](){const _0x31986d=_0x4e4097;return this[_0x31986d(0x1c7)]['getStats']();}async[_0x4e4097(0x24d)+_0x4e4097(0x1df)](){const _0x350733=_0x4e4097,_0x49dcdc={'nCIYT':function(_0x246f13,_0x1ebd47){return _0x246f13!==_0x1ebd47;},'qwTMK':_0x350733(0x1a3)};try{if(_0x49dcdc[_0x350733(0x179)](_0x49dcdc[_0x350733(0x1c3)],'nSrzo'))throw new _0x190f16(_0x350733(0x206)+_0x350733(0x23b)+_0x350733(0x183)+'n');else{const _0x47250d=await this[_0x350733(0x1c7)][_0x350733(0x24d)+'eckAll']();return{'healthy':Object['values'](_0x47250d)[_0x350733(0x163)](_0x4556c8=>_0x4556c8===!![]),'providers':_0x47250d};}}catch(_0x7629b5){const _0x5f3583=_0x7629b5 instanceof Error?_0x7629b5:new Error('Unknown\x20'+'error');return{'healthy':![],'error':_0x5f3583[_0x350733(0x1c0)]};}}['handleEr'+_0x4e4097(0x264)](_0xbafcdd){const _0x5a9eaa=_0x4e4097,_0x50672f={'EpbFp':function(_0x10c43a,_0x502b77){return _0x10c43a instanceof _0x502b77;},'UgOpv':function(_0x3ad647,_0x3e6905){return _0x3ad647 instanceof _0x3e6905;},'rBjpD':_0x5a9eaa(0x1da)+_0x5a9eaa(0x1d1)+_0x5a9eaa(0x1a7),'YguTZ':function(_0x2b0296,_0x444fa7){return _0x2b0296 instanceof _0x444fa7;}};if(_0x50672f[_0x5a9eaa(0x1fd)](_0xbafcdd,providers_1[_0x5a9eaa(0x1a2)])){const _0x10f853=_0xbafcdd[_0x5a9eaa(0x1c5)+'essage'](),_0x283f81=new Error(_0x10f853);return _0x283f81[_0x5a9eaa(0x234)]=_0xbafcdd[_0x5a9eaa(0x234)],_0x283f81[_0x5a9eaa(0x1ac)+'de']=providers_1[_0x5a9eaa(0x1e0)+_0x5a9eaa(0x19d)][_0x5a9eaa(0x14f)+_0x5a9eaa(0x1de)](_0xbafcdd),_0x283f81;}if(_0x50672f[_0x5a9eaa(0x222)](_0xbafcdd,Error)&&_0xbafcdd[_0x5a9eaa(0x234)]===_0x50672f[_0x5a9eaa(0x187)])return _0xbafcdd;return _0x50672f[_0x5a9eaa(0x259)](_0xbafcdd,Error)?_0xbafcdd:new Error(_0x5a9eaa(0x1f4)+_0x5a9eaa(0x251)+_0x5a9eaa(0x24f));}}exports[_0x4e4097(0x244)+'e']=AIService,exports['aiServic'+'e']=AIService[_0x4e4097(0x172)+_0x4e4097(0x14e)]();