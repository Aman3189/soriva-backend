const _0x79c758=_0x3fb5;(function(_0x5bae1a,_0x46a538){const _0x2b83f7=_0x3fb5,_0x149993=_0x5bae1a();while(!![]){try{const _0x271423=parseInt(_0x2b83f7(0x1eb))/0x1+parseInt(_0x2b83f7(0x2e6))/0x2*(-parseInt(_0x2b83f7(0x158))/0x3)+parseInt(_0x2b83f7(0x249))/0x4*(-parseInt(_0x2b83f7(0x2de))/0x5)+parseInt(_0x2b83f7(0x18b))/0x6*(-parseInt(_0x2b83f7(0x1bc))/0x7)+parseInt(_0x2b83f7(0x2ce))/0x8+-parseInt(_0x2b83f7(0x27a))/0x9*(parseInt(_0x2b83f7(0x1b4))/0xa)+parseInt(_0x2b83f7(0x17e))/0xb;if(_0x271423===_0x46a538)break;else _0x149993['push'](_0x149993['shift']());}catch(_0x1c3b55){_0x149993['push'](_0x149993['shift']());}}}(_0x1d3e,0x6ce99));function _0x1d3e(){const _0x464eb4=['ywrKqM9VC3q','u1vPsha','DuXMsNq','surft0Dsqu0','DgHSEq','BMfqCM8','vfnVuxO','igvUz2LUzwu','CMvZDwX0x3u','CMvTywLUAw4','veHKBvy','DxbKyxrL','iezVCIb0CMe','CM9MzxnZAw8','y29UDgvUDa','yxKGyMuGAw4','Bs92ms9Tzxm','khDOAwnOig0','uKvt','lcbbDMfPBge','Dw5RBM93BG','C3r1zgLVlNq','CeTfDgO','qc9JB3jLl3m','uK9Fqvbjx0S','ExbL','uK8Gqvbjigu','yxbPlMfUDgG','u0rQuKe','C3r5Bgu','igjVDgGGtw8','ndbuC2rxvwO','zMvHDhvYzum','BwfW','BwfWqxnWzwm','uhjVBxb0','ChjPC21HlNm','z2vvCMW','x19LC01Vzhu','mJf1t1z6u3e','lIbcDxKGysa','ChjPC21H','zY5HAs92mq','mcb3B3jKCWO','zwrPDhnvC2u','igLTywDLigC','qvzbsuXbqKW','DcbNzw5LCMe','BwfWsgvKCMe','B3vUza','ue9tva','qK9pu1rfuL8','BgvUz3rO','zwrPDhndyxi','kcGOlISPkYK','wwjyyw4','CMvdB25MAwC','y2XHDwrLltm','yxbPlMTSAw4','q09nueXfveu','qMvHCMvYia','sgvKCMeGz2u','uwrpAuC','y2fSBeHLzhi','cJmUieTLzxa','yMfIEv9WCMu','zMLUze1HBNK','z2v0rgf0zq','DcbWCM9TChq','BMvYyxrLza','Agj0v2m','zgLJDgLVBIa','ueXbtL9tvfu','uxnywhm','s1fkDui','Aw1Hz2uGz2u','u2DoyKC','l3n0EwXL','y3jLzgL0C1u','zMvZDgL2ywW','zgvZy3jPChq','rLLgv1G','DxrWrMW','rKfjteve','uKvorevsxZm','sg9ose0','ndyXnte1uLzRDNjy','yMfIEuDLBMq','y1r5v0C','swvxq1O','yxjSEqO2lIa','qvnqrunuxZK','CYWGDhjHzgK','zv8X','iefqssbLCNi','qu5usfjpueK','z2v0rMvHDhu','vw5RBM93BIa','zgvKDwn0q3i','s2LUAMm','BwfWswrLB2C','CM0GDgHPCYa','txnRDMm','qvrvuKvt','AvLjzhy','ywjSzuzLyxq','uMvZzxrdCMu','zw52','zgzzAu4','AKTmAuW','A1vHzgq','y2fSBejHyNK','vLHnDNi','uvzly0q','qvbjigvYCM8','uvbszwC','AgfZrw5VDwC','B29UlIbtDge','qvnqrunuxZe','Bwf4','BMvYyxrPB24','zgvZyW','AxjLzdOG','DhvYzsbPCYa','yxbWBgLJyxq','Cg9SBeHLzhi','y3jLzgL0CW','B24GzMfPBgu','yvnrqMy','z3jHBq','z2v0qxzHAwW','seveuKfFqva','z2v0vxnLCKC','Dhnszxf1Axi','r2vUzxjHDgK','ufniCvi','B24GBM90igy','yw4GzxHWzxi','qvnqrunux1i','sv9lrvK','nL85','AgvKCMe','tM8GB3v0Chu','vuXTvhm','AejRqK8','rxLVCu8','lI90ExbLCY8','Aw50ywLUigm','z2v0r2vUzxi','AM9Ix2LK','BgvKlcbWCM8','zeLsy3O','rwjXAhm','Dhb1DcbJBgu','y0vIB3q','rKrIq0u','DxjLCW','DgLV','CM9TChrZ','zgf0yq','BwvZC2fNzq','igLZignVBwK','zMXVB3i','C3rHDhvZ','CLv2ugm','yxbPlMjHBMe','C2v0rgf0zq','zxjYB3i','Axngzwf0Dxi','Dg9tDhjPBMC','Aw1Hz2vvCMW','vLjxree','BNnMB3jTCZO','mJaYmY0WnI0','CY4kcLj1Bgu','vNbSEKe','qvvutW','Dg8Gy29UDgK','zw5FBwfSzv8','lcbVCIbfBMC','nfvUugXIsq','revtsuDo','CeDNDLe','ANnVBG','zwrPDhm','uKvbteLtveK','zxjZl2nYzwe','DgvK','DhjPBq','swrLB2DYyw0','Dw5Kl2nOyw4','EeTruwG','l2nOyxjHy3q','yxbPuhjVDMK','Dg8Gzgv0ywK','kYKRja','BI4GvhjHBNm','Dgv4Da','zwPHs2m','CMfTu3r5Bgu','y29TCgXLDgu','ueHpve9Fnvm','qvnqrunuxZq','zw5FzMvTywW','qMfUyw5Hifa','CZOkms4Gtwe','vKLeru9FrKu','yvDLwMS','CIbMB3iGquK','Dxj2zNG','lwXHDgvZDa','yxbPq29ZDa','qvrjt19pufq','AurTwei','CMvXDwLYzxm','Bw5lsNO','l2vUAgfUy2u','Aw9U','yxbWBhK','zwrPDhncB28','reLpx0nsruq','sxnuExa','qu5jtuu','rMP5u1y','ChrVCNmknc4','z3jHBs5HAs8','DMPLB0K','DuTVEu8','igrHExm','mZe4nJe4EuX4q3Dz','DuD4v24','vxjS','EsbKzxnJCMK','Bgvorwe','B3v0Chv0x3u','qMfIEsbqCMu','DxnLCG','B3b0Aw9UCW','keLUzgLHBIa','Aw9szxnLDa','zw5LCMf0Aw8','zuf2ywLSywi','yM9VC3rLCIa','C3rLCG','CMLLCW','zhvYyxrPB24','zhznBg0','u1H5t08','B3m6igvTCgG','zMvHDhvYzsa','yMfUyw5Hx3a','tuDdDNG','zuffu0C','A2XPBMC','C2fNzxm','C3r1zgLVu2u','DhvYzsbYzxe','BgvHBIiSici','l3bVCNrYywK','yvjLC3vSDa','Aw5gDgG','CNzPy2u','cJiUiefKzca','sw1Hz2u','Aw5WDxrjBwe','y2fSBejHBMe','sw52ywXPzca','zgvY','y29UDgv4Dca','zwrPy3rPB24','DhncywXHBMm','DxjS','B25HBcbWAg8','sgvKCMeGqva','DfjHDgLV','z2vUzxjHDgu','C3r1zgLVr2u','DgLVBNmSigm','u3r1zgLVu2u','y29UC3rYDwm','zMLUzfvUAxe','igLUChv0igK','Bw9Tsw1Hz2u','ChjVBxb0','zgv0zwn0swq','sNzeBha','yxrPB24','zgfKsw1Hz2u','zvPrCgW','tM8GyMfIEsa','l3nRzxrJAa','ihrOzsbJB3i','igrLC2nYAwi','vgzcthy','x0zfqvrvuKu','ltuTAgfPA3u','svrt','C3f1yxjL','ueHpve9FrKu','CxbrEhy','uMvTEMm','vgHPCYbMzwe','zgL0CW','ywDLvxjS','zxHHBxbSzva','C3r1zgLVq3i','t1LIvvi','C2v0tw9UDgG','B3v0Chv0vxi','Cu1Ys1G','CNLgB3j3yxi','zMvHDhvYzvq','DwLYzxmGyw4','mJe0mty3mNneCvrvvq','CLbTzNi','Ew5tz0m','AcWGsgLUzgK','yxbPlMLKzw8','y2HLy2TbBMq','u2X3zfK','l2jHyNKTChi','zw5Fy2HPBgq','yxbPlMHLzhi','yw5Jzsb3Axq','su9ouW','qvbjihbYB3y','DM9Py2vtDhK','q09orKLhuW','zvbNBhi','mJi0mJy4nu1PvuPtvG','uKnQC0G','ys5JB20VDJe','x0fqsv9lrvK','uxvou2S','ChjVBxb0oG','y2fSBeLKzw8','CMfUzg9T','nKDou1fTta','yxnWzwn0uMe','vMLKzw8Gz2u','y2Tqr0O','igzVDw5K','vefms0Lor18','EwXL','t0L4B2y','xZe2','DhLSzsikns4','l2v4CgfUza','tgfZDca','A2nAtvu','u3rHDhm','Esb0Dw5Lzce','zMfPBgvK','z2v0q3jLzgK','BM93','DxmV','y2HPChq','C3rYAw5NAwy','CgHVDg8','Aw9Ul2PZB24','ntmXmZi3rNrszMDU','y0zsAhi','BMDuAw1L','uK9FrKvbvfu','y3jLyxrL','vMjbDuq','Ee5JCwW','ENHTyvq','vgDICg4','A0fyr3m','seveuKe','z2v0vxnHz2u','s0XjtKDFqva','zxj2AwnLCY8','zxj2AwnL','vL8Y','BsbHBMqGrge','y2f0zwDVCNK','tuHnqvO','AwrLB2DYyw0','qw5lANa','Ahr0Chm6lY8','ENHgA2y','zgvMAw5Luhi','ExbLCW','BMvNyxrPDMu','BMCGC29VBIe','EeDNrMy','ChjVy2vZC2K','igzHAwXLza','zK5ys1q','zwrPDhnnB24','tM8GAw1Hz2u','BgfZDfn0Dwq','vxnLCIbUB3q','qKfoqu5bx1a','yMXLoIa','DMLKzw8','mtaWndKXotnmAKrKwey','Dg9Y','C2vHCMnO','uunPELC','BwfNzq','zMvZC2LVBMe','DMLKzw9FDxi','C2vK','u3rHDhvZ','AenYzwrPDhm','zMrcv0S','BcbfBMDSAxm','zxjZl3n0yxq','mtuWndiWBuLRvLLN','C2vJB25Ksw0','Cgvtvhe','DhLWzq','yxv0BW','BMfTzq','BMeUzgv2l3y','D2L6Cuu','vM9Py2u','zgLJDgLVBG'];_0x1d3e=function(){return _0x464eb4;};return _0x1d3e();}const _0x8eb750=(function(){let _0x5688b9=!![];return function(_0x460365,_0x49b707){const _0x3e8510=_0x5688b9?function(){const _0xf46ac9=_0x3fb5;if(_0x49b707){const res=_0x49b707[_0xf46ac9(0x26f)](_0x460365,arguments);return _0x49b707=null,res;}}:function(){};return _0x5688b9=![],_0x3e8510;};}()),_0x3ae72d=_0x8eb750(this,function(){const _0x52ae10=_0x3fb5,_0x4f825a={'FSryh':'(((.+)+)'+'+)+$'};return _0x3ae72d[_0x52ae10(0x23e)]()[_0x52ae10(0x180)](_0x4f825a['FSryh'])[_0x52ae10(0x23e)]()[_0x52ae10(0x2ac)+_0x52ae10(0x17f)](_0x3ae72d)['search'](_0x52ae10(0x1cb)+_0x52ae10(0x258));});_0x3ae72d();function _0x3fb5(_0x2ed914,_0x198293){_0x2ed914=_0x2ed914-0x14d;const _0x47825d=_0x1d3e();let _0x3ae72d=_0x47825d[_0x2ed914];if(_0x3fb5['MWrEXb']===undefined){var _0x8eb750=function(_0x1b6863){const _0x359773='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2aebe3='',_0x34ea32='',_0x2e596e=_0x2aebe3+_0x8eb750;for(let _0x39ec57=0x0,_0x40170b,_0x431b68,_0x37f96a=0x0;_0x431b68=_0x1b6863['charAt'](_0x37f96a++);~_0x431b68&&(_0x40170b=_0x39ec57%0x4?_0x40170b*0x40+_0x431b68:_0x431b68,_0x39ec57++%0x4)?_0x2aebe3+=_0x2e596e['charCodeAt'](_0x37f96a+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x40170b>>(-0x2*_0x39ec57&0x6)):_0x39ec57:0x0){_0x431b68=_0x359773['indexOf'](_0x431b68);}for(let _0x71181f=0x0,_0x18cce7=_0x2aebe3['length'];_0x71181f<_0x18cce7;_0x71181f++){_0x34ea32+='%'+('00'+_0x2aebe3['charCodeAt'](_0x71181f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x34ea32);};_0x3fb5['dNjTVt']=_0x8eb750,_0x3fb5['PTtwey']={},_0x3fb5['MWrEXb']=!![];}const _0x1d3efb=_0x47825d[0x0],_0x3fb5d1=_0x2ed914+_0x1d3efb,_0x504a75=_0x3fb5['PTtwey'][_0x3fb5d1];if(!_0x504a75){const _0x456fac=function(_0x559f0e){this['VdMJDf']=_0x559f0e,this['ISxpip']=[0x1,0x0,0x0],this['jldalU']=function(){return'newState';},this['eVHKGl']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['UMldXr']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x456fac['prototype']['UugEQn']=function(){const _0x47a70d=new RegExp(this['eVHKGl']+this['UMldXr']),_0x351ed1=_0x47a70d['test'](this['jldalU']['toString']())?--this['ISxpip'][0x1]:--this['ISxpip'][0x0];return this['lgVwoS'](_0x351ed1);},_0x456fac['prototype']['lgVwoS']=function(_0x232237){if(!Boolean(~_0x232237))return _0x232237;return this['vTKfxZ'](this['VdMJDf']);},_0x456fac['prototype']['vTKfxZ']=function(_0x456eed){for(let _0x157045=0x0,_0x1b1c4c=this['ISxpip']['length'];_0x157045<_0x1b1c4c;_0x157045++){this['ISxpip']['push'](Math['round'](Math['random']())),_0x1b1c4c=this['ISxpip']['length'];}return _0x456eed(this['ISxpip'][0x0]);},new _0x456fac(_0x3fb5)['UugEQn'](),_0x3ae72d=_0x3fb5['dNjTVt'](_0x3ae72d),_0x3fb5['PTtwey'][_0x3fb5d1]=_0x3ae72d;}else _0x3ae72d=_0x504a75;return _0x3ae72d;}'use strict';Object[_0x79c758(0x16f)+'operty'](exports,_0x79c758(0x1bb)+'le',{'value':!![]}),exports['studioSe'+'rvice']=exports[_0x79c758(0x2ab)+_0x79c758(0x29a)]=void 0x0;const prisma_service_1=require(_0x79c758(0x1ac)+_0x79c758(0x165)+_0x79c758(0x1b9)+_0x79c758(0x166)),studio_types_1=require(_0x79c758(0x227)+_0x79c758(0x1aa)+_0x79c758(0x170)),IDEOGRAM_API_KEY=process['env'][_0x79c758(0x198)+_0x79c758(0x2e1)]||'',BANANA_PRO_API_KEY=process[_0x79c758(0x200)][_0x79c758(0x17b)+_0x79c758(0x1ad)+'EY']||'',HEDRA_API_KEY=process[_0x79c758(0x200)][_0x79c758(0x218)+_0x79c758(0x220)]||'',KLING_API_KEY=process['env'][_0x79c758(0x164)+_0x79c758(0x220)]||'',ANTHROPIC_API_KEY=process[_0x79c758(0x200)][_0x79c758(0x1f4)+'C_API_KE'+'Y']||'',API_ENDPOINTS={'IDEOGRAM':_0x79c758(0x16d)+_0x79c758(0x2d2)+_0x79c758(0x276)+'generate','BANANA_PRO':'https://'+_0x79c758(0x23a)+_0x79c758(0x191)+'1','HEDRA':_0x79c758(0x16d)+_0x79c758(0x2d7)+_0x79c758(0x2e0),'KLING':_0x79c758(0x16d)+_0x79c758(0x1cf)+_0x79c758(0x1bf)};class StudioService{async[_0x79c758(0x151)+_0x79c758(0x2a3)+'e'](_0x42e5b5){const _0x2326d7=_0x79c758,_0x3470c8=await prisma_service_1[_0x2326d7(0x1be)][_0x2326d7(0x281)][_0x2326d7(0x2ad)+'ue']({'where':{'id':_0x42e5b5},'select':{'planType':!![],'studioCreditsMonthly':!![],'studioCreditsBooster':!![],'studioCreditsCarryForward':!![],'studioCreditsUsed':!![],'lastStudioReset':!![]}});if(!_0x3470c8)throw new Error(_0x2326d7(0x17a)+_0x2326d7(0x2ea));await this['checkAnd'+'ResetCre'+'dits'](_0x42e5b5);const _0xf90cce=_0x3470c8['studioCr'+_0x2326d7(0x177)+_0x2326d7(0x199)]+_0x3470c8[_0x2326d7(0x2c6)+_0x2326d7(0x270)+'ster']+_0x3470c8[_0x2326d7(0x2c6)+'editsCar'+_0x2326d7(0x2cb)+'d'],_0x4d15fd=_0xf90cce-_0x3470c8[_0x2326d7(0x2c6)+_0x2326d7(0x1c1)+'d'];return{'total':_0xf90cce,'used':_0x3470c8[_0x2326d7(0x2c6)+_0x2326d7(0x1c1)+'d'],'remaining':Math['max'](0x0,_0x4d15fd),'monthlyCredits':_0x3470c8[_0x2326d7(0x2c6)+_0x2326d7(0x177)+_0x2326d7(0x199)],'boosterCredits':_0x3470c8['studioCr'+'editsBoo'+_0x2326d7(0x288)],'carryForward':_0x3470c8[_0x2326d7(0x2c6)+_0x2326d7(0x1ca)+'ryForwar'+'d']};}async[_0x79c758(0x209)+'hCredits'](_0x5a0857,_0x435f3c){const _0x3c6d51=_0x79c758,_0x4fb4fb={'xGgFf':function(_0x5d0d7f,_0x4bae44){return _0x5d0d7f>=_0x4bae44;}},_0xda099=await this[_0x3c6d51(0x151)+_0x3c6d51(0x2a3)+'e'](_0x5a0857),_0x52cd09=(0x0,studio_types_1['getCredi'+_0x3c6d51(0x21a)+'ed'])(_0x435f3c);return _0x4fb4fb[_0x3c6d51(0x173)](_0xda099[_0x3c6d51(0x19e)+'g'],_0x52cd09);}async['deductCr'+'edits'](_0x49cf5b,_0x378d81){const _0x4a68e8=_0x79c758;await prisma_service_1[_0x4a68e8(0x1be)]['user'][_0x4a68e8(0x1a0)]({'where':{'id':_0x49cf5b},'data':{'studioCreditsUsed':{'increment':_0x378d81}}});}async[_0x79c758(0x2d3)+_0x79c758(0x1ff)+_0x79c758(0x2c3)](_0x1c4dac){const _0x33fa8c=_0x79c758,_0x1a94b8={'TfBLv':function(_0x1cc424,_0x1a0663){return _0x1cc424+_0x1a0663;},'urvfx':function(_0xa76c0d,_0x166d8f){return _0xa76c0d!==_0x166d8f;},'TKsAI':_0x33fa8c(0x28b),'peSTq':function(_0x3eecdb,_0x2eda89){return _0x3eecdb*_0x2eda89;}},_0x2bff3e=await prisma_service_1['prisma']['user'][_0x33fa8c(0x2ad)+'ue']({'where':{'id':_0x1c4dac},'select':{'planType':!![],'lastStudioReset':!![],'studioCreditsUsed':!![],'studioCreditsMonthly':!![],'studioCreditsBooster':!![]}});if(!_0x2bff3e)return;const _0x4408af=new Date(),_0x594c5c=new Date(_0x2bff3e[_0x33fa8c(0x179)+'ioReset']),_0x37a1e6=new Date(_0x594c5c);_0x37a1e6['setMonth'](_0x1a94b8[_0x33fa8c(0x2ba)](_0x37a1e6['getMonth'](),0x1));if(_0x4408af>=_0x37a1e6){if(_0x1a94b8[_0x33fa8c(0x266)](_0x1a94b8['TKsAI'],'NJtPy')){const _0x18b493=_0x2bff3e[_0x33fa8c(0x2c6)+_0x33fa8c(0x177)+_0x33fa8c(0x199)]-_0x2bff3e[_0x33fa8c(0x2c6)+_0x33fa8c(0x1c1)+'d'],_0x380e5c=Math[_0x33fa8c(0x237)](_0x1a94b8[_0x33fa8c(0x18d)](_0x2bff3e['studioCr'+_0x33fa8c(0x177)+_0x33fa8c(0x199)],0.5)),_0x278814=Math['min'](Math[_0x33fa8c(0x20c)](0x0,_0x18b493),_0x380e5c),_0x373198=studio_types_1[_0x33fa8c(0x1dd)+_0x33fa8c(0x271)+_0x33fa8c(0x2bd)][_0x2bff3e['planType']]||0x0;await prisma_service_1[_0x33fa8c(0x1be)][_0x33fa8c(0x281)][_0x33fa8c(0x1a0)]({'where':{'id':_0x1c4dac},'data':{'studioCreditsMonthly':_0x373198,'studioCreditsCarryForward':_0x278814,'studioCreditsUsed':0x0,'lastStudioReset':_0x4408af}});}else return _0x1450c8;}}async[_0x79c758(0x195)+'erCredit'+'s'](_0x4a88dd,_0x21deda){const _0x381967=_0x79c758,_0x11325f={'uLfJt':_0x381967(0x29f)+'booster\x20'+_0x381967(0x18e),'uGxWn':function(_0x120865,_0x5c4eb1){return _0x120865-_0x5c4eb1;},'UNxYB':function(_0x5e7ebf,_0x5c2e98){return _0x5e7ebf+_0x5c2e98;},'QsXXs':function(_0x17e3c6,_0x2254d2){return _0x17e3c6+_0x2254d2;}},_0x2a2f63=studio_types_1[_0x381967(0x1c8)+_0x381967(0x2dc)][_0x21deda];if(!_0x2a2f63)throw new Error(_0x11325f[_0x381967(0x197)]);const _0x5d28dd=await prisma_service_1['prisma'][_0x381967(0x281)][_0x381967(0x1a0)]({'where':{'id':_0x4a88dd},'data':{'studioCreditsBooster':{'increment':_0x2a2f63['credits']}},'select':{'studioCreditsMonthly':!![],'studioCreditsBooster':!![],'studioCreditsCarryForward':!![],'studioCreditsUsed':!![]}}),_0xa5c839=_0x11325f[_0x381967(0x27b)](_0x11325f['UNxYB'](_0x11325f[_0x381967(0x1de)](_0x5d28dd[_0x381967(0x2c6)+_0x381967(0x177)+'thly'],_0x5d28dd['studioCr'+_0x381967(0x270)+_0x381967(0x288)]),_0x5d28dd[_0x381967(0x2c6)+_0x381967(0x1ca)+_0x381967(0x2cb)+'d']),_0x5d28dd[_0x381967(0x2c6)+_0x381967(0x1c1)+'d']);return{'credits':_0x2a2f63[_0x381967(0x213)],'newBalance':_0xa5c839};}async[_0x79c758(0x2a8)](_0x41f760,_0x28d2ff){const _0x28f6ff=_0x79c758,_0x30dddc={'OxKUh':_0x28f6ff(0x2c2)+_0x28f6ff(0x210)+'coming\x20s'+_0x28f6ff(0x20a)+_0x28f6ff(0x14f),'kAXGs':'AnKjp','QuNSk':_0x28f6ff(0x2c2)+_0x28f6ff(0x295)+_0x28f6ff(0x2cd)+_0x28f6ff(0x2ae)+_0x28f6ff(0x182),'QPReg':function(_0x5459b7,_0x562722){return _0x5459b7===_0x562722;},'yGQZo':'GyHzq','cEbot':'PROCESSI'+'NG','pKEtj':function(_0x1c0cb6,_0x2d5130){return _0x1c0cb6===_0x2d5130;},'pGgvQ':_0x28f6ff(0x17d),'iYIdv':function(_0x20369d,_0x2feba3){return _0x20369d===_0x2feba3;},'uKoyO':'image','eZQpl':_0x28f6ff(0x16b),'zxFkf':_0x28f6ff(0x2be),'Remzc':_0x28f6ff(0x222),'vjeoI':'female','qpQxv':_0x28f6ff(0x2eb)+_0x28f6ff(0x25e),'ePglr':_0x28f6ff(0x1d6)+_0x28f6ff(0x194),'SDjRA':_0x28f6ff(0x280)+_0x28f6ff(0x1dc)+'requires'+_0x28f6ff(0x1b3)+_0x28f6ff(0x168)+'d\x20photos','eAESG':_0x28f6ff(0x1f6)+_0x28f6ff(0x2da)+'ider','jKLiL':'Generati'+_0x28f6ff(0x214)+'d','PSHqR':'COMPLETE'+'D','XuekO':_0x28f6ff(0x2ed),'jfGKd':function(_0x54851f,_0x4a1323){return _0x54851f instanceof _0x4a1323;},'dfYiN':_0x28f6ff(0x1e8)},{featureType:_0x19222c,prompt:_0x575769,inputImageUrl:_0x264ff9,options:_0x5cbb48}=_0x28d2ff;if(!(0x0,studio_types_1[_0x28f6ff(0x23d)+_0x28f6ff(0x286)+'le'])(_0x19222c))throw new Error(_0x30dddc['OxKUh']);const _0x1eff4c=(0x0,studio_types_1[_0x28f6ff(0x1f5)+_0x28f6ff(0x1cd)])(_0x19222c);if(!_0x1eff4c){if(_0x28f6ff(0x16c)===_0x30dddc[_0x28f6ff(0x161)])throw new Error('Invalid\x20'+_0x28f6ff(0x28e)+_0x28f6ff(0x18e));else throw new _0x4e77e3(_0x28f6ff(0x223)+_0x28f6ff(0x1c4)+_0x28f6ff(0x250));}if((0x0,studio_types_1[_0x28f6ff(0x26b)+_0x28f6ff(0x29c)])(_0x19222c)&&!_0x264ff9)throw new Error(_0x30dddc[_0x28f6ff(0x2e2)]);const _0x4d0fad=await this[_0x28f6ff(0x209)+_0x28f6ff(0x187)](_0x41f760,_0x19222c);if(!_0x4d0fad){if(_0x30dddc[_0x28f6ff(0x208)](_0x28f6ff(0x254),_0x30dddc['yGQZo']))throw new _0x31cf45(_0x28f6ff(0x280)+_0x28f6ff(0x1dc)+_0x28f6ff(0x26b)+_0x28f6ff(0x1b3)+'m\x20and\x20Da'+'d\x20photos');else{const _0x97917c=await this['getCredi'+_0x28f6ff(0x2a3)+'e'](_0x41f760);throw new Error('Not\x20enou'+'gh\x20credi'+'ts.\x20Requ'+_0x28f6ff(0x20f)+_0x1eff4c[_0x28f6ff(0x213)]+(_0x28f6ff(0x1a8)+_0x28f6ff(0x17c))+_0x97917c[_0x28f6ff(0x19e)+'g']+(_0x28f6ff(0x1bd)+_0x28f6ff(0x287)+_0x28f6ff(0x246)+'nue!'));}}const _0x8e7dae=await prisma_service_1[_0x28f6ff(0x1be)][_0x28f6ff(0x2a9)+_0x28f6ff(0x20d)][_0x28f6ff(0x15c)]({'data':{'userId':_0x41f760,'featureType':_0x19222c,'featureName':_0x1eff4c[_0x28f6ff(0x190)],'userPrompt':_0x575769,'parameters':{'inputImageUrl':_0x264ff9,'options':_0x5cbb48,'style':_0x5cbb48?.[_0x28f6ff(0x1b2)]},'creditsUsed':_0x1eff4c['credits'],'generationCredits':_0x1eff4c[_0x28f6ff(0x213)],'previewCredits':0x0,'apiCost':_0x1eff4c[_0x28f6ff(0x268)],'apiProvider':_0x1eff4c[_0x28f6ff(0x256)+_0x28f6ff(0x2a0)],'featureCategory':_0x1eff4c['category'],'inputImageUrl':_0x264ff9,'status':_0x30dddc[_0x28f6ff(0x22f)],'outputType':_0x30dddc[_0x28f6ff(0x1ab)](_0x1eff4c[_0x28f6ff(0x169)],_0x30dddc[_0x28f6ff(0x24b)])||_0x30dddc[_0x28f6ff(0x1fd)](_0x1eff4c['category'],'talking_'+_0x28f6ff(0x156))?_0x30dddc[_0x28f6ff(0x24b)]:_0x30dddc[_0x28f6ff(0x278)]}});try{let _0x114bfe;switch(_0x1eff4c[_0x28f6ff(0x256)+_0x28f6ff(0x2a0)]){case _0x30dddc[_0x28f6ff(0x2b5)]:_0x114bfe=await this[_0x28f6ff(0x2e4)+_0x28f6ff(0x216)]({'prompt':_0x575769,'style':_0x5cbb48?.[_0x28f6ff(0x1b2)]||(0x0,studio_types_1[_0x28f6ff(0x2b1)+'eogramSt'+_0x28f6ff(0x2ec)])(_0x575769),'aspectRatio':_0x5cbb48?.[_0x28f6ff(0x2e7)+_0x28f6ff(0x232)]||_0x30dddc[_0x28f6ff(0x16e)],'negativePrompt':_0x5cbb48?.[_0x28f6ff(0x171)+_0x28f6ff(0x1b8)]});break;case _0x28f6ff(0x28f)+'ro':_0x114bfe=await this[_0x28f6ff(0x29e)+_0x28f6ff(0x19a)]({'featureType':_0x19222c,'inputImageUrl':_0x264ff9,'prompt':_0x575769,'options':_0x5cbb48});break;case _0x30dddc[_0x28f6ff(0x2c1)]:_0x114bfe=await this['callHedr'+'a']({'imageUrl':_0x264ff9,'text':_0x5cbb48?.[_0x28f6ff(0x25a)]||_0x575769,'voiceStyle':_0x5cbb48?.[_0x28f6ff(0x2db)+'le']||_0x30dddc[_0x28f6ff(0x277)],'duration':_0x19222c===_0x30dddc[_0x28f6ff(0x2c0)]?0x5:0xa});break;case _0x30dddc[_0x28f6ff(0x2dd)]:if(!_0x264ff9||!_0x5cbb48?.[_0x28f6ff(0x18c)+_0x28f6ff(0x2c4)])throw new Error(_0x30dddc[_0x28f6ff(0x1b1)]);_0x114bfe=await this[_0x28f6ff(0x204)+'Predicti'+'on']({'momImageUrl':_0x264ff9,'dadImageUrl':_0x5cbb48[_0x28f6ff(0x18c)+'ageUrl'],'babyGender':_0x5cbb48?.[_0x28f6ff(0x1ec)+'er']});break;case _0x28f6ff(0x292):throw new Error(_0x28f6ff(0x2e8)+'neration'+_0x28f6ff(0x236)+_0x28f6ff(0x172));default:throw new Error(_0x30dddc[_0x28f6ff(0x291)]);}if(!_0x114bfe['success'])throw new Error(_0x114bfe[_0x28f6ff(0x23c)]||_0x30dddc[_0x28f6ff(0x202)]);return await this[_0x28f6ff(0x1f7)+_0x28f6ff(0x24d)](_0x41f760,_0x1eff4c['credits']),await this['updateGe'+'neration'+'Status'](_0x8e7dae['id'],_0x28f6ff(0x1d0)+'D',_0x114bfe[_0x28f6ff(0x2c9)+'l'],{'processingTime':_0x114bfe[_0x28f6ff(0x174)+_0x28f6ff(0x15a)],'apiProvider':_0x1eff4c[_0x28f6ff(0x256)+_0x28f6ff(0x2a0)]}),{'id':_0x8e7dae['id'],'status':_0x30dddc[_0x28f6ff(0x21c)],'outputUrl':_0x114bfe['outputUr'+'l'],'creditsUsed':_0x1eff4c[_0x28f6ff(0x213)],'apiCost':_0x1eff4c[_0x28f6ff(0x268)],'processingTime':_0x114bfe['processi'+_0x28f6ff(0x15a)]};}catch(_0x317486){if(_0x28f6ff(0x206)!==_0x30dddc['XuekO']){const _0x1a8480=_0x30dddc['jfGKd'](_0x317486,Error)?_0x317486['message']:_0x28f6ff(0x1f6)+_0x28f6ff(0x23c);return await this['updateGe'+_0x28f6ff(0x20d)+_0x28f6ff(0x186)](_0x8e7dae['id'],_0x28f6ff(0x1e8),undefined,undefined,_0x1a8480),{'id':_0x8e7dae['id'],'status':_0x30dddc[_0x28f6ff(0x201)],'creditsUsed':0x0,'apiCost':0x0,'error':_0x1a8480};}else{const _0x4c6d20=_0xe1d75d['featureC'+'ategory']||_0x28f6ff(0x1a9),_0x46ae94=_0x556e56['apiProvi'+'der']||_0x28f6ff(0x1a9);_0x510446[_0x4c6d20]=(_0x565a62[_0x4c6d20]||0x0)+0x1,_0x4f1c4a[_0x46ae94]=(_0x36028c[_0x46ae94]||0x0)+0x1,_0x4f8e49+=_0x40d4b7[_0x28f6ff(0x1e3)+_0x28f6ff(0x185)],_0x14ecb6+=_0x44630a['apiCost']||0x0;}}}async[_0x79c758(0x2e4)+_0x79c758(0x216)](_0x40ed46){const _0x542611=_0x79c758,_0x5a4e25={'ejaKc':_0x542611(0x2d6)+'_1','utpFl':'Hedra\x20ge'+'neration'+'\x20failed','rTeww':_0x542611(0x211)+_0x542611(0x157),'TSoQz':_0x542611(0x167),'leNEa':function(_0x5f5784,_0x35fa6d){return _0x5f5784!==_0x35fa6d;},'FjySV':_0x542611(0x252)+_0x542611(0x1f3)+'or','rUvPc':_0x542611(0x178)+'\x20generat'+'ed','mnKJz':function(_0x5d07de,_0x29e49c){return _0x5d07de-_0x29e49c;},'VplzA':_0x542611(0x2e9)},_0x2bed1e=Date['now']();try{const _0x4deda4=studio_types_1[_0x542611(0x21f)+_0x542611(0x269)+_0x542611(0x2d9)][_0x40ed46[_0x542611(0x2e7)+_0x542611(0x232)]||'square'],_0x91f54b=await fetch(API_ENDPOINTS[_0x542611(0x198)],{'method':_0x542611(0x1c7),'headers':{'Api-Key':IDEOGRAM_API_KEY,'Content-Type':_0x5a4e25['rTeww']},'body':JSON[_0x542611(0x155)+'y']({'image_request':{'prompt':_0x40ed46[_0x542611(0x2b0)],'aspect_ratio':this['mapAspec'+_0x542611(0x2a7)](_0x40ed46[_0x542611(0x2e7)+_0x542611(0x232)]),'model':_0x5a4e25[_0x542611(0x19b)],'magic_prompt_option':'AUTO','style_type':this[_0x542611(0x1f9)+_0x542611(0x25c)](_0x40ed46[_0x542611(0x1b2)]),'negative_prompt':_0x40ed46['negative'+_0x542611(0x1b8)]}})});if(!_0x91f54b['ok']){if(_0x5a4e25[_0x542611(0x27e)](_0x542611(0x2c7),_0x542611(0x2c7))){const _0x156daf={'male':_0x542611(0x247)+'1','female':_0x542611(0x260)+'e_1','child':_0x5a4e25[_0x542611(0x25b)]};return _0x156daf[_0xe10b70];}else{const _0x21f78b=await _0x91f54b[_0x542611(0x24c)]();throw new Error(_0x21f78b[_0x542611(0x235)]||_0x5a4e25[_0x542611(0x274)]);}}const _0x22189c=await _0x91f54b['json'](),_0x1d1265=_0x22189c[_0x542611(0x234)]?.[0x0]?.[_0x542611(0x2a4)];if(!_0x1d1265)throw new Error(_0x5a4e25[_0x542611(0x239)]);return{'success':!![],'outputUrl':_0x1d1265,'processingTime':_0x5a4e25[_0x542611(0x26c)](Date['now'](),_0x2bed1e)};}catch(_0x2c51dd){if(_0x5a4e25[_0x542611(0x244)]==='Ojore')throw new _0x4adf08(_0x5a5ca6[_0x542611(0x23c)]||_0x5a4e25[_0x542611(0x1e7)]);else{const _0x333ca0=_0x2c51dd instanceof Error?_0x2c51dd[_0x542611(0x235)]:_0x542611(0x1f6)+_0x542611(0x23c);return{'success':![],'error':_0x333ca0,'processingTime':_0x5a4e25[_0x542611(0x26c)](Date[_0x542611(0x152)](),_0x2bed1e)};}}}['mapIdeog'+_0x79c758(0x25c)](_0x2159c7){const _0x80172b=_0x79c758,_0x3a6f80={'JFXXe':_0x80172b(0x24e)+'C','ynSgC':_0x80172b(0x24a),'UNDVl':_0x80172b(0x1e9)+'D','QdOiG':function(_0x31f3b6,_0x1ce4f2){return _0x31f3b6||_0x1ce4f2;}},_0x17a7ce={'realistic':_0x3a6f80['JFXXe'],'design':_0x3a6f80[_0x80172b(0x2d0)],'3d':_0x3a6f80['UNDVl'],'anime':_0x80172b(0x273),'auto':_0x80172b(0x245)};return _0x17a7ce[_0x3a6f80[_0x80172b(0x1d3)](_0x2159c7,_0x80172b(0x18f))];}[_0x79c758(0x1b7)+_0x79c758(0x2a7)](_0x5c1bf2){const _0x56f468=_0x79c758,_0x49e067={'kcZMU':_0x56f468(0x20b)+'_1','inFth':_0x56f468(0x20b)+_0x56f468(0x221),'Ibrse':_0x56f468(0x1f0)+_0x56f468(0x2ee),'JvDlp':'ASPECT_3'+'_4','MHMAZ':_0x56f468(0x2be)},_0x38db27={'square':_0x49e067[_0x56f468(0x14d)],'1:1':_0x56f468(0x20b)+'_1','landscape':_0x49e067[_0x56f468(0x299)],'16:9':_0x56f468(0x20b)+_0x56f468(0x221),'portrait':_0x49e067['Ibrse'],'9:16':_0x56f468(0x1f0)+'_16','4:3':_0x56f468(0x25f)+'_3','3:4':_0x49e067[_0x56f468(0x2b2)]};return _0x38db27[_0x5c1bf2||_0x49e067[_0x56f468(0x16a)]]||_0x49e067[_0x56f468(0x14d)];}async[_0x79c758(0x29e)+_0x79c758(0x19a)](_0x51da2e){const _0x39d3fc=_0x79c758,_0x25a31d={'wubnp':function(_0x386099,_0x5c0eff){return _0x386099 instanceof _0x5c0eff;},'Mskvc':_0x39d3fc(0x1f6)+_0x39d3fc(0x23c),'EyoqO':function(_0x2ba2e5,_0x44717d){return _0x2ba2e5-_0x44717d;},'VRWDA':'/backgro'+_0x39d3fc(0x253)+'ge','qMrKX':_0x39d3fc(0x26d),'FDbCE':_0x39d3fc(0x2f0),'HoNHM':_0x39d3fc(0x1e2),'VyenJ':'/merge','xNcql':function(_0x37724f,_0x3605ab,_0x21a875){return _0x37724f(_0x3605ab,_0x21a875);},'GRIGg':_0x39d3fc(0x211)+_0x39d3fc(0x157),'zRcZv':function(_0x17e93a,_0x35f412){return _0x17e93a===_0x35f412;},'cTyWG':'THdmV','cDNXU':_0x39d3fc(0x261)+_0x39d3fc(0x1af)+'rror'},_0x58e2e3=Date[_0x39d3fc(0x152)]();try{const _0x384c82={'OBJECT_REMOVE':'/remove','BACKGROUND_CHANGE':_0x25a31d[_0x39d3fc(0x240)],'PORTRAIT_STUDIO':_0x39d3fc(0x297)+'t','SKETCH_COMPLETE':_0x39d3fc(0x2b7),'PHOTO_ENHANCE':_0x25a31d[_0x39d3fc(0x2ca)],'BACKGROUND_EXPAND':_0x25a31d[_0x39d3fc(0x230)],'STYLE_TRANSFER':_0x25a31d[_0x39d3fc(0x1ea)],'CELEBRITY_MERGE':_0x25a31d['VyenJ']},_0x22a907=_0x384c82[_0x51da2e[_0x39d3fc(0x2cc)+_0x39d3fc(0x1ae)]];if(!_0x22a907)throw new Error(_0x39d3fc(0x29f)+_0x39d3fc(0x261)+'RO\x20featu'+'re');const _0x1d3857=await _0x25a31d[_0x39d3fc(0x15e)](fetch,''+API_ENDPOINTS[_0x39d3fc(0x17b)+'RO']+_0x22a907,{'method':_0x39d3fc(0x1c7),'headers':{'Authorization':_0x39d3fc(0x1d1)+BANANA_PRO_API_KEY,'Content-Type':_0x25a31d['GRIGg']},'body':JSON['stringif'+'y']({'image_url':_0x51da2e[_0x39d3fc(0x29d)+_0x39d3fc(0x1ba)],'prompt':_0x51da2e[_0x39d3fc(0x2b0)],..._0x51da2e[_0x39d3fc(0x282)]})});if(!_0x1d3857['ok']){if(_0x25a31d['zRcZv'](_0x25a31d[_0x39d3fc(0x1ed)],_0x39d3fc(0x19f))){const _0x7b6b36=await _0x1d3857[_0x39d3fc(0x24c)]();throw new Error(_0x7b6b36[_0x39d3fc(0x235)]||_0x25a31d['cDNXU']);}else{const _0x349090=_0x25a31d['wubnp'](_0x63170b,_0x5e9578)?_0x303e0[_0x39d3fc(0x235)]:_0x25a31d[_0x39d3fc(0x1fb)];return{'success':![],'error':_0x349090,'processingTime':_0x25a31d['EyoqO'](_0xbed78['now'](),_0x46f315)};}}const _0x3d1976=await _0x1d3857[_0x39d3fc(0x24c)](),_0x1e16b3=_0x3d1976[_0x39d3fc(0x27f)+'rl']||_0x3d1976[_0x39d3fc(0x19d)+'rl'];if(!_0x1e16b3)throw new Error(_0x39d3fc(0x223)+_0x39d3fc(0x1c4)+_0x39d3fc(0x250));return{'success':!![],'outputUrl':_0x1e16b3,'processingTime':Date[_0x39d3fc(0x152)]()-_0x58e2e3};}catch(_0x1fc3db){const _0x1919f5=_0x1fc3db instanceof Error?_0x1fc3db[_0x39d3fc(0x235)]:_0x25a31d[_0x39d3fc(0x1fb)];return{'success':![],'error':_0x1919f5,'processingTime':_0x25a31d[_0x39d3fc(0x226)](Date['now'](),_0x58e2e3)};}}async[_0x79c758(0x1d4)+'a'](_0x31753d){const _0x50259c=_0x79c758,_0x2dd2cd={'SXyOO':function(_0x46ed5a,_0x37cb7b,_0x309c04){return _0x46ed5a(_0x37cb7b,_0x309c04);},'kUadd':_0x50259c(0x2a6)+'I\x20error','FYFWX':function(_0x53ad28,_0x2f8a1d){return _0x53ad28-_0x2f8a1d;},'hbtWc':_0x50259c(0x2d4),'SgNbG':function(_0x7aee3a,_0x30617e){return _0x7aee3a instanceof _0x30617e;}},_0x4fb3e8=Date[_0x50259c(0x152)]();try{const _0x112963=await _0x2dd2cd[_0x50259c(0x28c)](fetch,API_ENDPOINTS[_0x50259c(0x162)]+(_0x50259c(0x255)+_0x50259c(0x24f)+'te'),{'method':_0x50259c(0x1c7),'headers':{'Authorization':_0x50259c(0x1d1)+HEDRA_API_KEY,'Content-Type':_0x50259c(0x211)+_0x50259c(0x157)},'body':JSON[_0x50259c(0x155)+'y']({'image_url':_0x31753d[_0x50259c(0x23f)],'text':_0x31753d['text'],'voice':this[_0x50259c(0x1c5)+_0x50259c(0x193)](_0x31753d['voiceSty'+'le']),'duration':_0x31753d[_0x50259c(0x28a)]})});if(!_0x112963['ok']){const _0x2d1722=await _0x112963[_0x50259c(0x24c)]();throw new Error(_0x2d1722[_0x50259c(0x235)]||_0x2dd2cd[_0x50259c(0x203)]);}const _0x4884e1=await _0x112963[_0x50259c(0x24c)](),_0x259ae9=_0x4884e1[_0x50259c(0x22a)],_0x10923f=await this[_0x50259c(0x212)+'aResult'](_0x259ae9);return{'success':!![],'outputUrl':_0x10923f,'processingTime':_0x2dd2cd[_0x50259c(0x1e6)](Date['now'](),_0x4fb3e8)};}catch(_0x2daf64){if(_0x2dd2cd[_0x50259c(0x1db)]===_0x2dd2cd['hbtWc']){const _0x584ff3=_0x2dd2cd[_0x50259c(0x1e1)](_0x2daf64,Error)?_0x2daf64[_0x50259c(0x235)]:'Unknown\x20'+_0x50259c(0x23c);return{'success':![],'error':_0x584ff3,'processingTime':_0x2dd2cd[_0x50259c(0x1e6)](Date[_0x50259c(0x152)](),_0x4fb3e8)};}else{const _0x56f6c3=(0x0,_0x6e833b[_0x50259c(0x1f5)+_0x50259c(0x1cd)])(_0x4810a6);return{'featureType':_0x130099,'name':_0x56f6c3?.[_0x50259c(0x190)],'description':_0x56f6c3?.[_0x50259c(0x1e5)+'ion'],'credits':_0x56f6c3?.[_0x50259c(0x213)],'category':_0x56f6c3?.[_0x50259c(0x169)],'examplePrompts':_0x56f6c3?.[_0x50259c(0x2c5)+_0x50259c(0x233)]};}}}[_0x79c758(0x1c5)+_0x79c758(0x193)](_0x119c8f){const _0x4e4d2b=_0x79c758,_0x200110={'ULmTs':_0x4e4d2b(0x260)+_0x4e4d2b(0x1f2)},_0x5e37db={'male':'en_male_'+'1','female':_0x200110[_0x4e4d2b(0x224)],'child':_0x4e4d2b(0x2d6)+'_1'};return _0x5e37db[_0x119c8f];}async['pollHedr'+_0x79c758(0x298)](_0x157f9,_0x879076=0x3c){const _0x423106=_0x79c758,_0x357db1={'Tgbpn':function(_0x44924c,_0x1e3d14){return _0x44924c<_0x1e3d14;},'PVxKK':function(_0x231a37,_0x32e495,_0x584473){return _0x231a37(_0x32e495,_0x584473);},'Ebqhs':function(_0x29352f,_0x3d082a){return _0x29352f===_0x3d082a;},'IsTyp':function(_0x4d3b7d,_0x54e803){return _0x4d3b7d===_0x54e803;},'hbfYL':_0x423106(0x1d2)+_0x423106(0x20d)+'\x20timeout'};for(let _0xf782b=0x0;_0x357db1[_0x423106(0x160)](_0xf782b,_0x879076);_0xf782b++){const _0x24fdd5=await _0x357db1['PVxKK'](fetch,API_ENDPOINTS[_0x423106(0x162)]+(_0x423106(0x255)+_0x423106(0x18a)+_0x423106(0x153))+_0x157f9,{'headers':{'Authorization':_0x423106(0x1d1)+HEDRA_API_KEY}}),_0xa574c4=await _0x24fdd5[_0x423106(0x24c)]();if(_0x357db1[_0x423106(0x22d)](_0xa574c4[_0x423106(0x238)],_0x423106(0x25d)+'d')&&_0xa574c4[_0x423106(0x184)+'l'])return _0xa574c4[_0x423106(0x184)+'l'];if(_0x357db1[_0x423106(0x272)](_0xa574c4['status'],_0x423106(0x150)))throw new Error(_0xa574c4[_0x423106(0x23c)]||_0x423106(0x1d2)+'neration'+_0x423106(0x175));await new Promise(_0x54312c=>setTimeout(_0x54312c,0x7d0));}throw new Error(_0x357db1['hbfYL']);}async[_0x79c758(0x204)+'Predicti'+'on'](_0x11e01b){const _0x2dcd69=_0x79c758,_0x1c4b4f={'zxmaT':function(_0x3036f9,_0xb0d6f9){return _0x3036f9-_0xb0d6f9;},'chipt':function(_0x42053d,_0x2eb6d4,_0x2af2de){return _0x42053d(_0x2eb6d4,_0x2af2de);},'fdBWK':'applicat'+_0x2dcd69(0x157),'rPmfr':_0x2dcd69(0x2e5),'RCjsH':_0x2dcd69(0x192),'hBkBO':_0x2dcd69(0x1f8),'VXMvr':function(_0xa6c6eb,_0x3823e2){return _0xa6c6eb-_0x3823e2;},'oImet':function(_0x2827f2,_0xa336bc){return _0x2827f2 instanceof _0xa336bc;},'aWeZk':_0x2dcd69(0x1f6)+_0x2dcd69(0x23c)},_0x207431=Date[_0x2dcd69(0x152)]();try{const _0x37cd50=await _0x1c4b4f[_0x2dcd69(0x154)](fetch,API_ENDPOINTS[_0x2dcd69(0x17b)+'RO']+(_0x2dcd69(0x2d5)+_0x2dcd69(0x2a2)),{'method':'POST','headers':{'Authorization':'Bearer\x20'+BANANA_PRO_API_KEY,'Content-Type':_0x1c4b4f[_0x2dcd69(0x188)]},'body':JSON[_0x2dcd69(0x155)+'y']({'mother_image':_0x11e01b[_0x2dcd69(0x2af)+_0x2dcd69(0x27c)],'father_image':_0x11e01b[_0x2dcd69(0x2b4)+_0x2dcd69(0x27c)],'gender':_0x11e01b[_0x2dcd69(0x1ec)+'er']||_0x1c4b4f[_0x2dcd69(0x2cf)]})});if(!_0x37cd50['ok']){if(_0x1c4b4f[_0x2dcd69(0x2df)]!==_0x1c4b4f[_0x2dcd69(0x225)]){const _0xb8102b=await _0x37cd50[_0x2dcd69(0x24c)]();throw new Error(_0xb8102b[_0x2dcd69(0x235)]||_0x2dcd69(0x280)+_0x2dcd69(0x1dc)+_0x2dcd69(0x207)+'r');}else{const _0x158140=_0x57271e instanceof _0x4332c8?_0x2c82ce['message']:_0x2dcd69(0x1f6)+_0x2dcd69(0x23c);return{'success':![],'error':_0x158140,'processingTime':_0x1c4b4f[_0x2dcd69(0x15f)](_0x1c3596['now'](),_0x193d55)};}}const _0xdbbc39=await _0x37cd50['json'](),_0x4c97ee=_0xdbbc39[_0x2dcd69(0x27f)+'rl']||_0xdbbc39[_0x2dcd69(0x19d)+'rl'];if(!_0x4c97ee){if('HPFWS'==='HPFWS')throw new Error(_0x2dcd69(0x2b6)+_0x2dcd69(0x1e0)+_0x2dcd69(0x1da));else return{'text_to_image':_0x5589b4[_0x2dcd69(0x198)+_0x2dcd69(0x2bb)+'S']['map'](_0x592a99=>(0x0,_0x3734a0[_0x2dcd69(0x1f5)+_0x2dcd69(0x1cd)])(_0x592a99)),'photo_transform':_0x1acc6e[_0x2dcd69(0x17b)+_0x2dcd69(0x15b)+_0x2dcd69(0x1a7)][_0x2dcd69(0x1b6)](_0x17be48=>(0x0,_0x11df05['getFeatu'+_0x2dcd69(0x1cd)])(_0x17be48)),'talking_photo':_0x186051[_0x2dcd69(0x2eb)+_0x2dcd69(0x2bf)+_0x2dcd69(0x1fc)]['map'](_0x312f59=>(0x0,_0x22eabd[_0x2dcd69(0x1f5)+_0x2dcd69(0x1cd)])(_0x312f59)),'video':_0x1263fd[_0x2dcd69(0x263)+_0x2dcd69(0x1fc)][_0x2dcd69(0x1b6)](_0x223683=>({...(0x0,_0x300b64[_0x2dcd69(0x1f5)+_0x2dcd69(0x1cd)])(_0x223683),'comingSoon':!![]}))};}return{'success':!![],'outputUrl':_0x4c97ee,'processingTime':_0x1c4b4f[_0x2dcd69(0x205)](Date[_0x2dcd69(0x152)](),_0x207431)};}catch(_0x587be6){const _0x2d728c=_0x1c4b4f['oImet'](_0x587be6,Error)?_0x587be6[_0x2dcd69(0x235)]:_0x1c4b4f[_0x2dcd69(0x264)];return{'success':![],'error':_0x2d728c,'processingTime':Date[_0x2dcd69(0x152)]()-_0x207431};}}async['enhanceP'+'rompt'](_0xdd6d81,_0x5a53b3){const _0x391c8d=_0x79c758,_0x1a0fbb={'cFRhr':_0x391c8d(0x16d)+_0x391c8d(0x1b0)+'ropic.co'+_0x391c8d(0x1a5)+_0x391c8d(0x293),'cGYwn':_0x391c8d(0x211)+_0x391c8d(0x157)};if(!ANTHROPIC_API_KEY)return _0xdd6d81;try{const _0x4f4929='You\x20are\x20'+_0x391c8d(0x21e)+_0x391c8d(0x1d9)+_0x391c8d(0x19c)+_0x391c8d(0x265)+_0x391c8d(0x1c2)+_0x391c8d(0x285)+_0x391c8d(0x259)+'form\x20use'+'r\x20input\x20'+_0x391c8d(0x1a6)+_0x391c8d(0x1a4)+'\x20Hinglis'+_0x391c8d(0x2d1)+_0x391c8d(0x248)+'lish)\x20in'+_0x391c8d(0x257)+_0x391c8d(0x22b)+_0x391c8d(0x183)+_0x391c8d(0x189)+'h\x20prompt'+_0x391c8d(0x243)+_0x391c8d(0x262)+_0x391c8d(0x228)+'ultural\x20'+_0x391c8d(0x2a1)+_0x391c8d(0x283)+_0x391c8d(0x1e4)+_0x391c8d(0x1f1)+_0x391c8d(0x2aa)+'lothing)'+_0x391c8d(0x29b)+'professi'+_0x391c8d(0x2a5)+'tography'+'/art\x20ter'+'minology'+_0x391c8d(0x1d5)+_0x391c8d(0x2b8)+'e\x20intent'+'\x20but\x20enh'+_0x391c8d(0x2d8)+'h\x20qualit'+_0x391c8d(0x27d)+_0x391c8d(0x275)+'\x20For\x20log'+_0x391c8d(0x28d)+'asize\x20\x22p'+_0x391c8d(0x1a2)+'nal\x22,\x20\x22c'+_0x391c8d(0x296)+'vector-s'+_0x391c8d(0x2ef)+_0x391c8d(0x1a1)+_0x391c8d(0x241)+_0x391c8d(0x2b9)+'e\x20the\x20de'+'sired\x20ou'+_0x391c8d(0x22e)+_0x391c8d(0x1ef)+'Keep\x20it\x20'+'under\x2020'+_0x391c8d(0x1c0)+'\x0aContext'+':\x20'+_0x5a53b3+('\x0aTransfo'+_0x391c8d(0x1fa)+_0x391c8d(0x2e3)),_0x28bf4f=await fetch(_0x1a0fbb[_0x391c8d(0x159)],{'method':_0x391c8d(0x1c7),'headers':{'x-api-key':ANTHROPIC_API_KEY,'anthropic-version':_0x391c8d(0x242)+'01','content-type':_0x1a0fbb['cGYwn']},'body':JSON[_0x391c8d(0x155)+'y']({'model':_0x391c8d(0x1ce)+_0x391c8d(0x2bc)+_0x391c8d(0x267),'max_tokens':0x12c,'system':_0x4f4929,'messages':[{'role':_0x391c8d(0x281),'content':_0xdd6d81}]})}),_0x132c0b=await _0x28bf4f['json']();return _0x132c0b[_0x391c8d(0x1a3)]?.[0x0]?.['text']?.[_0x391c8d(0x251)]()||_0xdd6d81;}catch{if(_0x391c8d(0x196)===_0x391c8d(0x1df)){const res=_0x270a0f[_0x391c8d(0x26f)](_0x391596,arguments);return _0x42e6f0=null,res;}else return _0xdd6d81;}}async[_0x79c758(0x229)+_0x79c758(0x2b3)](_0x4d0f8e,_0x255c75){const _0x122f40=_0x79c758,_0x4aceac={'iDmXB':_0x122f40(0x21b)+_0x122f40(0x21d)+_0x122f40(0x1c6),'fNXKT':'Unauthor'+'ized'},_0x326655=await prisma_service_1[_0x122f40(0x1be)][_0x122f40(0x2a9)+_0x122f40(0x20d)]['findUniq'+'ue']({'where':{'id':_0x4d0f8e}});if(!_0x326655)throw new Error(_0x4aceac[_0x122f40(0x26a)]);if(_0x326655['userId']!==_0x255c75)throw new Error(_0x4aceac[_0x122f40(0x176)]);return _0x326655;}async[_0x79c758(0x219)+_0x79c758(0x285)+'ns'](_0x5d1d27,_0x4a0cdc){const _0x50e856=_0x79c758,_0x4b53b6={'dIRcz':function(_0x3f9f01,_0x474a6e){return _0x3f9f01||_0x474a6e;},'YbXan':function(_0x5b51bd,_0x455505){return _0x5b51bd&&_0x455505;},'yMdNH':_0x50e856(0x20e)},{limit:limit=0x14,offset:offset=0x0,category:_0x32ca00,status:_0x2b42d7}=_0x4b53b6[_0x50e856(0x22c)](_0x4a0cdc,{});return await prisma_service_1[_0x50e856(0x1be)]['studioGe'+'neration'][_0x50e856(0x1d7)]({'where':{'userId':_0x5d1d27,..._0x4b53b6[_0x50e856(0x1cc)](_0x32ca00,{'featureCategory':_0x32ca00}),..._0x2b42d7&&{'status':_0x2b42d7}},'orderBy':{'createdAt':_0x4b53b6['yMdNH']},'take':limit,'skip':offset});}async['updateGe'+_0x79c758(0x20d)+_0x79c758(0x186)](_0x130e1a,_0x553c42,_0x2eff31,_0x11f0a6,_0x3d53f8){const _0x250d3f=_0x79c758;return await prisma_service_1['prisma']['studioGe'+_0x250d3f(0x20d)][_0x250d3f(0x1a0)]({'where':{'id':_0x130e1a},'data':{'status':_0x553c42,'outputUrl':_0x2eff31,'metadata':_0x11f0a6,'errorMessage':_0x3d53f8,'completedAt':_0x553c42===_0x250d3f(0x1d0)+'D'?new Date():undefined}});}[_0x79c758(0x217)+_0x79c758(0x1fe)+_0x79c758(0x231)](){const _0x27bd06=_0x79c758;return studio_types_1[_0x27bd06(0x1c3)+'E_FEATUR'+'ES'][_0x27bd06(0x1b6)](_0x1c8e16=>{const _0x3d7420=_0x27bd06,_0x12b32e=(0x0,studio_types_1[_0x3d7420(0x1f5)+'reConfig'])(_0x1c8e16);return{'featureType':_0x1c8e16,'name':_0x12b32e?.[_0x3d7420(0x190)],'description':_0x12b32e?.['descript'+_0x3d7420(0x26e)],'credits':_0x12b32e?.[_0x3d7420(0x213)],'category':_0x12b32e?.[_0x3d7420(0x169)],'examplePrompts':_0x12b32e?.[_0x3d7420(0x2c5)+'rompts']};});}[_0x79c758(0x1f5)+'reCatego'+_0x79c758(0x289)](){const _0x556c02=_0x79c758;return{'text_to_image':studio_types_1[_0x556c02(0x198)+_0x556c02(0x2bb)+'S']['map'](_0x5d98c2=>(0x0,studio_types_1['getFeatu'+_0x556c02(0x1cd)])(_0x5d98c2)),'photo_transform':studio_types_1[_0x556c02(0x17b)+_0x556c02(0x15b)+_0x556c02(0x1a7)]['map'](_0x2944af=>(0x0,studio_types_1[_0x556c02(0x1f5)+_0x556c02(0x1cd)])(_0x2944af)),'talking_photo':studio_types_1[_0x556c02(0x2eb)+'PHOTO_FE'+_0x556c02(0x1fc)][_0x556c02(0x1b6)](_0x3f207c=>(0x0,studio_types_1['getFeatu'+_0x556c02(0x1cd)])(_0x3f207c)),'video':studio_types_1[_0x556c02(0x263)+_0x556c02(0x1fc)][_0x556c02(0x1b6)](_0x507d4e=>({...(0x0,studio_types_1[_0x556c02(0x1f5)+_0x556c02(0x1cd)])(_0x507d4e),'comingSoon':!![]}))};}async['getStudi'+'oStatus'](_0x2fe079){const _0x5a8c82=_0x79c758,_0x3d9f9a=await this['getCredi'+_0x5a8c82(0x2a3)+'e'](_0x2fe079),_0x4d5a53=await this[_0x5a8c82(0x219)+_0x5a8c82(0x285)+'ns'](_0x2fe079,{'limit':0x5}),_0x20ce43=await prisma_service_1[_0x5a8c82(0x1be)][_0x5a8c82(0x281)]['findUniq'+'ue']({'where':{'id':_0x2fe079},'select':{'planType':!![],'lastStudioReset':!![]}}),_0xa88d36=new Date(_0x20ce43?.[_0x5a8c82(0x179)+_0x5a8c82(0x284)]||new Date());return _0xa88d36[_0x5a8c82(0x2c8)](_0xa88d36['getMonth']()+0x1),{'credits':_0x3d9f9a,'planType':_0x20ce43?.['planType'],'nextReset':_0xa88d36,'recentGenerations':_0x4d5a53,'features':this[_0x5a8c82(0x217)+_0x5a8c82(0x1fe)+_0x5a8c82(0x231)]()};}async[_0x79c758(0x163)+_0x79c758(0x14e)](_0x1b0470,_0x3c26df=0x1e){const _0x1ddd96=_0x79c758,_0x89f1de={'IeWCZ':function(_0x5f0da4,_0x19f7a7){return _0x5f0da4!==_0x19f7a7;},'MGCvx':_0x1ddd96(0x181),'aSQBf':function(_0x289d26,_0x279c75){return _0x289d26+_0x279c75;}},_0x209a53=new Date();_0x209a53[_0x1ddd96(0x23b)](_0x209a53[_0x1ddd96(0x1d8)]()-_0x3c26df);const _0x4b5df3=await prisma_service_1[_0x1ddd96(0x1be)][_0x1ddd96(0x2a9)+_0x1ddd96(0x20d)][_0x1ddd96(0x1d7)]({'where':{'userId':_0x1b0470,'createdAt':{'gte':_0x209a53},'status':_0x1ddd96(0x1d0)+'D'},'select':{'featureType':!![],'featureCategory':!![],'apiProvider':!![],'creditsUsed':!![],'apiCost':!![],'createdAt':!![]}}),_0x226011={},_0x493efb={};let _0x4d19fd=0x0,_0xa45dd1=0x0;for(const _0x5e2423 of _0x4b5df3){if(_0x89f1de[_0x1ddd96(0x1ee)](_0x89f1de[_0x1ddd96(0x290)],_0x1ddd96(0x15d))){const _0x3d8aa6=_0x5e2423[_0x1ddd96(0x1b5)+'ategory']||_0x1ddd96(0x1a9),_0x13922c=_0x5e2423[_0x1ddd96(0x256)+_0x1ddd96(0x2a0)]||'unknown';_0x226011[_0x3d8aa6]=_0x89f1de[_0x1ddd96(0x215)](_0x226011[_0x3d8aa6]||0x0,0x1),_0x493efb[_0x13922c]=(_0x493efb[_0x13922c]||0x0)+0x1,_0x4d19fd+=_0x5e2423['creditsU'+_0x1ddd96(0x185)],_0xa45dd1+=_0x5e2423[_0x1ddd96(0x268)]||0x0;}else return _0x3e383d;}return{'totalGenerations':_0x4b5df3[_0x1ddd96(0x1c9)],'totalCreditsUsed':_0x4d19fd,'totalApiCost':_0xa45dd1,'byCategory':_0x226011,'byProvider':_0x493efb,'period':_0x1ddd96(0x2f1)+_0x3c26df+_0x1ddd96(0x279)};}}exports['StudioSe'+_0x79c758(0x29a)]=StudioService,exports[_0x79c758(0x294)+_0x79c758(0x29a)]=new StudioService();